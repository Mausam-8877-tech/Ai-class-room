var Jw=e=>{throw TypeError(e)};var Hp=(e,t,r)=>t.has(e)||Jw("Cannot "+r);var Re=(e,t,r)=>(Hp(e,t,"read from private field"),r?r.call(e):t.get(e)),jr=(e,t,r)=>t.has(e)?Jw("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),er=(e,t,r,s)=>(Hp(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),Bn=(e,t,r)=>(Hp(e,t,"access private method"),r);var Zh=(e,t,r,s)=>({set _(a){er(e,t,a,r)},get _(){return Re(e,t,s)}});function i3(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Ld=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ef(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function o3(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var a=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,a.get?a:{enumerable:!0,get:function(){return e[s]}})}),r}var l3={exports:{}},Tf={},c3={exports:{}},fr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ch=Symbol.for("react.element"),tP=Symbol.for("react.portal"),rP=Symbol.for("react.fragment"),nP=Symbol.for("react.strict_mode"),sP=Symbol.for("react.profiler"),aP=Symbol.for("react.provider"),iP=Symbol.for("react.context"),oP=Symbol.for("react.forward_ref"),lP=Symbol.for("react.suspense"),cP=Symbol.for("react.memo"),uP=Symbol.for("react.lazy"),Xw=Symbol.iterator;function dP(e){return e===null||typeof e!="object"?null:(e=Xw&&e[Xw]||e["@@iterator"],typeof e=="function"?e:null)}var u3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d3=Object.assign,h3={};function Pu(e,t,r){this.props=e,this.context=t,this.refs=h3,this.updater=r||u3}Pu.prototype.isReactComponent={};Pu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Pu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function m3(){}m3.prototype=Pu.prototype;function U1(e,t,r){this.props=e,this.context=t,this.refs=h3,this.updater=r||u3}var V1=U1.prototype=new m3;V1.constructor=U1;d3(V1,Pu.prototype);V1.isPureReactComponent=!0;var Zw=Array.isArray,f3=Object.prototype.hasOwnProperty,H1={current:null},p3={key:!0,ref:!0,__self:!0,__source:!0};function x3(e,t,r){var s,a={},i=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)f3.call(t,s)&&!p3.hasOwnProperty(s)&&(a[s]=t[s]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)a[s]===void 0&&(a[s]=l[s]);return{$$typeof:Ch,type:e,key:i,ref:o,props:a,_owner:H1.current}}function hP(e,t){return{$$typeof:Ch,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function W1(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ch}function mP(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var ej=/\/+/g;function Wp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?mP(""+e.key):t.toString(36)}function Km(e,t,r,s,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ch:case tP:o=!0}}if(o)return o=e,a=a(o),e=s===""?"."+Wp(o,0):s,Zw(a)?(r="",e!=null&&(r=e.replace(ej,"$&/")+"/"),Km(a,t,r,"",function(u){return u})):a!=null&&(W1(a)&&(a=hP(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(ej,"$&/")+"/")+e)),t.push(a)),1;if(o=0,s=s===""?".":s+":",Zw(e))for(var l=0;l<e.length;l++){i=e[l];var c=s+Wp(i,l);o+=Km(i,t,r,c,a)}else if(c=dP(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=s+Wp(i,l++),o+=Km(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function em(e,t,r){if(e==null)return e;var s=[],a=0;return Km(e,s,"","",function(i){return t.call(r,i,a++)}),s}function fP(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var us={current:null},Jm={transition:null},pP={ReactCurrentDispatcher:us,ReactCurrentBatchConfig:Jm,ReactCurrentOwner:H1};function g3(){throw Error("act(...) is not supported in production builds of React.")}fr.Children={map:em,forEach:function(e,t,r){em(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return em(e,function(){t++}),t},toArray:function(e){return em(e,function(t){return t})||[]},only:function(e){if(!W1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};fr.Component=Pu;fr.Fragment=rP;fr.Profiler=sP;fr.PureComponent=U1;fr.StrictMode=nP;fr.Suspense=lP;fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pP;fr.act=g3;fr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=d3({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=H1.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)f3.call(t,c)&&!p3.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:Ch,type:e.type,key:a,ref:i,props:s,_owner:o}};fr.createContext=function(e){return e={$$typeof:iP,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:aP,_context:e},e.Consumer=e};fr.createElement=x3;fr.createFactory=function(e){var t=x3.bind(null,e);return t.type=e,t};fr.createRef=function(){return{current:null}};fr.forwardRef=function(e){return{$$typeof:oP,render:e}};fr.isValidElement=W1;fr.lazy=function(e){return{$$typeof:uP,_payload:{_status:-1,_result:e},_init:fP}};fr.memo=function(e,t){return{$$typeof:cP,type:e,compare:t===void 0?null:t}};fr.startTransition=function(e){var t=Jm.transition;Jm.transition={};try{e()}finally{Jm.transition=t}};fr.unstable_act=g3;fr.useCallback=function(e,t){return us.current.useCallback(e,t)};fr.useContext=function(e){return us.current.useContext(e)};fr.useDebugValue=function(){};fr.useDeferredValue=function(e){return us.current.useDeferredValue(e)};fr.useEffect=function(e,t){return us.current.useEffect(e,t)};fr.useId=function(){return us.current.useId()};fr.useImperativeHandle=function(e,t,r){return us.current.useImperativeHandle(e,t,r)};fr.useInsertionEffect=function(e,t){return us.current.useInsertionEffect(e,t)};fr.useLayoutEffect=function(e,t){return us.current.useLayoutEffect(e,t)};fr.useMemo=function(e,t){return us.current.useMemo(e,t)};fr.useReducer=function(e,t,r){return us.current.useReducer(e,t,r)};fr.useRef=function(e){return us.current.useRef(e)};fr.useState=function(e){return us.current.useState(e)};fr.useSyncExternalStore=function(e,t,r){return us.current.useSyncExternalStore(e,t,r)};fr.useTransition=function(){return us.current.useTransition()};fr.version="18.3.1";c3.exports=fr;var p=c3.exports;const rt=Ef(p),G1=i3({__proto__:null,default:rt},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xP=p,gP=Symbol.for("react.element"),vP=Symbol.for("react.fragment"),yP=Object.prototype.hasOwnProperty,bP=xP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wP={key:!0,ref:!0,__self:!0,__source:!0};function v3(e,t,r){var s,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)yP.call(t,s)&&!wP.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:gP,type:e,key:i,ref:o,props:a,_owner:bP.current}}Tf.Fragment=vP;Tf.jsx=v3;Tf.jsxs=v3;l3.exports=Tf;var n=l3.exports,y3={exports:{}},Js={},b3={exports:{}},w3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(q,V){var _=q.length;q.push(V);e:for(;0<_;){var U=_-1>>>1,H=q[U];if(0<a(H,V))q[U]=V,q[_]=H,_=U;else break e}}function r(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var V=q[0],_=q.pop();if(_!==V){q[0]=_;e:for(var U=0,H=q.length,O=H>>>1;U<O;){var B=2*(U+1)-1,W=q[B],K=B+1,X=q[K];if(0>a(W,_))K<H&&0>a(X,W)?(q[U]=X,q[K]=_,U=K):(q[U]=W,q[B]=_,U=B);else if(K<H&&0>a(X,_))q[U]=X,q[K]=_,U=K;else break e}}return V}function a(q,V){var _=q.sortIndex-V.sortIndex;return _!==0?_:q.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,m=3,f=!1,x=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(q){for(var V=r(u);V!==null;){if(V.callback===null)s(u);else if(V.startTime<=q)s(u),V.sortIndex=V.expirationTime,t(c,V);else break;V=r(u)}}function S(q){if(g=!1,w(q),!x)if(r(c)!==null)x=!0,F(k);else{var V=r(u);V!==null&&ne(S,V.startTime-q)}}function k(q,V){x=!1,g&&(g=!1,b(T),T=-1),f=!0;var _=m;try{for(w(V),h=r(c);h!==null&&(!(h.expirationTime>V)||q&&!M());){var U=h.callback;if(typeof U=="function"){h.callback=null,m=h.priorityLevel;var H=U(h.expirationTime<=V);V=e.unstable_now(),typeof H=="function"?h.callback=H:h===r(c)&&s(c),w(V)}else s(c);h=r(c)}if(h!==null)var O=!0;else{var B=r(u);B!==null&&ne(S,B.startTime-V),O=!1}return O}finally{h=null,m=_,f=!1}}var N=!1,P=null,T=-1,A=5,E=-1;function M(){return!(e.unstable_now()-E<A)}function I(){if(P!==null){var q=e.unstable_now();E=q;var V=!0;try{V=P(!0,q)}finally{V?se():(N=!1,P=null)}}else N=!1}var se;if(typeof v=="function")se=function(){v(I)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,Y=ee.port2;ee.port1.onmessage=I,se=function(){Y.postMessage(null)}}else se=function(){y(I,0)};function F(q){P=q,N||(N=!0,se())}function ne(q,V){T=y(function(){q(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_continueExecution=function(){x||f||(x=!0,F(k))},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(q){switch(m){case 1:case 2:case 3:var V=3;break;default:V=m}var _=m;m=V;try{return q()}finally{m=_}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(q,V){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var _=m;m=q;try{return V()}finally{m=_}},e.unstable_scheduleCallback=function(q,V,_){var U=e.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?U+_:U):_=U,q){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=_+H,q={id:d++,callback:V,priorityLevel:q,startTime:_,expirationTime:H,sortIndex:-1},_>U?(q.sortIndex=_,t(u,q),r(c)===null&&q===r(u)&&(g?(b(T),T=-1):g=!0,ne(S,_-U))):(q.sortIndex=H,t(c,q),x||f||(x=!0,F(k))),q},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(q){var V=m;return function(){var _=m;m=V;try{return q.apply(this,arguments)}finally{m=_}}}})(w3);b3.exports=w3;var jP=b3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NP=p,Ys=jP;function Je(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var j3=new Set,zd={};function Ql(e,t){nu(e,t),nu(e+"Capture",t)}function nu(e,t){for(zd[e]=t,e=0;e<t.length;e++)j3.add(t[e])}var Pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ag=Object.prototype.hasOwnProperty,SP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tj={},rj={};function kP(e){return Ag.call(rj,e)?!0:Ag.call(tj,e)?!1:SP.test(e)?rj[e]=!0:(tj[e]=!0,!1)}function _P(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function CP(e,t,r,s){if(t===null||typeof t>"u"||_P(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ds(e,t,r,s,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var zn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){zn[e]=new ds(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];zn[t]=new ds(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){zn[e]=new ds(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){zn[e]=new ds(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){zn[e]=new ds(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){zn[e]=new ds(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){zn[e]=new ds(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){zn[e]=new ds(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){zn[e]=new ds(e,5,!1,e.toLowerCase(),null,!1,!1)});var Q1=/[\-:]([a-z])/g;function Y1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Q1,Y1);zn[t]=new ds(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Q1,Y1);zn[t]=new ds(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Q1,Y1);zn[t]=new ds(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){zn[e]=new ds(e,1,!1,e.toLowerCase(),null,!1,!1)});zn.xlinkHref=new ds("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){zn[e]=new ds(e,1,!1,e.toLowerCase(),null,!0,!0)});function K1(e,t,r,s){var a=zn.hasOwnProperty(t)?zn[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(CP(t,r,a,s)&&(r=null),s||a===null?kP(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var Gi=NP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tm=Symbol.for("react.element"),jc=Symbol.for("react.portal"),Nc=Symbol.for("react.fragment"),J1=Symbol.for("react.strict_mode"),Pg=Symbol.for("react.profiler"),N3=Symbol.for("react.provider"),S3=Symbol.for("react.context"),X1=Symbol.for("react.forward_ref"),Rg=Symbol.for("react.suspense"),Mg=Symbol.for("react.suspense_list"),Z1=Symbol.for("react.memo"),lo=Symbol.for("react.lazy"),k3=Symbol.for("react.offscreen"),nj=Symbol.iterator;function Ku(e){return e===null||typeof e!="object"?null:(e=nj&&e[nj]||e["@@iterator"],typeof e=="function"?e:null)}var Kr=Object.assign,Gp;function dd(e){if(Gp===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Gp=t&&t[1]||""}return`
`+Gp+e}var Qp=!1;function Yp(e,t){if(!e||Qp)return"";Qp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=s.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Qp=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?dd(e):""}function EP(e){switch(e.tag){case 5:return dd(e.type);case 16:return dd("Lazy");case 13:return dd("Suspense");case 19:return dd("SuspenseList");case 0:case 2:case 15:return e=Yp(e.type,!1),e;case 11:return e=Yp(e.type.render,!1),e;case 1:return e=Yp(e.type,!0),e;default:return""}}function Og(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Nc:return"Fragment";case jc:return"Portal";case Pg:return"Profiler";case J1:return"StrictMode";case Rg:return"Suspense";case Mg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case S3:return(e.displayName||"Context")+".Consumer";case N3:return(e._context.displayName||"Context")+".Provider";case X1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Z1:return t=e.displayName||null,t!==null?t:Og(e.type)||"Memo";case lo:t=e._payload,e=e._init;try{return Og(e(t))}catch{}}return null}function TP(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Og(t);case 8:return t===J1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Do(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _3(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function AP(e){var t=_3(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function rm(e){e._valueTracker||(e._valueTracker=AP(e))}function C3(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=_3(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function y0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ig(e,t){var r=t.checked;return Kr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function sj(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=Do(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function E3(e,t){t=t.checked,t!=null&&K1(e,"checked",t,!1)}function Dg(e,t){E3(e,t);var r=Do(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Fg(e,t.type,r):t.hasOwnProperty("defaultValue")&&Fg(e,t.type,Do(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function aj(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Fg(e,t,r){(t!=="number"||y0(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var hd=Array.isArray;function Oc(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Do(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Lg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Je(91));return Kr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ij(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Je(92));if(hd(r)){if(1<r.length)throw Error(Je(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Do(r)}}function T3(e,t){var r=Do(t.value),s=Do(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function oj(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function A3(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?A3(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var nm,P3=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(nm=nm||document.createElement("div"),nm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=nm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $d(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var bd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PP=["Webkit","ms","Moz","O"];Object.keys(bd).forEach(function(e){PP.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),bd[t]=bd[e]})});function R3(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||bd.hasOwnProperty(e)&&bd[e]?(""+t).trim():t+"px"}function M3(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=R3(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var RP=Kr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $g(e,t){if(t){if(RP[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Je(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Je(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Je(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Je(62))}}function qg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bg=null;function ey(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ug=null,Ic=null,Dc=null;function lj(e){if(e=Ah(e)){if(typeof Ug!="function")throw Error(Je(280));var t=e.stateNode;t&&(t=Of(t),Ug(e.stateNode,e.type,t))}}function O3(e){Ic?Dc?Dc.push(e):Dc=[e]:Ic=e}function I3(){if(Ic){var e=Ic,t=Dc;if(Dc=Ic=null,lj(e),t)for(e=0;e<t.length;e++)lj(t[e])}}function D3(e,t){return e(t)}function F3(){}var Kp=!1;function L3(e,t,r){if(Kp)return e(t,r);Kp=!0;try{return D3(e,t,r)}finally{Kp=!1,(Ic!==null||Dc!==null)&&(F3(),I3())}}function qd(e,t){var r=e.stateNode;if(r===null)return null;var s=Of(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Je(231,t,typeof r));return r}var Vg=!1;if(Pi)try{var Ju={};Object.defineProperty(Ju,"passive",{get:function(){Vg=!0}}),window.addEventListener("test",Ju,Ju),window.removeEventListener("test",Ju,Ju)}catch{Vg=!1}function MP(e,t,r,s,a,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var wd=!1,b0=null,w0=!1,Hg=null,OP={onError:function(e){wd=!0,b0=e}};function IP(e,t,r,s,a,i,o,l,c){wd=!1,b0=null,MP.apply(OP,arguments)}function DP(e,t,r,s,a,i,o,l,c){if(IP.apply(this,arguments),wd){if(wd){var u=b0;wd=!1,b0=null}else throw Error(Je(198));w0||(w0=!0,Hg=u)}}function Yl(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function z3(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function cj(e){if(Yl(e)!==e)throw Error(Je(188))}function FP(e){var t=e.alternate;if(!t){if(t=Yl(e),t===null)throw Error(Je(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return cj(a),e;if(i===s)return cj(a),t;i=i.sibling}throw Error(Je(188))}if(r.return!==s.return)r=a,s=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,s=i;break}if(l===s){o=!0,s=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,s=a;break}if(l===s){o=!0,s=i,r=a;break}l=l.sibling}if(!o)throw Error(Je(189))}}if(r.alternate!==s)throw Error(Je(190))}if(r.tag!==3)throw Error(Je(188));return r.stateNode.current===r?e:t}function $3(e){return e=FP(e),e!==null?q3(e):null}function q3(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=q3(e);if(t!==null)return t;e=e.sibling}return null}var B3=Ys.unstable_scheduleCallback,uj=Ys.unstable_cancelCallback,LP=Ys.unstable_shouldYield,zP=Ys.unstable_requestPaint,cn=Ys.unstable_now,$P=Ys.unstable_getCurrentPriorityLevel,ty=Ys.unstable_ImmediatePriority,U3=Ys.unstable_UserBlockingPriority,j0=Ys.unstable_NormalPriority,qP=Ys.unstable_LowPriority,V3=Ys.unstable_IdlePriority,Af=null,Za=null;function BP(e){if(Za&&typeof Za.onCommitFiberRoot=="function")try{Za.onCommitFiberRoot(Af,e,void 0,(e.current.flags&128)===128)}catch{}}var Ma=Math.clz32?Math.clz32:HP,UP=Math.log,VP=Math.LN2;function HP(e){return e>>>=0,e===0?32:31-(UP(e)/VP|0)|0}var sm=64,am=4194304;function md(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function N0(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?s=md(l):(i&=o,i!==0&&(s=md(i)))}else o=r&~a,o!==0?s=md(o):i!==0&&(s=md(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Ma(t),a=1<<r,s|=e[r],t&=~a;return s}function WP(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GP(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Ma(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&s)&&(a[o]=WP(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Wg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function H3(){var e=sm;return sm<<=1,!(sm&4194240)&&(sm=64),e}function Jp(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Eh(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ma(t),e[t]=r}function QP(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Ma(r),i=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~i}}function ry(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Ma(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var Ar=0;function W3(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var G3,ny,Q3,Y3,K3,Gg=!1,im=[],ko=null,_o=null,Co=null,Bd=new Map,Ud=new Map,ho=[],YP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dj(e,t){switch(e){case"focusin":case"focusout":ko=null;break;case"dragenter":case"dragleave":_o=null;break;case"mouseover":case"mouseout":Co=null;break;case"pointerover":case"pointerout":Bd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ud.delete(t.pointerId)}}function Xu(e,t,r,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Ah(t),t!==null&&ny(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function KP(e,t,r,s,a){switch(t){case"focusin":return ko=Xu(ko,e,t,r,s,a),!0;case"dragenter":return _o=Xu(_o,e,t,r,s,a),!0;case"mouseover":return Co=Xu(Co,e,t,r,s,a),!0;case"pointerover":var i=a.pointerId;return Bd.set(i,Xu(Bd.get(i)||null,e,t,r,s,a)),!0;case"gotpointercapture":return i=a.pointerId,Ud.set(i,Xu(Ud.get(i)||null,e,t,r,s,a)),!0}return!1}function J3(e){var t=gl(e.target);if(t!==null){var r=Yl(t);if(r!==null){if(t=r.tag,t===13){if(t=z3(r),t!==null){e.blockedOn=t,K3(e.priority,function(){Q3(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Qg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);Bg=s,r.target.dispatchEvent(s),Bg=null}else return t=Ah(r),t!==null&&ny(t),e.blockedOn=r,!1;t.shift()}return!0}function hj(e,t,r){Xm(e)&&r.delete(t)}function JP(){Gg=!1,ko!==null&&Xm(ko)&&(ko=null),_o!==null&&Xm(_o)&&(_o=null),Co!==null&&Xm(Co)&&(Co=null),Bd.forEach(hj),Ud.forEach(hj)}function Zu(e,t){e.blockedOn===t&&(e.blockedOn=null,Gg||(Gg=!0,Ys.unstable_scheduleCallback(Ys.unstable_NormalPriority,JP)))}function Vd(e){function t(a){return Zu(a,e)}if(0<im.length){Zu(im[0],e);for(var r=1;r<im.length;r++){var s=im[r];s.blockedOn===e&&(s.blockedOn=null)}}for(ko!==null&&Zu(ko,e),_o!==null&&Zu(_o,e),Co!==null&&Zu(Co,e),Bd.forEach(t),Ud.forEach(t),r=0;r<ho.length;r++)s=ho[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<ho.length&&(r=ho[0],r.blockedOn===null);)J3(r),r.blockedOn===null&&ho.shift()}var Fc=Gi.ReactCurrentBatchConfig,S0=!0;function XP(e,t,r,s){var a=Ar,i=Fc.transition;Fc.transition=null;try{Ar=1,sy(e,t,r,s)}finally{Ar=a,Fc.transition=i}}function ZP(e,t,r,s){var a=Ar,i=Fc.transition;Fc.transition=null;try{Ar=4,sy(e,t,r,s)}finally{Ar=a,Fc.transition=i}}function sy(e,t,r,s){if(S0){var a=Qg(e,t,r,s);if(a===null)ox(e,t,s,k0,r),dj(e,s);else if(KP(a,e,t,r,s))s.stopPropagation();else if(dj(e,s),t&4&&-1<YP.indexOf(e)){for(;a!==null;){var i=Ah(a);if(i!==null&&G3(i),i=Qg(e,t,r,s),i===null&&ox(e,t,s,k0,r),i===a)break;a=i}a!==null&&s.stopPropagation()}else ox(e,t,s,null,r)}}var k0=null;function Qg(e,t,r,s){if(k0=null,e=ey(s),e=gl(e),e!==null)if(t=Yl(e),t===null)e=null;else if(r=t.tag,r===13){if(e=z3(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return k0=e,null}function X3(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($P()){case ty:return 1;case U3:return 4;case j0:case qP:return 16;case V3:return 536870912;default:return 16}default:return 16}}var bo=null,ay=null,Zm=null;function Z3(){if(Zm)return Zm;var e,t=ay,r=t.length,s,a="value"in bo?bo.value:bo.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(s=1;s<=o&&t[r-s]===a[i-s];s++);return Zm=a.slice(e,1<s?1-s:void 0)}function e0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function om(){return!0}function mj(){return!1}function Xs(e){function t(r,s,a,i,o){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?om:mj,this.isPropagationStopped=mj,this}return Kr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=om)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=om)},persist:function(){},isPersistent:om}),t}var Ru={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},iy=Xs(Ru),Th=Kr({},Ru,{view:0,detail:0}),eR=Xs(Th),Xp,Zp,ed,Pf=Kr({},Th,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oy,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ed&&(ed&&e.type==="mousemove"?(Xp=e.screenX-ed.screenX,Zp=e.screenY-ed.screenY):Zp=Xp=0,ed=e),Xp)},movementY:function(e){return"movementY"in e?e.movementY:Zp}}),fj=Xs(Pf),tR=Kr({},Pf,{dataTransfer:0}),rR=Xs(tR),nR=Kr({},Th,{relatedTarget:0}),ex=Xs(nR),sR=Kr({},Ru,{animationName:0,elapsedTime:0,pseudoElement:0}),aR=Xs(sR),iR=Kr({},Ru,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),oR=Xs(iR),lR=Kr({},Ru,{data:0}),pj=Xs(lR),cR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hR(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=dR[e])?!!t[e]:!1}function oy(){return hR}var mR=Kr({},Th,{key:function(e){if(e.key){var t=cR[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=e0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?uR[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oy,charCode:function(e){return e.type==="keypress"?e0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?e0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fR=Xs(mR),pR=Kr({},Pf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xj=Xs(pR),xR=Kr({},Th,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oy}),gR=Xs(xR),vR=Kr({},Ru,{propertyName:0,elapsedTime:0,pseudoElement:0}),yR=Xs(vR),bR=Kr({},Pf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wR=Xs(bR),jR=[9,13,27,32],ly=Pi&&"CompositionEvent"in window,jd=null;Pi&&"documentMode"in document&&(jd=document.documentMode);var NR=Pi&&"TextEvent"in window&&!jd,eS=Pi&&(!ly||jd&&8<jd&&11>=jd),gj=" ",vj=!1;function tS(e,t){switch(e){case"keyup":return jR.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Sc=!1;function SR(e,t){switch(e){case"compositionend":return rS(t);case"keypress":return t.which!==32?null:(vj=!0,gj);case"textInput":return e=t.data,e===gj&&vj?null:e;default:return null}}function kR(e,t){if(Sc)return e==="compositionend"||!ly&&tS(e,t)?(e=Z3(),Zm=ay=bo=null,Sc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return eS&&t.locale!=="ko"?null:t.data;default:return null}}var _R={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yj(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_R[e.type]:t==="textarea"}function nS(e,t,r,s){O3(s),t=_0(t,"onChange"),0<t.length&&(r=new iy("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Nd=null,Hd=null;function CR(e){fS(e,0)}function Rf(e){var t=Cc(e);if(C3(t))return e}function ER(e,t){if(e==="change")return t}var sS=!1;if(Pi){var tx;if(Pi){var rx="oninput"in document;if(!rx){var bj=document.createElement("div");bj.setAttribute("oninput","return;"),rx=typeof bj.oninput=="function"}tx=rx}else tx=!1;sS=tx&&(!document.documentMode||9<document.documentMode)}function wj(){Nd&&(Nd.detachEvent("onpropertychange",aS),Hd=Nd=null)}function aS(e){if(e.propertyName==="value"&&Rf(Hd)){var t=[];nS(t,Hd,e,ey(e)),L3(CR,t)}}function TR(e,t,r){e==="focusin"?(wj(),Nd=t,Hd=r,Nd.attachEvent("onpropertychange",aS)):e==="focusout"&&wj()}function AR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Rf(Hd)}function PR(e,t){if(e==="click")return Rf(t)}function RR(e,t){if(e==="input"||e==="change")return Rf(t)}function MR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Da=typeof Object.is=="function"?Object.is:MR;function Wd(e,t){if(Da(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!Ag.call(t,a)||!Da(e[a],t[a]))return!1}return!0}function jj(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Nj(e,t){var r=jj(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=jj(r)}}function iS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?iS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function oS(){for(var e=window,t=y0();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=y0(e.document)}return t}function cy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function OR(e){var t=oS(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&iS(r.ownerDocument.documentElement,r)){if(s!==null&&cy(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=Nj(r,i);var o=Nj(r,s);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var IR=Pi&&"documentMode"in document&&11>=document.documentMode,kc=null,Yg=null,Sd=null,Kg=!1;function Sj(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Kg||kc==null||kc!==y0(s)||(s=kc,"selectionStart"in s&&cy(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Sd&&Wd(Sd,s)||(Sd=s,s=_0(Yg,"onSelect"),0<s.length&&(t=new iy("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=kc)))}function lm(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var _c={animationend:lm("Animation","AnimationEnd"),animationiteration:lm("Animation","AnimationIteration"),animationstart:lm("Animation","AnimationStart"),transitionend:lm("Transition","TransitionEnd")},nx={},lS={};Pi&&(lS=document.createElement("div").style,"AnimationEvent"in window||(delete _c.animationend.animation,delete _c.animationiteration.animation,delete _c.animationstart.animation),"TransitionEvent"in window||delete _c.transitionend.transition);function Mf(e){if(nx[e])return nx[e];if(!_c[e])return e;var t=_c[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in lS)return nx[e]=t[r];return e}var cS=Mf("animationend"),uS=Mf("animationiteration"),dS=Mf("animationstart"),hS=Mf("transitionend"),mS=new Map,kj="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ho(e,t){mS.set(e,t),Ql(t,[e])}for(var sx=0;sx<kj.length;sx++){var ax=kj[sx],DR=ax.toLowerCase(),FR=ax[0].toUpperCase()+ax.slice(1);Ho(DR,"on"+FR)}Ho(cS,"onAnimationEnd");Ho(uS,"onAnimationIteration");Ho(dS,"onAnimationStart");Ho("dblclick","onDoubleClick");Ho("focusin","onFocus");Ho("focusout","onBlur");Ho(hS,"onTransitionEnd");nu("onMouseEnter",["mouseout","mouseover"]);nu("onMouseLeave",["mouseout","mouseover"]);nu("onPointerEnter",["pointerout","pointerover"]);nu("onPointerLeave",["pointerout","pointerover"]);Ql("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ql("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ql("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ql("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ql("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ql("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LR=new Set("cancel close invalid load scroll toggle".split(" ").concat(fd));function _j(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,DP(s,t,void 0,e),e.currentTarget=null}function fS(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;_j(a,l,u),i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;_j(a,l,u),i=c}}}if(w0)throw e=Hg,w0=!1,Hg=null,e}function zr(e,t){var r=t[tv];r===void 0&&(r=t[tv]=new Set);var s=e+"__bubble";r.has(s)||(pS(t,e,2,!1),r.add(s))}function ix(e,t,r){var s=0;t&&(s|=4),pS(r,e,s,t)}var cm="_reactListening"+Math.random().toString(36).slice(2);function Gd(e){if(!e[cm]){e[cm]=!0,j3.forEach(function(r){r!=="selectionchange"&&(LR.has(r)||ix(r,!1,e),ix(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[cm]||(t[cm]=!0,ix("selectionchange",!1,t))}}function pS(e,t,r,s){switch(X3(t)){case 1:var a=XP;break;case 4:a=ZP;break;default:a=sy}r=a.bind(null,t,r,e),a=void 0,!Vg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function ox(e,t,r,s,a){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=gl(l),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}l=l.parentNode}}s=s.return}L3(function(){var u=i,d=ey(r),h=[];e:{var m=mS.get(e);if(m!==void 0){var f=iy,x=e;switch(e){case"keypress":if(e0(r)===0)break e;case"keydown":case"keyup":f=fR;break;case"focusin":x="focus",f=ex;break;case"focusout":x="blur",f=ex;break;case"beforeblur":case"afterblur":f=ex;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=fj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=rR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=gR;break;case cS:case uS:case dS:f=aR;break;case hS:f=yR;break;case"scroll":f=eR;break;case"wheel":f=wR;break;case"copy":case"cut":case"paste":f=oR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=xj}var g=(t&4)!==0,y=!g&&e==="scroll",b=g?m!==null?m+"Capture":null:m;g=[];for(var v=u,w;v!==null;){w=v;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,b!==null&&(S=qd(v,b),S!=null&&g.push(Qd(v,S,w)))),y)break;v=v.return}0<g.length&&(m=new f(m,x,null,r,d),h.push({event:m,listeners:g}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",m&&r!==Bg&&(x=r.relatedTarget||r.fromElement)&&(gl(x)||x[Ri]))break e;if((f||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,f?(x=r.relatedTarget||r.toElement,f=u,x=x?gl(x):null,x!==null&&(y=Yl(x),x!==y||x.tag!==5&&x.tag!==6)&&(x=null)):(f=null,x=u),f!==x)){if(g=fj,S="onMouseLeave",b="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=xj,S="onPointerLeave",b="onPointerEnter",v="pointer"),y=f==null?m:Cc(f),w=x==null?m:Cc(x),m=new g(S,v+"leave",f,r,d),m.target=y,m.relatedTarget=w,S=null,gl(d)===u&&(g=new g(b,v+"enter",x,r,d),g.target=w,g.relatedTarget=y,S=g),y=S,f&&x)t:{for(g=f,b=x,v=0,w=g;w;w=ic(w))v++;for(w=0,S=b;S;S=ic(S))w++;for(;0<v-w;)g=ic(g),v--;for(;0<w-v;)b=ic(b),w--;for(;v--;){if(g===b||b!==null&&g===b.alternate)break t;g=ic(g),b=ic(b)}g=null}else g=null;f!==null&&Cj(h,m,f,g,!1),x!==null&&y!==null&&Cj(h,y,x,g,!0)}}e:{if(m=u?Cc(u):window,f=m.nodeName&&m.nodeName.toLowerCase(),f==="select"||f==="input"&&m.type==="file")var k=ER;else if(yj(m))if(sS)k=RR;else{k=AR;var N=TR}else(f=m.nodeName)&&f.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(k=PR);if(k&&(k=k(e,u))){nS(h,k,r,d);break e}N&&N(e,m,u),e==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&Fg(m,"number",m.value)}switch(N=u?Cc(u):window,e){case"focusin":(yj(N)||N.contentEditable==="true")&&(kc=N,Yg=u,Sd=null);break;case"focusout":Sd=Yg=kc=null;break;case"mousedown":Kg=!0;break;case"contextmenu":case"mouseup":case"dragend":Kg=!1,Sj(h,r,d);break;case"selectionchange":if(IR)break;case"keydown":case"keyup":Sj(h,r,d)}var P;if(ly)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Sc?tS(e,r)&&(T="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(eS&&r.locale!=="ko"&&(Sc||T!=="onCompositionStart"?T==="onCompositionEnd"&&Sc&&(P=Z3()):(bo=d,ay="value"in bo?bo.value:bo.textContent,Sc=!0)),N=_0(u,T),0<N.length&&(T=new pj(T,e,null,r,d),h.push({event:T,listeners:N}),P?T.data=P:(P=rS(r),P!==null&&(T.data=P)))),(P=NR?SR(e,r):kR(e,r))&&(u=_0(u,"onBeforeInput"),0<u.length&&(d=new pj("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=P))}fS(h,t)})}function Qd(e,t,r){return{instance:e,listener:t,currentTarget:r}}function _0(e,t){for(var r=t+"Capture",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=qd(e,r),i!=null&&s.unshift(Qd(e,i,a)),i=qd(e,t),i!=null&&s.push(Qd(e,i,a))),e=e.return}return s}function ic(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Cj(e,t,r,s,a){for(var i=t._reactName,o=[];r!==null&&r!==s;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,a?(c=qd(r,i),c!=null&&o.unshift(Qd(r,c,l))):a||(c=qd(r,i),c!=null&&o.push(Qd(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var zR=/\r\n?/g,$R=/\u0000|\uFFFD/g;function Ej(e){return(typeof e=="string"?e:""+e).replace(zR,`
`).replace($R,"")}function um(e,t,r){if(t=Ej(t),Ej(e)!==t&&r)throw Error(Je(425))}function C0(){}var Jg=null,Xg=null;function Zg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ev=typeof setTimeout=="function"?setTimeout:void 0,qR=typeof clearTimeout=="function"?clearTimeout:void 0,Tj=typeof Promise=="function"?Promise:void 0,BR=typeof queueMicrotask=="function"?queueMicrotask:typeof Tj<"u"?function(e){return Tj.resolve(null).then(e).catch(UR)}:ev;function UR(e){setTimeout(function(){throw e})}function lx(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),Vd(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);Vd(t)}function Eo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Aj(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Mu=Math.random().toString(36).slice(2),Qa="__reactFiber$"+Mu,Yd="__reactProps$"+Mu,Ri="__reactContainer$"+Mu,tv="__reactEvents$"+Mu,VR="__reactListeners$"+Mu,HR="__reactHandles$"+Mu;function gl(e){var t=e[Qa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ri]||r[Qa]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Aj(e);e!==null;){if(r=e[Qa])return r;e=Aj(e)}return t}e=r,r=e.parentNode}return null}function Ah(e){return e=e[Qa]||e[Ri],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Cc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Je(33))}function Of(e){return e[Yd]||null}var rv=[],Ec=-1;function Wo(e){return{current:e}}function $r(e){0>Ec||(e.current=rv[Ec],rv[Ec]=null,Ec--)}function Dr(e,t){Ec++,rv[Ec]=e.current,e.current=t}var Fo={},Jn=Wo(Fo),Ns=Wo(!1),Pl=Fo;function su(e,t){var r=e.type.contextTypes;if(!r)return Fo;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ss(e){return e=e.childContextTypes,e!=null}function E0(){$r(Ns),$r(Jn)}function Pj(e,t,r){if(Jn.current!==Fo)throw Error(Je(168));Dr(Jn,t),Dr(Ns,r)}function xS(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(Je(108,TP(e)||"Unknown",a));return Kr({},r,s)}function T0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fo,Pl=Jn.current,Dr(Jn,e),Dr(Ns,Ns.current),!0}function Rj(e,t,r){var s=e.stateNode;if(!s)throw Error(Je(169));r?(e=xS(e,t,Pl),s.__reactInternalMemoizedMergedChildContext=e,$r(Ns),$r(Jn),Dr(Jn,e)):$r(Ns),Dr(Ns,r)}var yi=null,If=!1,cx=!1;function gS(e){yi===null?yi=[e]:yi.push(e)}function WR(e){If=!0,gS(e)}function Go(){if(!cx&&yi!==null){cx=!0;var e=0,t=Ar;try{var r=yi;for(Ar=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}yi=null,If=!1}catch(a){throw yi!==null&&(yi=yi.slice(e+1)),B3(ty,Go),a}finally{Ar=t,cx=!1}}return null}var Tc=[],Ac=0,A0=null,P0=0,na=[],sa=0,Rl=null,Si=1,ki="";function ll(e,t){Tc[Ac++]=P0,Tc[Ac++]=A0,A0=e,P0=t}function vS(e,t,r){na[sa++]=Si,na[sa++]=ki,na[sa++]=Rl,Rl=e;var s=Si;e=ki;var a=32-Ma(s)-1;s&=~(1<<a),r+=1;var i=32-Ma(t)+a;if(30<i){var o=a-a%5;i=(s&(1<<o)-1).toString(32),s>>=o,a-=o,Si=1<<32-Ma(t)+a|r<<a|s,ki=i+e}else Si=1<<i|r<<a|s,ki=e}function uy(e){e.return!==null&&(ll(e,1),vS(e,1,0))}function dy(e){for(;e===A0;)A0=Tc[--Ac],Tc[Ac]=null,P0=Tc[--Ac],Tc[Ac]=null;for(;e===Rl;)Rl=na[--sa],na[sa]=null,ki=na[--sa],na[sa]=null,Si=na[--sa],na[sa]=null}var Vs=null,Us=null,Br=!1,Ra=null;function yS(e,t){var r=oa(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Mj(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Vs=e,Us=Eo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Vs=e,Us=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Rl!==null?{id:Si,overflow:ki}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=oa(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Vs=e,Us=null,!0):!1;default:return!1}}function nv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function sv(e){if(Br){var t=Us;if(t){var r=t;if(!Mj(e,t)){if(nv(e))throw Error(Je(418));t=Eo(r.nextSibling);var s=Vs;t&&Mj(e,t)?yS(s,r):(e.flags=e.flags&-4097|2,Br=!1,Vs=e)}}else{if(nv(e))throw Error(Je(418));e.flags=e.flags&-4097|2,Br=!1,Vs=e}}}function Oj(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Vs=e}function dm(e){if(e!==Vs)return!1;if(!Br)return Oj(e),Br=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Zg(e.type,e.memoizedProps)),t&&(t=Us)){if(nv(e))throw bS(),Error(Je(418));for(;t;)yS(e,t),t=Eo(t.nextSibling)}if(Oj(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Je(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Us=Eo(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Us=null}}else Us=Vs?Eo(e.stateNode.nextSibling):null;return!0}function bS(){for(var e=Us;e;)e=Eo(e.nextSibling)}function au(){Us=Vs=null,Br=!1}function hy(e){Ra===null?Ra=[e]:Ra.push(e)}var GR=Gi.ReactCurrentBatchConfig;function td(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Je(309));var s=r.stateNode}if(!s)throw Error(Je(147,e));var a=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Je(284));if(!r._owner)throw Error(Je(290,e))}return e}function hm(e,t){throw e=Object.prototype.toString.call(t),Error(Je(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ij(e){var t=e._init;return t(e._payload)}function wS(e){function t(b,v){if(e){var w=b.deletions;w===null?(b.deletions=[v],b.flags|=16):w.push(v)}}function r(b,v){if(!e)return null;for(;v!==null;)t(b,v),v=v.sibling;return null}function s(b,v){for(b=new Map;v!==null;)v.key!==null?b.set(v.key,v):b.set(v.index,v),v=v.sibling;return b}function a(b,v){return b=Ro(b,v),b.index=0,b.sibling=null,b}function i(b,v,w){return b.index=w,e?(w=b.alternate,w!==null?(w=w.index,w<v?(b.flags|=2,v):w):(b.flags|=2,v)):(b.flags|=1048576,v)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function l(b,v,w,S){return v===null||v.tag!==6?(v=xx(w,b.mode,S),v.return=b,v):(v=a(v,w),v.return=b,v)}function c(b,v,w,S){var k=w.type;return k===Nc?d(b,v,w.props.children,S,w.key):v!==null&&(v.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===lo&&Ij(k)===v.type)?(S=a(v,w.props),S.ref=td(b,v,w),S.return=b,S):(S=o0(w.type,w.key,w.props,null,b.mode,S),S.ref=td(b,v,w),S.return=b,S)}function u(b,v,w,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=gx(w,b.mode,S),v.return=b,v):(v=a(v,w.children||[]),v.return=b,v)}function d(b,v,w,S,k){return v===null||v.tag!==7?(v=Al(w,b.mode,S,k),v.return=b,v):(v=a(v,w),v.return=b,v)}function h(b,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=xx(""+v,b.mode,w),v.return=b,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case tm:return w=o0(v.type,v.key,v.props,null,b.mode,w),w.ref=td(b,null,v),w.return=b,w;case jc:return v=gx(v,b.mode,w),v.return=b,v;case lo:var S=v._init;return h(b,S(v._payload),w)}if(hd(v)||Ku(v))return v=Al(v,b.mode,w,null),v.return=b,v;hm(b,v)}return null}function m(b,v,w,S){var k=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return k!==null?null:l(b,v,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case tm:return w.key===k?c(b,v,w,S):null;case jc:return w.key===k?u(b,v,w,S):null;case lo:return k=w._init,m(b,v,k(w._payload),S)}if(hd(w)||Ku(w))return k!==null?null:d(b,v,w,S,null);hm(b,w)}return null}function f(b,v,w,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return b=b.get(w)||null,l(v,b,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case tm:return b=b.get(S.key===null?w:S.key)||null,c(v,b,S,k);case jc:return b=b.get(S.key===null?w:S.key)||null,u(v,b,S,k);case lo:var N=S._init;return f(b,v,w,N(S._payload),k)}if(hd(S)||Ku(S))return b=b.get(w)||null,d(v,b,S,k,null);hm(v,S)}return null}function x(b,v,w,S){for(var k=null,N=null,P=v,T=v=0,A=null;P!==null&&T<w.length;T++){P.index>T?(A=P,P=null):A=P.sibling;var E=m(b,P,w[T],S);if(E===null){P===null&&(P=A);break}e&&P&&E.alternate===null&&t(b,P),v=i(E,v,T),N===null?k=E:N.sibling=E,N=E,P=A}if(T===w.length)return r(b,P),Br&&ll(b,T),k;if(P===null){for(;T<w.length;T++)P=h(b,w[T],S),P!==null&&(v=i(P,v,T),N===null?k=P:N.sibling=P,N=P);return Br&&ll(b,T),k}for(P=s(b,P);T<w.length;T++)A=f(P,b,T,w[T],S),A!==null&&(e&&A.alternate!==null&&P.delete(A.key===null?T:A.key),v=i(A,v,T),N===null?k=A:N.sibling=A,N=A);return e&&P.forEach(function(M){return t(b,M)}),Br&&ll(b,T),k}function g(b,v,w,S){var k=Ku(w);if(typeof k!="function")throw Error(Je(150));if(w=k.call(w),w==null)throw Error(Je(151));for(var N=k=null,P=v,T=v=0,A=null,E=w.next();P!==null&&!E.done;T++,E=w.next()){P.index>T?(A=P,P=null):A=P.sibling;var M=m(b,P,E.value,S);if(M===null){P===null&&(P=A);break}e&&P&&M.alternate===null&&t(b,P),v=i(M,v,T),N===null?k=M:N.sibling=M,N=M,P=A}if(E.done)return r(b,P),Br&&ll(b,T),k;if(P===null){for(;!E.done;T++,E=w.next())E=h(b,E.value,S),E!==null&&(v=i(E,v,T),N===null?k=E:N.sibling=E,N=E);return Br&&ll(b,T),k}for(P=s(b,P);!E.done;T++,E=w.next())E=f(P,b,T,E.value,S),E!==null&&(e&&E.alternate!==null&&P.delete(E.key===null?T:E.key),v=i(E,v,T),N===null?k=E:N.sibling=E,N=E);return e&&P.forEach(function(I){return t(b,I)}),Br&&ll(b,T),k}function y(b,v,w,S){if(typeof w=="object"&&w!==null&&w.type===Nc&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case tm:e:{for(var k=w.key,N=v;N!==null;){if(N.key===k){if(k=w.type,k===Nc){if(N.tag===7){r(b,N.sibling),v=a(N,w.props.children),v.return=b,b=v;break e}}else if(N.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===lo&&Ij(k)===N.type){r(b,N.sibling),v=a(N,w.props),v.ref=td(b,N,w),v.return=b,b=v;break e}r(b,N);break}else t(b,N);N=N.sibling}w.type===Nc?(v=Al(w.props.children,b.mode,S,w.key),v.return=b,b=v):(S=o0(w.type,w.key,w.props,null,b.mode,S),S.ref=td(b,v,w),S.return=b,b=S)}return o(b);case jc:e:{for(N=w.key;v!==null;){if(v.key===N)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){r(b,v.sibling),v=a(v,w.children||[]),v.return=b,b=v;break e}else{r(b,v);break}else t(b,v);v=v.sibling}v=gx(w,b.mode,S),v.return=b,b=v}return o(b);case lo:return N=w._init,y(b,v,N(w._payload),S)}if(hd(w))return x(b,v,w,S);if(Ku(w))return g(b,v,w,S);hm(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(r(b,v.sibling),v=a(v,w),v.return=b,b=v):(r(b,v),v=xx(w,b.mode,S),v.return=b,b=v),o(b)):r(b,v)}return y}var iu=wS(!0),jS=wS(!1),R0=Wo(null),M0=null,Pc=null,my=null;function fy(){my=Pc=M0=null}function py(e){var t=R0.current;$r(R0),e._currentValue=t}function av(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Lc(e,t){M0=e,my=Pc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(js=!0),e.firstContext=null)}function ma(e){var t=e._currentValue;if(my!==e)if(e={context:e,memoizedValue:t,next:null},Pc===null){if(M0===null)throw Error(Je(308));Pc=e,M0.dependencies={lanes:0,firstContext:e}}else Pc=Pc.next=e;return t}var vl=null;function xy(e){vl===null?vl=[e]:vl.push(e)}function NS(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,xy(t)):(r.next=a.next,a.next=r),t.interleaved=r,Mi(e,s)}function Mi(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var co=!1;function gy(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function SS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ci(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function To(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,yr&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,Mi(e,r)}return a=s.interleaved,a===null?(t.next=t,xy(s)):(t.next=a.next,a.next=t),s.interleaved=t,Mi(e,r)}function t0(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,ry(e,r)}}function Dj(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function O0(e,t,r,s){var a=e.updateQueue;co=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;o=0,d=u=c=null,l=i;do{var m=l.lane,f=l.eventTime;if((s&m)===m){d!==null&&(d=d.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,g=l;switch(m=t,f=r,g.tag){case 1:if(x=g.payload,typeof x=="function"){h=x.call(f,h,m);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=g.payload,m=typeof x=="function"?x.call(f,h,m):x,m==null)break e;h=Kr({},h,m);break e;case 2:co=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[l]:m.push(l))}else f={eventTime:f,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=f,c=h):d=d.next=f,o|=m;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;m=l,l=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(d===null&&(c=h),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Ol|=o,e.lanes=o,e.memoizedState=h}}function Fj(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(Je(191,a));a.call(s)}}}var Ph={},ei=Wo(Ph),Kd=Wo(Ph),Jd=Wo(Ph);function yl(e){if(e===Ph)throw Error(Je(174));return e}function vy(e,t){switch(Dr(Jd,t),Dr(Kd,e),Dr(ei,Ph),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:zg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=zg(t,e)}$r(ei),Dr(ei,t)}function ou(){$r(ei),$r(Kd),$r(Jd)}function kS(e){yl(Jd.current);var t=yl(ei.current),r=zg(t,e.type);t!==r&&(Dr(Kd,e),Dr(ei,r))}function yy(e){Kd.current===e&&($r(ei),$r(Kd))}var Gr=Wo(0);function I0(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ux=[];function by(){for(var e=0;e<ux.length;e++)ux[e]._workInProgressVersionPrimary=null;ux.length=0}var r0=Gi.ReactCurrentDispatcher,dx=Gi.ReactCurrentBatchConfig,Ml=0,Yr=null,Sn=null,Tn=null,D0=!1,kd=!1,Xd=0,QR=0;function Un(){throw Error(Je(321))}function wy(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Da(e[r],t[r]))return!1;return!0}function jy(e,t,r,s,a,i){if(Ml=i,Yr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,r0.current=e===null||e.memoizedState===null?XR:ZR,e=r(s,a),kd){i=0;do{if(kd=!1,Xd=0,25<=i)throw Error(Je(301));i+=1,Tn=Sn=null,t.updateQueue=null,r0.current=eM,e=r(s,a)}while(kd)}if(r0.current=F0,t=Sn!==null&&Sn.next!==null,Ml=0,Tn=Sn=Yr=null,D0=!1,t)throw Error(Je(300));return e}function Ny(){var e=Xd!==0;return Xd=0,e}function Ba(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?Yr.memoizedState=Tn=e:Tn=Tn.next=e,Tn}function fa(){if(Sn===null){var e=Yr.alternate;e=e!==null?e.memoizedState:null}else e=Sn.next;var t=Tn===null?Yr.memoizedState:Tn.next;if(t!==null)Tn=t,Sn=e;else{if(e===null)throw Error(Je(310));Sn=e,e={memoizedState:Sn.memoizedState,baseState:Sn.baseState,baseQueue:Sn.baseQueue,queue:Sn.queue,next:null},Tn===null?Yr.memoizedState=Tn=e:Tn=Tn.next=e}return Tn}function Zd(e,t){return typeof t=="function"?t(e):t}function hx(e){var t=fa(),r=t.queue;if(r===null)throw Error(Je(311));r.lastRenderedReducer=e;var s=Sn,a=s.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}s.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,s=s.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Ml&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=s):c=c.next=h,Yr.lanes|=d,Ol|=d}u=u.next}while(u!==null&&u!==i);c===null?o=s:c.next=l,Da(s,t.memoizedState)||(js=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Yr.lanes|=i,Ol|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function mx(e){var t=fa(),r=t.queue;if(r===null)throw Error(Je(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Da(i,t.memoizedState)||(js=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,s]}function _S(){}function CS(e,t){var r=Yr,s=fa(),a=t(),i=!Da(s.memoizedState,a);if(i&&(s.memoizedState=a,js=!0),s=s.queue,Sy(AS.bind(null,r,s,e),[e]),s.getSnapshot!==t||i||Tn!==null&&Tn.memoizedState.tag&1){if(r.flags|=2048,eh(9,TS.bind(null,r,s,a,t),void 0,null),Rn===null)throw Error(Je(349));Ml&30||ES(r,t,a)}return a}function ES(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Yr.updateQueue,t===null?(t={lastEffect:null,stores:null},Yr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function TS(e,t,r,s){t.value=r,t.getSnapshot=s,PS(t)&&RS(e)}function AS(e,t,r){return r(function(){PS(t)&&RS(e)})}function PS(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Da(e,r)}catch{return!0}}function RS(e){var t=Mi(e,1);t!==null&&Oa(t,e,1,-1)}function Lj(e){var t=Ba();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zd,lastRenderedState:e},t.queue=e,e=e.dispatch=JR.bind(null,Yr,e),[t.memoizedState,e]}function eh(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=Yr.updateQueue,t===null?(t={lastEffect:null,stores:null},Yr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function MS(){return fa().memoizedState}function n0(e,t,r,s){var a=Ba();Yr.flags|=e,a.memoizedState=eh(1|t,r,void 0,s===void 0?null:s)}function Df(e,t,r,s){var a=fa();s=s===void 0?null:s;var i=void 0;if(Sn!==null){var o=Sn.memoizedState;if(i=o.destroy,s!==null&&wy(s,o.deps)){a.memoizedState=eh(t,r,i,s);return}}Yr.flags|=e,a.memoizedState=eh(1|t,r,i,s)}function zj(e,t){return n0(8390656,8,e,t)}function Sy(e,t){return Df(2048,8,e,t)}function OS(e,t){return Df(4,2,e,t)}function IS(e,t){return Df(4,4,e,t)}function DS(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function FS(e,t,r){return r=r!=null?r.concat([e]):null,Df(4,4,DS.bind(null,t,e),r)}function ky(){}function LS(e,t){var r=fa();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&wy(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function zS(e,t){var r=fa();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&wy(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function $S(e,t,r){return Ml&21?(Da(r,t)||(r=H3(),Yr.lanes|=r,Ol|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,js=!0),e.memoizedState=r)}function YR(e,t){var r=Ar;Ar=r!==0&&4>r?r:4,e(!0);var s=dx.transition;dx.transition={};try{e(!1),t()}finally{Ar=r,dx.transition=s}}function qS(){return fa().memoizedState}function KR(e,t,r){var s=Po(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},BS(e))US(t,r);else if(r=NS(e,t,r,s),r!==null){var a=cs();Oa(r,e,s,a),VS(r,t,s)}}function JR(e,t,r){var s=Po(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(BS(e))US(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,Da(l,o)){var c=t.interleaved;c===null?(a.next=a,xy(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=NS(e,t,a,s),r!==null&&(a=cs(),Oa(r,e,s,a),VS(r,t,s))}}function BS(e){var t=e.alternate;return e===Yr||t!==null&&t===Yr}function US(e,t){kd=D0=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function VS(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,ry(e,r)}}var F0={readContext:ma,useCallback:Un,useContext:Un,useEffect:Un,useImperativeHandle:Un,useInsertionEffect:Un,useLayoutEffect:Un,useMemo:Un,useReducer:Un,useRef:Un,useState:Un,useDebugValue:Un,useDeferredValue:Un,useTransition:Un,useMutableSource:Un,useSyncExternalStore:Un,useId:Un,unstable_isNewReconciler:!1},XR={readContext:ma,useCallback:function(e,t){return Ba().memoizedState=[e,t===void 0?null:t],e},useContext:ma,useEffect:zj,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,n0(4194308,4,DS.bind(null,t,e),r)},useLayoutEffect:function(e,t){return n0(4194308,4,e,t)},useInsertionEffect:function(e,t){return n0(4,2,e,t)},useMemo:function(e,t){var r=Ba();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Ba();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=KR.bind(null,Yr,e),[s.memoizedState,e]},useRef:function(e){var t=Ba();return e={current:e},t.memoizedState=e},useState:Lj,useDebugValue:ky,useDeferredValue:function(e){return Ba().memoizedState=e},useTransition:function(){var e=Lj(!1),t=e[0];return e=YR.bind(null,e[1]),Ba().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=Yr,a=Ba();if(Br){if(r===void 0)throw Error(Je(407));r=r()}else{if(r=t(),Rn===null)throw Error(Je(349));Ml&30||ES(s,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,zj(AS.bind(null,s,i,e),[e]),s.flags|=2048,eh(9,TS.bind(null,s,i,r,t),void 0,null),r},useId:function(){var e=Ba(),t=Rn.identifierPrefix;if(Br){var r=ki,s=Si;r=(s&~(1<<32-Ma(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=Xd++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=QR++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ZR={readContext:ma,useCallback:LS,useContext:ma,useEffect:Sy,useImperativeHandle:FS,useInsertionEffect:OS,useLayoutEffect:IS,useMemo:zS,useReducer:hx,useRef:MS,useState:function(){return hx(Zd)},useDebugValue:ky,useDeferredValue:function(e){var t=fa();return $S(t,Sn.memoizedState,e)},useTransition:function(){var e=hx(Zd)[0],t=fa().memoizedState;return[e,t]},useMutableSource:_S,useSyncExternalStore:CS,useId:qS,unstable_isNewReconciler:!1},eM={readContext:ma,useCallback:LS,useContext:ma,useEffect:Sy,useImperativeHandle:FS,useInsertionEffect:OS,useLayoutEffect:IS,useMemo:zS,useReducer:mx,useRef:MS,useState:function(){return mx(Zd)},useDebugValue:ky,useDeferredValue:function(e){var t=fa();return Sn===null?t.memoizedState=e:$S(t,Sn.memoizedState,e)},useTransition:function(){var e=mx(Zd)[0],t=fa().memoizedState;return[e,t]},useMutableSource:_S,useSyncExternalStore:CS,useId:qS,unstable_isNewReconciler:!1};function Sa(e,t){if(e&&e.defaultProps){t=Kr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function iv(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:Kr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ff={isMounted:function(e){return(e=e._reactInternals)?Yl(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=cs(),a=Po(e),i=Ci(s,a);i.payload=t,r!=null&&(i.callback=r),t=To(e,i,a),t!==null&&(Oa(t,e,a,s),t0(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=cs(),a=Po(e),i=Ci(s,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=To(e,i,a),t!==null&&(Oa(t,e,a,s),t0(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=cs(),s=Po(e),a=Ci(r,s);a.tag=2,t!=null&&(a.callback=t),t=To(e,a,s),t!==null&&(Oa(t,e,s,r),t0(t,e,s))}};function $j(e,t,r,s,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,o):t.prototype&&t.prototype.isPureReactComponent?!Wd(r,s)||!Wd(a,i):!0}function HS(e,t,r){var s=!1,a=Fo,i=t.contextType;return typeof i=="object"&&i!==null?i=ma(i):(a=Ss(t)?Pl:Jn.current,s=t.contextTypes,i=(s=s!=null)?su(e,a):Fo),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ff,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function qj(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&Ff.enqueueReplaceState(t,t.state,null)}function ov(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},gy(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=ma(i):(i=Ss(t)?Pl:Jn.current,a.context=su(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(iv(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Ff.enqueueReplaceState(a,a.state,null),O0(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function lu(e,t){try{var r="",s=t;do r+=EP(s),s=s.return;while(s);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function fx(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function lv(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var tM=typeof WeakMap=="function"?WeakMap:Map;function WS(e,t,r){r=Ci(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){z0||(z0=!0,vv=s),lv(e,t)},r}function GS(e,t,r){r=Ci(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){lv(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){lv(e,t),typeof s!="function"&&(Ao===null?Ao=new Set([this]):Ao.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Bj(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new tM;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=pM.bind(null,e,t,r),t.then(e,e))}function Uj(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Vj(e,t,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ci(-1,1),t.tag=2,To(r,t,1))),r.lanes|=1),e)}var rM=Gi.ReactCurrentOwner,js=!1;function ns(e,t,r,s){t.child=e===null?jS(t,null,r,s):iu(t,e.child,r,s)}function Hj(e,t,r,s,a){r=r.render;var i=t.ref;return Lc(t,a),s=jy(e,t,r,s,i,a),r=Ny(),e!==null&&!js?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Oi(e,t,a)):(Br&&r&&uy(t),t.flags|=1,ns(e,t,s,a),t.child)}function Wj(e,t,r,s,a){if(e===null){var i=r.type;return typeof i=="function"&&!My(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,QS(e,t,i,s,a)):(e=o0(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Wd,r(o,s)&&e.ref===t.ref)return Oi(e,t,a)}return t.flags|=1,e=Ro(i,s),e.ref=t.ref,e.return=t,t.child=e}function QS(e,t,r,s,a){if(e!==null){var i=e.memoizedProps;if(Wd(i,s)&&e.ref===t.ref)if(js=!1,t.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&(js=!0);else return t.lanes=e.lanes,Oi(e,t,a)}return cv(e,t,r,s,a)}function YS(e,t,r){var s=t.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dr(Mc,Ds),Ds|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Dr(Mc,Ds),Ds|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,Dr(Mc,Ds),Ds|=s}else i!==null?(s=i.baseLanes|r,t.memoizedState=null):s=r,Dr(Mc,Ds),Ds|=s;return ns(e,t,a,r),t.child}function KS(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function cv(e,t,r,s,a){var i=Ss(r)?Pl:Jn.current;return i=su(t,i),Lc(t,a),r=jy(e,t,r,s,i,a),s=Ny(),e!==null&&!js?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Oi(e,t,a)):(Br&&s&&uy(t),t.flags|=1,ns(e,t,r,a),t.child)}function Gj(e,t,r,s,a){if(Ss(r)){var i=!0;T0(t)}else i=!1;if(Lc(t,a),t.stateNode===null)s0(e,t),HS(t,r,s),ov(t,r,s,a),s=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=ma(u):(u=Ss(r)?Pl:Jn.current,u=su(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==u)&&qj(t,o,s,u),co=!1;var m=t.memoizedState;o.state=m,O0(t,s,o,a),c=t.memoizedState,l!==s||m!==c||Ns.current||co?(typeof d=="function"&&(iv(t,r,d,s),c=t.memoizedState),(l=co||$j(t,r,l,s,m,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),o.props=s,o.state=c,o.context=u,s=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,SS(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Sa(t.type,l),o.props=u,h=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=ma(c):(c=Ss(r)?Pl:Jn.current,c=su(t,c));var f=r.getDerivedStateFromProps;(d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==c)&&qj(t,o,s,c),co=!1,m=t.memoizedState,o.state=m,O0(t,s,o,a);var x=t.memoizedState;l!==h||m!==x||Ns.current||co?(typeof f=="function"&&(iv(t,r,f,s),x=t.memoizedState),(u=co||$j(t,r,u,s,m,x,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=x),o.props=s,o.state=x,o.context=c,s=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),s=!1)}return uv(e,t,r,s,i,a)}function uv(e,t,r,s,a,i){KS(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return a&&Rj(t,r,!1),Oi(e,t,i);s=t.stateNode,rM.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=iu(t,e.child,null,i),t.child=iu(t,null,l,i)):ns(e,t,l,i),t.memoizedState=s.state,a&&Rj(t,r,!0),t.child}function JS(e){var t=e.stateNode;t.pendingContext?Pj(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Pj(e,t.context,!1),vy(e,t.containerInfo)}function Qj(e,t,r,s,a){return au(),hy(a),t.flags|=256,ns(e,t,r,s),t.child}var dv={dehydrated:null,treeContext:null,retryLane:0};function hv(e){return{baseLanes:e,cachePool:null,transitions:null}}function XS(e,t,r){var s=t.pendingProps,a=Gr.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Dr(Gr,a&1),e===null)return sv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,i?(s=t.mode,i=t.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=$f(o,s,0,null),e=Al(e,s,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=hv(r),t.memoizedState=dv,e):_y(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return nM(e,t,o,s,l,a,r);if(i){i=s.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=Ro(a,c),s.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Ro(l,i):(i=Al(i,o,r,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,o=e.child.memoizedState,o=o===null?hv(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=dv,s}return i=e.child,e=i.sibling,s=Ro(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function _y(e,t){return t=$f({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function mm(e,t,r,s){return s!==null&&hy(s),iu(t,e.child,null,r),e=_y(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function nM(e,t,r,s,a,i,o){if(r)return t.flags&256?(t.flags&=-257,s=fx(Error(Je(422))),mm(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,a=t.mode,s=$f({mode:"visible",children:s.children},a,0,null),i=Al(i,a,o,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&iu(t,e.child,null,o),t.child.memoizedState=hv(o),t.memoizedState=dv,i);if(!(t.mode&1))return mm(e,t,o,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(Je(419)),s=fx(i,s,void 0),mm(e,t,o,s)}if(l=(o&e.childLanes)!==0,js||l){if(s=Rn,s!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Mi(e,a),Oa(s,e,a,-1))}return Ry(),s=fx(Error(Je(421))),mm(e,t,o,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=xM.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Us=Eo(a.nextSibling),Vs=t,Br=!0,Ra=null,e!==null&&(na[sa++]=Si,na[sa++]=ki,na[sa++]=Rl,Si=e.id,ki=e.overflow,Rl=t),t=_y(t,s.children),t.flags|=4096,t)}function Yj(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),av(e.return,t,r)}function px(e,t,r,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=a)}function ZS(e,t,r){var s=t.pendingProps,a=s.revealOrder,i=s.tail;if(ns(e,t,s.children,r),s=Gr.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Yj(e,r,t);else if(e.tag===19)Yj(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Dr(Gr,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&I0(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),px(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&I0(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}px(t,!0,r,null,i);break;case"together":px(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function s0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Oi(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ol|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Je(153));if(t.child!==null){for(e=t.child,r=Ro(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ro(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function sM(e,t,r){switch(t.tag){case 3:JS(t),au();break;case 5:kS(t);break;case 1:Ss(t.type)&&T0(t);break;case 4:vy(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;Dr(R0,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Dr(Gr,Gr.current&1),t.flags|=128,null):r&t.child.childLanes?XS(e,t,r):(Dr(Gr,Gr.current&1),e=Oi(e,t,r),e!==null?e.sibling:null);Dr(Gr,Gr.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return ZS(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Dr(Gr,Gr.current),s)break;return null;case 22:case 23:return t.lanes=0,YS(e,t,r)}return Oi(e,t,r)}var e6,mv,t6,r6;e6=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};mv=function(){};t6=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,yl(ei.current);var i=null;switch(r){case"input":a=Ig(e,a),s=Ig(e,s),i=[];break;case"select":a=Kr({},a,{value:void 0}),s=Kr({},s,{value:void 0}),i=[];break;case"textarea":a=Lg(e,a),s=Lg(e,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=C0)}$g(r,s);var o;r=null;for(u in a)if(!s.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(zd.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var c=s[u];if(l=a!=null?a[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(zd.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&zr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};r6=function(e,t,r,s){r!==s&&(t.flags|=4)};function rd(e,t){if(!Br)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Vn(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function aM(e,t,r){var s=t.pendingProps;switch(dy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(t),null;case 1:return Ss(t.type)&&E0(),Vn(t),null;case 3:return s=t.stateNode,ou(),$r(Ns),$r(Jn),by(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(dm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ra!==null&&(wv(Ra),Ra=null))),mv(e,t),Vn(t),null;case 5:yy(t);var a=yl(Jd.current);if(r=t.type,e!==null&&t.stateNode!=null)t6(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(Je(166));return Vn(t),null}if(e=yl(ei.current),dm(t)){s=t.stateNode,r=t.type;var i=t.memoizedProps;switch(s[Qa]=t,s[Yd]=i,e=(t.mode&1)!==0,r){case"dialog":zr("cancel",s),zr("close",s);break;case"iframe":case"object":case"embed":zr("load",s);break;case"video":case"audio":for(a=0;a<fd.length;a++)zr(fd[a],s);break;case"source":zr("error",s);break;case"img":case"image":case"link":zr("error",s),zr("load",s);break;case"details":zr("toggle",s);break;case"input":sj(s,i),zr("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},zr("invalid",s);break;case"textarea":ij(s,i),zr("invalid",s)}$g(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&um(s.textContent,l,e),a=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&um(s.textContent,l,e),a=["children",""+l]):zd.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&zr("scroll",s)}switch(r){case"input":rm(s),aj(s,i,!0);break;case"textarea":rm(s),oj(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=C0)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=A3(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(r,{is:s.is}):(e=o.createElement(r),r==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,r),e[Qa]=t,e[Yd]=s,e6(e,t,!1,!1),t.stateNode=e;e:{switch(o=qg(r,s),r){case"dialog":zr("cancel",e),zr("close",e),a=s;break;case"iframe":case"object":case"embed":zr("load",e),a=s;break;case"video":case"audio":for(a=0;a<fd.length;a++)zr(fd[a],e);a=s;break;case"source":zr("error",e),a=s;break;case"img":case"image":case"link":zr("error",e),zr("load",e),a=s;break;case"details":zr("toggle",e),a=s;break;case"input":sj(e,s),a=Ig(e,s),zr("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=Kr({},s,{value:void 0}),zr("invalid",e);break;case"textarea":ij(e,s),a=Lg(e,s),zr("invalid",e);break;default:a=s}$g(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?M3(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&P3(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&$d(e,c):typeof c=="number"&&$d(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(zd.hasOwnProperty(i)?c!=null&&i==="onScroll"&&zr("scroll",e):c!=null&&K1(e,i,c,o))}switch(r){case"input":rm(e),aj(e,s,!1);break;case"textarea":rm(e),oj(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Do(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?Oc(e,!!s.multiple,i,!1):s.defaultValue!=null&&Oc(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=C0)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Vn(t),null;case 6:if(e&&t.stateNode!=null)r6(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Je(166));if(r=yl(Jd.current),yl(ei.current),dm(t)){if(s=t.stateNode,r=t.memoizedProps,s[Qa]=t,(i=s.nodeValue!==r)&&(e=Vs,e!==null))switch(e.tag){case 3:um(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&um(s.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Qa]=t,t.stateNode=s}return Vn(t),null;case 13:if($r(Gr),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Br&&Us!==null&&t.mode&1&&!(t.flags&128))bS(),au(),t.flags|=98560,i=!1;else if(i=dm(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(Je(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Je(317));i[Qa]=t}else au(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Vn(t),i=!1}else Ra!==null&&(wv(Ra),Ra=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Gr.current&1?kn===0&&(kn=3):Ry())),t.updateQueue!==null&&(t.flags|=4),Vn(t),null);case 4:return ou(),mv(e,t),e===null&&Gd(t.stateNode.containerInfo),Vn(t),null;case 10:return py(t.type._context),Vn(t),null;case 17:return Ss(t.type)&&E0(),Vn(t),null;case 19:if($r(Gr),i=t.memoizedState,i===null)return Vn(t),null;if(s=(t.flags&128)!==0,o=i.rendering,o===null)if(s)rd(i,!1);else{if(kn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=I0(e),o!==null){for(t.flags|=128,rd(i,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)i=r,e=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Dr(Gr,Gr.current&1|2),t.child}e=e.sibling}i.tail!==null&&cn()>cu&&(t.flags|=128,s=!0,rd(i,!1),t.lanes=4194304)}else{if(!s)if(e=I0(o),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),rd(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Br)return Vn(t),null}else 2*cn()-i.renderingStartTime>cu&&r!==1073741824&&(t.flags|=128,s=!0,rd(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=cn(),t.sibling=null,r=Gr.current,Dr(Gr,s?r&1|2:r&1),t):(Vn(t),null);case 22:case 23:return Py(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Ds&1073741824&&(Vn(t),t.subtreeFlags&6&&(t.flags|=8192)):Vn(t),null;case 24:return null;case 25:return null}throw Error(Je(156,t.tag))}function iM(e,t){switch(dy(t),t.tag){case 1:return Ss(t.type)&&E0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ou(),$r(Ns),$r(Jn),by(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return yy(t),null;case 13:if($r(Gr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Je(340));au()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $r(Gr),null;case 4:return ou(),null;case 10:return py(t.type._context),null;case 22:case 23:return Py(),null;case 24:return null;default:return null}}var fm=!1,Gn=!1,oM=typeof WeakSet=="function"?WeakSet:Set,kt=null;function Rc(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){en(e,t,s)}else r.current=null}function fv(e,t,r){try{r()}catch(s){en(e,t,s)}}var Kj=!1;function lM(e,t){if(Jg=S0,e=oS(),cy(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,m=null;t:for(;;){for(var f;h!==r||a!==0&&h.nodeType!==3||(l=o+a),h!==i||s!==0&&h.nodeType!==3||(c=o+s),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)m=h,h=f;for(;;){if(h===e)break t;if(m===r&&++u===a&&(l=o),m===i&&++d===s&&(c=o),(f=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=f}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Xg={focusedElem:e,selectionRange:r},S0=!1,kt=t;kt!==null;)if(t=kt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,kt=e;else for(;kt!==null;){t=kt;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var g=x.memoizedProps,y=x.memoizedState,b=t.stateNode,v=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:Sa(t.type,g),y);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Je(163))}}catch(S){en(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,kt=e;break}kt=t.return}return x=Kj,Kj=!1,x}function _d(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&fv(t,r,i)}a=a.next}while(a!==s)}}function Lf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function pv(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function n6(e){var t=e.alternate;t!==null&&(e.alternate=null,n6(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Qa],delete t[Yd],delete t[tv],delete t[VR],delete t[HR])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function s6(e){return e.tag===5||e.tag===3||e.tag===4}function Jj(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||s6(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function xv(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=C0));else if(s!==4&&(e=e.child,e!==null))for(xv(e,t,r),e=e.sibling;e!==null;)xv(e,t,r),e=e.sibling}function gv(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(gv(e,t,r),e=e.sibling;e!==null;)gv(e,t,r),e=e.sibling}var Dn=null,Ta=!1;function Xi(e,t,r){for(r=r.child;r!==null;)a6(e,t,r),r=r.sibling}function a6(e,t,r){if(Za&&typeof Za.onCommitFiberUnmount=="function")try{Za.onCommitFiberUnmount(Af,r)}catch{}switch(r.tag){case 5:Gn||Rc(r,t);case 6:var s=Dn,a=Ta;Dn=null,Xi(e,t,r),Dn=s,Ta=a,Dn!==null&&(Ta?(e=Dn,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Dn.removeChild(r.stateNode));break;case 18:Dn!==null&&(Ta?(e=Dn,r=r.stateNode,e.nodeType===8?lx(e.parentNode,r):e.nodeType===1&&lx(e,r),Vd(e)):lx(Dn,r.stateNode));break;case 4:s=Dn,a=Ta,Dn=r.stateNode.containerInfo,Ta=!0,Xi(e,t,r),Dn=s,Ta=a;break;case 0:case 11:case 14:case 15:if(!Gn&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&fv(r,t,o),a=a.next}while(a!==s)}Xi(e,t,r);break;case 1:if(!Gn&&(Rc(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(l){en(r,t,l)}Xi(e,t,r);break;case 21:Xi(e,t,r);break;case 22:r.mode&1?(Gn=(s=Gn)||r.memoizedState!==null,Xi(e,t,r),Gn=s):Xi(e,t,r);break;default:Xi(e,t,r)}}function Xj(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new oM),t.forEach(function(s){var a=gM.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function ba(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Dn=l.stateNode,Ta=!1;break e;case 3:Dn=l.stateNode.containerInfo,Ta=!0;break e;case 4:Dn=l.stateNode.containerInfo,Ta=!0;break e}l=l.return}if(Dn===null)throw Error(Je(160));a6(i,o,a),Dn=null,Ta=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){en(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)i6(t,e),t=t.sibling}function i6(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ba(t,e),qa(e),s&4){try{_d(3,e,e.return),Lf(3,e)}catch(g){en(e,e.return,g)}try{_d(5,e,e.return)}catch(g){en(e,e.return,g)}}break;case 1:ba(t,e),qa(e),s&512&&r!==null&&Rc(r,r.return);break;case 5:if(ba(t,e),qa(e),s&512&&r!==null&&Rc(r,r.return),e.flags&32){var a=e.stateNode;try{$d(a,"")}catch(g){en(e,e.return,g)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&E3(a,i),qg(l,o);var u=qg(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?M3(a,h):d==="dangerouslySetInnerHTML"?P3(a,h):d==="children"?$d(a,h):K1(a,d,h,u)}switch(l){case"input":Dg(a,i);break;case"textarea":T3(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Oc(a,!!i.multiple,f,!1):m!==!!i.multiple&&(i.defaultValue!=null?Oc(a,!!i.multiple,i.defaultValue,!0):Oc(a,!!i.multiple,i.multiple?[]:"",!1))}a[Yd]=i}catch(g){en(e,e.return,g)}}break;case 6:if(ba(t,e),qa(e),s&4){if(e.stateNode===null)throw Error(Je(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){en(e,e.return,g)}}break;case 3:if(ba(t,e),qa(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Vd(t.containerInfo)}catch(g){en(e,e.return,g)}break;case 4:ba(t,e),qa(e);break;case 13:ba(t,e),qa(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Ty=cn())),s&4&&Xj(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Gn=(u=Gn)||d,ba(t,e),Gn=u):ba(t,e),qa(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(kt=e,d=e.child;d!==null;){for(h=kt=d;kt!==null;){switch(m=kt,f=m.child,m.tag){case 0:case 11:case 14:case 15:_d(4,m,m.return);break;case 1:Rc(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){s=m,r=m.return;try{t=s,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(g){en(s,r,g)}}break;case 5:Rc(m,m.return);break;case 22:if(m.memoizedState!==null){e2(h);continue}}f!==null?(f.return=m,kt=f):e2(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{a=h.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=R3("display",o))}catch(g){en(e,e.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){en(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ba(t,e),qa(e),s&4&&Xj(e);break;case 21:break;default:ba(t,e),qa(e)}}function qa(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(s6(r)){var s=r;break e}r=r.return}throw Error(Je(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&($d(a,""),s.flags&=-33);var i=Jj(e);gv(e,i,a);break;case 3:case 4:var o=s.stateNode.containerInfo,l=Jj(e);xv(e,l,o);break;default:throw Error(Je(161))}}catch(c){en(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function cM(e,t,r){kt=e,o6(e)}function o6(e,t,r){for(var s=(e.mode&1)!==0;kt!==null;){var a=kt,i=a.child;if(a.tag===22&&s){var o=a.memoizedState!==null||fm;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Gn;l=fm;var u=Gn;if(fm=o,(Gn=c)&&!u)for(kt=a;kt!==null;)o=kt,c=o.child,o.tag===22&&o.memoizedState!==null?t2(a):c!==null?(c.return=o,kt=c):t2(a);for(;i!==null;)kt=i,o6(i),i=i.sibling;kt=a,fm=l,Gn=u}Zj(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,kt=i):Zj(e)}}function Zj(e){for(;kt!==null;){var t=kt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Gn||Lf(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Gn)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Sa(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Fj(t,i,s);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Fj(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Vd(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Je(163))}Gn||t.flags&512&&pv(t)}catch(m){en(t,t.return,m)}}if(t===e){kt=null;break}if(r=t.sibling,r!==null){r.return=t.return,kt=r;break}kt=t.return}}function e2(e){for(;kt!==null;){var t=kt;if(t===e){kt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,kt=r;break}kt=t.return}}function t2(e){for(;kt!==null;){var t=kt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Lf(4,t)}catch(c){en(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(c){en(t,a,c)}}var i=t.return;try{pv(t)}catch(c){en(t,i,c)}break;case 5:var o=t.return;try{pv(t)}catch(c){en(t,o,c)}}}catch(c){en(t,t.return,c)}if(t===e){kt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,kt=l;break}kt=t.return}}var uM=Math.ceil,L0=Gi.ReactCurrentDispatcher,Cy=Gi.ReactCurrentOwner,ca=Gi.ReactCurrentBatchConfig,yr=0,Rn=null,gn=null,Ln=0,Ds=0,Mc=Wo(0),kn=0,th=null,Ol=0,zf=0,Ey=0,Cd=null,ws=null,Ty=0,cu=1/0,gi=null,z0=!1,vv=null,Ao=null,pm=!1,wo=null,$0=0,Ed=0,yv=null,a0=-1,i0=0;function cs(){return yr&6?cn():a0!==-1?a0:a0=cn()}function Po(e){return e.mode&1?yr&2&&Ln!==0?Ln&-Ln:GR.transition!==null?(i0===0&&(i0=H3()),i0):(e=Ar,e!==0||(e=window.event,e=e===void 0?16:X3(e.type)),e):1}function Oa(e,t,r,s){if(50<Ed)throw Ed=0,yv=null,Error(Je(185));Eh(e,r,s),(!(yr&2)||e!==Rn)&&(e===Rn&&(!(yr&2)&&(zf|=r),kn===4&&mo(e,Ln)),ks(e,s),r===1&&yr===0&&!(t.mode&1)&&(cu=cn()+500,If&&Go()))}function ks(e,t){var r=e.callbackNode;GP(e,t);var s=N0(e,e===Rn?Ln:0);if(s===0)r!==null&&uj(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&uj(r),t===1)e.tag===0?WR(r2.bind(null,e)):gS(r2.bind(null,e)),BR(function(){!(yr&6)&&Go()}),r=null;else{switch(W3(s)){case 1:r=ty;break;case 4:r=U3;break;case 16:r=j0;break;case 536870912:r=V3;break;default:r=j0}r=p6(r,l6.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function l6(e,t){if(a0=-1,i0=0,yr&6)throw Error(Je(327));var r=e.callbackNode;if(zc()&&e.callbackNode!==r)return null;var s=N0(e,e===Rn?Ln:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=q0(e,s);else{t=s;var a=yr;yr|=2;var i=u6();(Rn!==e||Ln!==t)&&(gi=null,cu=cn()+500,Tl(e,t));do try{mM();break}catch(l){c6(e,l)}while(!0);fy(),L0.current=i,yr=a,gn!==null?t=0:(Rn=null,Ln=0,t=kn)}if(t!==0){if(t===2&&(a=Wg(e),a!==0&&(s=a,t=bv(e,a))),t===1)throw r=th,Tl(e,0),mo(e,s),ks(e,cn()),r;if(t===6)mo(e,s);else{if(a=e.current.alternate,!(s&30)&&!dM(a)&&(t=q0(e,s),t===2&&(i=Wg(e),i!==0&&(s=i,t=bv(e,i))),t===1))throw r=th,Tl(e,0),mo(e,s),ks(e,cn()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(Je(345));case 2:cl(e,ws,gi);break;case 3:if(mo(e,s),(s&130023424)===s&&(t=Ty+500-cn(),10<t)){if(N0(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){cs(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ev(cl.bind(null,e,ws,gi),t);break}cl(e,ws,gi);break;case 4:if(mo(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var o=31-Ma(s);i=1<<o,o=t[o],o>a&&(a=o),s&=~i}if(s=a,s=cn()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*uM(s/1960))-s,10<s){e.timeoutHandle=ev(cl.bind(null,e,ws,gi),s);break}cl(e,ws,gi);break;case 5:cl(e,ws,gi);break;default:throw Error(Je(329))}}}return ks(e,cn()),e.callbackNode===r?l6.bind(null,e):null}function bv(e,t){var r=Cd;return e.current.memoizedState.isDehydrated&&(Tl(e,t).flags|=256),e=q0(e,t),e!==2&&(t=ws,ws=r,t!==null&&wv(t)),e}function wv(e){ws===null?ws=e:ws.push.apply(ws,e)}function dM(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],i=a.getSnapshot;a=a.value;try{if(!Da(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function mo(e,t){for(t&=~Ey,t&=~zf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ma(t),s=1<<r;e[r]=-1,t&=~s}}function r2(e){if(yr&6)throw Error(Je(327));zc();var t=N0(e,0);if(!(t&1))return ks(e,cn()),null;var r=q0(e,t);if(e.tag!==0&&r===2){var s=Wg(e);s!==0&&(t=s,r=bv(e,s))}if(r===1)throw r=th,Tl(e,0),mo(e,t),ks(e,cn()),r;if(r===6)throw Error(Je(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,cl(e,ws,gi),ks(e,cn()),null}function Ay(e,t){var r=yr;yr|=1;try{return e(t)}finally{yr=r,yr===0&&(cu=cn()+500,If&&Go())}}function Il(e){wo!==null&&wo.tag===0&&!(yr&6)&&zc();var t=yr;yr|=1;var r=ca.transition,s=Ar;try{if(ca.transition=null,Ar=1,e)return e()}finally{Ar=s,ca.transition=r,yr=t,!(yr&6)&&Go()}}function Py(){Ds=Mc.current,$r(Mc)}function Tl(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,qR(r)),gn!==null)for(r=gn.return;r!==null;){var s=r;switch(dy(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&E0();break;case 3:ou(),$r(Ns),$r(Jn),by();break;case 5:yy(s);break;case 4:ou();break;case 13:$r(Gr);break;case 19:$r(Gr);break;case 10:py(s.type._context);break;case 22:case 23:Py()}r=r.return}if(Rn=e,gn=e=Ro(e.current,null),Ln=Ds=t,kn=0,th=null,Ey=zf=Ol=0,ws=Cd=null,vl!==null){for(t=0;t<vl.length;t++)if(r=vl[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,s.next=o}r.pending=s}vl=null}return e}function c6(e,t){do{var r=gn;try{if(fy(),r0.current=F0,D0){for(var s=Yr.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}D0=!1}if(Ml=0,Tn=Sn=Yr=null,kd=!1,Xd=0,Cy.current=null,r===null||r.return===null){kn=1,th=t,gn=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Ln,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=Uj(o);if(f!==null){f.flags&=-257,Vj(f,o,l,i,t),f.mode&1&&Bj(i,u,t),t=f,c=u;var x=t.updateQueue;if(x===null){var g=new Set;g.add(c),t.updateQueue=g}else x.add(c);break e}else{if(!(t&1)){Bj(i,u,t),Ry();break e}c=Error(Je(426))}}else if(Br&&l.mode&1){var y=Uj(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Vj(y,o,l,i,t),hy(lu(c,l));break e}}i=c=lu(c,l),kn!==4&&(kn=2),Cd===null?Cd=[i]:Cd.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var b=WS(i,c,t);Dj(i,b);break e;case 1:l=c;var v=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ao===null||!Ao.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=GS(i,l,t);Dj(i,S);break e}}i=i.return}while(i!==null)}h6(r)}catch(k){t=k,gn===r&&r!==null&&(gn=r=r.return);continue}break}while(!0)}function u6(){var e=L0.current;return L0.current=F0,e===null?F0:e}function Ry(){(kn===0||kn===3||kn===2)&&(kn=4),Rn===null||!(Ol&268435455)&&!(zf&268435455)||mo(Rn,Ln)}function q0(e,t){var r=yr;yr|=2;var s=u6();(Rn!==e||Ln!==t)&&(gi=null,Tl(e,t));do try{hM();break}catch(a){c6(e,a)}while(!0);if(fy(),yr=r,L0.current=s,gn!==null)throw Error(Je(261));return Rn=null,Ln=0,kn}function hM(){for(;gn!==null;)d6(gn)}function mM(){for(;gn!==null&&!LP();)d6(gn)}function d6(e){var t=f6(e.alternate,e,Ds);e.memoizedProps=e.pendingProps,t===null?h6(e):gn=t,Cy.current=null}function h6(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=iM(r,t),r!==null){r.flags&=32767,gn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{kn=6,gn=null;return}}else if(r=aM(r,t,Ds),r!==null){gn=r;return}if(t=t.sibling,t!==null){gn=t;return}gn=t=e}while(t!==null);kn===0&&(kn=5)}function cl(e,t,r){var s=Ar,a=ca.transition;try{ca.transition=null,Ar=1,fM(e,t,r,s)}finally{ca.transition=a,Ar=s}return null}function fM(e,t,r,s){do zc();while(wo!==null);if(yr&6)throw Error(Je(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Je(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(QP(e,i),e===Rn&&(gn=Rn=null,Ln=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||pm||(pm=!0,p6(j0,function(){return zc(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ca.transition,ca.transition=null;var o=Ar;Ar=1;var l=yr;yr|=4,Cy.current=null,lM(e,r),i6(r,e),OR(Xg),S0=!!Jg,Xg=Jg=null,e.current=r,cM(r),zP(),yr=l,Ar=o,ca.transition=i}else e.current=r;if(pm&&(pm=!1,wo=e,$0=a),i=e.pendingLanes,i===0&&(Ao=null),BP(r.stateNode),ks(e,cn()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(z0)throw z0=!1,e=vv,vv=null,e;return $0&1&&e.tag!==0&&zc(),i=e.pendingLanes,i&1?e===yv?Ed++:(Ed=0,yv=e):Ed=0,Go(),null}function zc(){if(wo!==null){var e=W3($0),t=ca.transition,r=Ar;try{if(ca.transition=null,Ar=16>e?16:e,wo===null)var s=!1;else{if(e=wo,wo=null,$0=0,yr&6)throw Error(Je(331));var a=yr;for(yr|=4,kt=e.current;kt!==null;){var i=kt,o=i.child;if(kt.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(kt=u;kt!==null;){var d=kt;switch(d.tag){case 0:case 11:case 15:_d(8,d,i)}var h=d.child;if(h!==null)h.return=d,kt=h;else for(;kt!==null;){d=kt;var m=d.sibling,f=d.return;if(n6(d),d===u){kt=null;break}if(m!==null){m.return=f,kt=m;break}kt=f}}}var x=i.alternate;if(x!==null){var g=x.child;if(g!==null){x.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}kt=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,kt=o;else e:for(;kt!==null;){if(i=kt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:_d(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,kt=b;break e}kt=i.return}}var v=e.current;for(kt=v;kt!==null;){o=kt;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,kt=w;else e:for(o=v;kt!==null;){if(l=kt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Lf(9,l)}}catch(k){en(l,l.return,k)}if(l===o){kt=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,kt=S;break e}kt=l.return}}if(yr=a,Go(),Za&&typeof Za.onPostCommitFiberRoot=="function")try{Za.onPostCommitFiberRoot(Af,e)}catch{}s=!0}return s}finally{Ar=r,ca.transition=t}}return!1}function n2(e,t,r){t=lu(r,t),t=WS(e,t,1),e=To(e,t,1),t=cs(),e!==null&&(Eh(e,1,t),ks(e,t))}function en(e,t,r){if(e.tag===3)n2(e,e,r);else for(;t!==null;){if(t.tag===3){n2(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ao===null||!Ao.has(s))){e=lu(r,e),e=GS(t,e,1),t=To(t,e,1),e=cs(),t!==null&&(Eh(t,1,e),ks(t,e));break}}t=t.return}}function pM(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=cs(),e.pingedLanes|=e.suspendedLanes&r,Rn===e&&(Ln&r)===r&&(kn===4||kn===3&&(Ln&130023424)===Ln&&500>cn()-Ty?Tl(e,0):Ey|=r),ks(e,t)}function m6(e,t){t===0&&(e.mode&1?(t=am,am<<=1,!(am&130023424)&&(am=4194304)):t=1);var r=cs();e=Mi(e,t),e!==null&&(Eh(e,t,r),ks(e,r))}function xM(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),m6(e,r)}function gM(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(Je(314))}s!==null&&s.delete(t),m6(e,r)}var f6;f6=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ns.current)js=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return js=!1,sM(e,t,r);js=!!(e.flags&131072)}else js=!1,Br&&t.flags&1048576&&vS(t,P0,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;s0(e,t),e=t.pendingProps;var a=su(t,Jn.current);Lc(t,r),a=jy(null,t,s,e,a,r);var i=Ny();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ss(s)?(i=!0,T0(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,gy(t),a.updater=Ff,t.stateNode=a,a._reactInternals=t,ov(t,s,e,r),t=uv(null,t,s,!0,i,r)):(t.tag=0,Br&&i&&uy(t),ns(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(s0(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=yM(s),e=Sa(s,e),a){case 0:t=cv(null,t,s,e,r);break e;case 1:t=Gj(null,t,s,e,r);break e;case 11:t=Hj(null,t,s,e,r);break e;case 14:t=Wj(null,t,s,Sa(s.type,e),r);break e}throw Error(Je(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Sa(s,a),cv(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Sa(s,a),Gj(e,t,s,a,r);case 3:e:{if(JS(t),e===null)throw Error(Je(387));s=t.pendingProps,i=t.memoizedState,a=i.element,SS(e,t),O0(t,s,null,r);var o=t.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=lu(Error(Je(423)),t),t=Qj(e,t,s,r,a);break e}else if(s!==a){a=lu(Error(Je(424)),t),t=Qj(e,t,s,r,a);break e}else for(Us=Eo(t.stateNode.containerInfo.firstChild),Vs=t,Br=!0,Ra=null,r=jS(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(au(),s===a){t=Oi(e,t,r);break e}ns(e,t,s,r)}t=t.child}return t;case 5:return kS(t),e===null&&sv(t),s=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,Zg(s,a)?o=null:i!==null&&Zg(s,i)&&(t.flags|=32),KS(e,t),ns(e,t,o,r),t.child;case 6:return e===null&&sv(t),null;case 13:return XS(e,t,r);case 4:return vy(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=iu(t,null,s,r):ns(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Sa(s,a),Hj(e,t,s,a,r);case 7:return ns(e,t,t.pendingProps,r),t.child;case 8:return ns(e,t,t.pendingProps.children,r),t.child;case 12:return ns(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Dr(R0,s._currentValue),s._currentValue=o,i!==null)if(Da(i.value,o)){if(i.children===a.children&&!Ns.current){t=Oi(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=Ci(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),av(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Je(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),av(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ns(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,Lc(t,r),a=ma(a),s=s(a),t.flags|=1,ns(e,t,s,r),t.child;case 14:return s=t.type,a=Sa(s,t.pendingProps),a=Sa(s.type,a),Wj(e,t,s,a,r);case 15:return QS(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Sa(s,a),s0(e,t),t.tag=1,Ss(s)?(e=!0,T0(t)):e=!1,Lc(t,r),HS(t,s,a),ov(t,s,a,r),uv(null,t,s,!0,e,r);case 19:return ZS(e,t,r);case 22:return YS(e,t,r)}throw Error(Je(156,t.tag))};function p6(e,t){return B3(e,t)}function vM(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oa(e,t,r,s){return new vM(e,t,r,s)}function My(e){return e=e.prototype,!(!e||!e.isReactComponent)}function yM(e){if(typeof e=="function")return My(e)?1:0;if(e!=null){if(e=e.$$typeof,e===X1)return 11;if(e===Z1)return 14}return 2}function Ro(e,t){var r=e.alternate;return r===null?(r=oa(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function o0(e,t,r,s,a,i){var o=2;if(s=e,typeof e=="function")My(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Nc:return Al(r.children,a,i,t);case J1:o=8,a|=8;break;case Pg:return e=oa(12,r,t,a|2),e.elementType=Pg,e.lanes=i,e;case Rg:return e=oa(13,r,t,a),e.elementType=Rg,e.lanes=i,e;case Mg:return e=oa(19,r,t,a),e.elementType=Mg,e.lanes=i,e;case k3:return $f(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case N3:o=10;break e;case S3:o=9;break e;case X1:o=11;break e;case Z1:o=14;break e;case lo:o=16,s=null;break e}throw Error(Je(130,e==null?e:typeof e,""))}return t=oa(o,r,t,a),t.elementType=e,t.type=s,t.lanes=i,t}function Al(e,t,r,s){return e=oa(7,e,s,t),e.lanes=r,e}function $f(e,t,r,s){return e=oa(22,e,s,t),e.elementType=k3,e.lanes=r,e.stateNode={isHidden:!1},e}function xx(e,t,r){return e=oa(6,e,null,t),e.lanes=r,e}function gx(e,t,r){return t=oa(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function bM(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jp(0),this.expirationTimes=Jp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jp(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Oy(e,t,r,s,a,i,o,l,c){return e=new bM(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=oa(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},gy(i),e}function wM(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jc,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function x6(e){if(!e)return Fo;e=e._reactInternals;e:{if(Yl(e)!==e||e.tag!==1)throw Error(Je(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ss(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Je(171))}if(e.tag===1){var r=e.type;if(Ss(r))return xS(e,r,t)}return t}function g6(e,t,r,s,a,i,o,l,c){return e=Oy(r,s,!0,e,a,i,o,l,c),e.context=x6(null),r=e.current,s=cs(),a=Po(r),i=Ci(s,a),i.callback=t??null,To(r,i,a),e.current.lanes=a,Eh(e,a,s),ks(e,s),e}function qf(e,t,r,s){var a=t.current,i=cs(),o=Po(a);return r=x6(r),t.context===null?t.context=r:t.pendingContext=r,t=Ci(i,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=To(a,t,o),e!==null&&(Oa(e,a,o,i),t0(e,a,o)),o}function B0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function s2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Iy(e,t){s2(e,t),(e=e.alternate)&&s2(e,t)}function jM(){return null}var v6=typeof reportError=="function"?reportError:function(e){console.error(e)};function Dy(e){this._internalRoot=e}Bf.prototype.render=Dy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Je(409));qf(e,t,null,null)};Bf.prototype.unmount=Dy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Il(function(){qf(null,e,null,null)}),t[Ri]=null}};function Bf(e){this._internalRoot=e}Bf.prototype.unstable_scheduleHydration=function(e){if(e){var t=Y3();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ho.length&&t!==0&&t<ho[r].priority;r++);ho.splice(r,0,e),r===0&&J3(e)}};function Fy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Uf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function a2(){}function NM(e,t,r,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var u=B0(o);i.call(u)}}var o=g6(t,s,e,0,null,!1,!1,"",a2);return e._reactRootContainer=o,e[Ri]=o.current,Gd(e.nodeType===8?e.parentNode:e),Il(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var l=s;s=function(){var u=B0(c);l.call(u)}}var c=Oy(e,0,!1,null,null,!1,!1,"",a2);return e._reactRootContainer=c,e[Ri]=c.current,Gd(e.nodeType===8?e.parentNode:e),Il(function(){qf(t,c,r,s)}),c}function Vf(e,t,r,s,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=B0(o);l.call(c)}}qf(t,o,e,a)}else o=NM(r,t,e,a,s);return B0(o)}G3=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=md(t.pendingLanes);r!==0&&(ry(t,r|1),ks(t,cn()),!(yr&6)&&(cu=cn()+500,Go()))}break;case 13:Il(function(){var s=Mi(e,1);if(s!==null){var a=cs();Oa(s,e,1,a)}}),Iy(e,1)}};ny=function(e){if(e.tag===13){var t=Mi(e,134217728);if(t!==null){var r=cs();Oa(t,e,134217728,r)}Iy(e,134217728)}};Q3=function(e){if(e.tag===13){var t=Po(e),r=Mi(e,t);if(r!==null){var s=cs();Oa(r,e,t,s)}Iy(e,t)}};Y3=function(){return Ar};K3=function(e,t){var r=Ar;try{return Ar=e,t()}finally{Ar=r}};Ug=function(e,t,r){switch(t){case"input":if(Dg(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=Of(s);if(!a)throw Error(Je(90));C3(s),Dg(s,a)}}}break;case"textarea":T3(e,r);break;case"select":t=r.value,t!=null&&Oc(e,!!r.multiple,t,!1)}};D3=Ay;F3=Il;var SM={usingClientEntryPoint:!1,Events:[Ah,Cc,Of,O3,I3,Ay]},nd={findFiberByHostInstance:gl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kM={bundleType:nd.bundleType,version:nd.version,rendererPackageName:nd.rendererPackageName,rendererConfig:nd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=$3(e),e===null?null:e.stateNode},findFiberByHostInstance:nd.findFiberByHostInstance||jM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xm.isDisabled&&xm.supportsFiber)try{Af=xm.inject(kM),Za=xm}catch{}}Js.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SM;Js.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fy(t))throw Error(Je(200));return wM(e,t,null,r)};Js.createRoot=function(e,t){if(!Fy(e))throw Error(Je(299));var r=!1,s="",a=v6;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Oy(e,1,!1,null,null,r,!1,s,a),e[Ri]=t.current,Gd(e.nodeType===8?e.parentNode:e),new Dy(t)};Js.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Je(188)):(e=Object.keys(e).join(","),Error(Je(268,e)));return e=$3(t),e=e===null?null:e.stateNode,e};Js.flushSync=function(e){return Il(e)};Js.hydrate=function(e,t,r){if(!Uf(t))throw Error(Je(200));return Vf(null,e,t,!0,r)};Js.hydrateRoot=function(e,t,r){if(!Fy(e))throw Error(Je(405));var s=r!=null&&r.hydratedSources||null,a=!1,i="",o=v6;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=g6(t,null,e,1,r??null,a,!1,i,o),e[Ri]=t.current,Gd(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Bf(t)};Js.render=function(e,t,r){if(!Uf(t))throw Error(Je(200));return Vf(null,e,t,!1,r)};Js.unmountComponentAtNode=function(e){if(!Uf(e))throw Error(Je(40));return e._reactRootContainer?(Il(function(){Vf(null,null,e,!1,function(){e._reactRootContainer=null,e[Ri]=null})}),!0):!1};Js.unstable_batchedUpdates=Ay;Js.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Uf(r))throw Error(Je(200));if(e==null||e._reactInternals===void 0)throw Error(Je(38));return Vf(e,t,r,!1,s)};Js.version="18.3.1-next-f1338f8080-20240426";function y6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(y6)}catch(e){console.error(e)}}y6(),y3.exports=Js;var Kl=y3.exports;const b6=Ef(Kl);var w6,i2=Kl;w6=i2.createRoot,i2.hydrateRoot;const _M=1,CM=1e6;let vx=0;function EM(){return vx=(vx+1)%Number.MAX_SAFE_INTEGER,vx.toString()}const yx=new Map,o2=e=>{if(yx.has(e))return;const t=setTimeout(()=>{yx.delete(e),Td({type:"REMOVE_TOAST",toastId:e})},CM);yx.set(e,t)},TM=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,_M)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?o2(r):e.toasts.forEach(s=>{o2(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===r||r===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},l0=[];let c0={toasts:[]};function Td(e){c0=TM(c0,e),l0.forEach(t=>{t(c0)})}function AM({...e}){const t=EM(),r=a=>Td({type:"UPDATE_TOAST",toast:{...a,id:t}}),s=()=>Td({type:"DISMISS_TOAST",toastId:t});return Td({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||s()}}}),{id:t,dismiss:s,update:r}}function Ut(){const[e,t]=p.useState(c0);return p.useEffect(()=>(l0.push(t),()=>{const r=l0.indexOf(t);r>-1&&l0.splice(r,1)}),[e]),{...e,toast:AM,dismiss:r=>Td({type:"DISMISS_TOAST",toastId:r})}}function Ze(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function l2(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Hf(...e){return t=>{let r=!1;const s=e.map(a=>{const i=l2(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<s.length;a++){const i=s[a];typeof i=="function"?i():l2(e[a],null)}}}}function Yt(...e){return p.useCallback(Hf(...e),e)}function PM(e,t){const r=p.createContext(t),s=i=>{const{children:o,...l}=i,c=p.useMemo(()=>l,Object.values(l));return n.jsx(r.Provider,{value:c,children:o})};s.displayName=e+"Provider";function a(i){const o=p.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[s,a]}function On(e,t=[]){let r=[];function s(i,o){const l=p.createContext(o),c=r.length;r=[...r,o];const u=h=>{var b;const{scope:m,children:f,...x}=h,g=((b=m==null?void 0:m[e])==null?void 0:b[c])||l,y=p.useMemo(()=>x,Object.values(x));return n.jsx(g.Provider,{value:y,children:f})};u.displayName=i+"Provider";function d(h,m){var g;const f=((g=m==null?void 0:m[e])==null?void 0:g[c])||l,x=p.useContext(f);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=r.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[s,RM(a,...t)]}function RM(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=s.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function Dl(e){const t=OM(e),r=p.forwardRef((s,a)=>{const{children:i,...o}=s,l=p.Children.toArray(i),c=l.find(IM);if(c){const u=c.props.children,d=l.map(h=>h===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:h);return n.jsx(t,{...o,ref:a,children:p.isValidElement(u)?p.cloneElement(u,void 0,d):null})}return n.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var MM=Dl("Slot");function OM(e){const t=p.forwardRef((r,s)=>{const{children:a,...i}=r;if(p.isValidElement(a)){const o=FM(a),l=DM(i,a.props);return a.type!==p.Fragment&&(l.ref=s?Hf(s,o):o),p.cloneElement(a,l)}return p.Children.count(a)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var j6=Symbol("radix.slottable");function N6(e){const t=({children:r})=>n.jsx(n.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=j6,t}function IM(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===j6}function DM(e,t){const r={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?r[s]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[s]=a):s==="style"?r[s]={...a,...i}:s==="className"&&(r[s]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function FM(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Wf(e){const t=e+"CollectionProvider",[r,s]=On(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:y,children:b}=g,v=rt.useRef(null),w=rt.useRef(new Map).current;return n.jsx(a,{scope:y,itemMap:w,collectionRef:v,children:b})};o.displayName=t;const l=e+"CollectionSlot",c=Dl(l),u=rt.forwardRef((g,y)=>{const{scope:b,children:v}=g,w=i(l,b),S=Yt(y,w.collectionRef);return n.jsx(c,{ref:S,children:v})});u.displayName=l;const d=e+"CollectionItemSlot",h="data-radix-collection-item",m=Dl(d),f=rt.forwardRef((g,y)=>{const{scope:b,children:v,...w}=g,S=rt.useRef(null),k=Yt(y,S),N=i(d,b);return rt.useEffect(()=>(N.itemMap.set(S,{ref:S,...w}),()=>void N.itemMap.delete(S))),n.jsx(m,{[h]:"",ref:k,children:v})});f.displayName=d;function x(g){const y=i(e+"CollectionConsumer",g);return rt.useCallback(()=>{const v=y.collectionRef.current;if(!v)return[];const w=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(y.itemMap.values()).sort((N,P)=>w.indexOf(N.ref.current)-w.indexOf(P.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:u,ItemSlot:f},x,s]}var LM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],_t=LM.reduce((e,t)=>{const r=Dl(`Primitive.${t}`),s=p.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(c,{...l,ref:i})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function Ly(e,t){e&&Kl.flushSync(()=>e.dispatchEvent(t))}function sn(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...r)=>{var s;return(s=t.current)==null?void 0:s.call(t,...r)},[])}function zM(e,t=globalThis==null?void 0:globalThis.document){const r=sn(e);p.useEffect(()=>{const s=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[r,t])}var $M="DismissableLayer",jv="dismissableLayer.update",qM="dismissableLayer.pointerDownOutside",BM="dismissableLayer.focusOutside",c2,S6=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ou=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,u=p.useContext(S6),[d,h]=p.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=p.useState({}),x=Yt(t,P=>h(P)),g=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=g.indexOf(y),v=d?g.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,S=v>=b,k=VM(P=>{const T=P.target,A=[...u.branches].some(E=>E.contains(T));!S||A||(a==null||a(P),o==null||o(P),P.defaultPrevented||l==null||l())},m),N=HM(P=>{const T=P.target;[...u.branches].some(E=>E.contains(T))||(i==null||i(P),o==null||o(P),P.defaultPrevented||l==null||l())},m);return zM(P=>{v===u.layers.size-1&&(s==null||s(P),!P.defaultPrevented&&l&&(P.preventDefault(),l()))},m),p.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(c2=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),u2(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=c2)}},[d,m,r,u]),p.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),u2())},[d,u]),p.useEffect(()=>{const P=()=>f({});return document.addEventListener(jv,P),()=>document.removeEventListener(jv,P)},[]),n.jsx(_t.div,{...c,ref:x,style:{pointerEvents:w?S?"auto":"none":void 0,...e.style},onFocusCapture:Ze(e.onFocusCapture,N.onFocusCapture),onBlurCapture:Ze(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:Ze(e.onPointerDownCapture,k.onPointerDownCapture)})});Ou.displayName=$M;var UM="DismissableLayerBranch",k6=p.forwardRef((e,t)=>{const r=p.useContext(S6),s=p.useRef(null),a=Yt(t,s);return p.useEffect(()=>{const i=s.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),n.jsx(_t.div,{...e,ref:a})});k6.displayName=UM;function VM(e,t=globalThis==null?void 0:globalThis.document){const r=sn(e),s=p.useRef(!1),a=p.useRef(()=>{});return p.useEffect(()=>{const i=l=>{if(l.target&&!s.current){let c=function(){_6(qM,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);s.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>s.current=!0}}function HM(e,t=globalThis==null?void 0:globalThis.document){const r=sn(e),s=p.useRef(!1);return p.useEffect(()=>{const a=i=>{i.target&&!s.current&&_6(BM,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function u2(){const e=new CustomEvent(jv);document.dispatchEvent(e)}function _6(e,t,r,{discrete:s}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?Ly(a,i):a.dispatchEvent(i)}var WM=Ou,GM=k6,hn=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},QM="Portal",Rh=p.forwardRef((e,t)=>{var l;const{container:r,...s}=e,[a,i]=p.useState(!1);hn(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?b6.createPortal(n.jsx(_t.div,{...s,ref:t}),o):null});Rh.displayName=QM;function YM(e,t){return p.useReducer((r,s)=>t[r][s]??r,e)}var $n=e=>{const{present:t,children:r}=e,s=KM(t),a=typeof r=="function"?r({present:s.isPresent}):p.Children.only(r),i=Yt(s.ref,JM(a));return typeof r=="function"||s.isPresent?p.cloneElement(a,{ref:i}):null};$n.displayName="Presence";function KM(e){const[t,r]=p.useState(),s=p.useRef(null),a=p.useRef(e),i=p.useRef("none"),o=e?"mounted":"unmounted",[l,c]=YM(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=gm(s.current);i.current=l==="mounted"?u:"none"},[l]),hn(()=>{const u=s.current,d=a.current;if(d!==e){const m=i.current,f=gm(u);e?c("MOUNT"):f==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==f?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),hn(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=f=>{const g=gm(s.current).includes(f.animationName);if(f.target===t&&g&&(c("ANIMATION_END"),!a.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},m=f=>{f.target===t&&(i.current=gm(s.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{s.current=u?getComputedStyle(u):null,r(u)},[])}}function gm(e){return(e==null?void 0:e.animationName)||"none"}function JM(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var XM=G1[" useInsertionEffect ".trim().toString()]||hn;function ai({prop:e,defaultProp:t,onChange:r=()=>{},caller:s}){const[a,i,o]=ZM({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:a;{const d=p.useRef(e!==void 0);p.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${s} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,s])}const u=p.useCallback(d=>{var h;if(l){const m=eO(d)?d(e):d;m!==e&&((h=o.current)==null||h.call(o,m))}else i(d)},[l,e,i,o]);return[c,u]}function ZM({defaultProp:e,onChange:t}){const[r,s]=p.useState(e),a=p.useRef(r),i=p.useRef(t);return XM(()=>{i.current=t},[t]),p.useEffect(()=>{var o;a.current!==r&&((o=i.current)==null||o.call(i,r),a.current=r)},[r,a]),[r,s,i]}function eO(e){return typeof e=="function"}var C6=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),tO="VisuallyHidden",Gf=p.forwardRef((e,t)=>n.jsx(_t.span,{...e,ref:t,style:{...C6,...e.style}}));Gf.displayName=tO;var rO=Gf,zy="ToastProvider",[$y,nO,sO]=Wf("Toast"),[E6,Ese]=On("Toast",[sO]),[aO,Qf]=E6(zy),T6=e=>{const{__scopeToast:t,label:r="Notification",duration:s=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=p.useState(null),[u,d]=p.useState(0),h=p.useRef(!1),m=p.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${zy}\`. Expected non-empty \`string\`.`),n.jsx($y.Provider,{scope:t,children:n.jsx(aO,{scope:t,label:r,duration:s,swipeDirection:a,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>d(f=>f+1),[]),onToastRemove:p.useCallback(()=>d(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:o})})};T6.displayName=zy;var A6="ToastViewport",iO=["F8"],Nv="toast.viewportPause",Sv="toast.viewportResume",P6=p.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:s=iO,label:a="Notifications ({hotkey})",...i}=e,o=Qf(A6,r),l=nO(r),c=p.useRef(null),u=p.useRef(null),d=p.useRef(null),h=p.useRef(null),m=Yt(t,h,o.onViewportChange),f=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;p.useEffect(()=>{const y=b=>{var w;s.length!==0&&s.every(S=>b[S]||b.code===S)&&((w=h.current)==null||w.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[s]),p.useEffect(()=>{const y=c.current,b=h.current;if(x&&y&&b){const v=()=>{if(!o.isClosePausedRef.current){const N=new CustomEvent(Nv);b.dispatchEvent(N),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const N=new CustomEvent(Sv);b.dispatchEvent(N),o.isClosePausedRef.current=!1}},S=N=>{!y.contains(N.relatedTarget)&&w()},k=()=>{y.contains(document.activeElement)||w()};return y.addEventListener("focusin",v),y.addEventListener("focusout",S),y.addEventListener("pointermove",v),y.addEventListener("pointerleave",k),window.addEventListener("blur",v),window.addEventListener("focus",w),()=>{y.removeEventListener("focusin",v),y.removeEventListener("focusout",S),y.removeEventListener("pointermove",v),y.removeEventListener("pointerleave",k),window.removeEventListener("blur",v),window.removeEventListener("focus",w)}}},[x,o.isClosePausedRef]);const g=p.useCallback(({tabbingDirection:y})=>{const v=l().map(w=>{const S=w.ref.current,k=[S,...yO(S)];return y==="forwards"?k:k.reverse()});return(y==="forwards"?v.reverse():v).flat()},[l]);return p.useEffect(()=>{const y=h.current;if(y){const b=v=>{var k,N,P;const w=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!w){const T=document.activeElement,A=v.shiftKey;if(v.target===y&&A){(k=u.current)==null||k.focus();return}const I=g({tabbingDirection:A?"backwards":"forwards"}),se=I.findIndex(ee=>ee===T);bx(I.slice(se+1))?v.preventDefault():A?(N=u.current)==null||N.focus():(P=d.current)==null||P.focus()}};return y.addEventListener("keydown",b),()=>y.removeEventListener("keydown",b)}},[l,g]),n.jsxs(GM,{ref:c,role:"region","aria-label":a.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&n.jsx(kv,{ref:u,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});bx(y)}}),n.jsx($y.Slot,{scope:r,children:n.jsx(_t.ol,{tabIndex:-1,...i,ref:m})}),x&&n.jsx(kv,{ref:d,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});bx(y)}})]})});P6.displayName=A6;var R6="ToastFocusProxy",kv=p.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:s,...a}=e,i=Qf(R6,r);return n.jsx(Gf,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&s()}})});kv.displayName=R6;var Mh="Toast",oO="toast.swipeStart",lO="toast.swipeMove",cO="toast.swipeCancel",uO="toast.swipeEnd",M6=p.forwardRef((e,t)=>{const{forceMount:r,open:s,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=ai({prop:s,defaultProp:a??!0,onChange:i,caller:Mh});return n.jsx($n,{present:r||l,children:n.jsx(mO,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:sn(e.onPause),onResume:sn(e.onResume),onSwipeStart:Ze(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ze(e.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Ze(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ze(e.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});M6.displayName=Mh;var[dO,hO]=E6(Mh,{onClose(){}}),mO=p.forwardRef((e,t)=>{const{__scopeToast:r,type:s="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:f,...x}=e,g=Qf(Mh,r),[y,b]=p.useState(null),v=Yt(t,ee=>b(ee)),w=p.useRef(null),S=p.useRef(null),k=a||g.duration,N=p.useRef(0),P=p.useRef(k),T=p.useRef(0),{onToastAdd:A,onToastRemove:E}=g,M=sn(()=>{var Y;(y==null?void 0:y.contains(document.activeElement))&&((Y=g.viewport)==null||Y.focus()),o()}),I=p.useCallback(ee=>{!ee||ee===1/0||(window.clearTimeout(T.current),N.current=new Date().getTime(),T.current=window.setTimeout(M,ee))},[M]);p.useEffect(()=>{const ee=g.viewport;if(ee){const Y=()=>{I(P.current),u==null||u()},F=()=>{const ne=new Date().getTime()-N.current;P.current=P.current-ne,window.clearTimeout(T.current),c==null||c()};return ee.addEventListener(Nv,F),ee.addEventListener(Sv,Y),()=>{ee.removeEventListener(Nv,F),ee.removeEventListener(Sv,Y)}}},[g.viewport,k,c,u,I]),p.useEffect(()=>{i&&!g.isClosePausedRef.current&&I(k)},[i,k,g.isClosePausedRef,I]),p.useEffect(()=>(A(),()=>E()),[A,E]);const se=p.useMemo(()=>y?$6(y):null,[y]);return g.viewport?n.jsxs(n.Fragment,{children:[se&&n.jsx(fO,{__scopeToast:r,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:se}),n.jsx(dO,{scope:r,onClose:M,children:Kl.createPortal(n.jsx($y.ItemSlot,{scope:r,children:n.jsx(WM,{asChild:!0,onEscapeKeyDown:Ze(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||M(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:n.jsx(_t.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...x,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Ze(e.onKeyDown,ee=>{ee.key==="Escape"&&(l==null||l(ee.nativeEvent),ee.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,M()))}),onPointerDown:Ze(e.onPointerDown,ee=>{ee.button===0&&(w.current={x:ee.clientX,y:ee.clientY})}),onPointerMove:Ze(e.onPointerMove,ee=>{if(!w.current)return;const Y=ee.clientX-w.current.x,F=ee.clientY-w.current.y,ne=!!S.current,q=["left","right"].includes(g.swipeDirection),V=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,_=q?V(0,Y):0,U=q?0:V(0,F),H=ee.pointerType==="touch"?10:2,O={x:_,y:U},B={originalEvent:ee,delta:O};ne?(S.current=O,vm(lO,h,B,{discrete:!1})):d2(O,g.swipeDirection,H)?(S.current=O,vm(oO,d,B,{discrete:!1}),ee.target.setPointerCapture(ee.pointerId)):(Math.abs(Y)>H||Math.abs(F)>H)&&(w.current=null)}),onPointerUp:Ze(e.onPointerUp,ee=>{const Y=S.current,F=ee.target;if(F.hasPointerCapture(ee.pointerId)&&F.releasePointerCapture(ee.pointerId),S.current=null,w.current=null,Y){const ne=ee.currentTarget,q={originalEvent:ee,delta:Y};d2(Y,g.swipeDirection,g.swipeThreshold)?vm(uO,f,q,{discrete:!0}):vm(cO,m,q,{discrete:!0}),ne.addEventListener("click",V=>V.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),fO=e=>{const{__scopeToast:t,children:r,...s}=e,a=Qf(Mh,t),[i,o]=p.useState(!1),[l,c]=p.useState(!1);return gO(()=>o(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:n.jsx(Rh,{asChild:!0,children:n.jsx(Gf,{...s,children:i&&n.jsxs(n.Fragment,{children:[a.label," ",r]})})})},pO="ToastTitle",O6=p.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx(_t.div,{...s,ref:t})});O6.displayName=pO;var xO="ToastDescription",I6=p.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx(_t.div,{...s,ref:t})});I6.displayName=xO;var D6="ToastAction",F6=p.forwardRef((e,t)=>{const{altText:r,...s}=e;return r.trim()?n.jsx(z6,{altText:r,asChild:!0,children:n.jsx(qy,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${D6}\`. Expected non-empty \`string\`.`),null)});F6.displayName=D6;var L6="ToastClose",qy=p.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e,a=hO(L6,r);return n.jsx(z6,{asChild:!0,children:n.jsx(_t.button,{type:"button",...s,ref:t,onClick:Ze(e.onClick,a.onClose)})})});qy.displayName=L6;var z6=p.forwardRef((e,t)=>{const{__scopeToast:r,altText:s,...a}=e;return n.jsx(_t.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...a,ref:t})});function $6(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),vO(s)){const a=s.ariaHidden||s.hidden||s.style.display==="none",i=s.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=s.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...$6(s))}}),t}function vm(e,t,r,{discrete:s}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?Ly(a,i):a.dispatchEvent(i)}var d2=(e,t,r=0)=>{const s=Math.abs(e.x),a=Math.abs(e.y),i=s>a;return t==="left"||t==="right"?i&&s>r:!i&&a>r};function gO(e=()=>{}){const t=sn(e);hn(()=>{let r=0,s=0;return r=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(s)}},[t])}function vO(e){return e.nodeType===e.ELEMENT_NODE}function yO(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function bx(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var bO=T6,q6=P6,B6=M6,U6=O6,V6=I6,H6=F6,W6=qy;function G6(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=G6(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function Q6(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=G6(e))&&(s&&(s+=" "),s+=t);return s}const h2=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,m2=Q6,Iu=(e,t)=>r=>{var s;if((t==null?void 0:t.variants)==null)return m2(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(u=>{const d=r==null?void 0:r[u],h=i==null?void 0:i[u];if(d===null)return null;const m=h2(d)||h2(h);return a[u][m]}),l=r&&Object.entries(r).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:h,className:m,...f}=d;return Object.entries(f).every(x=>{let[g,y]=x;return Array.isArray(y)?y.includes({...i,...l}[g]):{...i,...l}[g]===y})?[...u,h,m]:u},[]);return m2(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Y6=(...e)=>e.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var jO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=p.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:o,...l},c)=>p.createElement("svg",{ref:c,...jO,width:t,height:t,stroke:e,strokeWidth:s?Number(r)*24/Number(t):r,className:Y6("lucide",a),...l},[...o.map(([u,d])=>p.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=(e,t)=>{const r=p.forwardRef(({className:s,...a},i)=>p.createElement(NO,{ref:i,iconNode:t,className:Y6(`lucide-${wO(e)}`,s),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=We("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=We("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=We("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=We("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=We("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=We("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=We("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=We("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=We("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=We("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=We("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=We("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=We("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=We("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=We("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=We("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=We("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=We("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=We("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=We("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=We("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=We("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=We("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=We("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=We("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=We("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=We("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=We("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=We("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=We("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=We("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=We("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=We("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=We("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=We("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=We("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=We("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=We("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=We("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=We("FileQuestion",[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=We("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=We("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=We("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=We("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=We("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=We("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=We("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=We("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=We("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=We("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nh=We("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=We("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=We("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=We("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=We("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=We("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=We("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=We("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=We("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=We("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=We("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fl=We("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=We("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=We("Microscope",[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=We("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=We("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=We("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=We("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=We("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=We("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=We("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=We("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=We("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=We("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=We("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=We("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=We("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=We("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=We("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=We("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=We("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=We("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=We("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=We("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=We("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=We("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=We("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=We("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=We("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=We("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=We("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=We("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=We("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=We("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=We("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=We("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=We("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=We("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Qy="-",GO=e=>{const t=YO(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:o=>{const l=o.split(Qy);return l[0]===""&&l.length!==1&&l.shift(),ok(l,t)||QO(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&s[o]?[...c,...s[o]]:c}}},ok=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],s=t.nextPart.get(r),a=s?ok(e.slice(1),s):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(Qy);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},y2=/^\[(.+)\]$/,QO=e=>{if(y2.test(e)){const t=y2.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},YO=e=>{const{theme:t,prefix:r}=e,s={nextPart:new Map,validators:[]};return JO(Object.entries(e.classGroups),r).forEach(([i,o])=>{Rv(o,s,i,t)}),s},Rv=(e,t,r,s)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:b2(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(KO(a)){Rv(a(s),t,r,s);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{Rv(o,b2(t,i),r,s)})})},b2=(e,t)=>{let r=e;return t.split(Qy).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},KO=e=>e.isThemeGetter,JO=(e,t)=>t?e.map(([r,s])=>{const a=s.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,a]}):e,XO=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,s=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,s=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=s.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},lk="!",ZO=e=>{const{separator:t,experimentalParseClassName:r}=e,s=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let u=0,d=0,h;for(let y=0;y<l.length;y++){let b=l[y];if(u===0){if(b===a&&(s||l.slice(y,y+i)===t)){c.push(l.slice(d,y)),d=y+i;continue}if(b==="/"){h=y;continue}}b==="["?u++:b==="]"&&u--}const m=c.length===0?l:l.substring(d),f=m.startsWith(lk),x=f?m.substring(1):m,g=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:f,baseClassName:x,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:o}):o},eI=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(s=>{s[0]==="["?(t.push(...r.sort(),s),r=[]):r.push(s)}),t.push(...r.sort()),t},tI=e=>({cache:XO(e.cacheSize),parseClassName:ZO(e),...GO(e)}),rI=/\s+/,nI=(e,t)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(rI);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:f}=r(u);let x=!!f,g=s(x?m.substring(0,f):m);if(!g){if(!x){l=u+(l.length>0?" "+l:l);continue}if(g=s(m),!g){l=u+(l.length>0?" "+l:l);continue}x=!1}const y=eI(d).join(":"),b=h?y+lk:y,v=b+g;if(i.includes(v))continue;i.push(v);const w=a(g,x);for(let S=0;S<w.length;++S){const k=w[S];i.push(b+k)}l=u+(l.length>0?" "+l:l)}return l};function sI(){let e=0,t,r,s="";for(;e<arguments.length;)(t=arguments[e++])&&(r=ck(t))&&(s&&(s+=" "),s+=r);return s}const ck=e=>{if(typeof e=="string")return e;let t,r="";for(let s=0;s<e.length;s++)e[s]&&(t=ck(e[s]))&&(r&&(r+=" "),r+=t);return r};function aI(e,...t){let r,s,a,i=o;function o(c){const u=t.reduce((d,h)=>h(d),e());return r=tI(u),s=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const u=s(c);if(u)return u;const d=nI(c,r);return a(c,d),d}return function(){return i(sI.apply(null,arguments))}}const Lr=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},uk=/^\[(?:([a-z-]+):)?(.+)\]$/i,iI=/^\d+\/\d+$/,oI=new Set(["px","full","screen"]),lI=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,cI=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,uI=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,dI=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,hI=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,fi=e=>Bc(e)||oI.has(e)||iI.test(e),Zi=e=>Du(e,"length",bI),Bc=e=>!!e&&!Number.isNaN(Number(e)),jx=e=>Du(e,"number",Bc),sd=e=>!!e&&Number.isInteger(Number(e)),mI=e=>e.endsWith("%")&&Bc(e.slice(0,-1)),ar=e=>uk.test(e),eo=e=>lI.test(e),fI=new Set(["length","size","percentage"]),pI=e=>Du(e,fI,dk),xI=e=>Du(e,"position",dk),gI=new Set(["image","url"]),vI=e=>Du(e,gI,jI),yI=e=>Du(e,"",wI),ad=()=>!0,Du=(e,t,r)=>{const s=uk.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):r(s[2]):!1},bI=e=>cI.test(e)&&!uI.test(e),dk=()=>!1,wI=e=>dI.test(e),jI=e=>hI.test(e),NI=()=>{const e=Lr("colors"),t=Lr("spacing"),r=Lr("blur"),s=Lr("brightness"),a=Lr("borderColor"),i=Lr("borderRadius"),o=Lr("borderSpacing"),l=Lr("borderWidth"),c=Lr("contrast"),u=Lr("grayscale"),d=Lr("hueRotate"),h=Lr("invert"),m=Lr("gap"),f=Lr("gradientColorStops"),x=Lr("gradientColorStopPositions"),g=Lr("inset"),y=Lr("margin"),b=Lr("opacity"),v=Lr("padding"),w=Lr("saturate"),S=Lr("scale"),k=Lr("sepia"),N=Lr("skew"),P=Lr("space"),T=Lr("translate"),A=()=>["auto","contain","none"],E=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",ar,t],I=()=>[ar,t],se=()=>["",fi,Zi],ee=()=>["auto",Bc,ar],Y=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],F=()=>["solid","dashed","dotted","double","none"],ne=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],q=()=>["start","end","center","between","around","evenly","stretch"],V=()=>["","0",ar],_=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[Bc,ar];return{cacheSize:500,separator:":",theme:{colors:[ad],spacing:[fi,Zi],blur:["none","",eo,ar],brightness:U(),borderColor:[e],borderRadius:["none","","full",eo,ar],borderSpacing:I(),borderWidth:se(),contrast:U(),grayscale:V(),hueRotate:U(),invert:V(),gap:I(),gradientColorStops:[e],gradientColorStopPositions:[mI,Zi],inset:M(),margin:M(),opacity:U(),padding:I(),saturate:U(),scale:U(),sepia:V(),skew:U(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",ar]}],container:["container"],columns:[{columns:[eo]}],"break-after":[{"break-after":_()}],"break-before":[{"break-before":_()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Y(),ar]}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",sd,ar]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ar]}],grow:[{grow:V()}],shrink:[{shrink:V()}],order:[{order:["first","last","none",sd,ar]}],"grid-cols":[{"grid-cols":[ad]}],"col-start-end":[{col:["auto",{span:["full",sd,ar]},ar]}],"col-start":[{"col-start":ee()}],"col-end":[{"col-end":ee()}],"grid-rows":[{"grid-rows":[ad]}],"row-start-end":[{row:["auto",{span:[sd,ar]},ar]}],"row-start":[{"row-start":ee()}],"row-end":[{"row-end":ee()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ar]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ar]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ar,t]}],"min-w":[{"min-w":[ar,t,"min","max","fit"]}],"max-w":[{"max-w":[ar,t,"none","full","min","max","fit","prose",{screen:[eo]},eo]}],h:[{h:[ar,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ar,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ar,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ar,t,"auto","min","max","fit"]}],"font-size":[{text:["base",eo,Zi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",jx]}],"font-family":[{font:[ad]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ar]}],"line-clamp":[{"line-clamp":["none",Bc,jx]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",fi,ar]}],"list-image":[{"list-image":["none",ar]}],"list-style-type":[{list:["none","disc","decimal",ar]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...F(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",fi,Zi]}],"underline-offset":[{"underline-offset":["auto",fi,ar]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ar]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ar]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Y(),xI]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",pI]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},vI]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...F(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:F()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...F()]}],"outline-offset":[{"outline-offset":[fi,ar]}],"outline-w":[{outline:[fi,Zi]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:se()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[fi,Zi]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",eo,yI]}],"shadow-color":[{shadow:[ad]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...ne(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ne()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",eo,ar]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ar]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",ar]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",ar]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[sd,ar]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ar]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ar]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ar]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[fi,Zi,jx]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},SI=aI(NI);function qe(...e){return SI(Q6(e))}const kI=bO,hk=p.forwardRef(({className:e,...t},r)=>n.jsx(q6,{ref:r,className:qe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));hk.displayName=q6.displayName;const _I=Iu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),mk=p.forwardRef(({className:e,variant:t,...r},s)=>n.jsx(B6,{ref:s,className:qe(_I({variant:t}),e),...r}));mk.displayName=B6.displayName;const CI=p.forwardRef(({className:e,...t},r)=>n.jsx(H6,{ref:r,className:qe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));CI.displayName=H6.displayName;const fk=p.forwardRef(({className:e,...t},r)=>n.jsx(W6,{ref:r,className:qe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:n.jsx(_s,{className:"h-4 w-4"})}));fk.displayName=W6.displayName;const pk=p.forwardRef(({className:e,...t},r)=>n.jsx(U6,{ref:r,className:qe("text-sm font-semibold",e),...t}));pk.displayName=U6.displayName;const xk=p.forwardRef(({className:e,...t},r)=>n.jsx(V6,{ref:r,className:qe("text-sm opacity-90",e),...t}));xk.displayName=V6.displayName;function EI(){const{toasts:e}=Ut();return n.jsxs(kI,{children:[e.map(function({id:t,title:r,description:s,action:a,...i}){return n.jsxs(mk,{...i,children:[n.jsxs("div",{className:"grid gap-1",children:[r&&n.jsx(pk,{children:r}),s&&n.jsx(xk,{children:s})]}),a,n.jsx(fk,{})]},t)}),n.jsx(hk,{})]})}var w2=["light","dark"],TI="(prefers-color-scheme: dark)",AI=p.createContext(void 0),PI={setTheme:e=>{},themes:[]},RI=()=>{var e;return(e=p.useContext(AI))!=null?e:PI};p.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:s,enableColorScheme:a,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let u=i==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,h=a?w2.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(x,g=!1,y=!0)=>{let b=o?o[x]:x,v=g?x+"|| ''":`'${b}'`,w="";return a&&y&&!g&&w2.includes(x)&&(w+=`d.style.colorScheme = '${x}';`),r==="class"?g||b?w+=`c.add(${v})`:w+="null":b&&(w+=`d[s](n,${v})`),w},f=e?`!function(){${d}${m(e)}}()`:s?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${TI}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${u?"":"else{"+m(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(i,!1,!1)};}${h}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:f}})});var MI=e=>{switch(e){case"success":return DI;case"info":return LI;case"warning":return FI;case"error":return zI;default:return null}},OI=Array(12).fill(0),II=({visible:e,className:t})=>rt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},rt.createElement("div",{className:"sonner-spinner"},OI.map((r,s)=>rt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),DI=rt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},rt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),FI=rt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},rt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),LI=rt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},rt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),zI=rt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},rt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),$I=rt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},rt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),rt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),qI=()=>{let[e,t]=rt.useState(document.hidden);return rt.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},Mv=1,BI=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...s}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Mv++,i=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:r}),{...l,...e,id:a,dismissible:o,title:r}):l):this.addToast({title:r,...s,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let s=e instanceof Promise?e:e(),a=r!==void 0,i,o=s.then(async c=>{if(i=["resolve",c],rt.isValidElement(c))a=!1,this.create({id:r,type:"default",message:c});else if(VI(c)&&!c.ok){a=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:u,description:d})}else if(t.success!==void 0){a=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:u,description:d})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){a=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:u,description:d})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>o.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||Mv++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ys=new BI,UI=(e,t)=>{let r=(t==null?void 0:t.id)||Mv++;return ys.addToast({title:e,...t,id:r}),r},VI=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",HI=UI,WI=()=>ys.toasts,GI=()=>ys.getActiveToasts();Object.assign(HI,{success:ys.success,info:ys.info,warning:ys.warning,error:ys.error,custom:ys.custom,message:ys.message,promise:ys.promise,dismiss:ys.dismiss,loading:ys.loading},{getHistory:WI,getToasts:GI});function QI(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t==="top"&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}QI(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function bm(e){return e.label!==void 0}var YI=3,KI="32px",JI="16px",j2=4e3,XI=356,ZI=14,eD=20,tD=200;function wa(...e){return e.filter(Boolean).join(" ")}function rD(e){let[t,r]=e.split("-"),s=[];return t&&s.push(t),r&&s.push(r),s}var nD=e=>{var t,r,s,a,i,o,l,c,u,d,h;let{invert:m,toast:f,unstyled:x,interacting:g,setHeights:y,visibleToasts:b,heights:v,index:w,toasts:S,expanded:k,removeToast:N,defaultRichColors:P,closeButton:T,style:A,cancelButtonStyle:E,actionButtonStyle:M,className:I="",descriptionClassName:se="",duration:ee,position:Y,gap:F,loadingIcon:ne,expandByDefault:q,classNames:V,icons:_,closeButtonAriaLabel:U="Close toast",pauseWhenPageIsHidden:H}=e,[O,B]=rt.useState(null),[W,K]=rt.useState(null),[X,de]=rt.useState(!1),[oe,me]=rt.useState(!1),[Ee,we]=rt.useState(!1),[Le,_e]=rt.useState(!1),[ut,at]=rt.useState(!1),[Ct,L]=rt.useState(0),[ke,ot]=rt.useState(0),ct=rt.useRef(f.duration||ee||j2),$=rt.useRef(null),Ne=rt.useRef(null),dt=w===0,zt=w+1<=b,ue=f.type,G=f.dismissible!==!1,ye=f.className||"",Me=f.descriptionClassName||"",De=rt.useMemo(()=>v.findIndex(lt=>lt.toastId===f.id)||0,[v,f.id]),He=rt.useMemo(()=>{var lt;return(lt=f.closeButton)!=null?lt:T},[f.closeButton,T]),ve=rt.useMemo(()=>f.duration||ee||j2,[f.duration,ee]),Be=rt.useRef(0),pt=rt.useRef(0),gt=rt.useRef(0),Ft=rt.useRef(null),[ge,J]=Y.split("-"),Ae=rt.useMemo(()=>v.reduce((lt,xt,Et)=>Et>=De?lt:lt+xt.height,0),[v,De]),Fe=qI(),Pe=f.invert||m,Ie=ue==="loading";pt.current=rt.useMemo(()=>De*F+Ae,[De,Ae]),rt.useEffect(()=>{ct.current=ve},[ve]),rt.useEffect(()=>{de(!0)},[]),rt.useEffect(()=>{let lt=Ne.current;if(lt){let xt=lt.getBoundingClientRect().height;return ot(xt),y(Et=>[{toastId:f.id,height:xt,position:f.position},...Et]),()=>y(Et=>Et.filter(Zt=>Zt.toastId!==f.id))}},[y,f.id]),rt.useLayoutEffect(()=>{if(!X)return;let lt=Ne.current,xt=lt.style.height;lt.style.height="auto";let Et=lt.getBoundingClientRect().height;lt.style.height=xt,ot(Et),y(Zt=>Zt.find(dr=>dr.toastId===f.id)?Zt.map(dr=>dr.toastId===f.id?{...dr,height:Et}:dr):[{toastId:f.id,height:Et,position:f.position},...Zt])},[X,f.title,f.description,y,f.id]);let ht=rt.useCallback(()=>{me(!0),L(pt.current),y(lt=>lt.filter(xt=>xt.toastId!==f.id)),setTimeout(()=>{N(f)},tD)},[f,N,y,pt]);rt.useEffect(()=>{if(f.promise&&ue==="loading"||f.duration===1/0||f.type==="loading")return;let lt;return k||g||H&&Fe?(()=>{if(gt.current<Be.current){let xt=new Date().getTime()-Be.current;ct.current=ct.current-xt}gt.current=new Date().getTime()})():ct.current!==1/0&&(Be.current=new Date().getTime(),lt=setTimeout(()=>{var xt;(xt=f.onAutoClose)==null||xt.call(f,f),ht()},ct.current)),()=>clearTimeout(lt)},[k,g,f,ue,H,Fe,ht]),rt.useEffect(()=>{f.delete&&ht()},[ht,f.delete]);function Ye(){var lt,xt,Et;return _!=null&&_.loading?rt.createElement("div",{className:wa(V==null?void 0:V.loader,(lt=f==null?void 0:f.classNames)==null?void 0:lt.loader,"sonner-loader"),"data-visible":ue==="loading"},_.loading):ne?rt.createElement("div",{className:wa(V==null?void 0:V.loader,(xt=f==null?void 0:f.classNames)==null?void 0:xt.loader,"sonner-loader"),"data-visible":ue==="loading"},ne):rt.createElement(II,{className:wa(V==null?void 0:V.loader,(Et=f==null?void 0:f.classNames)==null?void 0:Et.loader),visible:ue==="loading"})}return rt.createElement("li",{tabIndex:0,ref:Ne,className:wa(I,ye,V==null?void 0:V.toast,(t=f==null?void 0:f.classNames)==null?void 0:t.toast,V==null?void 0:V.default,V==null?void 0:V[ue],(r=f==null?void 0:f.classNames)==null?void 0:r[ue]),"data-sonner-toast":"","data-rich-colors":(s=f.richColors)!=null?s:P,"data-styled":!(f.jsx||f.unstyled||x),"data-mounted":X,"data-promise":!!f.promise,"data-swiped":ut,"data-removed":oe,"data-visible":zt,"data-y-position":ge,"data-x-position":J,"data-index":w,"data-front":dt,"data-swiping":Ee,"data-dismissible":G,"data-type":ue,"data-invert":Pe,"data-swipe-out":Le,"data-swipe-direction":W,"data-expanded":!!(k||q&&X),style:{"--index":w,"--toasts-before":w,"--z-index":S.length-w,"--offset":`${oe?Ct:pt.current}px`,"--initial-height":q?"auto":`${ke}px`,...A,...f.style},onDragEnd:()=>{we(!1),B(null),Ft.current=null},onPointerDown:lt=>{Ie||!G||($.current=new Date,L(pt.current),lt.target.setPointerCapture(lt.pointerId),lt.target.tagName!=="BUTTON"&&(we(!0),Ft.current={x:lt.clientX,y:lt.clientY}))},onPointerUp:()=>{var lt,xt,Et,Zt;if(Le||!G)return;Ft.current=null;let dr=Number(((lt=Ne.current)==null?void 0:lt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),pr=Number(((xt=Ne.current)==null?void 0:xt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),nr=new Date().getTime()-((Et=$.current)==null?void 0:Et.getTime()),Lt=O==="x"?dr:pr,wn=Math.abs(Lt)/nr;if(Math.abs(Lt)>=eD||wn>.11){L(pt.current),(Zt=f.onDismiss)==null||Zt.call(f,f),K(O==="x"?dr>0?"right":"left":pr>0?"down":"up"),ht(),_e(!0),at(!1);return}we(!1),B(null)},onPointerMove:lt=>{var xt,Et,Zt,dr;if(!Ft.current||!G||((xt=window.getSelection())==null?void 0:xt.toString().length)>0)return;let pr=lt.clientY-Ft.current.y,nr=lt.clientX-Ft.current.x,Lt=(Et=e.swipeDirections)!=null?Et:rD(Y);!O&&(Math.abs(nr)>1||Math.abs(pr)>1)&&B(Math.abs(nr)>Math.abs(pr)?"x":"y");let wn={x:0,y:0};O==="y"?(Lt.includes("top")||Lt.includes("bottom"))&&(Lt.includes("top")&&pr<0||Lt.includes("bottom")&&pr>0)&&(wn.y=pr):O==="x"&&(Lt.includes("left")||Lt.includes("right"))&&(Lt.includes("left")&&nr<0||Lt.includes("right")&&nr>0)&&(wn.x=nr),(Math.abs(wn.x)>0||Math.abs(wn.y)>0)&&at(!0),(Zt=Ne.current)==null||Zt.style.setProperty("--swipe-amount-x",`${wn.x}px`),(dr=Ne.current)==null||dr.style.setProperty("--swipe-amount-y",`${wn.y}px`)}},He&&!f.jsx?rt.createElement("button",{"aria-label":U,"data-disabled":Ie,"data-close-button":!0,onClick:Ie||!G?()=>{}:()=>{var lt;ht(),(lt=f.onDismiss)==null||lt.call(f,f)},className:wa(V==null?void 0:V.closeButton,(a=f==null?void 0:f.classNames)==null?void 0:a.closeButton)},(i=_==null?void 0:_.close)!=null?i:$I):null,f.jsx||p.isValidElement(f.title)?f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title:rt.createElement(rt.Fragment,null,ue||f.icon||f.promise?rt.createElement("div",{"data-icon":"",className:wa(V==null?void 0:V.icon,(o=f==null?void 0:f.classNames)==null?void 0:o.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||Ye():null,f.type!=="loading"?f.icon||(_==null?void 0:_[ue])||MI(ue):null):null,rt.createElement("div",{"data-content":"",className:wa(V==null?void 0:V.content,(l=f==null?void 0:f.classNames)==null?void 0:l.content)},rt.createElement("div",{"data-title":"",className:wa(V==null?void 0:V.title,(c=f==null?void 0:f.classNames)==null?void 0:c.title)},typeof f.title=="function"?f.title():f.title),f.description?rt.createElement("div",{"data-description":"",className:wa(se,Me,V==null?void 0:V.description,(u=f==null?void 0:f.classNames)==null?void 0:u.description)},typeof f.description=="function"?f.description():f.description):null),p.isValidElement(f.cancel)?f.cancel:f.cancel&&bm(f.cancel)?rt.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||E,onClick:lt=>{var xt,Et;bm(f.cancel)&&G&&((Et=(xt=f.cancel).onClick)==null||Et.call(xt,lt),ht())},className:wa(V==null?void 0:V.cancelButton,(d=f==null?void 0:f.classNames)==null?void 0:d.cancelButton)},f.cancel.label):null,p.isValidElement(f.action)?f.action:f.action&&bm(f.action)?rt.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||M,onClick:lt=>{var xt,Et;bm(f.action)&&((Et=(xt=f.action).onClick)==null||Et.call(xt,lt),!lt.defaultPrevented&&ht())},className:wa(V==null?void 0:V.actionButton,(h=f==null?void 0:f.classNames)==null?void 0:h.actionButton)},f.action.label):null))};function N2(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function sD(e,t){let r={};return[e,t].forEach((s,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",l=i?JI:KI;function c(u){["top","right","bottom","left"].forEach(d=>{r[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof s=="number"||typeof s=="string"?c(s):typeof s=="object"?["top","right","bottom","left"].forEach(u=>{s[u]===void 0?r[`${o}-${u}`]=l:r[`${o}-${u}`]=typeof s[u]=="number"?`${s[u]}px`:s[u]}):c(l)}),r}var aD=p.forwardRef(function(e,t){let{invert:r,position:s="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:m,style:f,visibleToasts:x=YI,toastOptions:g,dir:y=N2(),gap:b=ZI,loadingIcon:v,icons:w,containerAriaLabel:S="Notifications",pauseWhenPageIsHidden:k}=e,[N,P]=rt.useState([]),T=rt.useMemo(()=>Array.from(new Set([s].concat(N.filter(H=>H.position).map(H=>H.position)))),[N,s]),[A,E]=rt.useState([]),[M,I]=rt.useState(!1),[se,ee]=rt.useState(!1),[Y,F]=rt.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ne=rt.useRef(null),q=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),V=rt.useRef(null),_=rt.useRef(!1),U=rt.useCallback(H=>{P(O=>{var B;return(B=O.find(W=>W.id===H.id))!=null&&B.delete||ys.dismiss(H.id),O.filter(({id:W})=>W!==H.id)})},[]);return rt.useEffect(()=>ys.subscribe(H=>{if(H.dismiss){P(O=>O.map(B=>B.id===H.id?{...B,delete:!0}:B));return}setTimeout(()=>{b6.flushSync(()=>{P(O=>{let B=O.findIndex(W=>W.id===H.id);return B!==-1?[...O.slice(0,B),{...O[B],...H},...O.slice(B+1)]:[H,...O]})})})}),[]),rt.useEffect(()=>{if(d!=="system"){F(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?F("dark"):F("light")),typeof window>"u")return;let H=window.matchMedia("(prefers-color-scheme: dark)");try{H.addEventListener("change",({matches:O})=>{F(O?"dark":"light")})}catch{H.addListener(({matches:B})=>{try{F(B?"dark":"light")}catch(W){console.error(W)}})}},[d]),rt.useEffect(()=>{N.length<=1&&I(!1)},[N]),rt.useEffect(()=>{let H=O=>{var B,W;a.every(K=>O[K]||O.code===K)&&(I(!0),(B=ne.current)==null||B.focus()),O.code==="Escape"&&(document.activeElement===ne.current||(W=ne.current)!=null&&W.contains(document.activeElement))&&I(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[a]),rt.useEffect(()=>{if(ne.current)return()=>{V.current&&(V.current.focus({preventScroll:!0}),V.current=null,_.current=!1)}},[ne.current]),rt.createElement("section",{ref:t,"aria-label":`${S} ${q}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},T.map((H,O)=>{var B;let[W,K]=H.split("-");return N.length?rt.createElement("ol",{key:H,dir:y==="auto"?N2():y,tabIndex:-1,ref:ne,className:l,"data-sonner-toaster":!0,"data-theme":Y,"data-y-position":W,"data-lifted":M&&N.length>1&&!i,"data-x-position":K,style:{"--front-toast-height":`${((B=A[0])==null?void 0:B.height)||0}px`,"--width":`${XI}px`,"--gap":`${b}px`,...f,...sD(c,u)},onBlur:X=>{_.current&&!X.currentTarget.contains(X.relatedTarget)&&(_.current=!1,V.current&&(V.current.focus({preventScroll:!0}),V.current=null))},onFocus:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||_.current||(_.current=!0,V.current=X.relatedTarget)},onMouseEnter:()=>I(!0),onMouseMove:()=>I(!0),onMouseLeave:()=>{se||I(!1)},onDragEnd:()=>I(!1),onPointerDown:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||ee(!0)},onPointerUp:()=>ee(!1)},N.filter(X=>!X.position&&O===0||X.position===H).map((X,de)=>{var oe,me;return rt.createElement(nD,{key:X.id,icons:w,index:de,toast:X,defaultRichColors:h,duration:(oe=g==null?void 0:g.duration)!=null?oe:m,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:r,visibleToasts:x,closeButton:(me=g==null?void 0:g.closeButton)!=null?me:o,interacting:se,position:H,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:U,toasts:N.filter(Ee=>Ee.position==X.position),heights:A.filter(Ee=>Ee.position==X.position),setHeights:E,expandByDefault:i,gap:b,loadingIcon:v,expanded:M,pauseWhenPageIsHidden:k,swipeDirections:e.swipeDirections})})):null}))});const iD=({...e})=>{const{theme:t="system"}=RI();return n.jsx(aD,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var oD=G1[" useId ".trim().toString()]||(()=>{}),lD=0;function ri(e){const[t,r]=p.useState(oD());return hn(()=>{r(s=>s??String(lD++))},[e]),t?`radix-${t}`:""}const cD=["top","right","bottom","left"],Lo=Math.min,zs=Math.max,H0=Math.round,wm=Math.floor,ni=e=>({x:e,y:e}),uD={left:"right",right:"left",bottom:"top",top:"bottom"},dD={start:"end",end:"start"};function Ov(e,t,r){return zs(e,Lo(t,r))}function qi(e,t){return typeof e=="function"?e(t):e}function Bi(e){return e.split("-")[0]}function Fu(e){return e.split("-")[1]}function Yy(e){return e==="x"?"y":"x"}function Ky(e){return e==="y"?"height":"width"}const hD=new Set(["top","bottom"]);function Ka(e){return hD.has(Bi(e))?"y":"x"}function Jy(e){return Yy(Ka(e))}function mD(e,t,r){r===void 0&&(r=!1);const s=Fu(e),a=Jy(e),i=Ky(a);let o=a==="x"?s===(r?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=W0(o)),[o,W0(o)]}function fD(e){const t=W0(e);return[Iv(e),t,Iv(t)]}function Iv(e){return e.replace(/start|end/g,t=>dD[t])}const S2=["left","right"],k2=["right","left"],pD=["top","bottom"],xD=["bottom","top"];function gD(e,t,r){switch(e){case"top":case"bottom":return r?t?k2:S2:t?S2:k2;case"left":case"right":return t?pD:xD;default:return[]}}function vD(e,t,r,s){const a=Fu(e);let i=gD(Bi(e),r==="start",s);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(Iv)))),i}function W0(e){return e.replace(/left|right|bottom|top/g,t=>uD[t])}function yD(e){return{top:0,right:0,bottom:0,left:0,...e}}function gk(e){return typeof e!="number"?yD(e):{top:e,right:e,bottom:e,left:e}}function G0(e){const{x:t,y:r,width:s,height:a}=e;return{width:s,height:a,top:r,left:t,right:t+s,bottom:r+a,x:t,y:r}}function _2(e,t,r){let{reference:s,floating:a}=e;const i=Ka(t),o=Jy(t),l=Ky(o),c=Bi(t),u=i==="y",d=s.x+s.width/2-a.width/2,h=s.y+s.height/2-a.height/2,m=s[l]/2-a[l]/2;let f;switch(c){case"top":f={x:d,y:s.y-a.height};break;case"bottom":f={x:d,y:s.y+s.height};break;case"right":f={x:s.x+s.width,y:h};break;case"left":f={x:s.x-a.width,y:h};break;default:f={x:s.x,y:s.y}}switch(Fu(t)){case"start":f[o]-=m*(r&&u?-1:1);break;case"end":f[o]+=m*(r&&u?-1:1);break}return f}const bD=async(e,t,r)=>{const{placement:s="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:h}=_2(u,s,c),m=s,f={},x=0;for(let g=0;g<l.length;g++){const{name:y,fn:b}=l[g],{x:v,y:w,data:S,reset:k}=await b({x:d,y:h,initialPlacement:s,placement:m,strategy:a,middlewareData:f,rects:u,platform:o,elements:{reference:e,floating:t}});d=v??d,h=w??h,f={...f,[y]:{...f[y],...S}},k&&x<=50&&(x++,typeof k=="object"&&(k.placement&&(m=k.placement),k.rects&&(u=k.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):k.rects),{x:d,y:h}=_2(u,m,c)),g=-1)}return{x:d,y:h,placement:m,strategy:a,middlewareData:f}};async function ah(e,t){var r;t===void 0&&(t={});const{x:s,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:f=0}=qi(t,e),x=gk(f),y=l[m?h==="floating"?"reference":"floating":h],b=G0(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(y)))==null||r?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),v=h==="floating"?{x:s,y:a,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),S=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},k=G0(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:w,strategy:c}):v);return{top:(b.top-k.top+x.top)/S.y,bottom:(k.bottom-b.bottom+x.bottom)/S.y,left:(b.left-k.left+x.left)/S.x,right:(k.right-b.right+x.right)/S.x}}const wD=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:s,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=qi(e,t)||{};if(u==null)return{};const h=gk(d),m={x:r,y:s},f=Jy(a),x=Ky(f),g=await o.getDimensions(u),y=f==="y",b=y?"top":"left",v=y?"bottom":"right",w=y?"clientHeight":"clientWidth",S=i.reference[x]+i.reference[f]-m[f]-i.floating[x],k=m[f]-i.reference[f],N=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let P=N?N[w]:0;(!P||!await(o.isElement==null?void 0:o.isElement(N)))&&(P=l.floating[w]||i.floating[x]);const T=S/2-k/2,A=P/2-g[x]/2-1,E=Lo(h[b],A),M=Lo(h[v],A),I=E,se=P-g[x]-M,ee=P/2-g[x]/2+T,Y=Ov(I,ee,se),F=!c.arrow&&Fu(a)!=null&&ee!==Y&&i.reference[x]/2-(ee<I?E:M)-g[x]/2<0,ne=F?ee<I?ee-I:ee-se:0;return{[f]:m[f]+ne,data:{[f]:Y,centerOffset:ee-Y-ne,...F&&{alignmentOffset:ne}},reset:F}}}),jD=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,s;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:g=!0,...y}=qi(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const b=Bi(a),v=Ka(l),w=Bi(l)===l,S=await(c.isRTL==null?void 0:c.isRTL(u.floating)),k=m||(w||!g?[W0(l)]:fD(l)),N=x!=="none";!m&&N&&k.push(...vD(l,g,x,S));const P=[l,...k],T=await ah(t,y),A=[];let E=((s=i.flip)==null?void 0:s.overflows)||[];if(d&&A.push(T[b]),h){const ee=mD(a,o,S);A.push(T[ee[0]],T[ee[1]])}if(E=[...E,{placement:a,overflows:A}],!A.every(ee=>ee<=0)){var M,I;const ee=(((M=i.flip)==null?void 0:M.index)||0)+1,Y=P[ee];if(Y&&(!(h==="alignment"?v!==Ka(Y):!1)||E.every(q=>q.overflows[0]>0&&Ka(q.placement)===v)))return{data:{index:ee,overflows:E},reset:{placement:Y}};let F=(I=E.filter(ne=>ne.overflows[0]<=0).sort((ne,q)=>ne.overflows[1]-q.overflows[1])[0])==null?void 0:I.placement;if(!F)switch(f){case"bestFit":{var se;const ne=(se=E.filter(q=>{if(N){const V=Ka(q.placement);return V===v||V==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(V=>V>0).reduce((V,_)=>V+_,0)]).sort((q,V)=>q[1]-V[1])[0])==null?void 0:se[0];ne&&(F=ne);break}case"initialPlacement":F=l;break}if(a!==F)return{reset:{placement:F}}}return{}}}};function C2(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function E2(e){return cD.some(t=>e[t]>=0)}const ND=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:s="referenceHidden",...a}=qi(e,t);switch(s){case"referenceHidden":{const i=await ah(t,{...a,elementContext:"reference"}),o=C2(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:E2(o)}}}case"escaped":{const i=await ah(t,{...a,altBoundary:!0}),o=C2(i,r.floating);return{data:{escapedOffsets:o,escaped:E2(o)}}}default:return{}}}}},vk=new Set(["left","top"]);async function SD(e,t){const{placement:r,platform:s,elements:a}=e,i=await(s.isRTL==null?void 0:s.isRTL(a.floating)),o=Bi(r),l=Fu(r),c=Ka(r)==="y",u=vk.has(o)?-1:1,d=i&&c?-1:1,h=qi(t,e);let{mainAxis:m,crossAxis:f,alignmentAxis:x}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof x=="number"&&(f=l==="end"?x*-1:x),c?{x:f*d,y:m*u}:{x:m*u,y:f*d}}const kD=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,s;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await SD(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},_D=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:s,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:y=>{let{x:b,y:v}=y;return{x:b,y:v}}},...c}=qi(e,t),u={x:r,y:s},d=await ah(t,c),h=Ka(Bi(a)),m=Yy(h);let f=u[m],x=u[h];if(i){const y=m==="y"?"top":"left",b=m==="y"?"bottom":"right",v=f+d[y],w=f-d[b];f=Ov(v,f,w)}if(o){const y=h==="y"?"top":"left",b=h==="y"?"bottom":"right",v=x+d[y],w=x-d[b];x=Ov(v,x,w)}const g=l.fn({...t,[m]:f,[h]:x});return{...g,data:{x:g.x-r,y:g.y-s,enabled:{[m]:i,[h]:o}}}}}},CD=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:s,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=qi(e,t),d={x:r,y:s},h=Ka(a),m=Yy(h);let f=d[m],x=d[h];const g=qi(l,t),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const w=m==="y"?"height":"width",S=i.reference[m]-i.floating[w]+y.mainAxis,k=i.reference[m]+i.reference[w]-y.mainAxis;f<S?f=S:f>k&&(f=k)}if(u){var b,v;const w=m==="y"?"width":"height",S=vk.has(Bi(a)),k=i.reference[h]-i.floating[w]+(S&&((b=o.offset)==null?void 0:b[h])||0)+(S?0:y.crossAxis),N=i.reference[h]+i.reference[w]+(S?0:((v=o.offset)==null?void 0:v[h])||0)-(S?y.crossAxis:0);x<k?x=k:x>N&&(x=N)}return{[m]:f,[h]:x}}}},ED=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,s;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...u}=qi(e,t),d=await ah(t,u),h=Bi(a),m=Fu(a),f=Ka(a)==="y",{width:x,height:g}=i.floating;let y,b;h==="top"||h==="bottom"?(y=h,b=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(b=h,y=m==="end"?"top":"bottom");const v=g-d.top-d.bottom,w=x-d.left-d.right,S=Lo(g-d[y],v),k=Lo(x-d[b],w),N=!t.middlewareData.shift;let P=S,T=k;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(T=w),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(P=v),N&&!m){const E=zs(d.left,0),M=zs(d.right,0),I=zs(d.top,0),se=zs(d.bottom,0);f?T=x-2*(E!==0||M!==0?E+M:zs(d.left,d.right)):P=g-2*(I!==0||se!==0?I+se:zs(d.top,d.bottom))}await c({...t,availableWidth:T,availableHeight:P});const A=await o.getDimensions(l.floating);return x!==A.width||g!==A.height?{reset:{rects:!0}}:{}}}};function Yf(){return typeof window<"u"}function Lu(e){return yk(e)?(e.nodeName||"").toLowerCase():"#document"}function Ws(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function li(e){var t;return(t=(yk(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function yk(e){return Yf()?e instanceof Node||e instanceof Ws(e).Node:!1}function Fa(e){return Yf()?e instanceof Element||e instanceof Ws(e).Element:!1}function oi(e){return Yf()?e instanceof HTMLElement||e instanceof Ws(e).HTMLElement:!1}function T2(e){return!Yf()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ws(e).ShadowRoot}const TD=new Set(["inline","contents"]);function Dh(e){const{overflow:t,overflowX:r,overflowY:s,display:a}=La(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+r)&&!TD.has(a)}const AD=new Set(["table","td","th"]);function PD(e){return AD.has(Lu(e))}const RD=[":popover-open",":modal"];function Kf(e){return RD.some(t=>{try{return e.matches(t)}catch{return!1}})}const MD=["transform","translate","scale","rotate","perspective"],OD=["transform","translate","scale","rotate","perspective","filter"],ID=["paint","layout","strict","content"];function Xy(e){const t=Zy(),r=Fa(e)?La(e):e;return MD.some(s=>r[s]?r[s]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||OD.some(s=>(r.willChange||"").includes(s))||ID.some(s=>(r.contain||"").includes(s))}function DD(e){let t=zo(e);for(;oi(t)&&!hu(t);){if(Xy(t))return t;if(Kf(t))return null;t=zo(t)}return null}function Zy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const FD=new Set(["html","body","#document"]);function hu(e){return FD.has(Lu(e))}function La(e){return Ws(e).getComputedStyle(e)}function Jf(e){return Fa(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function zo(e){if(Lu(e)==="html")return e;const t=e.assignedSlot||e.parentNode||T2(e)&&e.host||li(e);return T2(t)?t.host:t}function bk(e){const t=zo(e);return hu(t)?e.ownerDocument?e.ownerDocument.body:e.body:oi(t)&&Dh(t)?t:bk(t)}function ih(e,t,r){var s;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=bk(e),i=a===((s=e.ownerDocument)==null?void 0:s.body),o=Ws(a);if(i){const l=Dv(o);return t.concat(o,o.visualViewport||[],Dh(a)?a:[],l&&r?ih(l):[])}return t.concat(a,ih(a,[],r))}function Dv(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function wk(e){const t=La(e);let r=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const a=oi(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:s,l=H0(r)!==i||H0(s)!==o;return l&&(r=i,s=o),{width:r,height:s,$:l}}function eb(e){return Fa(e)?e:e.contextElement}function Uc(e){const t=eb(e);if(!oi(t))return ni(1);const r=t.getBoundingClientRect(),{width:s,height:a,$:i}=wk(t);let o=(i?H0(r.width):r.width)/s,l=(i?H0(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const LD=ni(0);function jk(e){const t=Ws(e);return!Zy()||!t.visualViewport?LD:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function zD(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Ws(e)?!1:t}function zl(e,t,r,s){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=eb(e);let o=ni(1);t&&(s?Fa(s)&&(o=Uc(s)):o=Uc(e));const l=zD(i,r,s)?jk(i):ni(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,d=a.width/o.x,h=a.height/o.y;if(i){const m=Ws(i),f=s&&Fa(s)?Ws(s):s;let x=m,g=Dv(x);for(;g&&s&&f!==x;){const y=Uc(g),b=g.getBoundingClientRect(),v=La(g),w=b.left+(g.clientLeft+parseFloat(v.paddingLeft))*y.x,S=b.top+(g.clientTop+parseFloat(v.paddingTop))*y.y;c*=y.x,u*=y.y,d*=y.x,h*=y.y,c+=w,u+=S,x=Ws(g),g=Dv(x)}}return G0({width:d,height:h,x:c,y:u})}function tb(e,t){const r=Jf(e).scrollLeft;return t?t.left+r:zl(li(e)).left+r}function Nk(e,t,r){r===void 0&&(r=!1);const s=e.getBoundingClientRect(),a=s.left+t.scrollLeft-(r?0:tb(e,s)),i=s.top+t.scrollTop;return{x:a,y:i}}function $D(e){let{elements:t,rect:r,offsetParent:s,strategy:a}=e;const i=a==="fixed",o=li(s),l=t?Kf(t.floating):!1;if(s===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=ni(1);const d=ni(0),h=oi(s);if((h||!h&&!i)&&((Lu(s)!=="body"||Dh(o))&&(c=Jf(s)),oi(s))){const f=zl(s);u=Uc(s),d.x=f.x+s.clientLeft,d.y=f.y+s.clientTop}const m=o&&!h&&!i?Nk(o,c,!0):ni(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+m.x,y:r.y*u.y-c.scrollTop*u.y+d.y+m.y}}function qD(e){return Array.from(e.getClientRects())}function BD(e){const t=li(e),r=Jf(e),s=e.ownerDocument.body,a=zs(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),i=zs(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let o=-r.scrollLeft+tb(e);const l=-r.scrollTop;return La(s).direction==="rtl"&&(o+=zs(t.clientWidth,s.clientWidth)-a),{width:a,height:i,x:o,y:l}}function UD(e,t){const r=Ws(e),s=li(e),a=r.visualViewport;let i=s.clientWidth,o=s.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const u=Zy();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}const VD=new Set(["absolute","fixed"]);function HD(e,t){const r=zl(e,!0,t==="fixed"),s=r.top+e.clientTop,a=r.left+e.clientLeft,i=oi(e)?Uc(e):ni(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,u=s*i.y;return{width:o,height:l,x:c,y:u}}function A2(e,t,r){let s;if(t==="viewport")s=UD(e,r);else if(t==="document")s=BD(li(e));else if(Fa(t))s=HD(t,r);else{const a=jk(e);s={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return G0(s)}function Sk(e,t){const r=zo(e);return r===t||!Fa(r)||hu(r)?!1:La(r).position==="fixed"||Sk(r,t)}function WD(e,t){const r=t.get(e);if(r)return r;let s=ih(e,[],!1).filter(l=>Fa(l)&&Lu(l)!=="body"),a=null;const i=La(e).position==="fixed";let o=i?zo(e):e;for(;Fa(o)&&!hu(o);){const l=La(o),c=Xy(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&VD.has(a.position)||Dh(o)&&!c&&Sk(e,o))?s=s.filter(d=>d!==o):a=l,o=zo(o)}return t.set(e,s),s}function GD(e){let{element:t,boundary:r,rootBoundary:s,strategy:a}=e;const o=[...r==="clippingAncestors"?Kf(t)?[]:WD(t,this._c):[].concat(r),s],l=o[0],c=o.reduce((u,d)=>{const h=A2(t,d,a);return u.top=zs(h.top,u.top),u.right=Lo(h.right,u.right),u.bottom=Lo(h.bottom,u.bottom),u.left=zs(h.left,u.left),u},A2(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function QD(e){const{width:t,height:r}=wk(e);return{width:t,height:r}}function YD(e,t,r){const s=oi(t),a=li(t),i=r==="fixed",o=zl(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=ni(0);function u(){c.x=tb(a)}if(s||!s&&!i)if((Lu(t)!=="body"||Dh(a))&&(l=Jf(t)),s){const f=zl(t,!0,i,t);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}else a&&u();i&&!s&&a&&u();const d=a&&!s&&!i?Nk(a,l):ni(0),h=o.left+l.scrollLeft-c.x-d.x,m=o.top+l.scrollTop-c.y-d.y;return{x:h,y:m,width:o.width,height:o.height}}function Nx(e){return La(e).position==="static"}function P2(e,t){if(!oi(e)||La(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return li(e)===r&&(r=r.ownerDocument.body),r}function kk(e,t){const r=Ws(e);if(Kf(e))return r;if(!oi(e)){let a=zo(e);for(;a&&!hu(a);){if(Fa(a)&&!Nx(a))return a;a=zo(a)}return r}let s=P2(e,t);for(;s&&PD(s)&&Nx(s);)s=P2(s,t);return s&&hu(s)&&Nx(s)&&!Xy(s)?r:s||DD(e)||r}const KD=async function(e){const t=this.getOffsetParent||kk,r=this.getDimensions,s=await r(e.floating);return{reference:YD(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function JD(e){return La(e).direction==="rtl"}const XD={convertOffsetParentRelativeRectToViewportRelativeRect:$D,getDocumentElement:li,getClippingRect:GD,getOffsetParent:kk,getElementRects:KD,getClientRects:qD,getDimensions:QD,getScale:Uc,isElement:Fa,isRTL:JD};function _k(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function ZD(e,t){let r=null,s;const a=li(e);function i(){var l;clearTimeout(s),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:h,width:m,height:f}=u;if(l||t(),!m||!f)return;const x=wm(h),g=wm(a.clientWidth-(d+m)),y=wm(a.clientHeight-(h+f)),b=wm(d),w={rootMargin:-x+"px "+-g+"px "+-y+"px "+-b+"px",threshold:zs(0,Lo(1,c))||1};let S=!0;function k(N){const P=N[0].intersectionRatio;if(P!==c){if(!S)return o();P?o(!1,P):s=setTimeout(()=>{o(!1,1e-7)},1e3)}P===1&&!_k(u,e.getBoundingClientRect())&&o(),S=!1}try{r=new IntersectionObserver(k,{...w,root:a.ownerDocument})}catch{r=new IntersectionObserver(k,w)}r.observe(e)}return o(!0),i}function eF(e,t,r,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,u=eb(e),d=a||i?[...u?ih(u):[],...ih(t)]:[];d.forEach(b=>{a&&b.addEventListener("scroll",r,{passive:!0}),i&&b.addEventListener("resize",r)});const h=u&&l?ZD(u,r):null;let m=-1,f=null;o&&(f=new ResizeObserver(b=>{let[v]=b;v&&v.target===u&&f&&(f.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var w;(w=f)==null||w.observe(t)})),r()}),u&&!c&&f.observe(u),f.observe(t));let x,g=c?zl(e):null;c&&y();function y(){const b=zl(e);g&&!_k(g,b)&&r(),g=b,x=requestAnimationFrame(y)}return r(),()=>{var b;d.forEach(v=>{a&&v.removeEventListener("scroll",r),i&&v.removeEventListener("resize",r)}),h==null||h(),(b=f)==null||b.disconnect(),f=null,c&&cancelAnimationFrame(x)}}const tF=kD,rF=_D,nF=jD,sF=ED,aF=ND,R2=wD,iF=CD,oF=(e,t,r)=>{const s=new Map,a={platform:XD,...r},i={...a.platform,_c:s};return bD(e,t,{...a,platform:i})};var lF=typeof document<"u",cF=function(){},u0=lF?p.useLayoutEffect:cF;function Q0(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,s,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(s=r;s--!==0;)if(!Q0(e[s],t[s]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!{}.hasOwnProperty.call(t,a[s]))return!1;for(s=r;s--!==0;){const i=a[s];if(!(i==="_owner"&&e.$$typeof)&&!Q0(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function Ck(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function M2(e,t){const r=Ck(e);return Math.round(t*r)/r}function Sx(e){const t=p.useRef(e);return u0(()=>{t.current=e}),t}function uF(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:s=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=p.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[m,f]=p.useState(s);Q0(m,s)||f(s);const[x,g]=p.useState(null),[y,b]=p.useState(null),v=p.useCallback(q=>{q!==N.current&&(N.current=q,g(q))},[]),w=p.useCallback(q=>{q!==P.current&&(P.current=q,b(q))},[]),S=i||x,k=o||y,N=p.useRef(null),P=p.useRef(null),T=p.useRef(d),A=c!=null,E=Sx(c),M=Sx(a),I=Sx(u),se=p.useCallback(()=>{if(!N.current||!P.current)return;const q={placement:t,strategy:r,middleware:m};M.current&&(q.platform=M.current),oF(N.current,P.current,q).then(V=>{const _={...V,isPositioned:I.current!==!1};ee.current&&!Q0(T.current,_)&&(T.current=_,Kl.flushSync(()=>{h(_)}))})},[m,t,r,M,I]);u0(()=>{u===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h(q=>({...q,isPositioned:!1})))},[u]);const ee=p.useRef(!1);u0(()=>(ee.current=!0,()=>{ee.current=!1}),[]),u0(()=>{if(S&&(N.current=S),k&&(P.current=k),S&&k){if(E.current)return E.current(S,k,se);se()}},[S,k,se,E,A]);const Y=p.useMemo(()=>({reference:N,floating:P,setReference:v,setFloating:w}),[v,w]),F=p.useMemo(()=>({reference:S,floating:k}),[S,k]),ne=p.useMemo(()=>{const q={position:r,left:0,top:0};if(!F.floating)return q;const V=M2(F.floating,d.x),_=M2(F.floating,d.y);return l?{...q,transform:"translate("+V+"px, "+_+"px)",...Ck(F.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:V,top:_}},[r,l,F.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:se,refs:Y,elements:F,floatingStyles:ne}),[d,se,Y,F,ne])}const dF=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:s,padding:a}=typeof e=="function"?e(r):e;return s&&t(s)?s.current!=null?R2({element:s.current,padding:a}).fn(r):{}:s?R2({element:s,padding:a}).fn(r):{}}}},hF=(e,t)=>({...tF(e),options:[e,t]}),mF=(e,t)=>({...rF(e),options:[e,t]}),fF=(e,t)=>({...iF(e),options:[e,t]}),pF=(e,t)=>({...nF(e),options:[e,t]}),xF=(e,t)=>({...sF(e),options:[e,t]}),gF=(e,t)=>({...aF(e),options:[e,t]}),vF=(e,t)=>({...dF(e),options:[e,t]});var yF="Arrow",Ek=p.forwardRef((e,t)=>{const{children:r,width:s=10,height:a=5,...i}=e;return n.jsx(_t.svg,{...i,ref:t,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});Ek.displayName=yF;var bF=Ek;function Xf(e){const[t,r]=p.useState(void 0);return hn(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else r(void 0)},[e]),t}var rb="Popper",[Tk,zu]=On(rb),[wF,Ak]=Tk(rb),Pk=e=>{const{__scopePopper:t,children:r}=e,[s,a]=p.useState(null);return n.jsx(wF,{scope:t,anchor:s,onAnchorChange:a,children:r})};Pk.displayName=rb;var Rk="PopperAnchor",Mk=p.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:s,...a}=e,i=Ak(Rk,r),o=p.useRef(null),l=Yt(t,o);return p.useEffect(()=>{i.onAnchorChange((s==null?void 0:s.current)||o.current)}),s?null:n.jsx(_t.div,{...a,ref:l})});Mk.displayName=Rk;var nb="PopperContent",[jF,NF]=Tk(nb),Ok=p.forwardRef((e,t)=>{var X,de,oe,me,Ee,we;const{__scopePopper:r,side:s="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:f="optimized",onPlaced:x,...g}=e,y=Ak(nb,r),[b,v]=p.useState(null),w=Yt(t,Le=>v(Le)),[S,k]=p.useState(null),N=Xf(S),P=(N==null?void 0:N.width)??0,T=(N==null?void 0:N.height)??0,A=s+(i!=="center"?"-"+i:""),E=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},M=Array.isArray(u)?u:[u],I=M.length>0,se={padding:E,boundary:M.filter(kF),altBoundary:I},{refs:ee,floatingStyles:Y,placement:F,isPositioned:ne,middlewareData:q}=uF({strategy:"fixed",placement:A,whileElementsMounted:(...Le)=>eF(...Le,{animationFrame:f==="always"}),elements:{reference:y.anchor},middleware:[hF({mainAxis:a+T,alignmentAxis:o}),c&&mF({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?fF():void 0,...se}),c&&pF({...se}),xF({...se,apply:({elements:Le,rects:_e,availableWidth:ut,availableHeight:at})=>{const{width:Ct,height:L}=_e.reference,ke=Le.floating.style;ke.setProperty("--radix-popper-available-width",`${ut}px`),ke.setProperty("--radix-popper-available-height",`${at}px`),ke.setProperty("--radix-popper-anchor-width",`${Ct}px`),ke.setProperty("--radix-popper-anchor-height",`${L}px`)}}),S&&vF({element:S,padding:l}),_F({arrowWidth:P,arrowHeight:T}),m&&gF({strategy:"referenceHidden",...se})]}),[V,_]=Fk(F),U=sn(x);hn(()=>{ne&&(U==null||U())},[ne,U]);const H=(X=q.arrow)==null?void 0:X.x,O=(de=q.arrow)==null?void 0:de.y,B=((oe=q.arrow)==null?void 0:oe.centerOffset)!==0,[W,K]=p.useState();return hn(()=>{b&&K(window.getComputedStyle(b).zIndex)},[b]),n.jsx("div",{ref:ee.setFloating,"data-radix-popper-content-wrapper":"",style:{...Y,transform:ne?Y.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:W,"--radix-popper-transform-origin":[(me=q.transformOrigin)==null?void 0:me.x,(Ee=q.transformOrigin)==null?void 0:Ee.y].join(" "),...((we=q.hide)==null?void 0:we.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:n.jsx(jF,{scope:r,placedSide:V,onArrowChange:k,arrowX:H,arrowY:O,shouldHideArrow:B,children:n.jsx(_t.div,{"data-side":V,"data-align":_,...g,ref:w,style:{...g.style,animation:ne?void 0:"none"}})})})});Ok.displayName=nb;var Ik="PopperArrow",SF={top:"bottom",right:"left",bottom:"top",left:"right"},Dk=p.forwardRef(function(t,r){const{__scopePopper:s,...a}=t,i=NF(Ik,s),o=SF[i.placedSide];return n.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:n.jsx(bF,{...a,ref:r,style:{...a.style,display:"block"}})})});Dk.displayName=Ik;function kF(e){return e!==null}var _F=e=>({name:"transformOrigin",options:e,fn(t){var y,b,v;const{placement:r,rects:s,middlewareData:a}=t,o=((y=a.arrow)==null?void 0:y.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=Fk(r),h={start:"0%",center:"50%",end:"100%"}[d],m=(((b=a.arrow)==null?void 0:b.x)??0)+l/2,f=(((v=a.arrow)==null?void 0:v.y)??0)+c/2;let x="",g="";return u==="bottom"?(x=o?h:`${m}px`,g=`${-c}px`):u==="top"?(x=o?h:`${m}px`,g=`${s.floating.height+c}px`):u==="right"?(x=`${-c}px`,g=o?h:`${f}px`):u==="left"&&(x=`${s.floating.width+c}px`,g=o?h:`${f}px`),{data:{x,y:g}}}});function Fk(e){const[t,r="center"]=e.split("-");return[t,r]}var Lk=Pk,sb=Mk,ab=Ok,ib=Dk,[Zf,Tse]=On("Tooltip",[zu]),ob=zu(),zk="TooltipProvider",CF=700,O2="tooltip.open",[EF,$k]=Zf(zk),qk=e=>{const{__scopeTooltip:t,delayDuration:r=CF,skipDelayDuration:s=300,disableHoverableContent:a=!1,children:i}=e,o=p.useRef(!0),l=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),n.jsx(EF,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(u=>{l.current=u},[]),disableHoverableContent:a,children:i})};qk.displayName=zk;var Bk="Tooltip",[Ase,ep]=Zf(Bk),Fv="TooltipTrigger",TF=p.forwardRef((e,t)=>{const{__scopeTooltip:r,...s}=e,a=ep(Fv,r),i=$k(Fv,r),o=ob(r),l=p.useRef(null),c=Yt(t,l,a.onTriggerChange),u=p.useRef(!1),d=p.useRef(!1),h=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),n.jsx(sb,{asChild:!0,...o,children:n.jsx(_t.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...s,ref:c,onPointerMove:Ze(e.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:Ze(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:Ze(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Ze(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:Ze(e.onBlur,a.onClose),onClick:Ze(e.onClick,a.onClose)})})});TF.displayName=Fv;var AF="TooltipPortal",[Pse,PF]=Zf(AF,{forceMount:void 0}),mu="TooltipContent",Uk=p.forwardRef((e,t)=>{const r=PF(mu,e.__scopeTooltip),{forceMount:s=r.forceMount,side:a="top",...i}=e,o=ep(mu,e.__scopeTooltip);return n.jsx($n,{present:s||o.open,children:o.disableHoverableContent?n.jsx(Vk,{side:a,...i,ref:t}):n.jsx(RF,{side:a,...i,ref:t})})}),RF=p.forwardRef((e,t)=>{const r=ep(mu,e.__scopeTooltip),s=$k(mu,e.__scopeTooltip),a=p.useRef(null),i=Yt(t,a),[o,l]=p.useState(null),{trigger:c,onClose:u}=r,d=a.current,{onPointerInTransitChange:h}=s,m=p.useCallback(()=>{l(null),h(!1)},[h]),f=p.useCallback((x,g)=>{const y=x.currentTarget,b={x:x.clientX,y:x.clientY},v=FF(b,y.getBoundingClientRect()),w=LF(b,v),S=zF(g.getBoundingClientRect()),k=qF([...w,...S]);l(k),h(!0)},[h]);return p.useEffect(()=>()=>m(),[m]),p.useEffect(()=>{if(c&&d){const x=y=>f(y,d),g=y=>f(y,c);return c.addEventListener("pointerleave",x),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",x),d.removeEventListener("pointerleave",g)}}},[c,d,f,m]),p.useEffect(()=>{if(o){const x=g=>{const y=g.target,b={x:g.clientX,y:g.clientY},v=(c==null?void 0:c.contains(y))||(d==null?void 0:d.contains(y)),w=!$F(b,o);v?m():w&&(m(),u())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,d,o,u,m]),n.jsx(Vk,{...e,ref:i})}),[MF,OF]=Zf(Bk,{isInside:!1}),IF=N6("TooltipContent"),Vk=p.forwardRef((e,t)=>{const{__scopeTooltip:r,children:s,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=ep(mu,r),u=ob(r),{onClose:d}=c;return p.useEffect(()=>(document.addEventListener(O2,d),()=>document.removeEventListener(O2,d)),[d]),p.useEffect(()=>{if(c.trigger){const h=m=>{const f=m.target;f!=null&&f.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),n.jsx(Ou,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:n.jsxs(ab,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[n.jsx(IF,{children:s}),n.jsx(MF,{scope:r,isInside:!0,children:n.jsx(rO,{id:c.contentId,role:"tooltip",children:a||s})})]})})});Uk.displayName=mu;var Hk="TooltipArrow",DF=p.forwardRef((e,t)=>{const{__scopeTooltip:r,...s}=e,a=ob(r);return OF(Hk,r).isInside?null:n.jsx(ib,{...a,...s,ref:t})});DF.displayName=Hk;function FF(e,t){const r=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,s,a,i)){case i:return"left";case a:return"right";case r:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function LF(e,t,r=5){const s=[];switch(t){case"top":s.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":s.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":s.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":s.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return s}function zF(e){const{top:t,right:r,bottom:s,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:s},{x:a,y:s}]}function $F(e,t){const{x:r,y:s}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,h=c.x,m=c.y;d>s!=m>s&&r<(h-u)*(s-d)/(m-d)+u&&(a=!a)}return a}function qF(e){const t=e.slice();return t.sort((r,s)=>r.x<s.x?-1:r.x>s.x?1:r.y<s.y?-1:r.y>s.y?1:0),BF(t)}function BF(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const a=e[s];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let s=e.length-1;s>=0;s--){const a=e[s];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var UF=qk,Wk=Uk;const VF=UF,HF=p.forwardRef(({className:e,sideOffset:t=4,...r},s)=>n.jsx(Wk,{ref:s,sideOffset:t,className:qe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));HF.displayName=Wk.displayName;var tp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},rp=typeof window>"u"||"Deno"in globalThis;function ka(){}function WF(e,t){return typeof e=="function"?e(t):e}function GF(e){return typeof e=="number"&&e>=0&&e!==1/0}function QF(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Lv(e,t){return typeof e=="function"?e(t):e}function YF(e,t){return typeof e=="function"?e(t):e}function I2(e,t){const{type:r="all",exact:s,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(s){if(t.queryHash!==lb(o,t.options))return!1}else if(!lh(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function D2(e,t){const{exact:r,status:s,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(oh(t.options.mutationKey)!==oh(i))return!1}else if(!lh(t.options.mutationKey,i))return!1}return!(s&&t.state.status!==s||a&&!a(t))}function lb(e,t){return((t==null?void 0:t.queryKeyHashFn)||oh)(e)}function oh(e){return JSON.stringify(e,(t,r)=>zv(r)?Object.keys(r).sort().reduce((s,a)=>(s[a]=r[a],s),{}):r)}function lh(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>lh(e[r],t[r])):!1}function Gk(e,t){if(e===t)return e;const r=F2(e)&&F2(t);if(r||zv(e)&&zv(t)){const s=r?e:Object.keys(e),a=s.length,i=r?t:Object.keys(t),o=i.length,l=r?[]:{},c=new Set(s);let u=0;for(let d=0;d<o;d++){const h=r?d:i[d];(!r&&c.has(h)||r)&&e[h]===void 0&&t[h]===void 0?(l[h]=void 0,u++):(l[h]=Gk(e[h],t[h]),l[h]===e[h]&&e[h]!==void 0&&u++)}return a===o&&u===a?e:l}return t}function F2(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function zv(e){if(!L2(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!L2(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function L2(e){return Object.prototype.toString.call(e)==="[object Object]"}function KF(e){return new Promise(t=>{setTimeout(t,e)})}function JF(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Gk(e,t):t}function XF(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function ZF(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var cb=Symbol();function Qk(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===cb?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Nl,po,Yc,XN,eL=(XN=class extends tp{constructor(){super();jr(this,Nl);jr(this,po);jr(this,Yc);er(this,Yc,t=>{if(!rp&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Re(this,po)||this.setEventListener(Re(this,Yc))}onUnsubscribe(){var t;this.hasListeners()||((t=Re(this,po))==null||t.call(this),er(this,po,void 0))}setEventListener(t){var r;er(this,Yc,t),(r=Re(this,po))==null||r.call(this),er(this,po,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){Re(this,Nl)!==t&&(er(this,Nl,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Re(this,Nl)=="boolean"?Re(this,Nl):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Nl=new WeakMap,po=new WeakMap,Yc=new WeakMap,XN),Yk=new eL,Kc,xo,Jc,ZN,tL=(ZN=class extends tp{constructor(){super();jr(this,Kc,!0);jr(this,xo);jr(this,Jc);er(this,Jc,t=>{if(!rp&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){Re(this,xo)||this.setEventListener(Re(this,Jc))}onUnsubscribe(){var t;this.hasListeners()||((t=Re(this,xo))==null||t.call(this),er(this,xo,void 0))}setEventListener(t){var r;er(this,Jc,t),(r=Re(this,xo))==null||r.call(this),er(this,xo,t(this.setOnline.bind(this)))}setOnline(t){Re(this,Kc)!==t&&(er(this,Kc,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return Re(this,Kc)}},Kc=new WeakMap,xo=new WeakMap,Jc=new WeakMap,ZN),Y0=new tL;function rL(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function s(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{s({status:"fulfilled",value:a}),e(a)},r.reject=a=>{s({status:"rejected",reason:a}),t(a)},r}function nL(e){return Math.min(1e3*2**e,3e4)}function Kk(e){return(e??"online")==="online"?Y0.isOnline():!0}var Jk=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function kx(e){return e instanceof Jk}function Xk(e){let t=!1,r=0,s=!1,a;const i=rL(),o=g=>{var y;s||(m(new Jk(g)),(y=e.abort)==null||y.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>Yk.isFocused()&&(e.networkMode==="always"||Y0.isOnline())&&e.canRun(),d=()=>Kk(e.networkMode)&&e.canRun(),h=g=>{var y;s||(s=!0,(y=e.onSuccess)==null||y.call(e,g),a==null||a(),i.resolve(g))},m=g=>{var y;s||(s=!0,(y=e.onError)==null||y.call(e,g),a==null||a(),i.reject(g))},f=()=>new Promise(g=>{var y;a=b=>{(s||u())&&g(b)},(y=e.onPause)==null||y.call(e)}).then(()=>{var g;a=void 0,s||(g=e.onContinue)==null||g.call(e)}),x=()=>{if(s)return;let g;const y=r===0?e.initialPromise:void 0;try{g=y??e.fn()}catch(b){g=Promise.reject(b)}Promise.resolve(g).then(h).catch(b=>{var N;if(s)return;const v=e.retry??(rp?0:3),w=e.retryDelay??nL,S=typeof w=="function"?w(r,b):w,k=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,b);if(t||!k){m(b);return}r++,(N=e.onFail)==null||N.call(e,r,b),KF(S).then(()=>u()?void 0:f()).then(()=>{t?m(b):x()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?x():f().then(x),i)}}var sL=e=>setTimeout(e,0);function aL(){let e=[],t=0,r=l=>{l()},s=l=>{l()},a=sL;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{s(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{a=l}}}var ss=aL(),Sl,e3,Zk=(e3=class{constructor(){jr(this,Sl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),GF(this.gcTime)&&er(this,Sl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(rp?1/0:5*60*1e3))}clearGcTimeout(){Re(this,Sl)&&(clearTimeout(Re(this,Sl)),er(this,Sl,void 0))}},Sl=new WeakMap,e3),Xc,kl,ra,_l,Hn,kh,Cl,Ca,xi,t3,iL=(t3=class extends Zk{constructor(t){super();jr(this,Ca);jr(this,Xc);jr(this,kl);jr(this,ra);jr(this,_l);jr(this,Hn);jr(this,kh);jr(this,Cl);er(this,Cl,!1),er(this,kh,t.defaultOptions),this.setOptions(t.options),this.observers=[],er(this,_l,t.client),er(this,ra,Re(this,_l).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,er(this,Xc,lL(this.options)),this.state=t.state??Re(this,Xc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Re(this,Hn))==null?void 0:t.promise}setOptions(t){this.options={...Re(this,kh),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Re(this,ra).remove(this)}setData(t,r){const s=JF(this.state.data,t,this.options);return Bn(this,Ca,xi).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){Bn(this,Ca,xi).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,a;const r=(s=Re(this,Hn))==null?void 0:s.promise;return(a=Re(this,Hn))==null||a.cancel(t),r?r.then(ka).catch(ka):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Re(this,Xc))}isActive(){return this.observers.some(t=>YF(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===cb||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Lv(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!QF(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Re(this,Hn))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Re(this,Hn))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Re(this,ra).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Re(this,Hn)&&(Re(this,Cl)?Re(this,Hn).cancel({revert:!0}):Re(this,Hn).cancelRetry()),this.scheduleGc()),Re(this,ra).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Bn(this,Ca,xi).call(this,{type:"invalidate"})}fetch(t,r){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Re(this,Hn))return Re(this,Hn).continueRetry(),Re(this,Hn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(f=>f.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,a=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(er(this,Cl,!0),s.signal)})},i=()=>{const m=Qk(this.options,r),x=(()=>{const g={client:Re(this,_l),queryKey:this.queryKey,meta:this.meta};return a(g),g})();return er(this,Cl,!1),this.options.persister?this.options.persister(m,x,this):m(x)},l=(()=>{const m={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Re(this,_l),state:this.state,fetchFn:i};return a(m),m})();(u=this.options.behavior)==null||u.onFetch(l,this),er(this,kl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&Bn(this,Ca,xi).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=m=>{var f,x,g,y;kx(m)&&m.silent||Bn(this,Ca,xi).call(this,{type:"error",error:m}),kx(m)||((x=(f=Re(this,ra).config).onError)==null||x.call(f,m,this),(y=(g=Re(this,ra).config).onSettled)==null||y.call(g,this.state.data,m,this)),this.scheduleGc()};return er(this,Hn,Xk({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var f,x,g,y;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(b){c(b);return}(x=(f=Re(this,ra).config).onSuccess)==null||x.call(f,m,this),(y=(g=Re(this,ra).config).onSettled)==null||y.call(g,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,f)=>{Bn(this,Ca,xi).call(this,{type:"failed",failureCount:m,error:f})},onPause:()=>{Bn(this,Ca,xi).call(this,{type:"pause"})},onContinue:()=>{Bn(this,Ca,xi).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Re(this,Hn).start()}},Xc=new WeakMap,kl=new WeakMap,ra=new WeakMap,_l=new WeakMap,Hn=new WeakMap,kh=new WeakMap,Cl=new WeakMap,Ca=new WeakSet,xi=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...oL(s.data,this.options),fetchMeta:t.meta??null};case"success":return er(this,kl,void 0),{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return kx(a)&&a.revert&&Re(this,kl)?{...Re(this,kl),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),ss.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Re(this,ra).notify({query:this,type:"updated",action:t})})},t3);function oL(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Kk(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function lL(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,s=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Va,r3,cL=(r3=class extends tp{constructor(t={}){super();jr(this,Va);this.config=t,er(this,Va,new Map)}build(t,r,s){const a=r.queryKey,i=r.queryHash??lb(a,r);let o=this.get(i);return o||(o=new iL({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){Re(this,Va).has(t.queryHash)||(Re(this,Va).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Re(this,Va).get(t.queryHash);r&&(t.destroy(),r===t&&Re(this,Va).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ss.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Re(this,Va).get(t)}getAll(){return[...Re(this,Va).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(s=>I2(r,s))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(s=>I2(t,s)):r}notify(t){ss.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){ss.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ss.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Va=new WeakMap,r3),Ha,rs,El,Wa,io,n3,uL=(n3=class extends Zk{constructor(t){super();jr(this,Wa);jr(this,Ha);jr(this,rs);jr(this,El);this.mutationId=t.mutationId,er(this,rs,t.mutationCache),er(this,Ha,[]),this.state=t.state||dL(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Re(this,Ha).includes(t)||(Re(this,Ha).push(t),this.clearGcTimeout(),Re(this,rs).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){er(this,Ha,Re(this,Ha).filter(r=>r!==t)),this.scheduleGc(),Re(this,rs).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Re(this,Ha).length||(this.state.status==="pending"?this.scheduleGc():Re(this,rs).remove(this))}continue(){var t;return((t=Re(this,El))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,l,c,u,d,h,m,f,x,g,y,b,v,w,S,k,N,P,T;const r=()=>{Bn(this,Wa,io).call(this,{type:"continue"})};er(this,El,Xk({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(A,E)=>{Bn(this,Wa,io).call(this,{type:"failed",failureCount:A,error:E})},onPause:()=>{Bn(this,Wa,io).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Re(this,rs).canRun(this)}));const s=this.state.status==="pending",a=!Re(this,El).canStart();try{if(s)r();else{Bn(this,Wa,io).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(i=Re(this,rs).config).onMutate)==null?void 0:o.call(i,t,this));const E=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));E!==this.state.context&&Bn(this,Wa,io).call(this,{type:"pending",context:E,variables:t,isPaused:a})}const A=await Re(this,El).start();return await((d=(u=Re(this,rs).config).onSuccess)==null?void 0:d.call(u,A,t,this.state.context,this)),await((m=(h=this.options).onSuccess)==null?void 0:m.call(h,A,t,this.state.context)),await((x=(f=Re(this,rs).config).onSettled)==null?void 0:x.call(f,A,null,this.state.variables,this.state.context,this)),await((y=(g=this.options).onSettled)==null?void 0:y.call(g,A,null,t,this.state.context)),Bn(this,Wa,io).call(this,{type:"success",data:A}),A}catch(A){try{throw await((v=(b=Re(this,rs).config).onError)==null?void 0:v.call(b,A,t,this.state.context,this)),await((S=(w=this.options).onError)==null?void 0:S.call(w,A,t,this.state.context)),await((N=(k=Re(this,rs).config).onSettled)==null?void 0:N.call(k,void 0,A,this.state.variables,this.state.context,this)),await((T=(P=this.options).onSettled)==null?void 0:T.call(P,void 0,A,t,this.state.context)),A}finally{Bn(this,Wa,io).call(this,{type:"error",error:A})}}finally{Re(this,rs).runNext(this)}}},Ha=new WeakMap,rs=new WeakMap,El=new WeakMap,Wa=new WeakSet,io=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ss.batch(()=>{Re(this,Ha).forEach(s=>{s.onMutationUpdate(t)}),Re(this,rs).notify({mutation:this,type:"updated",action:t})})},n3);function dL(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var wi,Ea,_h,s3,hL=(s3=class extends tp{constructor(t={}){super();jr(this,wi);jr(this,Ea);jr(this,_h);this.config=t,er(this,wi,new Set),er(this,Ea,new Map),er(this,_h,0)}build(t,r,s){const a=new uL({mutationCache:this,mutationId:++Zh(this,_h)._,options:t.defaultMutationOptions(r),state:s});return this.add(a),a}add(t){Re(this,wi).add(t);const r=jm(t);if(typeof r=="string"){const s=Re(this,Ea).get(r);s?s.push(t):Re(this,Ea).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Re(this,wi).delete(t)){const r=jm(t);if(typeof r=="string"){const s=Re(this,Ea).get(r);if(s)if(s.length>1){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}else s[0]===t&&Re(this,Ea).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=jm(t);if(typeof r=="string"){const s=Re(this,Ea).get(r),a=s==null?void 0:s.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var s;const r=jm(t);if(typeof r=="string"){const a=(s=Re(this,Ea).get(r))==null?void 0:s.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ss.batch(()=>{Re(this,wi).forEach(t=>{this.notify({type:"removed",mutation:t})}),Re(this,wi).clear(),Re(this,Ea).clear()})}getAll(){return Array.from(Re(this,wi))}find(t){const r={exact:!0,...t};return this.getAll().find(s=>D2(r,s))}findAll(t={}){return this.getAll().filter(r=>D2(t,r))}notify(t){ss.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return ss.batch(()=>Promise.all(t.map(r=>r.continue().catch(ka))))}},wi=new WeakMap,Ea=new WeakMap,_h=new WeakMap,s3);function jm(e){var t;return(t=e.options.scope)==null?void 0:t.id}function z2(e){return{onFetch:(t,r)=>{var d,h,m,f,x;const s=t.options,a=(m=(h=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,i=((f=t.state.data)==null?void 0:f.pages)||[],o=((x=t.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const y=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},b=Qk(t.options,t.fetchOptions),v=async(w,S,k)=>{if(g)return Promise.reject();if(S==null&&w.pages.length)return Promise.resolve(w);const P=(()=>{const M={client:t.client,queryKey:t.queryKey,pageParam:S,direction:k?"backward":"forward",meta:t.options.meta};return y(M),M})(),T=await b(P),{maxPages:A}=t.options,E=k?ZF:XF;return{pages:E(w.pages,T,A),pageParams:E(w.pageParams,S,A)}};if(a&&i.length){const w=a==="backward",S=w?mL:$2,k={pages:i,pageParams:o},N=S(s,k);l=await v(k,N,w)}else{const w=e??i.length;do{const S=c===0?o[0]??s.initialPageParam:$2(s,l);if(c>0&&S==null)break;l=await v(l,S),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var g,y;return(y=(g=t.options).persister)==null?void 0:y.call(g,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function $2(e,{pages:t,pageParams:r}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,r[s],r):void 0}function mL(e,{pages:t,pageParams:r}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,r[0],r):void 0}var Xr,go,vo,Zc,eu,yo,tu,ru,a3,fL=(a3=class{constructor(e={}){jr(this,Xr);jr(this,go);jr(this,vo);jr(this,Zc);jr(this,eu);jr(this,yo);jr(this,tu);jr(this,ru);er(this,Xr,e.queryCache||new cL),er(this,go,e.mutationCache||new hL),er(this,vo,e.defaultOptions||{}),er(this,Zc,new Map),er(this,eu,new Map),er(this,yo,0)}mount(){Zh(this,yo)._++,Re(this,yo)===1&&(er(this,tu,Yk.subscribe(async e=>{e&&(await this.resumePausedMutations(),Re(this,Xr).onFocus())})),er(this,ru,Y0.subscribe(async e=>{e&&(await this.resumePausedMutations(),Re(this,Xr).onOnline())})))}unmount(){var e,t;Zh(this,yo)._--,Re(this,yo)===0&&((e=Re(this,tu))==null||e.call(this),er(this,tu,void 0),(t=Re(this,ru))==null||t.call(this),er(this,ru,void 0))}isFetching(e){return Re(this,Xr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Re(this,go).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Re(this,Xr).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=Re(this,Xr).build(this,t),s=r.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Lv(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return Re(this,Xr).findAll(e).map(({queryKey:t,state:r})=>{const s=r.data;return[t,s]})}setQueryData(e,t,r){const s=this.defaultQueryOptions({queryKey:e}),a=Re(this,Xr).get(s.queryHash),i=a==null?void 0:a.state.data,o=WF(t,i);if(o!==void 0)return Re(this,Xr).build(this,s).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return ss.batch(()=>Re(this,Xr).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Re(this,Xr).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Re(this,Xr);ss.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Re(this,Xr);return ss.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},s=ss.batch(()=>Re(this,Xr).findAll(e).map(a=>a.cancel(r)));return Promise.all(s).then(ka).catch(ka)}invalidateQueries(e,t={}){return ss.batch(()=>(Re(this,Xr).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},s=ss.batch(()=>Re(this,Xr).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(ka)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(ka)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Re(this,Xr).build(this,t);return r.isStaleByTime(Lv(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ka).catch(ka)}fetchInfiniteQuery(e){return e.behavior=z2(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ka).catch(ka)}ensureInfiniteQueryData(e){return e.behavior=z2(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Y0.isOnline()?Re(this,go).resumePausedMutations():Promise.resolve()}getQueryCache(){return Re(this,Xr)}getMutationCache(){return Re(this,go)}getDefaultOptions(){return Re(this,vo)}setDefaultOptions(e){er(this,vo,e)}setQueryDefaults(e,t){Re(this,Zc).set(oh(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Re(this,Zc).values()],r={};return t.forEach(s=>{lh(e,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(e,t){Re(this,eu).set(oh(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Re(this,eu).values()],r={};return t.forEach(s=>{lh(e,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Re(this,vo).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=lb(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===cb&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Re(this,vo).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Re(this,Xr).clear(),Re(this,go).clear()}},Xr=new WeakMap,go=new WeakMap,vo=new WeakMap,Zc=new WeakMap,eu=new WeakMap,yo=new WeakMap,tu=new WeakMap,ru=new WeakMap,a3),pL=p.createContext(void 0),xL=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(pL.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ch(){return ch=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ch.apply(this,arguments)}var jo;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(jo||(jo={}));const q2="popstate";function gL(e){e===void 0&&(e={});function t(s,a){let{pathname:i,search:o,hash:l}=s.location;return $v("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:K0(a)}return yL(t,r,null,e)}function ln(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function e8(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function vL(){return Math.random().toString(36).substr(2,8)}function B2(e,t){return{usr:e.state,key:e.key,idx:t}}function $v(e,t,r,s){return r===void 0&&(r=null),ch({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?$u(t):t,{state:r,key:t&&t.key||s||vL()})}function K0(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function $u(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function yL(e,t,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:i=!1}=s,o=a.history,l=jo.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(ch({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=jo.Pop;let y=d(),b=y==null?null:y-u;u=y,c&&c({action:l,location:g.location,delta:b})}function m(y,b){l=jo.Push;let v=$v(g.location,y,b);u=d()+1;let w=B2(v,u),S=g.createHref(v);try{o.pushState(w,"",S)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;a.location.assign(S)}i&&c&&c({action:l,location:g.location,delta:1})}function f(y,b){l=jo.Replace;let v=$v(g.location,y,b);u=d();let w=B2(v,u),S=g.createHref(v);o.replaceState(w,"",S),i&&c&&c({action:l,location:g.location,delta:0})}function x(y){let b=a.location.origin!=="null"?a.location.origin:a.location.href,v=typeof y=="string"?y:K0(y);return v=v.replace(/ $/,"%20"),ln(b,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,b)}let g={get action(){return l},get location(){return e(a,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(q2,h),c=y,()=>{a.removeEventListener(q2,h),c=null}},createHref(y){return t(a,y)},createURL:x,encodeLocation(y){let b=x(y);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:f,go(y){return o.go(y)}};return g}var U2;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(U2||(U2={}));function bL(e,t,r){return r===void 0&&(r="/"),wL(e,t,r,!1)}function wL(e,t,r,s){let a=typeof t=="string"?$u(t):t,i=fu(a.pathname||"/",r);if(i==null)return null;let o=t8(e);jL(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=ML(i);l=PL(o[c],u,s)}return l}function t8(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(ln(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let u=Mo([s,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(ln(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),t8(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:TL(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of r8(i.path))a(i,o,c)}),t}function r8(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let o=r8(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function jL(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:AL(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const NL=/^:[\w-]+$/,SL=3,kL=2,_L=1,CL=10,EL=-2,V2=e=>e==="*";function TL(e,t){let r=e.split("/"),s=r.length;return r.some(V2)&&(s+=EL),t&&(s+=kL),r.filter(a=>!V2(a)).reduce((a,i)=>a+(NL.test(i)?SL:i===""?_L:CL),s)}function AL(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function PL(e,t,r){let{routesMeta:s}=e,a={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=J0({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!h&&u&&r&&!s[s.length-1].route.index&&(h=J0({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:Mo([i,h.pathname]),pathnameBase:FL(Mo([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=Mo([i,h.pathnameBase]))}return o}function J0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=RL(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:s.reduce((u,d,h)=>{let{paramName:m,isOptional:f}=d;if(m==="*"){let g=l[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const x=l[h];return f&&!x?u[m]=void 0:u[m]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function RL(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),e8(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function ML(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return e8(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function fu(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function OL(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:a=""}=typeof e=="string"?$u(e):e;return{pathname:r?r.startsWith("/")?r:IL(r,t):t,search:LL(s),hash:zL(a)}}function IL(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function _x(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function DL(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function n8(e,t){let r=DL(e);return t?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function s8(e,t,r,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=$u(e):(a=ch({},e),ln(!a.pathname||!a.pathname.includes("?"),_x("?","pathname","search",a)),ln(!a.pathname||!a.pathname.includes("#"),_x("#","pathname","hash",a)),ln(!a.search||!a.search.includes("#"),_x("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!s&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;a.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=OL(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Mo=e=>e.join("/").replace(/\/\/+/g,"/"),FL=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),LL=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,zL=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function $L(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const a8=["post","put","patch","delete"];new Set(a8);const qL=["get",...a8];new Set(qL);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uh(){return uh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},uh.apply(this,arguments)}const np=p.createContext(null),i8=p.createContext(null),Qo=p.createContext(null),sp=p.createContext(null),Yo=p.createContext({outlet:null,matches:[],isDataRoute:!1}),o8=p.createContext(null);function BL(e,t){let{relative:r}=t===void 0?{}:t;Fh()||ln(!1);let{basename:s,navigator:a}=p.useContext(Qo),{hash:i,pathname:o,search:l}=ap(e,{relative:r}),c=o;return s!=="/"&&(c=o==="/"?s:Mo([s,o])),a.createHref({pathname:c,search:l,hash:i})}function Fh(){return p.useContext(sp)!=null}function Xl(){return Fh()||ln(!1),p.useContext(sp).location}function l8(e){p.useContext(Qo).static||p.useLayoutEffect(e)}function Gt(){let{isDataRoute:e}=p.useContext(Yo);return e?tz():UL()}function UL(){Fh()||ln(!1);let e=p.useContext(np),{basename:t,future:r,navigator:s}=p.useContext(Qo),{matches:a}=p.useContext(Yo),{pathname:i}=Xl(),o=JSON.stringify(n8(a,r.v7_relativeSplatPath)),l=p.useRef(!1);return l8(()=>{l.current=!0}),p.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){s.go(u);return}let h=s8(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Mo([t,h.pathname])),(d.replace?s.replace:s.push)(h,d.state,d)},[t,s,o,i,e])}function Zl(){let{matches:e}=p.useContext(Yo),t=e[e.length-1];return t?t.params:{}}function ap(e,t){let{relative:r}=t===void 0?{}:t,{future:s}=p.useContext(Qo),{matches:a}=p.useContext(Yo),{pathname:i}=Xl(),o=JSON.stringify(n8(a,s.v7_relativeSplatPath));return p.useMemo(()=>s8(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function VL(e,t){return HL(e,t)}function HL(e,t,r,s){Fh()||ln(!1);let{navigator:a}=p.useContext(Qo),{matches:i}=p.useContext(Yo),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Xl(),d;if(t){var h;let y=typeof t=="string"?$u(t):t;c==="/"||(h=y.pathname)!=null&&h.startsWith(c)||ln(!1),d=y}else d=u;let m=d.pathname||"/",f=m;if(c!=="/"){let y=c.replace(/^\//,"").split("/");f="/"+m.replace(/^\//,"").split("/").slice(y.length).join("/")}let x=bL(e,{pathname:f}),g=KL(x&&x.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Mo([c,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:Mo([c,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r,s);return t&&g?p.createElement(sp.Provider,{value:{location:uh({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:jo.Pop}},g):g}function WL(){let e=ez(),t=$L(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),r?p.createElement("pre",{style:a},r):null,null)}const GL=p.createElement(WL,null);class QL extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?p.createElement(Yo.Provider,{value:this.props.routeContext},p.createElement(o8.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YL(e){let{routeContext:t,match:r,children:s}=e,a=p.useContext(np);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),p.createElement(Yo.Provider,{value:t},s)}function KL(e,t,r,s){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=s)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||ln(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&s&&s.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:m,errors:f}=r,x=h.route.loader&&m[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||x){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,m)=>{let f,x=!1,g=null,y=null;r&&(f=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||GL,c&&(u<0&&m===0?(x=!0,y=null):u===m&&(x=!0,y=h.route.hydrateFallbackElement||null)));let b=t.concat(o.slice(0,m+1)),v=()=>{let w;return f?w=g:x?w=y:h.route.Component?w=p.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,p.createElement(YL,{match:h,routeContext:{outlet:d,matches:b,isDataRoute:r!=null},children:w})};return r&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?p.createElement(QL,{location:r.location,revalidation:r.revalidation,component:g,error:f,children:v(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):v()},null)}var c8=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(c8||{}),X0=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(X0||{});function JL(e){let t=p.useContext(np);return t||ln(!1),t}function XL(e){let t=p.useContext(i8);return t||ln(!1),t}function ZL(e){let t=p.useContext(Yo);return t||ln(!1),t}function u8(e){let t=ZL(),r=t.matches[t.matches.length-1];return r.route.id||ln(!1),r.route.id}function ez(){var e;let t=p.useContext(o8),r=XL(X0.UseRouteError),s=u8(X0.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function tz(){let{router:e}=JL(c8.UseNavigateStable),t=u8(X0.UseNavigateStable),r=p.useRef(!1);return l8(()=>{r.current=!0}),p.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,uh({fromRouteId:t},i)))},[e,t])}function rz(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Dt(e){ln(!1)}function nz(e){let{basename:t="/",children:r=null,location:s,navigationType:a=jo.Pop,navigator:i,static:o=!1,future:l}=e;Fh()&&ln(!1);let c=t.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:i,static:o,future:uh({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof s=="string"&&(s=$u(s));let{pathname:d="/",search:h="",hash:m="",state:f=null,key:x="default"}=s,g=p.useMemo(()=>{let y=fu(d,c);return y==null?null:{location:{pathname:y,search:h,hash:m,state:f,key:x},navigationType:a}},[c,d,h,m,f,x,a]);return g==null?null:p.createElement(Qo.Provider,{value:u},p.createElement(sp.Provider,{children:r,value:g}))}function sz(e){let{children:t,location:r}=e;return VL(qv(t),r)}new Promise(()=>{});function qv(e,t){t===void 0&&(t=[]);let r=[];return p.Children.forEach(e,(s,a)=>{if(!p.isValidElement(s))return;let i=[...t,a];if(s.type===p.Fragment){r.push.apply(r,qv(s.props.children,i));return}s.type!==Dt&&ln(!1),!s.props.index||!s.props.children||ln(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=qv(s.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Z0(){return Z0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Z0.apply(this,arguments)}function d8(e,t){if(e==null)return{};var r={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function az(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function iz(e,t){return e.button===0&&(!t||t==="_self")&&!az(e)}function Bv(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(a=>[r,a]):[[r,s]])},[]))}function oz(e,t){let r=Bv(e);return t&&t.forEach((s,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}const lz=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],cz=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],uz="6";try{window.__reactRouterVersion=uz}catch{}const dz=p.createContext({isTransitioning:!1}),hz="startTransition",H2=G1[hz];function mz(e){let{basename:t,children:r,future:s,window:a}=e,i=p.useRef();i.current==null&&(i.current=gL({window:a,v5Compat:!0}));let o=i.current,[l,c]=p.useState({action:o.action,location:o.location}),{v7_startTransition:u}=s||{},d=p.useCallback(h=>{u&&H2?H2(()=>c(h)):c(h)},[c,u]);return p.useLayoutEffect(()=>o.listen(d),[o,d]),p.useEffect(()=>rz(s),[s]),p.createElement(nz,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:s})}const fz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ni=p.forwardRef(function(t,r){let{onClick:s,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,m=d8(t,lz),{basename:f}=p.useContext(Qo),x,g=!1;if(typeof u=="string"&&pz.test(u)&&(x=u,fz))try{let w=new URL(window.location.href),S=u.startsWith("//")?new URL(w.protocol+u):new URL(u),k=fu(S.pathname,f);S.origin===w.origin&&k!=null?u=k+S.search+S.hash:g=!0}catch{}let y=BL(u,{relative:a}),b=vz(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:h});function v(w){s&&s(w),w.defaultPrevented||b(w)}return p.createElement("a",Z0({},m,{href:x||y,onClick:g||i?s:v,ref:r,target:c}))}),xz=p.forwardRef(function(t,r){let{"aria-current":s="page",caseSensitive:a=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:u,children:d}=t,h=d8(t,cz),m=ap(c,{relative:h.relative}),f=Xl(),x=p.useContext(i8),{navigator:g,basename:y}=p.useContext(Qo),b=x!=null&&bz(m)&&u===!0,v=g.encodeLocation?g.encodeLocation(m).pathname:m.pathname,w=f.pathname,S=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;a||(w=w.toLowerCase(),S=S?S.toLowerCase():null,v=v.toLowerCase()),S&&y&&(S=fu(S,y)||S);const k=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let N=w===v||!o&&w.startsWith(v)&&w.charAt(k)==="/",P=S!=null&&(S===v||!o&&S.startsWith(v)&&S.charAt(v.length)==="/"),T={isActive:N,isPending:P,isTransitioning:b},A=N?s:void 0,E;typeof i=="function"?E=i(T):E=[i,N?"active":null,P?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let M=typeof l=="function"?l(T):l;return p.createElement(Ni,Z0({},h,{"aria-current":A,className:E,ref:r,style:M,to:c,viewTransition:u}),typeof d=="function"?d(T):d)});var Uv;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Uv||(Uv={}));var W2;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(W2||(W2={}));function gz(e){let t=p.useContext(np);return t||ln(!1),t}function vz(e,t){let{target:r,replace:s,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Gt(),u=Xl(),d=ap(e,{relative:o});return p.useCallback(h=>{if(iz(h,r)){h.preventDefault();let m=s!==void 0?s:K0(u)===K0(d);c(e,{replace:m,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,s,a,r,e,i,o,l])}function yz(e){let t=p.useRef(Bv(e)),r=p.useRef(!1),s=Xl(),a=p.useMemo(()=>oz(s.search,r.current?null:t.current),[s.search]),i=Gt(),o=p.useCallback((l,c)=>{const u=Bv(typeof l=="function"?l(a):l);r.current=!0,i("?"+u,c)},[i,a]);return[a,o]}function bz(e,t){t===void 0&&(t={});let r=p.useContext(dz);r==null&&ln(!1);let{basename:s}=gz(Uv.useViewTransitionState),a=ap(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=fu(r.currentLocation.pathname,s)||r.currentLocation.pathname,o=fu(r.nextLocation.pathname,s)||r.nextLocation.pathname;return J0(a.pathname,o)!=null||J0(a.pathname,i)!=null}var Vv=function(e,t){return Vv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},Vv(e,t)};function h8(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Vv(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var ia=function(){return ia=Object.assign||function(t){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ia.apply(this,arguments)};function Ko(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r}function m8(e,t,r,s){var a=arguments.length,i=a<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,r):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function f8(e,t){return function(r,s){t(r,s,e)}}function p8(e,t,r,s,a,i){function o(b){if(b!==void 0&&typeof b!="function")throw new TypeError("Function expected");return b}for(var l=s.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?s.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,s.name):{}),h,m=!1,f=r.length-1;f>=0;f--){var x={};for(var g in s)x[g]=g==="access"?{}:s[g];for(var g in s.access)x.access[g]=s.access[g];x.addInitializer=function(b){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(b||null))};var y=(0,r[f])(l==="accessor"?{get:d.get,set:d.set}:d[c],x);if(l==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(h=o(y.get))&&(d.get=h),(h=o(y.set))&&(d.set=h),(h=o(y.init))&&a.unshift(h)}else(h=o(y))&&(l==="field"?a.unshift(h):d[c]=h)}u&&Object.defineProperty(u,s.name,d),m=!0}function x8(e,t,r){for(var s=arguments.length>2,a=0;a<t.length;a++)r=s?t[a].call(e,r):t[a].call(e);return s?r:void 0}function g8(e){return typeof e=="symbol"?e:"".concat(e)}function v8(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function y8(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Rt(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})}function b8(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},s,a,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(s)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(s=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{s=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var ip=Object.create?function(e,t,r,s){s===void 0&&(s=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,a)}:function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]};function w8(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&ip(t,e,r)}function ef(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],s=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ub(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var s=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=s.next()).done;)i.push(a.value)}catch(l){o={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}return i}function j8(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ub(arguments[t]));return e}function N8(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var s=Array(e),a=0,t=0;t<r;t++)for(var i=arguments[t],o=0,l=i.length;o<l;o++,a++)s[a]=i[o];return s}function db(e,t,r){if(r||arguments.length===2)for(var s=0,a=t.length,i;s<a;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}function pu(e){return this instanceof pu?(this.v=e,this):new pu(e)}function S8(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(e,t||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),a[Symbol.asyncIterator]=function(){return this},a;function o(f){return function(x){return Promise.resolve(x).then(f,h)}}function l(f,x){s[f]&&(a[f]=function(g){return new Promise(function(y,b){i.push([f,g,y,b])>1||c(f,g)})},x&&(a[f]=x(a[f])))}function c(f,x){try{u(s[f](x))}catch(g){m(i[0][3],g)}}function u(f){f.value instanceof pu?Promise.resolve(f.value.v).then(d,h):m(i[0][2],f)}function d(f){c("next",f)}function h(f){c("throw",f)}function m(f,x){f(x),i.shift(),i.length&&c(i[0][0],i[0][1])}}function k8(e){var t,r;return t={},s("next"),s("throw",function(a){throw a}),s("return"),t[Symbol.iterator]=function(){return this},t;function s(a,i){t[a]=e[a]?function(o){return(r=!r)?{value:pu(e[a](o)),done:!1}:i?i(o):o}:i}}function _8(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof ef=="function"?ef(e):e[Symbol.iterator](),r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r);function s(i){r[i]=e[i]&&function(o){return new Promise(function(l,c){o=e[i](o),a(l,c,o.done,o.value)})}}function a(i,o,l,c){Promise.resolve(c).then(function(u){i({value:u,done:l})},o)}}function C8(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var wz=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},Hv=function(e){return Hv=Object.getOwnPropertyNames||function(t){var r=[];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[r.length]=s);return r},Hv(e)};function E8(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=Hv(e),s=0;s<r.length;s++)r[s]!=="default"&&ip(t,e,r[s]);return wz(t,e),t}function T8(e){return e&&e.__esModule?e:{default:e}}function A8(e,t,r,s){if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?s:r==="a"?s.call(e):s?s.value:t.get(e)}function P8(e,t,r,s,a){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?a.call(e,r):a?a.value=r:t.set(e,r),r}function R8(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function M8(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var s,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=t[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=t[Symbol.dispose],r&&(a=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");a&&(s=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:s,async:r})}else r&&e.stack.push({async:!0});return t}var jz=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var s=new Error(r);return s.name="SuppressedError",s.error=e,s.suppressed=t,s};function O8(e){function t(i){e.error=e.hasError?new jz(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var r,s=0;function a(){for(;r=e.stack.pop();)try{if(!r.async&&s===1)return s=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return s|=2,Promise.resolve(i).then(a,function(o){return t(o),a()})}else s|=1}catch(o){t(o)}if(s===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}function I8(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,s,a,i,o){return s?t?".jsx":".js":a&&(!i||!o)?r:a+i+"."+o.toLowerCase()+"js"}):e}const Nz={__extends:h8,__assign:ia,__rest:Ko,__decorate:m8,__param:f8,__esDecorate:p8,__runInitializers:x8,__propKey:g8,__setFunctionName:v8,__metadata:y8,__awaiter:Rt,__generator:b8,__createBinding:ip,__exportStar:w8,__values:ef,__read:ub,__spread:j8,__spreadArrays:N8,__spreadArray:db,__await:pu,__asyncGenerator:S8,__asyncDelegator:k8,__asyncValues:_8,__makeTemplateObject:C8,__importStar:E8,__importDefault:T8,__classPrivateFieldGet:A8,__classPrivateFieldSet:P8,__classPrivateFieldIn:R8,__addDisposableResource:M8,__disposeResources:O8,__rewriteRelativeImportExtension:I8},Sz=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:M8,get __assign(){return ia},__asyncDelegator:k8,__asyncGenerator:S8,__asyncValues:_8,__await:pu,__awaiter:Rt,__classPrivateFieldGet:A8,__classPrivateFieldIn:R8,__classPrivateFieldSet:P8,__createBinding:ip,__decorate:m8,__disposeResources:O8,__esDecorate:p8,__exportStar:w8,__extends:h8,__generator:b8,__importDefault:T8,__importStar:E8,__makeTemplateObject:C8,__metadata:y8,__param:f8,__propKey:g8,__read:ub,__rest:Ko,__rewriteRelativeImportExtension:I8,__runInitializers:x8,__setFunctionName:v8,__spread:j8,__spreadArray:db,__spreadArrays:N8,__values:ef,default:Nz},Symbol.toStringTag,{value:"Module"})),kz=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class hb extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}}class _z extends hb{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class G2 extends hb{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Q2 extends hb{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Wv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Wv||(Wv={}));class Cz{constructor(t,{headers:r={},customFetch:s,region:a=Wv.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=kz(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Rt(this,arguments,void 0,function*(r,s={}){var a;let i,o;try{const{headers:l,method:c,body:u,signal:d,timeout:h}=s;let m={},{region:f}=s;f||(f=this.region);const x=new URL(`${this.url}/${r}`);f&&f!=="any"&&(m["x-region"]=f,x.searchParams.set("forceFunctionRegion",f));let g;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(m["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(m["Content-Type"]="application/json",g=JSON.stringify(u)):g=u;let y=d;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),d?(y=o.signal,d.addEventListener("abort",()=>o.abort())):y=o.signal);const b=yield this.fetch(x.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:g,signal:y}).catch(k=>{throw new _z(k)}),v=b.headers.get("x-relay-error");if(v&&v==="true")throw new G2(b);if(!b.ok)throw new Q2(b);let w=((a=b.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),S;return w==="application/json"?S=yield b.json():w==="application/octet-stream"||w==="application/pdf"?S=yield b.blob():w==="text/event-stream"?S=b:w==="multipart/form-data"?S=yield b.formData():S=yield b.text(),{data:S,error:null,response:b}}catch(l){return{data:null,error:l,response:l instanceof Q2||l instanceof G2?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var as={};const qu=o3(Sz);var Nm={},Sm={},km={},_m={},Cm={},Em={},Y2;function D8(){if(Y2)return Em;Y2=1,Object.defineProperty(Em,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Em.default=e,Em}var K2;function F8(){if(K2)return Cm;K2=1,Object.defineProperty(Cm,"__esModule",{value:!0});const t=qu.__importDefault(D8());class r{constructor(a){var i,o;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(i=a.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=a.signal,this.isMaybeSingle=(o=a.isMaybeSingle)!==null&&o!==void 0?o:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,i){return this.headers=new Headers(this.headers),this.headers.set(a,i),this}then(a,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,h,m;let f=null,x=null,g=null,y=c.status,b=c.statusText;if(c.ok){if(this.method!=="HEAD"){const k=await c.text();k===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?x=k:x=JSON.parse(k))}const w=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),S=(h=c.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");w&&S&&S.length>1&&(g=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(f={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,g=null,y=406,b="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const w=await c.text();try{f=JSON.parse(w),Array.isArray(f)&&c.status===404&&(x=[],f=null,y=200,b="OK")}catch{c.status===404&&w===""?(y=204,b="No Content"):f={message:w}}if(f&&this.isMaybeSingle&&(!((m=f==null?void 0:f.details)===null||m===void 0)&&m.includes("0 rows"))&&(f=null,y=200,b="OK"),f&&this.shouldThrowOnError)throw new t.default(f)}return{error:f,data:x,count:g,status:y,statusText:b}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,d,h,m,f,x;let g="";const y=c==null?void 0:c.cause;if(y){const b=(u=y==null?void 0:y.message)!==null&&u!==void 0?u:"",v=(d=y==null?void 0:y.code)!==null&&d!==void 0?d:"";g=`${(h=c==null?void 0:c.name)!==null&&h!==void 0?h:"FetchError"}: ${c==null?void 0:c.message}`,g+=`

Caused by: ${(m=y==null?void 0:y.name)!==null&&m!==void 0?m:"Error"}: ${b}`,v&&(g+=` (${v})`),y!=null&&y.stack&&(g+=`
${y.stack}`)}else g=(f=c==null?void 0:c.stack)!==null&&f!==void 0?f:"";return{error:{message:`${(x=c==null?void 0:c.name)!==null&&x!==void 0?x:"FetchError"}: ${c==null?void 0:c.message}`,details:g,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(a,i)}returns(){return this}overrideTypes(){return this}}return Cm.default=r,Cm}var J2;function L8(){if(J2)return _m;J2=1,Object.defineProperty(_m,"__esModule",{value:!0});const t=qu.__importDefault(F8());class r extends t.default{select(a){let i=!1;const o=(a??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:i=!0,nullsFirst:o,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${a}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${a}`),this}range(a,i,{foreignTable:o,referencedTable:l=o}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${a}`),this.url.searchParams.set(u,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:i=!1,settings:o=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var d;const h=[a?"analyze":null,i?"verbose":null,o?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),m=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${h};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return _m.default=r,_m}var X2;function mb(){if(X2)return km;X2=1,Object.defineProperty(km,"__esModule",{value:!0});const t=qu.__importDefault(L8()),r=new RegExp("[,()]");class s extends t.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}regexMatch(i,o){return this.url.searchParams.append(i,`match.${o}`),this}regexIMatch(i,o){return this.url.searchParams.append(i,`imatch.${o}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}isDistinct(i,o){return this.url.searchParams.append(i,`isdistinct.${o}`),this}in(i,o){const l=Array.from(new Set(o)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:l,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const d=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${u}fts${d}.${o}`),this}match(i){return Object.entries(i).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(i,o,l){return this.url.searchParams.append(i,`not.${o}.${l}`),this}or(i,{foreignTable:o,referencedTable:l=o}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,o,l){return this.url.searchParams.append(i,`${o}.${l}`),this}}return km.default=s,km}var Z2;function z8(){if(Z2)return Sm;Z2=1,Object.defineProperty(Sm,"__esModule",{value:!0});const t=qu.__importDefault(mb());class r{constructor(a,{headers:i={},schema:o,fetch:l}){this.url=a,this.headers=new Headers(i),this.schema=o,this.fetch=l}select(a,i){const{head:o=!1,count:l}=i??{},c=o?"HEAD":"GET";let u=!1;const d=(a??"*").split("").map(h=>/\s/.test(h)&&!u?"":(h==='"'&&(u=!u),h)).join("");return this.url.searchParams.set("select",d),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:i,defaultToNull:o=!0}={}){var l;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const u=a.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(a,{onConflict:i,ignoreDuplicates:o=!1,count:l,defaultToNull:c=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const h=a.reduce((m,f)=>m.concat(Object.keys(f)),[]);if(h.length>0){const m=[...new Set(h)].map(f=>`"${f}"`);this.url.searchParams.set("columns",m.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(a,{count:i}={}){var o;const l="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:a}={}){var i;const o="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return Sm.default=r,Sm}var e4;function Ez(){if(e4)return Nm;e4=1,Object.defineProperty(Nm,"__esModule",{value:!0});const e=qu,t=e.__importDefault(z8()),r=e.__importDefault(mb());class s{constructor(i,{headers:o={},schema:l,fetch:c}={}){this.url=i,this.headers=new Headers(o),this.schemaName=l,this.fetch=c}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${i}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new s(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:l=!1,get:c=!1,count:u}={}){var d;let h;const m=new URL(`${this.url}/rpc/${i}`);let f;l||c?(h=l?"HEAD":"GET",Object.entries(o).filter(([g,y])=>y!==void 0).map(([g,y])=>[g,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([g,y])=>{m.searchParams.append(g,y)})):(h="POST",f=o);const x=new Headers(this.headers);return u&&x.set("Prefer",`count=${u}`),new r.default({method:h,url:m,headers:x,schema:this.schemaName,body:f,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Nm.default=s,Nm}Object.defineProperty(as,"__esModule",{value:!0});var $8=as.PostgrestError=K8=as.PostgrestBuilder=Q8=as.PostgrestTransformBuilder=W8=as.PostgrestFilterBuilder=V8=as.PostgrestQueryBuilder=B8=as.PostgrestClient=void 0;const Bu=qu,q8=Bu.__importDefault(Ez());var B8=as.PostgrestClient=q8.default;const U8=Bu.__importDefault(z8());var V8=as.PostgrestQueryBuilder=U8.default;const H8=Bu.__importDefault(mb());var W8=as.PostgrestFilterBuilder=H8.default;const G8=Bu.__importDefault(L8());var Q8=as.PostgrestTransformBuilder=G8.default;const Y8=Bu.__importDefault(F8());var K8=as.PostgrestBuilder=Y8.default;const J8=Bu.__importDefault(D8());$8=as.PostgrestError=J8.default;var X8=as.default={PostgrestClient:q8.default,PostgrestQueryBuilder:U8.default,PostgrestFilterBuilder:H8.default,PostgrestTransformBuilder:G8.default,PostgrestBuilder:Y8.default,PostgrestError:J8.default};const Tz=i3({__proto__:null,get PostgrestBuilder(){return K8},get PostgrestClient(){return B8},get PostgrestError(){return $8},get PostgrestFilterBuilder(){return W8},get PostgrestQueryBuilder(){return V8},get PostgrestTransformBuilder(){return Q8},default:X8},[as]),{PostgrestClient:Az,PostgrestQueryBuilder:Rse,PostgrestFilterBuilder:Mse,PostgrestTransformBuilder:Ose,PostgrestBuilder:Ise,PostgrestError:Dse}=X8||Tz;class Pz{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const s=this.getWebSocketConstructor();return new s(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Rz="2.84.0",Mz=`realtime-js/${Rz}`,Z8="1.0.0",Oz="2.0.0",t4=Z8,Gv=1e4,Iz=1e3,Dz=100;var ml;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ml||(ml={}));var Nn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Nn||(Nn={}));var Aa;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Aa||(Aa={}));var Qv;(function(e){e.websocket="websocket"})(Qv||(Qv={}));var fl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(fl||(fl={}));class Fz{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast"}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let s=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,s,a,i;const o=t.topic,l=(r=t.ref)!==null&&r!==void 0?r:"",c=(s=t.join_ref)!==null&&s!==void 0?s:"",u=t.payload.event,d=(i=(a=t.payload)===null||a===void 0?void 0:a.payload)!==null&&i!==void 0?i:new ArrayBuffer(0),h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length,m=new ArrayBuffer(this.HEADER_LENGTH+h);let f=new DataView(m),x=0;f.setUint8(x++,this.KINDS.userBroadcastPush),f.setUint8(x++,c.length),f.setUint8(x++,l.length),f.setUint8(x++,o.length),f.setUint8(x++,u.length),f.setUint8(x++,this.BINARY_ENCODING),Array.from(c,y=>f.setUint8(x++,y.charCodeAt(0))),Array.from(l,y=>f.setUint8(x++,y.charCodeAt(0))),Array.from(o,y=>f.setUint8(x++,y.charCodeAt(0))),Array.from(u,y=>f.setUint8(x++,y.charCodeAt(0)));var g=new Uint8Array(m.byteLength+d.byteLength);return g.set(new Uint8Array(m),0),g.set(new Uint8Array(d),m.byteLength),g.buffer}_encodeJsonUserBroadcastPush(t){var r,s,a,i;const o=t.topic,l=(r=t.ref)!==null&&r!==void 0?r:"",c=(s=t.join_ref)!==null&&s!==void 0?s:"",u=t.payload.event,d=(i=(a=t.payload)===null||a===void 0?void 0:a.payload)!==null&&i!==void 0?i:{},m=new TextEncoder().encode(JSON.stringify(d)).buffer,f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length,x=new ArrayBuffer(this.HEADER_LENGTH+f);let g=new DataView(x),y=0;g.setUint8(y++,this.KINDS.userBroadcastPush),g.setUint8(y++,c.length),g.setUint8(y++,l.length),g.setUint8(y++,o.length),g.setUint8(y++,u.length),g.setUint8(y++,this.JSON_ENCODING),Array.from(c,v=>g.setUint8(y++,v.charCodeAt(0))),Array.from(l,v=>g.setUint8(y++,v.charCodeAt(0))),Array.from(o,v=>g.setUint8(y++,v.charCodeAt(0))),Array.from(u,v=>g.setUint8(y++,v.charCodeAt(0)));var b=new Uint8Array(x.byteLength+m.byteLength);return b.set(new Uint8Array(x),0),b.set(new Uint8Array(m),x.byteLength),b.buffer}decode(t,r){if(this._isArrayBuffer(t)){let s=this._binaryDecode(t);return r(s)}if(typeof t=="string"){const s=JSON.parse(t),[a,i,o,l,c]=s;return r({join_ref:a,ref:i,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),s=r.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodeUserBroadcast(t,r,s){const a=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=s.decode(t.slice(c,c+a));c=c+a;const d=s.decode(t.slice(c,c+i));c=c+i;const h=s.decode(t.slice(c,c+o));c=c+o;const m=t.slice(c,t.byteLength),f=l===this.JSON_ENCODING?JSON.parse(s.decode(m)):m,x={type:this.BROADCAST_EVENT,event:d,payload:f};return o>0&&(x.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:x}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class e7{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Or;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Or||(Or={}));const r4=(e,t,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=Lz(o,e,t,a),i),{}):{}},Lz=(e,t,r,s)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!s.includes(i)?t7(i,o):Yv(o)},t7=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Bz(t,r)}switch(e){case Or.bool:return zz(t);case Or.float4:case Or.float8:case Or.int2:case Or.int4:case Or.int8:case Or.numeric:case Or.oid:return $z(t);case Or.json:case Or.jsonb:return qz(t);case Or.timestamp:return Uz(t);case Or.abstime:case Or.date:case Or.daterange:case Or.int4range:case Or.int8range:case Or.money:case Or.reltime:case Or.text:case Or.time:case Or.timestamptz:case Or.timetz:case Or.tsrange:case Or.tstzrange:return Yv(t);default:return Yv(t)}},Yv=e=>e,zz=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},$z=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},qz=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Bz=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>t7(t,l))}return e},Uz=e=>typeof e=="string"?e.replace(" ","T"):e,r7=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Cx{constructor(t,r,s={},a=Gv){this.channel=t,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var n4;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(n4||(n4={}));class Pd{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Pd.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=Pd.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Pd.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const m=d.map(y=>y.presence_ref),f=h.map(y=>y.presence_ref),x=d.filter(y=>f.indexOf(y.presence_ref)<0),g=h.filter(y=>m.indexOf(y.presence_ref)<0);x.length>0&&(l[u]=x),g.length>0&&(c[u]=g)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},s,a)}static syncDiff(t,r,s,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(f=>f.presence_ref),m=d.filter(f=>h.indexOf(f.presence_ref)<0);t[l].unshift(...m)}s(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const a=t[s];return"metas"in a?r[s]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var s4;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(s4||(s4={}));var Rd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Rd||(Rd={}));var vi;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(vi||(vi={}));class fb{constructor(t,r={config:{}},s){var a,i;if(this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=Nn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Cx(this,Aa.join,this.params,this.timeout),this.rejoinTimer=new e7(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Nn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Nn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Nn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Nn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Nn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Aa.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Pd(this),this.broadcastEndpointURL=r7(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var s,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Nn.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(f=>f.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[Rd.PRESENCE]&&this.bindings[Rd.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(vi.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(vi.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var x;if(this.socket.setAuth(),f===void 0){t==null||t(vi.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,y=(x=g==null?void 0:g.length)!==null&&x!==void 0?x:0,b=[];for(let v=0;v<y;v++){const w=g[v],{filter:{event:S,schema:k,table:N,filter:P}}=w,T=f&&f[v];if(T&&T.event===S&&T.schema===k&&T.table===N&&T.filter===P)b.push(Object.assign(Object.assign({},w),{id:T.id}));else{this.unsubscribe(),this.state=Nn.errored,t==null||t(vi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(vi.SUBSCRIBED);return}}).receive("error",f=>{this.state=Nn.errored,t==null||t(vi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(vi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this.state===Nn.joined&&t===Rd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,s)}async httpSend(t,r,s={}){var a;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var s,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Nn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Aa.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new Cx(this,Aa.leave,{},t),s.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Nn.closed,this.bindings={}}async _fetchWithTimeout(t,r,s){const a=new AbortController,i=setTimeout(()=>a.abort(),s),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Cx(this,t,r,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Dz){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Aa;if(s&&[l,c,u,d].indexOf(o)>=0&&s!==this._joinRef())return;let m=this._onMessage(o,r,s);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(f=>{var x,g,y;return((x=f.filter)===null||x===void 0?void 0:x.event)==="*"||((y=(g=f.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(f=>f.callback(m,s)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var x,g,y,b,v,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const S=f.id,k=(x=f.filter)===null||x===void 0?void 0:x.event;return S&&((g=r.ids)===null||g===void 0?void 0:g.includes(S))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const S=(v=(b=f==null?void 0:f.filter)===null||b===void 0?void 0:b.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return S==="*"||S===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:g,table:y,commit_timestamp:b,type:v,errors:w}=x;m=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:b,eventType:v,new:{},old:{},errors:w}),this._getPayloadRecords(x))}f.callback(m,s)})}_isClosed(){return this.state===Nn.closed}_isJoined(){return this.state===Nn.joined}_isJoining(){return this.state===Nn.joining}_isLeaving(){return this.state===Nn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&fb.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Aa.close,{},t)}_onError(t){this._on(Aa.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Nn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=r4(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=r4(t.columns,t.old_record)),r}}const Ex=()=>{},Tm={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Vz=[1e3,2e3,5e3,1e4],Hz=1e4,Wz=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Gz{constructor(t,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Gv,this.transport=null,this.heartbeatIntervalMs=Tm.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ex,this.ref=0,this.reconnectTimer=null,this.vsn=t4,this.logger=Ex,this.conn=null,this.sendBuffer=[],this.serializer=new Fz,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Qv.websocket}`,this.httpEndpoint=r7(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Pz.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case ml.connecting:return fl.Connecting;case ml.open:return fl.Open;case ml.closing:return fl.Closing;default:return fl.Closed}}isConnected(){return this.connectionState()===fl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const s=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===s);if(a)return a;{const i=new fb(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:s,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${s} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Iz,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Tm.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${s} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(s)).forEach(u=>u._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===ml.open||this.conn.readyState===ml.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Aa.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${s}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([Wz],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const a={access_token:r,version:Mz};r&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(Aa.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new e7(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Tm.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,s,a,i,o,l,c,u,d,h,m,f;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(s=t==null?void 0:t.timeout)!==null&&s!==void 0?s:Gv,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Tm.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Ex,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:t4,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:x=>Vz[x-1]||Hz,this.vsn){case Z8:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(x,g)=>g(JSON.stringify(x)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(x,g)=>g(JSON.parse(x));break;case Oz:this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class pb extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Wr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Qz extends pb{constructor(t,r,s){super(t),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Kv extends pb{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const xb=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Yz=()=>Response,Jv=e=>{if(Array.isArray(e))return e.map(r=>Jv(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=Jv(s)}),t},Kz=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Tx=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Jz=(e,t,r)=>Rt(void 0,void 0,void 0,function*(){const s=yield Yz();e instanceof s&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const i=e.status||500,o=(a==null?void 0:a.statusCode)||i+"";t(new Qz(Tx(a),i,o))}).catch(a=>{t(new Kv(Tx(a),a))}):t(new Kv(Tx(e),e))}),Xz=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!s?a:(Kz(s)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function Lh(e,t,r,s,a,i){return Rt(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,Xz(t,s,a,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Jz(c,l,s))})})}function dh(e,t,r,s){return Rt(this,void 0,void 0,function*(){return Lh(e,"GET",t,r,s)})}function _a(e,t,r,s,a){return Rt(this,void 0,void 0,function*(){return Lh(e,"POST",t,s,a,r)})}function Xv(e,t,r,s,a){return Rt(this,void 0,void 0,function*(){return Lh(e,"PUT",t,s,a,r)})}function Zz(e,t,r,s){return Rt(this,void 0,void 0,function*(){return Lh(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function gb(e,t,r,s,a){return Rt(this,void 0,void 0,function*(){return Lh(e,"DELETE",t,s,a,r)})}class e${constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return Rt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Wr(t))return{data:null,error:t};throw t}})}}var n7;class t${constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[n7]="BlobDownloadBuilder",this.promise=null}asStream(){return new e$(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Rt(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Wr(t))return{data:null,error:t};throw t}})}}n7=Symbol.toStringTag;const r$={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},a4={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class n${constructor(t,r={},s,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=s,this.fetch=xb(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,s,a){return Rt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},a4),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(c))):(i=s,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(t=="PUT"?Xv:_a)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Wr(i))return{data:null,error:i};throw i}})}upload(t,r,s){return Rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,s)})}uploadToSignedUrl(t,r,s,a){return Rt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:a4.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",u.cacheControl)):(c=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield Xv(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Wr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Rt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield _a(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new pb("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Wr(s))return{data:null,error:s};throw s}})}update(t,r,s){return Rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,s)})}move(t,r,s){return Rt(this,void 0,void 0,function*(){try{return{data:yield _a(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Wr(a))return{data:null,error:a};throw a}})}copy(t,r,s){return Rt(this,void 0,void 0,function*(){try{return{data:{path:(yield _a(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Wr(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,s){return Rt(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield _a(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Wr(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,s){return Rt(this,void 0,void 0,function*(){try{const a=yield _a(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Wr(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"",l=this._getFinalPath(t),c=()=>dh(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new t$(c,this.shouldThrowOnError)}info(t){return Rt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const s=yield dh(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Jv(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Wr(s))return{data:null,error:s};throw s}})}exists(t){return Rt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Zz(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Wr(s)&&s instanceof Kv){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,r){const s=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${u}`)}}}remove(t){return Rt(this,void 0,void 0,function*(){try{return{data:yield gb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wr(r))return{data:null,error:r};throw r}})}list(t,r,s){return Rt(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},r$),r),{prefix:t||""});return{data:yield _a(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Wr(a))return{data:null,error:a};throw a}})}listV2(t,r){return Rt(this,void 0,void 0,function*(){try{const s=Object.assign({},t);return{data:yield _a(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Wr(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const s7="2.84.0",a7={"X-Client-Info":`storage-js/${s7}`};class s${constructor(t,r={},s,a){this.shouldThrowOnError=!1;const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},a7),r),this.fetch=xb(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Rt(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield dh(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wr(r))return{data:null,error:r};throw r}})}getBucket(t){return Rt(this,void 0,void 0,function*(){try{return{data:yield dh(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wr(r))return{data:null,error:r};throw r}})}createBucket(t){return Rt(this,arguments,void 0,function*(r,s={public:!1}){try{return{data:yield _a(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Wr(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return Rt(this,void 0,void 0,function*(){try{return{data:yield Xv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Wr(s))return{data:null,error:s};throw s}})}emptyBucket(t){return Rt(this,void 0,void 0,function*(){try{return{data:yield _a(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Rt(this,void 0,void 0,function*(){try{return{data:yield gb(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wr(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class a${constructor(t,r={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},a7),r),this.fetch=xb(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Rt(this,void 0,void 0,function*(){try{return{data:yield _a(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wr(r))return{data:null,error:r};throw r}})}listBuckets(t){return Rt(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const s=r.toString(),a=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield dh(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Rt(this,void 0,void 0,function*(){try{return{data:yield gb(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Wr(r))return{data:null,error:r};throw r}})}}const vb={"X-Client-Info":`storage-js/${s7}`,"Content-Type":"application/json"};class i7 extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function $s(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class Ax extends i7{constructor(t,r,s){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class i$ extends i7{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var i4;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(i4||(i4={}));const yb=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),o$=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},o4=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),l$=(e,t,r)=>Rt(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const a=e.status||500,i=e;if(typeof i.json=="function")i.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||a+"";t(new Ax(o4(o),a,l))}).catch(()=>{const o=a+"",l=i.statusText||`HTTP ${a} error`;t(new Ax(l,a,o))});else{const o=a+"",l=i.statusText||`HTTP ${a} error`;t(new Ax(l,a,o))}}else t(new i$(o4(e),e))}),c$=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return s?(o$(s)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,Object.assign(Object.assign({},a),r)):a};function u$(e,t,r,s,a,i){return Rt(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,c$(t,s,a,i)).then(c=>{if(!c.ok)throw c;if(s!=null&&s.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>l$(c,l,s))})})}function qs(e,t,r,s,a){return Rt(this,void 0,void 0,function*(){return u$(e,"POST",t,s,a,r)})}class d${constructor(t,r={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},vb),r),this.fetch=yb(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Rt(this,void 0,void 0,function*(){try{return{data:(yield qs(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($s(r))return{data:null,error:r};throw r}})}getIndex(t,r){return Rt(this,void 0,void 0,function*(){try{return{data:yield qs(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($s(s))return{data:null,error:s};throw s}})}listIndexes(t){return Rt(this,void 0,void 0,function*(){try{return{data:yield qs(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($s(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return Rt(this,void 0,void 0,function*(){try{return{data:(yield qs(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if($s(s))return{data:null,error:s};throw s}})}}class h${constructor(t,r={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},vb),r),this.fetch=yb(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Rt(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield qs(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($s(r))return{data:null,error:r};throw r}})}getVectors(t){return Rt(this,void 0,void 0,function*(){try{return{data:yield qs(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($s(r))return{data:null,error:r};throw r}})}listVectors(t){return Rt(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield qs(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($s(r))return{data:null,error:r};throw r}})}queryVectors(t){return Rt(this,void 0,void 0,function*(){try{return{data:yield qs(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($s(r))return{data:null,error:r};throw r}})}deleteVectors(t){return Rt(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield qs(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($s(r))return{data:null,error:r};throw r}})}}class m${constructor(t,r={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},vb),r),this.fetch=yb(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Rt(this,void 0,void 0,function*(){try{return{data:(yield qs(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($s(r))return{data:null,error:r};throw r}})}getBucket(t){return Rt(this,void 0,void 0,function*(){try{return{data:yield qs(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($s(r))return{data:null,error:r};throw r}})}listBuckets(){return Rt(this,arguments,void 0,function*(t={}){try{return{data:yield qs(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($s(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Rt(this,void 0,void 0,function*(){try{return{data:(yield qs(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($s(r))return{data:null,error:r};throw r}})}}class f$ extends m${constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new p$(this.url,this.headers,t,this.fetch)}}class p$ extends d${constructor(t,r,s,a){super(t,r,a),this.vectorBucketName=s}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Rt(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Rt(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Rt(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Rt(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new x$(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class x$ extends h${constructor(t,r,s,a,i){super(t,r,i),this.vectorBucketName=s,this.indexName=a}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Rt(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Rt(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Rt(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Rt(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Rt(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class g$ extends s${constructor(t,r={},s,a){super(t,r,s,a)}from(t){return new n$(this.url,this.headers,t,this.fetch)}get vectors(){return new f$(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new a$(this.url+"/iceberg",this.headers,this.fetch)}}const v$="2.84.0";let pd="";typeof Deno<"u"?pd="deno":typeof document<"u"?pd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?pd="react-native":pd="node";const y$={"X-Client-Info":`supabase-js-${pd}/${v$}`},b$={headers:y$},w$={schema:"public"},j$={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},N$={},S$=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),k$=()=>Headers,_$=(e,t,r)=>{const s=S$(r),a=k$();return async(i,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},o),{headers:u}))}};function C$(e){return e.endsWith("/")?e:e+"/"}function E$(e,t){var r,s;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,m={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function T$(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(C$(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const o7="2.84.0",vc=30*1e3,Zv=3,Px=Zv*vc,A$="http://localhost:9999",P$="supabase.auth.token",R$={"X-Client-Info":`gotrue-js/${o7}`},e1="X-Supabase-Api-Version",l7={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},M$=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,O$=10*60*1e3;class hh extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function Ot(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class I$ extends hh{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function D$(e){return Ot(e)&&e.name==="AuthApiError"}class pl extends hh{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Jo extends hh{constructor(t,r,s,a){super(t,s,a),this.name=r,this.status=s}}class Os extends Jo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function F$(e){return Ot(e)&&e.name==="AuthSessionMissingError"}class oc extends Jo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Am extends Jo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Pm extends Jo{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function L$(e){return Ot(e)&&e.name==="AuthImplicitGrantRedirectError"}class l4 extends Jo{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class t1 extends Jo{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Rx(e){return Ot(e)&&e.name==="AuthRetryableFetchError"}class c4 extends Jo{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class r1 extends Jo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const tf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),u4=` 	
\r=`.split(""),z$=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<u4.length;t+=1)e[u4[t].charCodeAt(0)]=-2;for(let t=0;t<tf.length;t+=1)e[tf[t].charCodeAt(0)]=t;return e})();function d4(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(tf[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(tf[s]),t.queuedBits-=6}}function c7(e,t,r){const s=z$[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function h4(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{B$(o,s,r)};for(let o=0;o<e.length;o+=1)c7(e.charCodeAt(o),a,i);return t.join("")}function $$(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function q$(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}$$(s,t)}}function B$(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Vc(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)c7(e.charCodeAt(a),r,s);return new Uint8Array(t)}function U$(e){const t=[];return q$(e,r=>t.push(r)),new Uint8Array(t)}function wl(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};return e.forEach(a=>d4(a,r,s)),d4(null,r,s),t.join("")}function V$(e){return Math.round(Date.now()/1e3)+e}function H$(){return Symbol("auth-callback")}const In=()=>typeof window<"u"&&typeof document<"u",nl={tested:!1,writable:!1},u7=()=>{if(!In())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(nl.tested)return nl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),nl.tested=!0,nl.writable=!0}catch{nl.tested=!0,nl.writable=!1}return nl.writable};function W$(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((s,a)=>{t[a]=s}),t}const d7=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),G$=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",yc=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},sl=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},to=async(e,t)=>{await e.removeItem(t)};class op{constructor(){this.promise=new op.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}op.promiseConstructor=Promise;function Mx(e){const t=e.split(".");if(t.length!==3)throw new r1("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!M$.test(t[s]))throw new r1("JWT not in base64url format");return{header:JSON.parse(h4(t[0])),payload:JSON.parse(h4(t[1])),signature:Vc(t[2]),raw:{header:t[0],payload:t[1]}}}async function Q$(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Y$(e,t){return new Promise((s,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){s(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function K$(e){return("0"+e.toString(16)).substr(-2)}function J$(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(t),Array.from(t,K$).join("")}async function X$(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(s);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function Z$(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await X$(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function lc(e,t,r=!1){const s=J$();let a=s;r&&(a+="/PASSWORD_RECOVERY"),await yc(e,`${t}-code-verifier`,a);const i=await Z$(s);return[i,s===i?"plain":"s256"]}const eq=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function tq(e){const t=e.headers.get(e1);if(!t||!t.match(eq))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function rq(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function nq(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const sq=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function cc(e){if(!sq.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ox(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function aq(e,t){return new Proxy(e,{get:(r,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const i=s.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,s,a)}return!t.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,s,a)}})}function m4(e){return JSON.parse(JSON.stringify(e))}const ul=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),iq=[502,503,504];async function f4(e){var t;if(!G$(e))throw new t1(ul(e),0);if(iq.includes(e.status))throw new t1(ul(e),e.status);let r;try{r=await e.json()}catch(i){throw new pl(ul(i),i)}let s;const a=tq(e);if(a&&a.getTime()>=l7["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new c4(ul(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new Os}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new c4(ul(r),e.status,r.weak_password.reasons);throw new I$(ul(r),e.status||500,s)}const oq=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function Vt(e,t,r,s){var a;const i=Object.assign({},s==null?void 0:s.headers);i[e1]||(i[e1]=l7["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await lq(e,t,r+l,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function lq(e,t,r,s,a,i){const o=oq(t,s,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new t1(ul(c),0)}if(l.ok||await f4(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await f4(c)}}function ja(e){var t;let r=null;dq(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=V$(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function p4(e){const t=ja(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function fo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function cq(e){return{data:e,error:null}}function uq(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i}=e,o=Ko(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function x4(e){return e}function dq(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ix=["global","local","others"];class hq{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=d7(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Ix[0]){if(Ix.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ix.join(", ")}`);try{return await Vt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ot(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await Vt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:fo})}catch(s){if(Ot(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=Ko(t,["options"]),a=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await Vt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:uq,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Ot(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Vt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:fo})}catch(r){if(Ot(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Vt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:x4});if(d.error)throw d.error;const h=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(x=>{const g=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(x.split(";")[1].split("=")[1]);u[`${y}Page`]=g}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Ot(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){cc(t);try{return await Vt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:fo})}catch(r){if(Ot(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){cc(t);try{return await Vt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:fo})}catch(s){if(Ot(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){cc(t);try{return await Vt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:fo})}catch(s){if(Ot(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){cc(t.userId);try{const{data:r,error:s}=await Vt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(Ot(r))return{data:null,error:r};throw r}}async _deleteFactor(t){cc(t.userId),cc(t.id);try{return{data:await Vt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Ot(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,s,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Vt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:x4});if(d.error)throw d.error;const h=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(x=>{const g=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(x.split(";")[1].split("=")[1]);u[`${y}Page`]=g}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Ot(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Vt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ot(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Vt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ot(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Vt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Ot(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(t){try{return await Vt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ot(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Vt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ot(r))return{data:null,error:r};throw r}}}function g4(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const uc={debug:!!(globalThis&&u7()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class h7 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class mq extends h7{}async function fq(e,t,r){uc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),uc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){uc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{uc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw uc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new mq(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(uc.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function pq(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function m7(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function xq(e){return parseInt(e,16)}function gq(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,s=>s.toString(16).padStart(2,"0")).join("")}function vq(e){var t;const{chainId:r,domain:s,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:m}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const f=m7(e.address),x=d?`${d}://${s}`:s,g=e.statement?`${e.statement}
`:"",y=`${x} wants you to sign in with your Ethereum account:
${f}

${g}`;let b=`URI: ${h}
Version: ${m}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(b+=`
Expiration Time: ${a.toISOString()}`),l&&(b+=`
Not Before: ${l.toISOString()}`),c&&(b+=`
Request ID: ${c}`),u){let v=`
Resources:`;for(const w of u){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);v+=`
- ${w}`}b+=v}return`${y}
${b}`}class pn extends Error{constructor({message:t,code:r,cause:s,name:a}){var i;super(t,{cause:s}),this.__isWebAuthnError=!0,this.name=(i=a??(s instanceof Error?s.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class rf extends pn{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function yq({error:e,options:t}){var r,s,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new pn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new pn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new pn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new pn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new pn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new pn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new pn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new pn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(f7(o)){if(i.rp.id!==o)return new pn({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new pn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new pn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new pn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new pn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function bq({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new pn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new pn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(f7(s)){if(r.rpId!==s)return new pn({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new pn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new pn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new pn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class wq{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const jq=new wq;function Nq(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:s}=e,a=Ko(e,["challenge","user","excludeCredentials"]),i=Vc(t).buffer,o=Object.assign(Object.assign({},r),{id:Vc(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(s&&s.length>0){l.excludeCredentials=new Array(s.length);for(let c=0;c<s.length;c++){const u=s[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Vc(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function Sq(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,s=Ko(e,["challenge","allowCredentials"]),a=Vc(t).buffer,i=Object.assign(Object.assign({},s),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Vc(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function kq(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:wl(new Uint8Array(e.response.attestationObject)),clientDataJSON:wl(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function _q(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,s=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:wl(new Uint8Array(a.authenticatorData)),clientDataJSON:wl(new Uint8Array(a.clientDataJSON)),signature:wl(new Uint8Array(a.signature)),userHandle:a.userHandle?wl(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function f7(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function v4(){var e,t;return!!(In()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Cq(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new rf("Browser returned unexpected credential type",t)}:{data:null,error:new rf("Empty credential response",t)}}catch(t){return{data:null,error:yq({error:t,options:e})}}}async function Eq(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new rf("Browser returned unexpected credential type",t)}:{data:null,error:new rf("Empty credential response",t)}}catch(t){return{data:null,error:bq({error:t,options:e})}}}const Tq={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Aq={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function nf(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of e)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))s[i]=o;else if(r(o))s[i]=o;else if(t(o)){const l=s[i];t(l)?s[i]=nf(l,o):s[i]=nf(o)}else s[i]=o}return s}function Pq(e,t){return nf(Tq,e,t||{})}function Rq(e,t){return nf(Aq,e,t||{})}class Mq{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:s,signal:a},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const c=a??jq.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${s}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=Pq(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await Cq({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=Rq(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await Eq(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return Ot(o)?{data:null,error:o}:{data:null,error:new pl("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:s})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new hh("rpId is required for WebAuthn authentication")};try{if(!v4())return{data:null,error:new pl("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:s},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:s,credential_response:c.credential_response}})}catch(o){return Ot(o)?{data:null,error:o}:{data:null,error:new pl("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new hh("rpId is required for WebAuthn registration")};try{if(!v4())return{data:null,error:new pl("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:a},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:s,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return Ot(o)?{data:null,error:o}:{data:null,error:new pl("Unexpected error in register",o)}}}}pq();const Oq={url:A$,storageKey:P$,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:R$,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function y4(e,t,r){return await r()}const dc={};class mh{get jwks(){var t,r;return(r=(t=dc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){dc[this.storageKey]=Object.assign(Object.assign({},dc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=dc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){dc[this.storageKey]=Object.assign(Object.assign({},dc[this.storageKey]),{cachedAt:t})}constructor(t){var r,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Oq),t);if(this.storageKey=i.storageKey,this.instanceID=(r=mh.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,mh.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&In()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new hq({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=d7(i.fetch),this.lock=i.lock||y4,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:In()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=fq:this.lock=y4,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Mq(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:u7()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=g4(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=g4(this.memoryStorage)),In()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${o7}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},s="none";if(In()&&(r=W$(window.location.href),this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce")),In()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),L$(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ot(r)?this._returnResult({error:r}):this._returnResult({error:new pl("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,a;try{const i=await Vt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:ja}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(Ot(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,s,a;try{let i;if("email"in t){const{email:d,password:h,options:m}=t;let f=null,x=null;this.flowType==="pkce"&&([f,x]=await lc(this.storage,this.storageKey)),i=await Vt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:x},xform:ja})}else if("phone"in t){const{phone:d,password:h,options:m}=t;i=await Vt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:ja})}else throw new Am("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(Ot(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:p4})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:p4})}else throw new Am("You must provide either an email or phone number and a password");const{data:s,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const i=new oc;return this._returnResult({data:{user:null,session:null},error:i})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(Ot(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,s,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,s,a,i,o,l,c,u,d,h,m;let f,x;if("message"in t)f=t.message,x=t.signature;else{const{chain:g,wallet:y,statement:b,options:v}=t;let w;if(In())if(typeof y=="object")w=y;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")w=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=y}const S=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href),k=await w.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=m7(k[0]);let P=(s=v==null?void 0:v.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!P){const A=await w.request({method:"eth_chainId"});P=xq(A)}const T={domain:S.host,address:N,statement:b,uri:S.href,version:"1",chainId:P,nonce:(a=v==null?void 0:v.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=v==null?void 0:v.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=v==null?void 0:v.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=v==null?void 0:v.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=v==null?void 0:v.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=v==null?void 0:v.signInWithEthereum)===null||d===void 0?void 0:d.resources};f=vq(T),x=await w.request({method:"personal_sign",params:[gq(f),N]})}try{const{data:g,error:y}=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:x},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:ja});if(y)throw y;if(!g||!g.session||!g.user){const b=new oc;return this._returnResult({data:{user:null,session:null},error:b})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:y})}catch(g){if(Ot(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var r,s,a,i,o,l,c,u,d,h,m,f;let x,g;if("message"in t)x=t.message,g=t.signature;else{const{chain:y,wallet:b,statement:v,options:w}=t;let S;if(In())if(typeof b=="object")S=b;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))S=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=b}const k=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in S&&S.signIn){const N=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),v?{statement:v}:null));let P;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")P=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)P=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)x=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),g=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${k.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(a=(s=w==null?void 0:w.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const N=await S.signMessage(new TextEncoder().encode(x),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=N}}try{const{data:y,error:b}=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:wl(g)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ja});if(b)throw b;if(!y||!y.session||!y.user){const v=new oc;return this._returnResult({data:{user:null,session:null},error:v})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:b})}catch(y){if(Ot(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async _exchangeCodeForSession(t){const r=await sl(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??"").split("/");try{const{data:i,error:o}=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:ja});if(await to(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new oc;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(Ot(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:s,token:a,access_token:i,nonce:o}=t,l=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ja}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new oc;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(Ot(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,s,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await lc(this.storage,this.storageKey));const{error:h}=await Vt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await Vt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Am("You must provide either an email or phone number.")}catch(l){if(Ot(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,s;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await Vt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:ja});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(Ot(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,s,a,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await lc(this.storage,this.storageKey));const u=await Vt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:cq});return!((i=u.data)===null||i===void 0)&&i.url&&In()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(Ot(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new Os;const{error:a}=await Vt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(Ot(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:a,options:i}=t,{error:o}=await Vt(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:s,type:a,options:i}=t,{data:o,error:l}=await Vt(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Am("You must provide either an email or phone number and a type")}catch(r){if(Ot(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await sl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<Px:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const o=await sl(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Ox()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=aq(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Vt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:fo}):await this._useSession(async r=>{var s,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Os}:await Vt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:fo})})}catch(r){if(Ot(r))return F$(r)&&(await this._removeSession(),await to(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:a,error:i}=s;if(i)throw i;if(!a.session)throw new Os;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await lc(this.storage,this.storageKey));const{data:u,error:d}=await Vt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:fo});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(s){if(Ot(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Os;const r=Date.now()/1e3;let s=r,a=!0,i=null;const{payload:o}=Mx(t.access_token);if(o.exp&&(s=o.exp,a=s<=r),a){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(Ot(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new Os;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Ot(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!In())throw new Pm("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Pm(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new l4("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Pm("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new l4("No code detected.");const{data:v,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new Pm("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;c&&(m=parseInt(c));const f=m-d;f*1e3<=vc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const x=m-h;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,m,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,m,d);const{data:g,error:y}=await this._getUser(i);if(y)throw y;const b={provider_token:s,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:m,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:b,redirectType:t.type},error:null})}catch(s){if(Ot(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await sl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const o=(s=a.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(D$(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await to(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=H$(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await lc(this.storage,this.storageKey,!0));try{return await Vt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(Ot(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(Ot(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:s,error:a}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:m}=i;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Vt(this.fetch,"GET",f,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return In()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:t.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(Ot(s))return this._returnResult({data:{provider:t.provider,url:null},error:s});throw s}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var s;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:l,token:c,access_token:u,nonce:d}=t,h=await Vt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=i==null?void 0:i.access_token)!==null&&s!==void 0?s:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ja}),{data:m,error:f}=h;return f?this._returnResult({data:{user:null,session:null},error:f}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new oc}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:f}))}catch(a){if(Ot(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,a;const{data:i,error:o}=r;if(o)throw o;return await Vt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Ot(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await Y$(async a=>(a>0&&await Q$(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Vt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ja})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Rx(i)&&Date.now()+o-s<vc})}catch(s){if(this._debug(r,"error",s),Ot(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),In()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await sl(this.storage,this.storageKey);if(a&&this.userStorage){let o=await sl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await yc(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Ox()}else if(a&&!a.user&&!a.user){const o=await sl(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await to(this.storage,this.storageKey+"-user"),await yc(this.storage,this.storageKey,a)):a.user=Ox()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Px;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${Px}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),Rx(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new Os;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new op;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Os;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),Ot(i)){const o={data:null,error:i};return Rx(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,s=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await yc(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=m4(a);await yc(this.storage,this.storageKey,i)}else{const a=m4(r);await yc(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await to(this.storage,this.storageKey),await to(this.storage,this.storageKey+"-code-verifier"),await to(this.storage,this.storageKey+"-user"),this.userStorage&&await to(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&In()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),vc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-t)/vc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${vc}ms, refresh threshold is ${Zv} ticks`),a<=Zv&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof h7)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!In()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const a=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await lc(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);a.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await Vt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(Ot(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,a;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await Vt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(Ot(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?kq(t.webauthn.credential_response):_q(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await Vt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(Ot(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await Vt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Nq(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Sq(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Ot(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Mx(s.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;return a?this._returnResult({data:null,error:a}):s?await Vt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:s.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Os})})}catch(r){if(Ot(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async s=>{const{data:{session:a},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Os});const o=await Vt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&In()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(s){if(Ot(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(t,r){try{return await this._useSession(async s=>{const{data:{session:a},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Os});const o=await Vt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&In()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(s){if(Ot(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?await Vt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Os})})}catch(t){if(Ot(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;return a?this._returnResult({data:null,error:a}):s?await Vt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:t.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new Os})})}catch(r){if(Ot(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(l=>l.kid===t);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(l=>l.kid===t),s&&this.jwks_cached_at+O$>a)return s;const{data:i,error:o}=await Vt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,s=i.keys.find(l=>l.kid===t),!s)?null:s}async getClaims(t,r={}){try{let s=t;if(!s){const{data:f,error:x}=await this.getSession();if(x||!f.session)return this._returnResult({data:null,error:x});s=f.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=Mx(s);r!=null&&r.allowExpired||rq(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:f}=await this.getUser(s);if(f)throw f;return{data:{claims:i,header:a,signature:o},error:null}}const d=nq(a.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,U$(`${l}.${c}`)))throw new r1("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(s){if(Ot(s))return this._returnResult({data:null,error:s});throw s}}}mh.nextInstanceID={};const Iq=mh;class Dq extends Iq{constructor(t){super(t)}}class Fq{constructor(t,r,s){var a,i,o;this.supabaseUrl=t,this.supabaseKey=r;const l=T$(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:w$,realtime:N$,auth:Object.assign(Object.assign({},j$),{storageKey:c}),global:b$},d=E$(s??{},u);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=_$(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new Az(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new g$(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Cz(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,s)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(r=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:i,storageKey:o,flowType:l,lock:c,debug:u,throwOnError:d},h,m){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Dq({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),h),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:a,userStorage:i,flowType:l,lock:c,debug:u,throwOnError:d,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Gz(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(t,r,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Lq=(e,t,r)=>new Fq(e,t,r);function zq(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}zq()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const $q="https://eplwyruyzllqbmnpmdko.supabase.co",qq="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVwbHd5cnV5emxscWJtbnBtZGtvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM3Nzg3NTMsImV4cCI6MjA3OTM1NDc1M30.hlem8AbwvxmFbCyqtCyWnTtxqeiG9qLcggOfXh8GY5k",st=Lq($q,qq,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0},global:{headers:{Accept:"application/json","Content-Type":"application/json"}}}),p7=p.createContext({user:null,session:null,loading:!0,signOut:async()=>{}}),Wt=()=>p.useContext(p7),Bq=({children:e})=>{const[t,r]=p.useState(null),[s,a]=p.useState(null),[i,o]=p.useState(!0),l=Gt();p.useEffect(()=>{const{data:{subscription:u}}=st.auth.onAuthStateChange((d,h)=>{a(h),r((h==null?void 0:h.user)??null),o(!1)});return st.auth.getSession().then(({data:{session:d}})=>{a(d),r((d==null?void 0:d.user)??null),o(!1)}),()=>u.unsubscribe()},[]);const c=async()=>{await st.auth.signOut(),l("/")};return n.jsx(p7.Provider,{value:{user:t,session:s,loading:i,signOut:c},children:e})},bb=Iu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),z=p.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...a},i)=>{const o=s?MM:"button";return n.jsx(o,{className:qe(bb({variant:t,size:r,className:e})),ref:i,...a})});z.displayName="Button";const Uq=()=>n.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[n.jsxs("div",{className:"fixed inset-0 bg-gradient-to-br from-primary/10 via-background to-accent/10 -z-10",children:[n.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmZmYiIGZpbGwtb3BhY2l0eT0iMC4wNSI+PGNpcmNsZSBjeD0iMzAiIGN5PSIzMCIgcj0iMiIvPjwvZz48L2c+PC9zdmc+')] opacity-40"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/80 via-transparent to-transparent"})]}),n.jsx("nav",{className:"relative border-b bg-card/80 backdrop-blur-md shadow-sm",children:n.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"bg-primary/10 p-2 rounded-lg",children:n.jsx(pa,{className:"h-6 w-6 text-primary"})}),n.jsx("span",{className:"text-2xl font-bold text-foreground",children:"EduVerse"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(z,{variant:"outline",asChild:!0,className:"hover:bg-primary/5",children:n.jsx(Ni,{to:"/login",children:"Login"})}),n.jsx(z,{asChild:!0,className:"shadow-md hover:shadow-lg transition-shadow",children:n.jsx(Ni,{to:"/signup",children:"Get Started"})})]})]})}),n.jsx("section",{className:"relative container mx-auto px-4 py-24 md:py-32 text-center",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 text-primary text-sm font-medium mb-6",children:[n.jsx(vr,{className:"h-4 w-4"}),n.jsx("span",{children:"AI-Powered Learning Platform"})]}),n.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-6 text-foreground leading-tight",children:["Learn Smarter with"," ",n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-primary to-primary/70",children:"AI-Powered"})," ","Education"]}),n.jsx("p",{className:"text-xl md:text-2xl text-muted-foreground mb-10 max-w-3xl mx-auto leading-relaxed",children:"Personalized learning experiences for students, powerful tools for teachers, and comprehensive management for administrators."}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[n.jsx(z,{size:"lg",asChild:!0,className:"shadow-lg hover:shadow-xl transition-all hover:scale-105 text-lg px-8 py-6",children:n.jsx(Ni,{to:"/signup",children:"Start Learning Free"})}),n.jsx(z,{size:"lg",variant:"outline",asChild:!0,className:"text-lg px-8 py-6 border-2 hover:bg-primary/5",children:n.jsx(Ni,{to:"/login",children:"Sign In"})})]})]})}),n.jsxs("section",{className:"relative container mx-auto px-4 py-20",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4 text-foreground",children:"Built for Every Role"}),n.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Tailored solutions designed to empower every member of the educational ecosystem"})]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"group bg-card p-8 rounded-xl border-2 hover:border-primary/50 transition-all duration-300 hover:shadow-xl hover:-translate-y-2 relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/5 rounded-full -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-500"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"bg-gradient-to-br from-primary/20 to-primary/5 w-16 h-16 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300",children:n.jsx(Jt,{className:"h-8 w-8 text-primary"})}),n.jsx("h3",{className:"text-2xl font-semibold mb-4 text-card-foreground",children:"For Students"}),n.jsx("p",{className:"text-muted-foreground mb-6 leading-relaxed",children:"Personalized lesson plans, progress tracking, achievements, and 24/7 AI tutor support to help you excel."}),n.jsxs("ul",{className:"space-y-3 text-sm text-muted-foreground",children:[n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx(wx,{className:"h-4 w-4 text-primary"}),n.jsx("span",{children:"Adaptive learning paths"})]}),n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx(An,{className:"h-4 w-4 text-primary"}),n.jsx("span",{children:"Real-time progress tracking"})]}),n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx(Ii,{className:"h-4 w-4 text-primary"}),n.jsx("span",{children:"Gamified achievements"})]}),n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx(vr,{className:"h-4 w-4 text-primary"}),n.jsx("span",{children:"AI homework help"})]})]})]})]}),n.jsxs("div",{className:"group bg-card p-8 rounded-xl border-2 hover:border-primary/50 transition-all duration-300 hover:shadow-xl hover:-translate-y-2 relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/5 rounded-full -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-500"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"bg-gradient-to-br from-primary/20 to-primary/5 w-16 h-16 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300",children:n.jsx(vn,{className:"h-8 w-8 text-primary"})}),n.jsx("h3",{className:"text-2xl font-semibold mb-4 text-card-foreground",children:"For Teachers"}),n.jsx("p",{className:"text-muted-foreground mb-6 leading-relaxed",children:"Manage classes, track student progress, create assignments, and get AI-powered insights."}),n.jsxs("ul",{className:"space-y-3 text-sm text-muted-foreground",children:[n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx(wx,{className:"h-4 w-4 text-primary"}),n.jsx("span",{children:"Class management tools"})]}),n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx(Mn,{className:"h-4 w-4 text-primary"}),n.jsx("span",{children:"Student analytics"})]}),n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"h-4 w-4 text-primary"}),n.jsx("span",{children:"Assignment creation"})]}),n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx(An,{className:"h-4 w-4 text-primary"}),n.jsx("span",{children:"Performance insights"})]})]})]})]}),n.jsxs("div",{className:"group bg-card p-8 rounded-xl border-2 hover:border-primary/50 transition-all duration-300 hover:shadow-xl hover:-translate-y-2 relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/5 rounded-full -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-500"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"bg-gradient-to-br from-primary/20 to-primary/5 w-16 h-16 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300",children:n.jsx(sh,{className:"h-8 w-8 text-primary"})}),n.jsx("h3",{className:"text-2xl font-semibold mb-4 text-card-foreground",children:"For Admins"}),n.jsx("p",{className:"text-muted-foreground mb-6 leading-relaxed",children:"Complete platform oversight with user management, analytics, and system configuration."}),n.jsxs("ul",{className:"space-y-3 text-sm text-muted-foreground",children:[n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx(vn,{className:"h-4 w-4 text-primary"}),n.jsx("span",{children:"User role management"})]}),n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx(Mn,{className:"h-4 w-4 text-primary"}),n.jsx("span",{children:"System analytics"})]}),n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx(sh,{className:"h-4 w-4 text-primary"}),n.jsx("span",{children:"Content moderation"})]}),n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx(wx,{className:"h-4 w-4 text-primary"}),n.jsx("span",{children:"Platform settings"})]})]})]})]})]})]}),n.jsx("section",{className:"relative bg-gradient-to-r from-primary/10 via-accent/10 to-primary/10 py-20 border-y-2 border-primary/20",children:n.jsx("div",{className:"container mx-auto px-4",children:n.jsxs("div",{className:"grid md:grid-cols-3 gap-8 text-center",children:[n.jsxs("div",{className:"group",children:[n.jsx("div",{className:"text-5xl md:text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-primary to-primary/70 mb-3 group-hover:scale-110 transition-transform duration-300 inline-block",children:"10K+"}),n.jsx("p",{className:"text-lg text-muted-foreground font-medium",children:"Active Students"})]}),n.jsxs("div",{className:"group",children:[n.jsx("div",{className:"text-5xl md:text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-primary to-primary/70 mb-3 group-hover:scale-110 transition-transform duration-300 inline-block",children:"500+"}),n.jsx("p",{className:"text-lg text-muted-foreground font-medium",children:"Teachers"})]}),n.jsxs("div",{className:"group",children:[n.jsx("div",{className:"text-5xl md:text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-primary to-primary/70 mb-3 group-hover:scale-110 transition-transform duration-300 inline-block",children:"95%"}),n.jsx("p",{className:"text-lg text-muted-foreground font-medium",children:"Satisfaction Rate"})]})]})})}),n.jsx("section",{className:"relative container mx-auto px-4 py-24 text-center",children:n.jsxs("div",{className:"max-w-3xl mx-auto bg-gradient-to-br from-card to-card/50 p-12 rounded-2xl border-2 border-primary/20 shadow-2xl",children:[n.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-6 text-foreground",children:"Ready to Transform Your Learning?"}),n.jsx("p",{className:"text-xl text-muted-foreground mb-10 leading-relaxed",children:"Join thousands of students achieving their goals with AI-powered personalized education."}),n.jsx(z,{size:"lg",asChild:!0,className:"shadow-xl hover:shadow-2xl transition-all hover:scale-105 text-lg px-10 py-7",children:n.jsx(Ni,{to:"/signup",children:"Get Started Now"})})]})}),n.jsx("footer",{className:"relative border-t bg-card/80 backdrop-blur-md",children:n.jsx("div",{className:"container mx-auto px-4 py-8 text-center text-muted-foreground",children:n.jsx("p",{className:"font-medium",children:" 2025 EduVerse Platform. All rights reserved."})})})]}),Ve=p.forwardRef(({className:e,type:t,...r},s)=>n.jsx("input",{type:t,className:qe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...r}));Ve.displayName="Input";var Vq="Label",x7=p.forwardRef((e,t)=>n.jsx(_t.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));x7.displayName=Vq;var g7=x7;const Hq=Iu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),be=p.forwardRef(({className:e,...t},r)=>n.jsx(g7,{ref:r,className:qe(Hq(),e),...t}));be.displayName=g7.displayName;const ae=p.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:qe("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));ae.displayName="Card";const he=p.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:qe("flex flex-col space-y-1.5 p-6",e),...t}));he.displayName="CardHeader";const fe=p.forwardRef(({className:e,...t},r)=>n.jsx("h3",{ref:r,className:qe("text-2xl font-semibold leading-none tracking-tight",e),...t}));fe.displayName="CardTitle";const ze=p.forwardRef(({className:e,...t},r)=>n.jsx("p",{ref:r,className:qe("text-sm text-muted-foreground",e),...t}));ze.displayName="CardDescription";const ie=p.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:qe("p-6 pt-0",e),...t}));ie.displayName="CardContent";const wb=p.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:qe("flex items-center p-6 pt-0",e),...t}));wb.displayName="CardFooter";const Wq=()=>{const[e,t]=p.useState(""),[r,s]=p.useState(""),[a,i]=p.useState(!1),o=Gt(),{toast:l}=Ut(),c=async u=>{var d;u.preventDefault(),i(!0);try{const{data:h,error:m}=await st.auth.signInWithPassword({email:e,password:r});if(m){l({variant:"destructive",title:"Login failed",description:m.message});return}if(h.user){try{const{data:f,error:x}=await st.from("user_roles").select("role").eq("user_id",h.user.id).maybeSingle();if(x)if(x.code==="PGRST116"||(d=x.message)!=null&&d.includes("406")){const{data:g}=await st.from("user_roles").select("role").eq("user_id",h.user.id).limit(1);if(g&&g.length>0){o(`/dashboard/${g[0].role}`);return}}else console.error("Error fetching user role:",x);else if(f){o(`/dashboard/${f.role}`);return}}catch(f){console.error("Error fetching user role:",f)}o("/dashboard/student")}}catch{l({variant:"destructive",title:"Error",description:"An unexpected error occurred"})}finally{i(!1)}};return n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:n.jsxs(ae,{className:"w-full max-w-md",children:[n.jsxs(he,{className:"space-y-1 flex flex-col items-center",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(pa,{className:"h-8 w-8 text-primary"}),n.jsx("span",{className:"text-2xl font-bold",children:"AI Tutor"})]}),n.jsx(fe,{className:"text-2xl",children:"Welcome back"}),n.jsx(ze,{children:"Enter your credentials to access your account"})]}),n.jsxs("form",{onSubmit:c,children:[n.jsxs(ie,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"email",children:"Email"}),n.jsx(Ve,{id:"email",type:"email",placeholder:"name@example.com",value:e,onChange:u=>t(u.target.value),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"password",children:"Password"}),n.jsx(Ve,{id:"password",type:"password",value:r,onChange:u=>s(u.target.value),required:!0})]})]}),n.jsxs(wb,{className:"flex flex-col space-y-4",children:[n.jsx(z,{type:"submit",className:"w-full",disabled:a,children:a?"Signing in...":"Sign In"}),n.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["Don't have an account?"," ",n.jsx(Ni,{to:"/signup",className:"text-primary hover:underline",children:"Sign up"})]})]})]})]})})};function n1(e,[t,r]){return Math.min(r,Math.max(t,e))}var Gq=p.createContext(void 0);function Uu(e){const t=p.useContext(Gq);return e||t||"ltr"}var Dx=0;function jb(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??b4()),document.body.insertAdjacentElement("beforeend",e[1]??b4()),Dx++,()=>{Dx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Dx--}},[])}function b4(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Fx="focusScope.autoFocusOnMount",Lx="focusScope.autoFocusOnUnmount",w4={bubbles:!1,cancelable:!0},Qq="FocusScope",lp=p.forwardRef((e,t)=>{const{loop:r=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=p.useState(null),u=sn(a),d=sn(i),h=p.useRef(null),m=Yt(t,g=>c(g)),f=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(s){let g=function(w){if(f.paused||!l)return;const S=w.target;l.contains(S)?h.current=S:oo(h.current,{select:!0})},y=function(w){if(f.paused||!l)return;const S=w.relatedTarget;S!==null&&(l.contains(S)||oo(h.current,{select:!0}))},b=function(w){if(document.activeElement===document.body)for(const k of w)k.removedNodes.length>0&&oo(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const v=new MutationObserver(b);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),v.disconnect()}}},[s,l,f.paused]),p.useEffect(()=>{if(l){N4.add(f);const g=document.activeElement;if(!l.contains(g)){const b=new CustomEvent(Fx,w4);l.addEventListener(Fx,u),l.dispatchEvent(b),b.defaultPrevented||(Yq(eB(v7(l)),{select:!0}),document.activeElement===g&&oo(l))}return()=>{l.removeEventListener(Fx,u),setTimeout(()=>{const b=new CustomEvent(Lx,w4);l.addEventListener(Lx,d),l.dispatchEvent(b),b.defaultPrevented||oo(g??document.body,{select:!0}),l.removeEventListener(Lx,d),N4.remove(f)},0)}}},[l,u,d,f]);const x=p.useCallback(g=>{if(!r&&!s||f.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,b=document.activeElement;if(y&&b){const v=g.currentTarget,[w,S]=Kq(v);w&&S?!g.shiftKey&&b===S?(g.preventDefault(),r&&oo(w,{select:!0})):g.shiftKey&&b===w&&(g.preventDefault(),r&&oo(S,{select:!0})):b===v&&g.preventDefault()}},[r,s,f.paused]);return n.jsx(_t.div,{tabIndex:-1,...o,ref:m,onKeyDown:x})});lp.displayName=Qq;function Yq(e,{select:t=!1}={}){const r=document.activeElement;for(const s of e)if(oo(s,{select:t}),document.activeElement!==r)return}function Kq(e){const t=v7(e),r=j4(t,e),s=j4(t.reverse(),e);return[r,s]}function v7(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function j4(e,t){for(const r of e)if(!Jq(r,{upTo:t}))return r}function Jq(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Xq(e){return e instanceof HTMLInputElement&&"select"in e}function oo(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Xq(e)&&t&&e.select()}}var N4=Zq();function Zq(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=S4(e,t),e.unshift(t)},remove(t){var r;e=S4(e,t),(r=e[0])==null||r.resume()}}}function S4(e,t){const r=[...e],s=r.indexOf(t);return s!==-1&&r.splice(s,1),r}function eB(e){return e.filter(t=>t.tagName!=="A")}function cp(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var tB=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},hc=new WeakMap,Rm=new WeakMap,Mm={},zx=0,y7=function(e){return e&&(e.host||y7(e.parentNode))},rB=function(e,t){return t.map(function(r){if(e.contains(r))return r;var s=y7(r);return s&&e.contains(s)?s:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},nB=function(e,t,r,s){var a=rB(t,Array.isArray(e)?e:[e]);Mm[r]||(Mm[r]=new WeakMap);var i=Mm[r],o=[],l=new Set,c=new Set(a),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};a.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))d(m);else try{var f=m.getAttribute(s),x=f!==null&&f!=="false",g=(hc.get(m)||0)+1,y=(i.get(m)||0)+1;hc.set(m,g),i.set(m,y),o.push(m),g===1&&x&&Rm.set(m,!0),y===1&&m.setAttribute(r,"true"),x||m.setAttribute(s,"true")}catch(b){console.error("aria-hidden: cannot operate on ",m,b)}})};return d(t),l.clear(),zx++,function(){o.forEach(function(h){var m=hc.get(h)-1,f=i.get(h)-1;hc.set(h,m),i.set(h,f),m||(Rm.has(h)||h.removeAttribute(s),Rm.delete(h)),f||h.removeAttribute(r)}),zx--,zx||(hc=new WeakMap,hc=new WeakMap,Rm=new WeakMap,Mm={})}},Nb=function(e,t,r){r===void 0&&(r="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=tB(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live]"))),nB(s,a,r,"aria-hidden")):function(){return null}},d0="right-scroll-bar-position",h0="width-before-scroll-bar",sB="with-scroll-bars-hidden",aB="--removed-body-scroll-bar-size";function $x(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function iB(e,t){var r=p.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(s){var a=r.value;a!==s&&(r.value=s,r.callback(s,a))}}}})[0];return r.callback=t,r.facade}var oB=typeof window<"u"?p.useLayoutEffect:p.useEffect,k4=new WeakMap;function lB(e,t){var r=iB(null,function(s){return e.forEach(function(a){return $x(a,s)})});return oB(function(){var s=k4.get(r);if(s){var a=new Set(s),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||$x(l,null)}),i.forEach(function(l){a.has(l)||$x(l,o)})}k4.set(r,e)},[e]),r}function cB(e){return e}function uB(e,t){t===void 0&&(t=cB);var r=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,s);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(s=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){s=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return a}function dB(e){e===void 0&&(e={});var t=uB(null);return t.options=ia({async:!0,ssr:!1},e),t}var b7=function(e){var t=e.sideCar,r=Ko(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return p.createElement(s,ia({},r))};b7.isSideCarExport=!0;function hB(e,t){return e.useMedium(t),b7}var w7=dB(),qx=function(){},up=p.forwardRef(function(e,t){var r=p.useRef(null),s=p.useState({onScrollCapture:qx,onWheelCapture:qx,onTouchMoveCapture:qx}),a=s[0],i=s[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,m=e.sideCar,f=e.noRelative,x=e.noIsolation,g=e.inert,y=e.allowPinchZoom,b=e.as,v=b===void 0?"div":b,w=e.gapMode,S=Ko(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=m,N=lB([r,t]),P=ia(ia({},S),a);return p.createElement(p.Fragment,null,d&&p.createElement(k,{sideCar:w7,removeScrollBar:u,shards:h,noRelative:f,noIsolation:x,inert:g,setCallbacks:i,allowPinchZoom:!!y,lockRef:r,gapMode:w}),o?p.cloneElement(p.Children.only(l),ia(ia({},P),{ref:N})):p.createElement(v,ia({},P,{className:c,ref:N}),l))});up.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};up.classNames={fullWidth:h0,zeroRight:d0};var mB=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function fB(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=mB();return t&&e.setAttribute("nonce",t),e}function pB(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function xB(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var gB=function(){var e=0,t=null;return{add:function(r){e==0&&(t=fB())&&(pB(t,r),xB(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},vB=function(){var e=gB();return function(t,r){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},j7=function(){var e=vB(),t=function(r){var s=r.styles,a=r.dynamic;return e(s,a),null};return t},yB={left:0,top:0,right:0,gap:0},Bx=function(e){return parseInt(e||"",10)||0},bB=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Bx(r),Bx(s),Bx(a)]},wB=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return yB;var t=bB(e),r=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-r+t[2]-t[0])}},jB=j7(),Hc="data-scroll-locked",NB=function(e,t,r,s){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(sB,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(Hc,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(d0,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(h0,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(d0," .").concat(d0,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(h0," .").concat(h0,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Hc,`] {
    `).concat(aB,": ").concat(l,`px;
  }
`)},_4=function(){var e=parseInt(document.body.getAttribute(Hc)||"0",10);return isFinite(e)?e:0},SB=function(){p.useEffect(function(){return document.body.setAttribute(Hc,(_4()+1).toString()),function(){var e=_4()-1;e<=0?document.body.removeAttribute(Hc):document.body.setAttribute(Hc,e.toString())}},[])},kB=function(e){var t=e.noRelative,r=e.noImportant,s=e.gapMode,a=s===void 0?"margin":s;SB();var i=p.useMemo(function(){return wB(a)},[a]);return p.createElement(jB,{styles:NB(i,!t,a,r?"":"!important")})},s1=!1;if(typeof window<"u")try{var Om=Object.defineProperty({},"passive",{get:function(){return s1=!0,!0}});window.addEventListener("test",Om,Om),window.removeEventListener("test",Om,Om)}catch{s1=!1}var mc=s1?{passive:!1}:!1,_B=function(e){return e.tagName==="TEXTAREA"},N7=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!_B(e)&&r[t]==="visible")},CB=function(e){return N7(e,"overflowY")},EB=function(e){return N7(e,"overflowX")},C4=function(e,t){var r=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=S7(e,s);if(a){var i=k7(e,s),o=i[1],l=i[2];if(o>l)return!0}s=s.parentNode}while(s&&s!==r.body);return!1},TB=function(e){var t=e.scrollTop,r=e.scrollHeight,s=e.clientHeight;return[t,r,s]},AB=function(e){var t=e.scrollLeft,r=e.scrollWidth,s=e.clientWidth;return[t,r,s]},S7=function(e,t){return e==="v"?CB(t):EB(t)},k7=function(e,t){return e==="v"?TB(t):AB(t)},PB=function(e,t){return e==="h"&&t==="rtl"?-1:1},RB=function(e,t,r,s,a){var i=PB(e,window.getComputedStyle(t).direction),o=i*s,l=r.target,c=t.contains(l),u=!1,d=o>0,h=0,m=0;do{if(!l)break;var f=k7(e,l),x=f[0],g=f[1],y=f[2],b=g-y-i*x;(x||b)&&S7(e,l)&&(h+=b,m+=x);var v=l.parentNode;l=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(h)<1||!a)||!d&&(Math.abs(m)<1||!a))&&(u=!0),u},Im=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},E4=function(e){return[e.deltaX,e.deltaY]},T4=function(e){return e&&"current"in e?e.current:e},MB=function(e,t){return e[0]===t[0]&&e[1]===t[1]},OB=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},IB=0,fc=[];function DB(e){var t=p.useRef([]),r=p.useRef([0,0]),s=p.useRef(),a=p.useState(IB++)[0],i=p.useState(j7)[0],o=p.useRef(e);p.useEffect(function(){o.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var g=db([e.lockRef.current],(e.shards||[]).map(T4),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var b=Im(g),v=r.current,w="deltaX"in g?g.deltaX:v[0]-b[0],S="deltaY"in g?g.deltaY:v[1]-b[1],k,N=g.target,P=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in g&&P==="h"&&N.type==="range")return!1;var T=C4(P,N);if(!T)return!0;if(T?k=P:(k=P==="v"?"h":"v",T=C4(P,N)),!T)return!1;if(!s.current&&"changedTouches"in g&&(w||S)&&(s.current=k),!k)return!0;var A=s.current||k;return RB(A,y,g,A==="h"?w:S,!0)},[]),c=p.useCallback(function(g){var y=g;if(!(!fc.length||fc[fc.length-1]!==i)){var b="deltaY"in y?E4(y):Im(y),v=t.current.filter(function(k){return k.name===y.type&&(k.target===y.target||y.target===k.shadowParent)&&MB(k.delta,b)})[0];if(v&&v.should){y.cancelable&&y.preventDefault();return}if(!v){var w=(o.current.shards||[]).map(T4).filter(Boolean).filter(function(k){return k.contains(y.target)}),S=w.length>0?l(y,w[0]):!o.current.noIsolation;S&&y.cancelable&&y.preventDefault()}}},[]),u=p.useCallback(function(g,y,b,v){var w={name:g,delta:y,target:b,should:v,shadowParent:FB(b)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(S){return S!==w})},1)},[]),d=p.useCallback(function(g){r.current=Im(g),s.current=void 0},[]),h=p.useCallback(function(g){u(g.type,E4(g),g.target,l(g,e.lockRef.current))},[]),m=p.useCallback(function(g){u(g.type,Im(g),g.target,l(g,e.lockRef.current))},[]);p.useEffect(function(){return fc.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,mc),document.addEventListener("touchmove",c,mc),document.addEventListener("touchstart",d,mc),function(){fc=fc.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,mc),document.removeEventListener("touchmove",c,mc),document.removeEventListener("touchstart",d,mc)}},[]);var f=e.removeScrollBar,x=e.inert;return p.createElement(p.Fragment,null,x?p.createElement(i,{styles:OB(a)}):null,f?p.createElement(kB,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function FB(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const LB=hB(w7,DB);var dp=p.forwardRef(function(e,t){return p.createElement(up,ia({},e,{ref:t,sideCar:LB}))});dp.classNames=up.classNames;var zB=[" ","Enter","ArrowUp","ArrowDown"],$B=[" ","Enter"],$l="Select",[hp,mp,qB]=Wf($l),[Vu,Fse]=On($l,[qB,zu]),fp=zu(),[BB,Xo]=Vu($l),[UB,VB]=Vu($l),_7=e=>{const{__scopeSelect:t,children:r,open:s,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:m,required:f,form:x}=e,g=fp(t),[y,b]=p.useState(null),[v,w]=p.useState(null),[S,k]=p.useState(!1),N=Uu(u),[P,T]=ai({prop:s,defaultProp:a??!1,onChange:i,caller:$l}),[A,E]=ai({prop:o,defaultProp:l,onChange:c,caller:$l}),M=p.useRef(null),I=y?x||!!y.closest("form"):!0,[se,ee]=p.useState(new Set),Y=Array.from(se).map(F=>F.props.value).join(";");return n.jsx(Lk,{...g,children:n.jsxs(BB,{required:f,scope:t,trigger:y,onTriggerChange:b,valueNode:v,onValueNodeChange:w,valueNodeHasChildren:S,onValueNodeHasChildrenChange:k,contentId:ri(),value:A,onValueChange:E,open:P,onOpenChange:T,dir:N,triggerPointerDownPosRef:M,disabled:m,children:[n.jsx(hp.Provider,{scope:t,children:n.jsx(UB,{scope:e.__scopeSelect,onNativeOptionAdd:p.useCallback(F=>{ee(ne=>new Set(ne).add(F))},[]),onNativeOptionRemove:p.useCallback(F=>{ee(ne=>{const q=new Set(ne);return q.delete(F),q})},[]),children:r})}),I?n.jsxs(K7,{"aria-hidden":!0,required:f,tabIndex:-1,name:d,autoComplete:h,value:A,onChange:F=>E(F.target.value),disabled:m,form:x,children:[A===void 0?n.jsx("option",{value:""}):null,Array.from(se)]},Y):null]})})};_7.displayName=$l;var C7="SelectTrigger",E7=p.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:s=!1,...a}=e,i=fp(r),o=Xo(C7,r),l=o.disabled||s,c=Yt(t,o.onTriggerChange),u=mp(r),d=p.useRef("touch"),[h,m,f]=X7(g=>{const y=u().filter(w=>!w.disabled),b=y.find(w=>w.value===o.value),v=Z7(y,g,b);v!==void 0&&o.onValueChange(v.value)}),x=g=>{l||(o.onOpenChange(!0),f()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return n.jsx(sb,{asChild:!0,...i,children:n.jsx(_t.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":J7(o.value)?"":void 0,...a,ref:c,onClick:Ze(a.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&x(g)}),onPointerDown:Ze(a.onPointerDown,g=>{d.current=g.pointerType;const y=g.target;y.hasPointerCapture(g.pointerId)&&y.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(x(g),g.preventDefault())}),onKeyDown:Ze(a.onKeyDown,g=>{const y=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&m(g.key),!(y&&g.key===" ")&&zB.includes(g.key)&&(x(),g.preventDefault())})})})});E7.displayName=C7;var T7="SelectValue",A7=p.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:a,children:i,placeholder:o="",...l}=e,c=Xo(T7,r),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,h=Yt(t,c.onValueNodeChange);return hn(()=>{u(d)},[u,d]),n.jsx(_t.span,{...l,ref:h,style:{pointerEvents:"none"},children:J7(c.value)?n.jsx(n.Fragment,{children:o}):i})});A7.displayName=T7;var HB="SelectIcon",P7=p.forwardRef((e,t)=>{const{__scopeSelect:r,children:s,...a}=e;return n.jsx(_t.span,{"aria-hidden":!0,...a,ref:t,children:s||""})});P7.displayName=HB;var WB="SelectPortal",R7=e=>n.jsx(Rh,{asChild:!0,...e});R7.displayName=WB;var ql="SelectContent",M7=p.forwardRef((e,t)=>{const r=Xo(ql,e.__scopeSelect),[s,a]=p.useState();if(hn(()=>{a(new DocumentFragment)},[]),!r.open){const i=s;return i?Kl.createPortal(n.jsx(O7,{scope:e.__scopeSelect,children:n.jsx(hp.Slot,{scope:e.__scopeSelect,children:n.jsx("div",{children:e.children})})}),i):null}return n.jsx(I7,{...e,ref:t})});M7.displayName=ql;var Na=10,[O7,Zo]=Vu(ql),GB="SelectContentImpl",QB=Dl("SelectContent.RemoveScroll"),I7=p.forwardRef((e,t)=>{const{__scopeSelect:r,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:f,sticky:x,hideWhenDetached:g,avoidCollisions:y,...b}=e,v=Xo(ql,r),[w,S]=p.useState(null),[k,N]=p.useState(null),P=Yt(t,X=>S(X)),[T,A]=p.useState(null),[E,M]=p.useState(null),I=mp(r),[se,ee]=p.useState(!1),Y=p.useRef(!1);p.useEffect(()=>{if(w)return Nb(w)},[w]),jb();const F=p.useCallback(X=>{const[de,...oe]=I().map(we=>we.ref.current),[me]=oe.slice(-1),Ee=document.activeElement;for(const we of X)if(we===Ee||(we==null||we.scrollIntoView({block:"nearest"}),we===de&&k&&(k.scrollTop=0),we===me&&k&&(k.scrollTop=k.scrollHeight),we==null||we.focus(),document.activeElement!==Ee))return},[I,k]),ne=p.useCallback(()=>F([T,w]),[F,T,w]);p.useEffect(()=>{se&&ne()},[se,ne]);const{onOpenChange:q,triggerPointerDownPosRef:V}=v;p.useEffect(()=>{if(w){let X={x:0,y:0};const de=me=>{var Ee,we;X={x:Math.abs(Math.round(me.pageX)-(((Ee=V.current)==null?void 0:Ee.x)??0)),y:Math.abs(Math.round(me.pageY)-(((we=V.current)==null?void 0:we.y)??0))}},oe=me=>{X.x<=10&&X.y<=10?me.preventDefault():w.contains(me.target)||q(!1),document.removeEventListener("pointermove",de),V.current=null};return V.current!==null&&(document.addEventListener("pointermove",de),document.addEventListener("pointerup",oe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",de),document.removeEventListener("pointerup",oe,{capture:!0})}}},[w,q,V]),p.useEffect(()=>{const X=()=>q(!1);return window.addEventListener("blur",X),window.addEventListener("resize",X),()=>{window.removeEventListener("blur",X),window.removeEventListener("resize",X)}},[q]);const[_,U]=X7(X=>{const de=I().filter(Ee=>!Ee.disabled),oe=de.find(Ee=>Ee.ref.current===document.activeElement),me=Z7(de,X,oe);me&&setTimeout(()=>me.ref.current.focus())}),H=p.useCallback((X,de,oe)=>{const me=!Y.current&&!oe;(v.value!==void 0&&v.value===de||me)&&(A(X),me&&(Y.current=!0))},[v.value]),O=p.useCallback(()=>w==null?void 0:w.focus(),[w]),B=p.useCallback((X,de,oe)=>{const me=!Y.current&&!oe;(v.value!==void 0&&v.value===de||me)&&M(X)},[v.value]),W=s==="popper"?a1:D7,K=W===a1?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:f,sticky:x,hideWhenDetached:g,avoidCollisions:y}:{};return n.jsx(O7,{scope:r,content:w,viewport:k,onViewportChange:N,itemRefCallback:H,selectedItem:T,onItemLeave:O,itemTextRefCallback:B,focusSelectedItem:ne,selectedItemText:E,position:s,isPositioned:se,searchRef:_,children:n.jsx(dp,{as:QB,allowPinchZoom:!0,children:n.jsx(lp,{asChild:!0,trapped:v.open,onMountAutoFocus:X=>{X.preventDefault()},onUnmountAutoFocus:Ze(a,X=>{var de;(de=v.trigger)==null||de.focus({preventScroll:!0}),X.preventDefault()}),children:n.jsx(Ou,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:X=>X.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:n.jsx(W,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:X=>X.preventDefault(),...b,...K,onPlaced:()=>ee(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:Ze(b.onKeyDown,X=>{const de=X.ctrlKey||X.altKey||X.metaKey;if(X.key==="Tab"&&X.preventDefault(),!de&&X.key.length===1&&U(X.key),["ArrowUp","ArrowDown","Home","End"].includes(X.key)){let me=I().filter(Ee=>!Ee.disabled).map(Ee=>Ee.ref.current);if(["ArrowUp","End"].includes(X.key)&&(me=me.slice().reverse()),["ArrowUp","ArrowDown"].includes(X.key)){const Ee=X.target,we=me.indexOf(Ee);me=me.slice(we+1)}setTimeout(()=>F(me)),X.preventDefault()}})})})})})})});I7.displayName=GB;var YB="SelectItemAlignedPosition",D7=p.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:s,...a}=e,i=Xo(ql,r),o=Zo(ql,r),[l,c]=p.useState(null),[u,d]=p.useState(null),h=Yt(t,P=>d(P)),m=mp(r),f=p.useRef(!1),x=p.useRef(!0),{viewport:g,selectedItem:y,selectedItemText:b,focusSelectedItem:v}=o,w=p.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&g&&y&&b){const P=i.trigger.getBoundingClientRect(),T=u.getBoundingClientRect(),A=i.valueNode.getBoundingClientRect(),E=b.getBoundingClientRect();if(i.dir!=="rtl"){const Ee=E.left-T.left,we=A.left-Ee,Le=P.left-we,_e=P.width+Le,ut=Math.max(_e,T.width),at=window.innerWidth-Na,Ct=n1(we,[Na,Math.max(Na,at-ut)]);l.style.minWidth=_e+"px",l.style.left=Ct+"px"}else{const Ee=T.right-E.right,we=window.innerWidth-A.right-Ee,Le=window.innerWidth-P.right-we,_e=P.width+Le,ut=Math.max(_e,T.width),at=window.innerWidth-Na,Ct=n1(we,[Na,Math.max(Na,at-ut)]);l.style.minWidth=_e+"px",l.style.right=Ct+"px"}const M=m(),I=window.innerHeight-Na*2,se=g.scrollHeight,ee=window.getComputedStyle(u),Y=parseInt(ee.borderTopWidth,10),F=parseInt(ee.paddingTop,10),ne=parseInt(ee.borderBottomWidth,10),q=parseInt(ee.paddingBottom,10),V=Y+F+se+q+ne,_=Math.min(y.offsetHeight*5,V),U=window.getComputedStyle(g),H=parseInt(U.paddingTop,10),O=parseInt(U.paddingBottom,10),B=P.top+P.height/2-Na,W=I-B,K=y.offsetHeight/2,X=y.offsetTop+K,de=Y+F+X,oe=V-de;if(de<=B){const Ee=M.length>0&&y===M[M.length-1].ref.current;l.style.bottom="0px";const we=u.clientHeight-g.offsetTop-g.offsetHeight,Le=Math.max(W,K+(Ee?O:0)+we+ne),_e=de+Le;l.style.height=_e+"px"}else{const Ee=M.length>0&&y===M[0].ref.current;l.style.top="0px";const Le=Math.max(B,Y+g.offsetTop+(Ee?H:0)+K)+oe;l.style.height=Le+"px",g.scrollTop=de-B+g.offsetTop}l.style.margin=`${Na}px 0`,l.style.minHeight=_+"px",l.style.maxHeight=I+"px",s==null||s(),requestAnimationFrame(()=>f.current=!0)}},[m,i.trigger,i.valueNode,l,u,g,y,b,i.dir,s]);hn(()=>w(),[w]);const[S,k]=p.useState();hn(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const N=p.useCallback(P=>{P&&x.current===!0&&(w(),v==null||v(),x.current=!1)},[w,v]);return n.jsx(JB,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:f,onScrollButtonChange:N,children:n.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:n.jsx(_t.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});D7.displayName=YB;var KB="SelectPopperPosition",a1=p.forwardRef((e,t)=>{const{__scopeSelect:r,align:s="start",collisionPadding:a=Na,...i}=e,o=fp(r);return n.jsx(ab,{...o,...i,ref:t,align:s,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});a1.displayName=KB;var[JB,Sb]=Vu(ql,{}),i1="SelectViewport",F7=p.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:s,...a}=e,i=Zo(i1,r),o=Sb(i1,r),l=Yt(t,i.onViewportChange),c=p.useRef(0);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),n.jsx(hp.Slot,{scope:r,children:n.jsx(_t.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Ze(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&h){const f=Math.abs(c.current-d.scrollTop);if(f>0){const x=window.innerHeight-Na*2,g=parseFloat(h.style.minHeight),y=parseFloat(h.style.height),b=Math.max(g,y);if(b<x){const v=b+f,w=Math.min(x,v),S=v-w;h.style.height=w+"px",h.style.bottom==="0px"&&(d.scrollTop=S>0?S:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});F7.displayName=i1;var L7="SelectGroup",[XB,ZB]=Vu(L7),eU=p.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=ri();return n.jsx(XB,{scope:r,id:a,children:n.jsx(_t.div,{role:"group","aria-labelledby":a,...s,ref:t})})});eU.displayName=L7;var z7="SelectLabel",$7=p.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=ZB(z7,r);return n.jsx(_t.div,{id:a.id,...s,ref:t})});$7.displayName=z7;var sf="SelectItem",[tU,q7]=Vu(sf),B7=p.forwardRef((e,t)=>{const{__scopeSelect:r,value:s,disabled:a=!1,textValue:i,...o}=e,l=Xo(sf,r),c=Zo(sf,r),u=l.value===s,[d,h]=p.useState(i??""),[m,f]=p.useState(!1),x=Yt(t,v=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,v,s,a)}),g=ri(),y=p.useRef("touch"),b=()=>{a||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return n.jsx(tU,{scope:r,value:s,disabled:a,textId:g,isSelected:u,onItemTextChange:p.useCallback(v=>{h(w=>w||((v==null?void 0:v.textContent)??"").trim())},[]),children:n.jsx(hp.ItemSlot,{scope:r,value:s,disabled:a,textValue:d,children:n.jsx(_t.div,{role:"option","aria-labelledby":g,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:x,onFocus:Ze(o.onFocus,()=>f(!0)),onBlur:Ze(o.onBlur,()=>f(!1)),onClick:Ze(o.onClick,()=>{y.current!=="mouse"&&b()}),onPointerUp:Ze(o.onPointerUp,()=>{y.current==="mouse"&&b()}),onPointerDown:Ze(o.onPointerDown,v=>{y.current=v.pointerType}),onPointerMove:Ze(o.onPointerMove,v=>{var w;y.current=v.pointerType,a?(w=c.onItemLeave)==null||w.call(c):y.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ze(o.onPointerLeave,v=>{var w;v.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:Ze(o.onKeyDown,v=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&v.key===" "||($B.includes(v.key)&&b(),v.key===" "&&v.preventDefault())})})})})});B7.displayName=sf;var xd="SelectItemText",U7=p.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:a,...i}=e,o=Xo(xd,r),l=Zo(xd,r),c=q7(xd,r),u=VB(xd,r),[d,h]=p.useState(null),m=Yt(t,b=>h(b),c.onItemTextChange,b=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,b,c.value,c.disabled)}),f=d==null?void 0:d.textContent,x=p.useMemo(()=>n.jsx("option",{value:c.value,disabled:c.disabled,children:f},c.value),[c.disabled,c.value,f]),{onNativeOptionAdd:g,onNativeOptionRemove:y}=u;return hn(()=>(g(x),()=>y(x)),[g,y,x]),n.jsxs(n.Fragment,{children:[n.jsx(_t.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Kl.createPortal(i.children,o.valueNode):null]})});U7.displayName=xd;var V7="SelectItemIndicator",H7=p.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return q7(V7,r).isSelected?n.jsx(_t.span,{"aria-hidden":!0,...s,ref:t}):null});H7.displayName=V7;var o1="SelectScrollUpButton",W7=p.forwardRef((e,t)=>{const r=Zo(o1,e.__scopeSelect),s=Sb(o1,e.__scopeSelect),[a,i]=p.useState(!1),o=Yt(t,s.onScrollButtonChange);return hn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?n.jsx(Q7,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});W7.displayName=o1;var l1="SelectScrollDownButton",G7=p.forwardRef((e,t)=>{const r=Zo(l1,e.__scopeSelect),s=Sb(l1,e.__scopeSelect),[a,i]=p.useState(!1),o=Yt(t,s.onScrollButtonChange);return hn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?n.jsx(Q7,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});G7.displayName=l1;var Q7=p.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:s,...a}=e,i=Zo("SelectScrollButton",r),o=p.useRef(null),l=mp(r),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),hn(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),n.jsx(_t.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Ze(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(s,50))}),onPointerMove:Ze(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(s,50))}),onPointerLeave:Ze(a.onPointerLeave,()=>{c()})})}),rU="SelectSeparator",Y7=p.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return n.jsx(_t.div,{"aria-hidden":!0,...s,ref:t})});Y7.displayName=rU;var c1="SelectArrow",nU=p.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=fp(r),i=Xo(c1,r),o=Zo(c1,r);return i.open&&o.position==="popper"?n.jsx(ib,{...a,...s,ref:t}):null});nU.displayName=c1;var sU="SelectBubbleInput",K7=p.forwardRef(({__scopeSelect:e,value:t,...r},s)=>{const a=p.useRef(null),i=Yt(s,a),o=cp(t);return p.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const h=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(h)}},[o,t]),n.jsx(_t.select,{...r,style:{...C6,...r.style},ref:i,defaultValue:t})});K7.displayName=sU;function J7(e){return e===""||e===void 0}function X7(e){const t=sn(e),r=p.useRef(""),s=p.useRef(0),a=p.useCallback(o=>{const l=r.current+o;t(l),function c(u){r.current=u,window.clearTimeout(s.current),u!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=p.useCallback(()=>{r.current="",window.clearTimeout(s.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(s.current),[]),[r,a,i]}function Z7(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=aU(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function aU(e,t){return e.map((r,s)=>e[(t+s)%e.length])}var iU=_7,e_=E7,oU=A7,lU=P7,cU=R7,t_=M7,uU=F7,r_=$7,n_=B7,dU=U7,hU=H7,s_=W7,a_=G7,i_=Y7;const Nt=iU,St=oU,wt=p.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(e_,{ref:s,className:qe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,n.jsx(lU,{asChild:!0,children:n.jsx(By,{className:"h-4 w-4 opacity-50"})})]}));wt.displayName=e_.displayName;const o_=p.forwardRef(({className:e,...t},r)=>n.jsx(s_,{ref:r,className:qe("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(X6,{className:"h-4 w-4"})}));o_.displayName=s_.displayName;const l_=p.forwardRef(({className:e,...t},r)=>n.jsx(a_,{ref:r,className:qe("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(By,{className:"h-4 w-4"})}));l_.displayName=a_.displayName;const jt=p.forwardRef(({className:e,children:t,position:r="popper",...s},a)=>n.jsx(cU,{children:n.jsxs(t_,{ref:a,className:qe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...s,children:[n.jsx(o_,{}),n.jsx(uU,{className:qe("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),n.jsx(l_,{})]})}));jt.displayName=t_.displayName;const mU=p.forwardRef(({className:e,...t},r)=>n.jsx(r_,{ref:r,className:qe("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));mU.displayName=r_.displayName;const re=p.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(n_,{ref:s,className:qe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(hU,{children:n.jsx($c,{className:"h-4 w-4"})})}),n.jsx(dU,{children:t})]}));re.displayName=n_.displayName;const fU=p.forwardRef(({className:e,...t},r)=>n.jsx(i_,{ref:r,className:qe("-mx-1 my-1 h-px bg-muted",e),...t}));fU.displayName=i_.displayName;var Sr;(function(e){e.assertEqual=a=>{};function t(a){}e.assertIs=t;function r(a){throw new Error}e.assertNever=r,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of i)o[l]=a[l];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function s(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=s,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(Sr||(Sr={}));var A4;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(A4||(A4={}));const Tt=Sr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),uo=e=>{switch(typeof e){case"undefined":return Tt.undefined;case"string":return Tt.string;case"number":return Number.isNaN(e)?Tt.nan:Tt.number;case"boolean":return Tt.boolean;case"function":return Tt.function;case"bigint":return Tt.bigint;case"symbol":return Tt.symbol;case"object":return Array.isArray(e)?Tt.array:e===null?Tt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Tt.promise:typeof Map<"u"&&e instanceof Map?Tt.map:typeof Set<"u"&&e instanceof Set?Tt.set:typeof Date<"u"&&e instanceof Date?Tt.date:Tt.object;default:return Tt.unknown}},tt=Sr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ui extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(i){return i.message},s={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)s._errors.push(r(o));else{let l=s,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return a(this),s}static assert(t){if(!(t instanceof Ui))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Sr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},s=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];r[i]=r[i]||[],r[i].push(t(a))}else s.push(t(a));return{formErrors:s,fieldErrors:r}}get formErrors(){return this.flatten()}}Ui.create=e=>new Ui(e);const u1=(e,t)=>{let r;switch(e.code){case tt.invalid_type:e.received===Tt.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case tt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,Sr.jsonStringifyReplacer)}`;break;case tt.unrecognized_keys:r=`Unrecognized key(s) in object: ${Sr.joinValues(e.keys,", ")}`;break;case tt.invalid_union:r="Invalid input";break;case tt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Sr.joinValues(e.options)}`;break;case tt.invalid_enum_value:r=`Invalid enum value. Expected ${Sr.joinValues(e.options)}, received '${e.received}'`;break;case tt.invalid_arguments:r="Invalid function arguments";break;case tt.invalid_return_type:r="Invalid function return type";break;case tt.invalid_date:r="Invalid date";break;case tt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:Sr.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case tt.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case tt.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case tt.custom:r="Invalid input";break;case tt.invalid_intersection_types:r="Intersection results could not be merged";break;case tt.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case tt.not_finite:r="Number must be finite";break;default:r=t.defaultError,Sr.assertNever(e)}return{message:r}};let pU=u1;function xU(){return pU}const gU=e=>{const{data:t,path:r,errorMaps:s,issueData:a}=e,i=[...r,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let l="";const c=s.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:t,defaultError:l}).message;return{...a,path:i,message:l}};function vt(e,t){const r=xU(),s=gU({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===u1?void 0:u1].filter(a=>!!a)});e.common.issues.push(s)}class Ks{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const s=[];for(const a of r){if(a.status==="aborted")return Kt;a.status==="dirty"&&t.dirty(),s.push(a.value)}return{status:t.value,value:s}}static async mergeObjectAsync(t,r){const s=[];for(const a of r){const i=await a.key,o=await a.value;s.push({key:i,value:o})}return Ks.mergeObjectSync(t,s)}static mergeObjectSync(t,r){const s={};for(const a of r){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return Kt;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(s[i.value]=o.value)}return{status:t.value,value:s}}}const Kt=Object.freeze({status:"aborted"}),gd=e=>({status:"dirty",value:e}),va=e=>({status:"valid",value:e}),P4=e=>e.status==="aborted",R4=e=>e.status==="dirty",xu=e=>e.status==="valid",af=e=>typeof Promise<"u"&&e instanceof Promise;var Pt;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Pt||(Pt={}));class $o{constructor(t,r,s,a){this._cachedPath=[],this.parent=t,this.data=r,this._path=s,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const M4=(e,t)=>{if(xu(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Ui(e.common.issues);return this._error=r,this._error}}};function ur(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:s,description:a}=e;if(t&&(r||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,l)=>{const{message:c}=e;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??s??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??r??l.defaultError}},description:a}}class wr{get description(){return this._def.description}_getType(t){return uo(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:uo(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Ks,ctx:{common:t.parent.common,data:t.data,parsedType:uo(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(af(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const s=this.safeParse(t,r);if(s.success)return s.data;throw s.error}safeParse(t,r){const s={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:uo(t)},a=this._parseSync({data:t,path:s.path,parent:s});return M4(s,a)}"~validate"(t){var s,a;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:uo(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:r});return xu(i)?{value:i.value}:{issues:r.common.issues}}catch(i){(a=(s=i==null?void 0:i.message)==null?void 0:s.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(i=>xu(i)?{value:i.value}:{issues:r.common.issues})}async parseAsync(t,r){const s=await this.safeParseAsync(t,r);if(s.success)return s.data;throw s.error}async safeParseAsync(t,r){const s={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:uo(t)},a=this._parse({data:t,path:s.path,parent:s}),i=await(af(a)?a:Promise.resolve(a));return M4(s,i)}refine(t,r){const s=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,i)=>{const o=t(a),l=()=>i.addIssue({code:tt.custom,...s(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,r){return this._refinement((s,a)=>t(s)?!0:(a.addIssue(typeof r=="function"?r(s,a):r),!1))}_refinement(t){return new yu({schema:this,typeName:Xt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Oo.create(this,this._def)}nullable(){return bu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return si.create(this)}promise(){return uf.create(this,this._def)}or(t){return lf.create([this,t],this._def)}and(t){return cf.create(this,t,this._def)}transform(t){return new yu({...ur(this._def),schema:this,typeName:Xt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new m1({...ur(this._def),innerType:this,defaultValue:r,typeName:Xt.ZodDefault})}brand(){return new $U({typeName:Xt.ZodBranded,type:this,...ur(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new f1({...ur(this._def),innerType:this,catchValue:r,typeName:Xt.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return kb.create(this,t)}readonly(){return p1.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const vU=/^c[^\s-]{8,}$/i,yU=/^[0-9a-z]+$/,bU=/^[0-9A-HJKMNP-TV-Z]{26}$/i,wU=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,jU=/^[a-z0-9_-]{21}$/i,NU=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,SU=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,kU=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_U="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ux;const CU=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,EU=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,TU=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,AU=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,PU=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,RU=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,c_="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",MU=new RegExp(`^${c_}$`);function u_(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function OU(e){return new RegExp(`^${u_(e)}$`)}function IU(e){let t=`${c_}T${u_(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function DU(e,t){return!!((t==="v4"||!t)&&CU.test(e)||(t==="v6"||!t)&&TU.test(e))}function FU(e,t){if(!NU.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const s=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(s));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&a.alg!==t)}catch{return!1}}function LU(e,t){return!!((t==="v4"||!t)&&EU.test(e)||(t==="v6"||!t)&&AU.test(e))}class No extends wr{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Tt.string){const i=this._getOrReturnCtx(t);return vt(i,{code:tt.invalid_type,expected:Tt.string,received:i.parsedType}),Kt}const s=new Ks;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),vt(a,{code:tt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),vt(a,{code:tt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,l=t.data.length<i.value;(o||l)&&(a=this._getOrReturnCtx(t,a),o?vt(a,{code:tt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&vt(a,{code:tt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),s.dirty())}else if(i.kind==="email")kU.test(t.data)||(a=this._getOrReturnCtx(t,a),vt(a,{validation:"email",code:tt.invalid_string,message:i.message}),s.dirty());else if(i.kind==="emoji")Ux||(Ux=new RegExp(_U,"u")),Ux.test(t.data)||(a=this._getOrReturnCtx(t,a),vt(a,{validation:"emoji",code:tt.invalid_string,message:i.message}),s.dirty());else if(i.kind==="uuid")wU.test(t.data)||(a=this._getOrReturnCtx(t,a),vt(a,{validation:"uuid",code:tt.invalid_string,message:i.message}),s.dirty());else if(i.kind==="nanoid")jU.test(t.data)||(a=this._getOrReturnCtx(t,a),vt(a,{validation:"nanoid",code:tt.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid")vU.test(t.data)||(a=this._getOrReturnCtx(t,a),vt(a,{validation:"cuid",code:tt.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid2")yU.test(t.data)||(a=this._getOrReturnCtx(t,a),vt(a,{validation:"cuid2",code:tt.invalid_string,message:i.message}),s.dirty());else if(i.kind==="ulid")bU.test(t.data)||(a=this._getOrReturnCtx(t,a),vt(a,{validation:"ulid",code:tt.invalid_string,message:i.message}),s.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),vt(a,{validation:"url",code:tt.invalid_string,message:i.message}),s.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),vt(a,{validation:"regex",code:tt.invalid_string,message:i.message}),s.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),vt(a,{code:tt.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),s.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),vt(a,{code:tt.invalid_string,validation:{startsWith:i.value},message:i.message}),s.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),vt(a,{code:tt.invalid_string,validation:{endsWith:i.value},message:i.message}),s.dirty()):i.kind==="datetime"?IU(i).test(t.data)||(a=this._getOrReturnCtx(t,a),vt(a,{code:tt.invalid_string,validation:"datetime",message:i.message}),s.dirty()):i.kind==="date"?MU.test(t.data)||(a=this._getOrReturnCtx(t,a),vt(a,{code:tt.invalid_string,validation:"date",message:i.message}),s.dirty()):i.kind==="time"?OU(i).test(t.data)||(a=this._getOrReturnCtx(t,a),vt(a,{code:tt.invalid_string,validation:"time",message:i.message}),s.dirty()):i.kind==="duration"?SU.test(t.data)||(a=this._getOrReturnCtx(t,a),vt(a,{validation:"duration",code:tt.invalid_string,message:i.message}),s.dirty()):i.kind==="ip"?DU(t.data,i.version)||(a=this._getOrReturnCtx(t,a),vt(a,{validation:"ip",code:tt.invalid_string,message:i.message}),s.dirty()):i.kind==="jwt"?FU(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),vt(a,{validation:"jwt",code:tt.invalid_string,message:i.message}),s.dirty()):i.kind==="cidr"?LU(t.data,i.version)||(a=this._getOrReturnCtx(t,a),vt(a,{validation:"cidr",code:tt.invalid_string,message:i.message}),s.dirty()):i.kind==="base64"?PU.test(t.data)||(a=this._getOrReturnCtx(t,a),vt(a,{validation:"base64",code:tt.invalid_string,message:i.message}),s.dirty()):i.kind==="base64url"?RU.test(t.data)||(a=this._getOrReturnCtx(t,a),vt(a,{validation:"base64url",code:tt.invalid_string,message:i.message}),s.dirty()):Sr.assertNever(i);return{status:s.value,value:t.data}}_regex(t,r,s){return this.refinement(a=>t.test(a),{validation:r,code:tt.invalid_string,...Pt.errToObj(s)})}_addCheck(t){return new No({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Pt.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Pt.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Pt.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Pt.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Pt.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Pt.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Pt.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Pt.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Pt.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Pt.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Pt.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Pt.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Pt.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...Pt.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Pt.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Pt.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Pt.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...Pt.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Pt.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Pt.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Pt.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Pt.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Pt.errToObj(r)})}nonempty(t){return this.min(1,Pt.errToObj(t))}trim(){return new No({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new No({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new No({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}No.create=e=>new No({checks:[],typeName:Xt.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...ur(e)});function zU(e,t){const r=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,a=r>s?r:s,i=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return i%o/10**a}class gu extends wr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Tt.number){const i=this._getOrReturnCtx(t);return vt(i,{code:tt.invalid_type,expected:Tt.number,received:i.parsedType}),Kt}let s;const a=new Ks;for(const i of this._def.checks)i.kind==="int"?Sr.isInteger(t.data)||(s=this._getOrReturnCtx(t,s),vt(s,{code:tt.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(s=this._getOrReturnCtx(t,s),vt(s,{code:tt.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(s=this._getOrReturnCtx(t,s),vt(s,{code:tt.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?zU(t.data,i.value)!==0&&(s=this._getOrReturnCtx(t,s),vt(s,{code:tt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(s=this._getOrReturnCtx(t,s),vt(s,{code:tt.not_finite,message:i.message}),a.dirty()):Sr.assertNever(i);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Pt.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Pt.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Pt.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Pt.toString(r))}setLimit(t,r,s,a){return new gu({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:s,message:Pt.toString(a)}]})}_addCheck(t){return new gu({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Pt.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Pt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Pt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Pt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Pt.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Pt.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Pt.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Pt.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Pt.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Sr.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(r===null||s.value>r)&&(r=s.value):s.kind==="max"&&(t===null||s.value<t)&&(t=s.value)}return Number.isFinite(r)&&Number.isFinite(t)}}gu.create=e=>new gu({checks:[],typeName:Xt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...ur(e)});class fh extends wr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Tt.bigint)return this._getInvalidInput(t);let s;const a=new Ks;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(s=this._getOrReturnCtx(t,s),vt(s,{code:tt.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(s=this._getOrReturnCtx(t,s),vt(s,{code:tt.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(s=this._getOrReturnCtx(t,s),vt(s,{code:tt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):Sr.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return vt(r,{code:tt.invalid_type,expected:Tt.bigint,received:r.parsedType}),Kt}gte(t,r){return this.setLimit("min",t,!0,Pt.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Pt.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Pt.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Pt.toString(r))}setLimit(t,r,s,a){return new fh({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:s,message:Pt.toString(a)}]})}_addCheck(t){return new fh({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Pt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Pt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Pt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Pt.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Pt.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}fh.create=e=>new fh({checks:[],typeName:Xt.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...ur(e)});class O4 extends wr{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Tt.boolean){const s=this._getOrReturnCtx(t);return vt(s,{code:tt.invalid_type,expected:Tt.boolean,received:s.parsedType}),Kt}return va(t.data)}}O4.create=e=>new O4({typeName:Xt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...ur(e)});class of extends wr{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Tt.date){const i=this._getOrReturnCtx(t);return vt(i,{code:tt.invalid_type,expected:Tt.date,received:i.parsedType}),Kt}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return vt(i,{code:tt.invalid_date}),Kt}const s=new Ks;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),vt(a,{code:tt.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),s.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),vt(a,{code:tt.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),s.dirty()):Sr.assertNever(i);return{status:s.value,value:new Date(t.data.getTime())}}_addCheck(t){return new of({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Pt.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Pt.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}of.create=e=>new of({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Xt.ZodDate,...ur(e)});class I4 extends wr{_parse(t){if(this._getType(t)!==Tt.symbol){const s=this._getOrReturnCtx(t);return vt(s,{code:tt.invalid_type,expected:Tt.symbol,received:s.parsedType}),Kt}return va(t.data)}}I4.create=e=>new I4({typeName:Xt.ZodSymbol,...ur(e)});class D4 extends wr{_parse(t){if(this._getType(t)!==Tt.undefined){const s=this._getOrReturnCtx(t);return vt(s,{code:tt.invalid_type,expected:Tt.undefined,received:s.parsedType}),Kt}return va(t.data)}}D4.create=e=>new D4({typeName:Xt.ZodUndefined,...ur(e)});class F4 extends wr{_parse(t){if(this._getType(t)!==Tt.null){const s=this._getOrReturnCtx(t);return vt(s,{code:tt.invalid_type,expected:Tt.null,received:s.parsedType}),Kt}return va(t.data)}}F4.create=e=>new F4({typeName:Xt.ZodNull,...ur(e)});class L4 extends wr{constructor(){super(...arguments),this._any=!0}_parse(t){return va(t.data)}}L4.create=e=>new L4({typeName:Xt.ZodAny,...ur(e)});class z4 extends wr{constructor(){super(...arguments),this._unknown=!0}_parse(t){return va(t.data)}}z4.create=e=>new z4({typeName:Xt.ZodUnknown,...ur(e)});class qo extends wr{_parse(t){const r=this._getOrReturnCtx(t);return vt(r,{code:tt.invalid_type,expected:Tt.never,received:r.parsedType}),Kt}}qo.create=e=>new qo({typeName:Xt.ZodNever,...ur(e)});class $4 extends wr{_parse(t){if(this._getType(t)!==Tt.undefined){const s=this._getOrReturnCtx(t);return vt(s,{code:tt.invalid_type,expected:Tt.void,received:s.parsedType}),Kt}return va(t.data)}}$4.create=e=>new $4({typeName:Xt.ZodVoid,...ur(e)});class si extends wr{_parse(t){const{ctx:r,status:s}=this._processInputParams(t),a=this._def;if(r.parsedType!==Tt.array)return vt(r,{code:tt.invalid_type,expected:Tt.array,received:r.parsedType}),Kt;if(a.exactLength!==null){const o=r.data.length>a.exactLength.value,l=r.data.length<a.exactLength.value;(o||l)&&(vt(r,{code:o?tt.too_big:tt.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),s.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(vt(r,{code:tt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),s.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(vt(r,{code:tt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),s.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>a.type._parseAsync(new $o(r,o,r.path,l)))).then(o=>Ks.mergeArray(s,o));const i=[...r.data].map((o,l)=>a.type._parseSync(new $o(r,o,r.path,l)));return Ks.mergeArray(s,i)}get element(){return this._def.type}min(t,r){return new si({...this._def,minLength:{value:t,message:Pt.toString(r)}})}max(t,r){return new si({...this._def,maxLength:{value:t,message:Pt.toString(r)}})}length(t,r){return new si({...this._def,exactLength:{value:t,message:Pt.toString(r)}})}nonempty(t){return this.min(1,t)}}si.create=(e,t)=>new si({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Xt.ZodArray,...ur(t)});function bc(e){if(e instanceof Zr){const t={};for(const r in e.shape){const s=e.shape[r];t[r]=Oo.create(bc(s))}return new Zr({...e._def,shape:()=>t})}else return e instanceof si?new si({...e._def,type:bc(e.element)}):e instanceof Oo?Oo.create(bc(e.unwrap())):e instanceof bu?bu.create(bc(e.unwrap())):e instanceof Bl?Bl.create(e.items.map(t=>bc(t))):e}class Zr extends wr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=Sr.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==Tt.object){const u=this._getOrReturnCtx(t);return vt(u,{code:tt.invalid_type,expected:Tt.object,received:u.parsedType}),Kt}const{status:s,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof qo&&this._def.unknownKeys==="strip"))for(const u in a.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=i[u],h=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new $o(a,h,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof qo){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:a.data[d]}});else if(u==="strict")l.length>0&&(vt(a,{code:tt.unrecognized_keys,keys:l}),s.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const h=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new $o(a,h,a.path,d)),alwaysSet:d in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const h=await d.key,m=await d.value;u.push({key:h,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>Ks.mergeObjectSync(s,u)):Ks.mergeObjectSync(s,c)}get shape(){return this._def.shape()}strict(t){return Pt.errToObj,new Zr({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,s)=>{var i,o;const a=((o=(i=this._def).errorMap)==null?void 0:o.call(i,r,s).message)??s.defaultError;return r.code==="unrecognized_keys"?{message:Pt.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new Zr({...this._def,unknownKeys:"strip"})}passthrough(){return new Zr({...this._def,unknownKeys:"passthrough"})}extend(t){return new Zr({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Zr({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Xt.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new Zr({...this._def,catchall:t})}pick(t){const r={};for(const s of Sr.objectKeys(t))t[s]&&this.shape[s]&&(r[s]=this.shape[s]);return new Zr({...this._def,shape:()=>r})}omit(t){const r={};for(const s of Sr.objectKeys(this.shape))t[s]||(r[s]=this.shape[s]);return new Zr({...this._def,shape:()=>r})}deepPartial(){return bc(this)}partial(t){const r={};for(const s of Sr.objectKeys(this.shape)){const a=this.shape[s];t&&!t[s]?r[s]=a:r[s]=a.optional()}return new Zr({...this._def,shape:()=>r})}required(t){const r={};for(const s of Sr.objectKeys(this.shape))if(t&&!t[s])r[s]=this.shape[s];else{let i=this.shape[s];for(;i instanceof Oo;)i=i._def.innerType;r[s]=i}return new Zr({...this._def,shape:()=>r})}keyof(){return d_(Sr.objectKeys(this.shape))}}Zr.create=(e,t)=>new Zr({shape:()=>e,unknownKeys:"strip",catchall:qo.create(),typeName:Xt.ZodObject,...ur(t)});Zr.strictCreate=(e,t)=>new Zr({shape:()=>e,unknownKeys:"strict",catchall:qo.create(),typeName:Xt.ZodObject,...ur(t)});Zr.lazycreate=(e,t)=>new Zr({shape:e,unknownKeys:"strip",catchall:qo.create(),typeName:Xt.ZodObject,...ur(t)});class lf extends wr{_parse(t){const{ctx:r}=this._processInputParams(t),s=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new Ui(l.ctx.common.issues));return vt(r,{code:tt.invalid_union,unionErrors:o}),Kt}if(r.common.async)return Promise.all(s.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const c of s){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(c=>new Ui(c));return vt(r,{code:tt.invalid_union,unionErrors:l}),Kt}}get options(){return this._def.options}}lf.create=(e,t)=>new lf({options:e,typeName:Xt.ZodUnion,...ur(t)});function d1(e,t){const r=uo(e),s=uo(t);if(e===t)return{valid:!0,data:e};if(r===Tt.object&&s===Tt.object){const a=Sr.objectKeys(t),i=Sr.objectKeys(e).filter(l=>a.indexOf(l)!==-1),o={...e,...t};for(const l of i){const c=d1(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(r===Tt.array&&s===Tt.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],l=t[i],c=d1(o,l);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return r===Tt.date&&s===Tt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class cf extends wr{_parse(t){const{status:r,ctx:s}=this._processInputParams(t),a=(i,o)=>{if(P4(i)||P4(o))return Kt;const l=d1(i.value,o.value);return l.valid?((R4(i)||R4(o))&&r.dirty(),{status:r.value,value:l.data}):(vt(s,{code:tt.invalid_intersection_types}),Kt)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}cf.create=(e,t,r)=>new cf({left:e,right:t,typeName:Xt.ZodIntersection,...ur(r)});class Bl extends wr{_parse(t){const{status:r,ctx:s}=this._processInputParams(t);if(s.parsedType!==Tt.array)return vt(s,{code:tt.invalid_type,expected:Tt.array,received:s.parsedType}),Kt;if(s.data.length<this._def.items.length)return vt(s,{code:tt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Kt;!this._def.rest&&s.data.length>this._def.items.length&&(vt(s,{code:tt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...s.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new $o(s,o,s.path,l)):null}).filter(o=>!!o);return s.common.async?Promise.all(i).then(o=>Ks.mergeArray(r,o)):Ks.mergeArray(r,i)}get items(){return this._def.items}rest(t){return new Bl({...this._def,rest:t})}}Bl.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Bl({items:e,typeName:Xt.ZodTuple,rest:null,...ur(t)})};class q4 extends wr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:s}=this._processInputParams(t);if(s.parsedType!==Tt.map)return vt(s,{code:tt.invalid_type,expected:Tt.map,received:s.parsedType}),Kt;const a=this._def.keyType,i=this._def.valueType,o=[...s.data.entries()].map(([l,c],u)=>({key:a._parse(new $o(s,l,s.path,[u,"key"])),value:i._parse(new $o(s,c,s.path,[u,"value"]))}));if(s.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return Kt;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return Kt;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}}q4.create=(e,t,r)=>new q4({valueType:t,keyType:e,typeName:Xt.ZodMap,...ur(r)});class ph extends wr{_parse(t){const{status:r,ctx:s}=this._processInputParams(t);if(s.parsedType!==Tt.set)return vt(s,{code:tt.invalid_type,expected:Tt.set,received:s.parsedType}),Kt;const a=this._def;a.minSize!==null&&s.data.size<a.minSize.value&&(vt(s,{code:tt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&s.data.size>a.maxSize.value&&(vt(s,{code:tt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return Kt;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const l=[...s.data.values()].map((c,u)=>i._parse(new $o(s,c,s.path,u)));return s.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,r){return new ph({...this._def,minSize:{value:t,message:Pt.toString(r)}})}max(t,r){return new ph({...this._def,maxSize:{value:t,message:Pt.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}ph.create=(e,t)=>new ph({valueType:e,minSize:null,maxSize:null,typeName:Xt.ZodSet,...ur(t)});class B4 extends wr{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}B4.create=(e,t)=>new B4({getter:e,typeName:Xt.ZodLazy,...ur(t)});class h1 extends wr{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return vt(r,{received:r.data,code:tt.invalid_literal,expected:this._def.value}),Kt}return{status:"valid",value:t.data}}get value(){return this._def.value}}h1.create=(e,t)=>new h1({value:e,typeName:Xt.ZodLiteral,...ur(t)});function d_(e,t){return new vu({values:e,typeName:Xt.ZodEnum,...ur(t)})}class vu extends wr{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),s=this._def.values;return vt(r,{expected:Sr.joinValues(s),received:r.parsedType,code:tt.invalid_type}),Kt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),s=this._def.values;return vt(r,{received:r.data,code:tt.invalid_enum_value,options:s}),Kt}return va(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return vu.create(t,{...this._def,...r})}exclude(t,r=this._def){return vu.create(this.options.filter(s=>!t.includes(s)),{...this._def,...r})}}vu.create=d_;class U4 extends wr{_parse(t){const r=Sr.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(t);if(s.parsedType!==Tt.string&&s.parsedType!==Tt.number){const a=Sr.objectValues(r);return vt(s,{expected:Sr.joinValues(a),received:s.parsedType,code:tt.invalid_type}),Kt}if(this._cache||(this._cache=new Set(Sr.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const a=Sr.objectValues(r);return vt(s,{received:s.data,code:tt.invalid_enum_value,options:a}),Kt}return va(t.data)}get enum(){return this._def.values}}U4.create=(e,t)=>new U4({values:e,typeName:Xt.ZodNativeEnum,...ur(t)});class uf extends wr{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==Tt.promise&&r.common.async===!1)return vt(r,{code:tt.invalid_type,expected:Tt.promise,received:r.parsedType}),Kt;const s=r.parsedType===Tt.promise?r.data:Promise.resolve(r.data);return va(s.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}uf.create=(e,t)=>new uf({type:e,typeName:Xt.ZodPromise,...ur(t)});class yu extends wr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Xt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:s}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{vt(s,o),o.fatal?r.abort():r.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(s.data,i);if(s.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return Kt;const c=await this._def.schema._parseAsync({data:l,path:s.path,parent:s});return c.status==="aborted"?Kt:c.status==="dirty"||r.value==="dirty"?gd(c.value):c});{if(r.value==="aborted")return Kt;const l=this._def.schema._parseSync({data:o,path:s.path,parent:s});return l.status==="aborted"?Kt:l.status==="dirty"||r.value==="dirty"?gd(l.value):l}}if(a.type==="refinement"){const o=l=>{const c=a.refinement(l,i);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(s.common.async===!1){const l=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return l.status==="aborted"?Kt:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(l=>l.status==="aborted"?Kt:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(a.type==="transform")if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!xu(o))return Kt;const l=a.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>xu(o)?Promise.resolve(a.transform(o.value,i)).then(l=>({status:r.value,value:l})):Kt);Sr.assertNever(a)}}yu.create=(e,t,r)=>new yu({schema:e,typeName:Xt.ZodEffects,effect:t,...ur(r)});yu.createWithPreprocess=(e,t,r)=>new yu({schema:t,effect:{type:"preprocess",transform:e},typeName:Xt.ZodEffects,...ur(r)});class Oo extends wr{_parse(t){return this._getType(t)===Tt.undefined?va(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Oo.create=(e,t)=>new Oo({innerType:e,typeName:Xt.ZodOptional,...ur(t)});class bu extends wr{_parse(t){return this._getType(t)===Tt.null?va(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}bu.create=(e,t)=>new bu({innerType:e,typeName:Xt.ZodNullable,...ur(t)});class m1 extends wr{_parse(t){const{ctx:r}=this._processInputParams(t);let s=r.data;return r.parsedType===Tt.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}m1.create=(e,t)=>new m1({innerType:e,typeName:Xt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...ur(t)});class f1 extends wr{_parse(t){const{ctx:r}=this._processInputParams(t),s={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return af(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ui(s.common.issues)},input:s.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ui(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}f1.create=(e,t)=>new f1({innerType:e,typeName:Xt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...ur(t)});class V4 extends wr{_parse(t){if(this._getType(t)!==Tt.nan){const s=this._getOrReturnCtx(t);return vt(s,{code:tt.invalid_type,expected:Tt.nan,received:s.parsedType}),Kt}return{status:"valid",value:t.data}}}V4.create=e=>new V4({typeName:Xt.ZodNaN,...ur(e)});class $U extends wr{_parse(t){const{ctx:r}=this._processInputParams(t),s=r.data;return this._def.type._parse({data:s,path:r.path,parent:r})}unwrap(){return this._def.type}}class kb extends wr{_parse(t){const{status:r,ctx:s}=this._processInputParams(t);if(s.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?Kt:i.status==="dirty"?(r.dirty(),gd(i.value)):this._def.out._parseAsync({data:i.value,path:s.path,parent:s})})();{const a=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?Kt:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:s.path,parent:s})}}static create(t,r){return new kb({in:t,out:r,typeName:Xt.ZodPipeline})}}class p1 extends wr{_parse(t){const r=this._def.innerType._parse(t),s=a=>(xu(a)&&(a.value=Object.freeze(a.value)),a);return af(r)?r.then(a=>s(a)):s(r)}unwrap(){return this._def.innerType}}p1.create=(e,t)=>new p1({innerType:e,typeName:Xt.ZodReadonly,...ur(t)});Zr.lazycreate;var Xt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Xt||(Xt={}));const jl=No.create,qU=gu.create;qo.create;si.create;const h_=Zr.create;Zr.strictCreate;lf.create;cf.create;Bl.create;const BU=h1.create,UU=vu.create;uf.create;Oo.create;bu.create;const VU=h_({fullName:jl().min(2,"Name must be at least 2 characters"),email:jl().email("Invalid email address"),password:jl().min(6,"Password must be at least 6 characters"),role:UU(["student","teacher","admin"])}),HU=()=>{const[e,t]=p.useState(""),[r,s]=p.useState(""),[a,i]=p.useState(""),[o,l]=p.useState("student"),[c,u]=p.useState(!1),d=Gt(),{toast:h}=Ut(),m=async f=>{f.preventDefault(),u(!0);try{const x=VU.safeParse({fullName:e,email:r,password:a,role:o});if(!x.success){h({variant:"destructive",title:"Validation Error",description:x.error.errors[0].message}),u(!1);return}const g=`${window.location.origin}/profile-setup`,{data:y,error:b}=await st.auth.signUp({email:r,password:a,options:{data:{full_name:e},emailRedirectTo:g}});if(b){h({variant:"destructive",title:"Signup failed",description:b.message});return}y.user&&(sessionStorage.setItem("pending_role",o),h({title:"Account created!",description:"Please complete your profile setup."}),d("/profile-setup"))}catch{h({variant:"destructive",title:"Error",description:"An unexpected error occurred"})}finally{u(!1)}};return n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:n.jsxs(ae,{className:"w-full max-w-md",children:[n.jsxs(he,{className:"space-y-1 flex flex-col items-center",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(pa,{className:"h-8 w-8 text-primary"}),n.jsx("span",{className:"text-2xl font-bold",children:"AI Tutor"})]}),n.jsx(fe,{className:"text-2xl",children:"Create an account"}),n.jsx(ze,{children:"Enter your information to get started"})]}),n.jsxs("form",{onSubmit:m,children:[n.jsxs(ie,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"fullName",children:"Full Name"}),n.jsx(Ve,{id:"fullName",type:"text",placeholder:"John Doe",value:e,onChange:f=>t(f.target.value),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"email",children:"Email"}),n.jsx(Ve,{id:"email",type:"email",placeholder:"name@example.com",value:r,onChange:f=>s(f.target.value),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"password",children:"Password"}),n.jsx(Ve,{id:"password",type:"password",value:a,onChange:f=>i(f.target.value),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"role",children:"I am a..."}),n.jsxs(Nt,{value:o,onValueChange:f=>l(f),children:[n.jsx(wt,{children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"student",children:"Student"}),n.jsx(re,{value:"teacher",children:"Teacher"}),n.jsx(re,{value:"admin",children:"Administrator"})]})]})]})]}),n.jsxs(wb,{className:"flex flex-col space-y-4",children:[n.jsx(z,{type:"submit",className:"w-full",disabled:c,children:c?"Creating account...":"Create Account"}),n.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["Already have an account?"," ",n.jsx(Ni,{to:"/login",className:"text-primary hover:underline",children:"Sign in"})]})]})]})]})})},kr=p.forwardRef(({className:e,...t},r)=>n.jsx("textarea",{className:qe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));kr.displayName="Textarea";const WU=h_({classGrade:qU().min(6).max(12),schoolName:jl().min(2,"School name is required"),parentEmail:jl().email("Invalid email").optional().or(BU("")),parentPhone:jl().optional(),learningGoals:jl().optional()}),GU=()=>{var se,ee;const{user:e,loading:t}=Wt(),[r,s]=p.useState(null),[a,i]=p.useState("6"),[o,l]=p.useState(""),[c,u]=p.useState(""),[d,h]=p.useState(""),[m,f]=p.useState(""),[x,g]=p.useState(""),[y,b]=p.useState(""),[v,w]=p.useState(""),[S,k]=p.useState(""),[N,P]=p.useState(""),[T,A]=p.useState(!1),E=Gt(),{toast:M}=Ut();p.useEffect(()=>{if(!t&&!e){E("/login");return}if(e){st.from("profiles").select("profile_completed").eq("user_id",e.id).maybeSingle().then(({data:F})=>{if(F!=null&&F.profile_completed){st.from("user_roles").select("role").eq("user_id",e.id).maybeSingle().then(({data:ne,error:q})=>{var V;q?q.code==="PGRST116"||(V=q.message)!=null&&V.includes("406")?st.from("user_roles").select("role").eq("user_id",e.id).limit(1).then(({data:_})=>{_&&_.length>0?E(`/dashboard/${_[0].role}`):E("/dashboard/student")}):(console.error("Error fetching user role:",q),E("/dashboard/student")):E(ne?`/dashboard/${ne.role}`:"/dashboard/student")});return}});const Y=sessionStorage.getItem("pending_role");if(Y){s(Y);return}st.from("user_roles").select("role").eq("user_id",e.id).maybeSingle().then(({data:F,error:ne})=>{var q;if(ne&&(ne.code==="PGRST116"||(q=ne.message)!=null&&q.includes("406")?st.from("user_roles").select("role").eq("user_id",e.id).limit(1).then(({data:V})=>{V&&V.length>0&&s(V[0].role)}):console.error("Error fetching role:",ne)),F)s(F.role),F.role==="admin"&&e&&st.from("profiles").select("*").eq("user_id",e.id).maybeSingle().then(({data:V})=>{V&&w(e.email||"")});else{const V=sessionStorage.getItem("pending_role");s(V||"student")}})}},[e,t,E]);const I=async Y=>{var F;if(Y.preventDefault(),!!e){A(!0);try{const{error:ne}=await st.from("user_roles").upsert({user_id:e.id,role:r},{onConflict:"user_id,role"});if(ne){M({variant:"destructive",title:"Error",description:ne.message}),A(!1);return}if(sessionStorage.removeItem("pending_role"),r==="student"){const V=WU.safeParse({classGrade:parseInt(a),schoolName:o,parentEmail:c||void 0,parentPhone:d,learningGoals:m});if(!V.success){M({variant:"destructive",title:"Validation Error",description:V.error.errors[0].message}),A(!1);return}const{error:_}=await st.from("student_profiles").upsert({user_id:e.id,class_grade:parseInt(a),school_name:o,parent_email:c||null,parent_phone:d||null,learning_goals:m||null,updated_at:new Date().toISOString()},{onConflict:"user_id"});if(_){console.error("Student profile error:",_),M({variant:"destructive",title:"Error",description:_.message||"Failed to save student profile"}),A(!1);return}}const{data:q}=await st.from("profiles").select("id").eq("user_id",e.id).maybeSingle();if(q){const{error:V}=await st.from("profiles").update({profile_completed:!0}).eq("user_id",e.id);if(V){M({variant:"destructive",title:"Error",description:V.message}),A(!1);return}}else{const{error:V}=await st.from("profiles").insert({user_id:e.id,full_name:((F=e.user_metadata)==null?void 0:F.full_name)||"User",profile_completed:!0});if(V){M({variant:"destructive",title:"Error",description:V.message}),A(!1);return}}M({title:"Profile completed!",description:"Welcome to AI Tutor Platform"}),E(r==="student"?"/dashboard/student":r==="admin"?"/dashboard/admin":r==="teacher"?"/dashboard/teacher":"/dashboard/student")}catch{M({variant:"destructive",title:"Error",description:"An unexpected error occurred"})}finally{A(!1)}}};return t?n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsx("p",{className:"text-muted-foreground",children:"Loading..."})}):r?n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:n.jsxs(ae,{className:"w-full max-w-2xl",children:[n.jsxs(he,{className:"space-y-1 flex flex-col items-center",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(pa,{className:"h-8 w-8 text-primary"}),n.jsx("span",{className:"text-2xl font-bold",children:"AI Tutor"})]}),n.jsx(fe,{className:"text-2xl",children:"Complete Your Profile"}),n.jsxs(ze,{children:[r==="student"&&"Tell us about yourself to personalize your learning experience",r==="teacher"&&"Set up your teaching profile",r==="admin"&&"Configure your administrator profile"]})]}),n.jsx("form",{onSubmit:I,children:n.jsxs(ie,{className:"space-y-6",children:[r==="student"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"classGrade",children:"Class / Grade"}),n.jsxs(Nt,{value:a,onValueChange:i,children:[n.jsx(wt,{children:n.jsx(St,{})}),n.jsx(jt,{children:[6,7,8,9,10,11,12].map(Y=>n.jsxs(re,{value:Y.toString(),children:["Grade ",Y]},Y))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"schoolName",children:"School Name"}),n.jsx(Ve,{id:"schoolName",type:"text",placeholder:"Your school name",value:o,onChange:Y=>l(Y.target.value),required:!0})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-sm font-medium",children:"Parent / Guardian Information (Optional)"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"parentEmail",children:"Parent Email"}),n.jsx(Ve,{id:"parentEmail",type:"email",placeholder:"parent@example.com",value:c,onChange:Y=>u(Y.target.value)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"parentPhone",children:"Parent Phone"}),n.jsx(Ve,{id:"parentPhone",type:"tel",placeholder:"+1 (555) 000-0000",value:d,onChange:Y=>h(Y.target.value)})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"learningGoals",children:"Learning Goals (Optional)"}),n.jsx(kr,{id:"learningGoals",placeholder:"What would you like to achieve? e.g., Improve math skills, prepare for exams...",value:m,onChange:Y=>f(Y.target.value),rows:4})]})]}),r==="teacher"&&n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-muted-foreground",children:"Teacher profile setup coming soon..."})}),r==="admin"&&n.jsx(n.Fragment,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b",children:[n.jsx(sh,{className:"h-5 w-5 text-primary"}),n.jsx("h3",{className:"text-lg font-semibold",children:"Administrator Information"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"adminTitle",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ii,{className:"h-4 w-4"}),"Job Title / Position"]})}),n.jsx(Ve,{id:"adminTitle",type:"text",placeholder:"e.g., Platform Administrator, System Admin",value:N,onChange:Y=>P(Y.target.value)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"adminDepartment",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(_O,{className:"h-4 w-4"}),"Department"]})}),n.jsx(Ve,{id:"adminDepartment",type:"text",placeholder:"e.g., IT, Operations, Management",value:x,onChange:Y=>g(Y.target.value)})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"adminEmail",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Wy,{className:"h-4 w-4"}),"Contact Email"]})}),n.jsx(Ve,{id:"adminEmail",type:"email",placeholder:"admin@example.com",value:v||(e==null?void 0:e.email)||"",onChange:Y=>w(Y.target.value)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"adminPhone",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(sk,{className:"h-4 w-4"}),"Contact Phone"]})}),n.jsx(Ve,{id:"adminPhone",type:"tel",placeholder:"+1 (555) 000-0000",value:y,onChange:Y=>b(Y.target.value)})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"adminNotes",children:"Administrative Notes (Optional)"}),n.jsx(kr,{id:"adminNotes",placeholder:"Any additional notes or information about your administrative role...",value:S,onChange:Y=>k(Y.target.value),rows:4})]}),n.jsxs("div",{className:"bg-primary/5 border border-primary/20 rounded-lg p-4 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-primary font-semibold",children:[n.jsx(sh,{className:"h-4 w-4"}),n.jsx("span",{children:"Administrator Account"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"User ID:"}),n.jsxs("p",{className:"font-mono text-xs mt-1",children:[(se=e==null?void 0:e.id)==null?void 0:se.slice(0,8),"..."]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Account Email:"}),n.jsx("p",{className:"mt-1",children:e==null?void 0:e.email})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Full Name:"}),n.jsx("p",{className:"mt-1",children:((ee=e==null?void 0:e.user_metadata)==null?void 0:ee.full_name)||"Not set"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-muted-foreground",children:"Role:"}),n.jsx("p",{className:"mt-1 font-semibold text-primary",children:"Administrator"})]})]})]})]})}),n.jsx(z,{type:"submit",className:"w-full",disabled:T,children:T?"Saving...":"Complete Setup"})]})})]})}):n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:n.jsx(ae,{className:"w-full max-w-2xl",children:n.jsxs(ie,{className:"py-12 text-center",children:[n.jsx("p",{className:"text-muted-foreground",children:"Setting up your profile..."}),n.jsx(z,{onClick:()=>{const Y=sessionStorage.getItem("pending_role")||"student";s(Y)},className:"mt-4",children:"Continue Setup"})]})})})},xr=p.forwardRef(({className:e,activeClassName:t,pendingClassName:r,to:s,...a},i)=>n.jsx(xz,{ref:i,to:s,className:({isActive:o,isPending:l})=>qe(e,o&&t,l&&r),...a}));xr.displayName="NavLink";var m_={exports:{}},f_={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wu=p;function QU(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var YU=typeof Object.is=="function"?Object.is:QU,KU=wu.useState,JU=wu.useEffect,XU=wu.useLayoutEffect,ZU=wu.useDebugValue;function eV(e,t){var r=t(),s=KU({inst:{value:r,getSnapshot:t}}),a=s[0].inst,i=s[1];return XU(function(){a.value=r,a.getSnapshot=t,Vx(a)&&i({inst:a})},[e,r,t]),JU(function(){return Vx(a)&&i({inst:a}),e(function(){Vx(a)&&i({inst:a})})},[e]),ZU(r),r}function Vx(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!YU(e,r)}catch{return!0}}function tV(e,t){return t()}var rV=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?tV:eV;f_.useSyncExternalStore=wu.useSyncExternalStore!==void 0?wu.useSyncExternalStore:rV;m_.exports=f_;var nV=m_.exports;function sV(){return nV.useSyncExternalStore(aV,()=>!0,()=>!1)}function aV(){return()=>{}}var _b="Avatar",[iV,Lse]=On(_b),[oV,p_]=iV(_b),x_=p.forwardRef((e,t)=>{const{__scopeAvatar:r,...s}=e,[a,i]=p.useState("idle");return n.jsx(oV,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:n.jsx(_t.span,{...s,ref:t})})});x_.displayName=_b;var g_="AvatarImage",v_=p.forwardRef((e,t)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:a=()=>{},...i}=e,o=p_(g_,r),l=lV(s,i),c=sn(u=>{a(u),o.onImageLoadingStatusChange(u)});return hn(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?n.jsx(_t.img,{...i,ref:t,src:s}):null});v_.displayName=g_;var y_="AvatarFallback",b_=p.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:s,...a}=e,i=p_(y_,r),[o,l]=p.useState(s===void 0);return p.useEffect(()=>{if(s!==void 0){const c=window.setTimeout(()=>l(!0),s);return()=>window.clearTimeout(c)}},[s]),o&&i.imageLoadingStatus!=="loaded"?n.jsx(_t.span,{...a,ref:t}):null});b_.displayName=y_;function H4(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function lV(e,{referrerPolicy:t,crossOrigin:r}){const s=sV(),a=p.useRef(null),i=s?(a.current||(a.current=new window.Image),a.current):null,[o,l]=p.useState(()=>H4(i,e));return hn(()=>{l(H4(i,e))},[i,e]),hn(()=>{const c=h=>()=>{l(h)};if(!i)return;const u=c("loaded"),d=c("error");return i.addEventListener("load",u),i.addEventListener("error",d),t&&(i.referrerPolicy=t),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",u),i.removeEventListener("error",d)}},[i,r,t]),o}var w_=x_,j_=v_,N_=b_;const an=p.forwardRef(({className:e,...t},r)=>n.jsx(w_,{ref:r,className:qe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));an.displayName=w_.displayName;const os=p.forwardRef(({className:e,...t},r)=>n.jsx(j_,{ref:r,className:qe("aspect-square h-full w-full",e),...t}));os.displayName=j_.displayName;const on=p.forwardRef(({className:e,...t},r)=>n.jsx(N_,{ref:r,className:qe("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));on.displayName=N_.displayName;const yn=()=>{var o,l;const{user:e,signOut:t}=Wt(),r=Gt(),[s,a]=p.useState(null),i=c=>c.split(" ").map(u=>u[0]).join("").toUpperCase();return p.useEffect(()=>{(async()=>{var u;if(e)try{const{data:d,error:h}=await st.from("student_profiles").select("class_grade").eq("user_id",e.id).maybeSingle();if(h){if(h.code==="PGRST406"||(u=h.message)!=null&&u.includes("406")){const{data:m}=await st.from("student_profiles").select("class_grade").eq("user_id",e.id).limit(1);m&&m.length>0&&m[0].class_grade&&a(m[0].class_grade);return}if(h.code!=="PGRST116"){console.error("Error fetching student profile:",h);return}}d!=null&&d.class_grade&&a(d.class_grade)}catch(d){console.error("Error fetching student profile:",d)}})()},[e]),n.jsxs("aside",{className:"w-64 flex-shrink-0 bg-card border-r flex flex-col justify-between",children:[n.jsxs("div",{className:"flex flex-col gap-8 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 p-2",children:[n.jsx(pa,{className:"h-8 w-8 text-primary"}),n.jsx("h1",{className:"text-xl font-bold",children:"AI Tutor"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(an,{className:"h-12 w-12",children:[n.jsx(os,{src:""}),n.jsx(on,{className:"bg-primary text-primary-foreground",children:(o=e==null?void 0:e.user_metadata)!=null&&o.full_name?i(e.user_metadata.full_name):"ST"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("h2",{className:"text-base font-semibold",children:((l=e==null?void 0:e.user_metadata)==null?void 0:l.full_name)||"Student"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:s?`Grade ${s}`:"Student"})]})]}),n.jsxs("nav",{className:"flex flex-col gap-2",children:[n.jsxs(xr,{to:"/dashboard/student",end:!0,className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(Vy,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Dashboard"})]}),n.jsxs(xr,{to:"/dashboard/student/ai-tutor",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(Qn,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"AI Tutor & Chat"})]}),n.jsxs(xr,{to:"/dashboard/student/classroom",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(Jt,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Classroom"})]}),n.jsxs(xr,{to:"/dashboard/student/subjects",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(Jt,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"All Subjects"})]}),n.jsxs(xr,{to:"/dashboard/student/content/downloads",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(RO,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Download Content"})]}),n.jsxs(xr,{to:"/dashboard/student/upload-content",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(vr,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Practice PYQ"})]}),n.jsxs(xr,{to:"/dashboard/student/exams",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(or,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Practice Exams"})]}),n.jsxs(xr,{to:"/dashboard/student/achievements",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(ik,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Achievements"})]}),n.jsxs(xr,{to:"/dashboard/student/microplan",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(An,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Microplan"})]}),n.jsxs(xr,{to:"/dashboard/student/homework",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(Jt,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Homework"})]}),n.jsxs(xr,{to:"/dashboard/student/notifications",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(Oh,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Notifications"})]}),n.jsxs(xr,{to:"/profile-setup",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(ii,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Profile Setup"})]}),n.jsxs(xr,{to:"/dashboard/student/settings",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(Gy,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Settings"})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-2 p-4",children:[n.jsxs("div",{className:"bg-primary/10 p-4 rounded-lg text-center",children:[n.jsx(AO,{className:"h-10 w-10 text-primary mx-auto mb-2"}),n.jsx("h3",{className:"font-semibold mb-1",children:"Need Help?"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Our AI Tutor is here 24/7"}),n.jsx(z,{size:"sm",className:"w-full",onClick:()=>r("/dashboard/student/chat"),children:"Start Chat"})]}),n.jsxs(z,{variant:"outline",className:"w-full justify-start gap-2",onClick:t,children:[n.jsx(Hy,{className:"h-4 w-4"}),"Sign Out"]})]})]})},S_="http://localhost:8000/api";class k_ extends Error{constructor(t,r,s){super(t),this.status=r,this.data=s,this.name="APIError"}}async function Se(e,t={}){var a;const r=`${S_}${e}`,s=await fetch(r,{...t,headers:{"Content-Type":"application/json",...t.headers}});if(!s.ok){let i={};try{const l=await s.text();i=l?JSON.parse(l):{}}catch{i={detail:`HTTP ${s.status}: ${s.statusText}`}}const o=((a=i.error)==null?void 0:a.message)||i.detail||`HTTP ${s.status}: ${s.statusText}`;throw new k_(o,s.status,i)}return s.json()}async function Hx(e,t){var a;const r=`${S_}${e}`,s=await fetch(r,{method:"POST",body:t});if(!s.ok){let i={};try{const l=await s.text();i=l?JSON.parse(l):{}}catch{i={detail:`HTTP ${s.status}: ${s.statusText}`}}const o=((a=i.error)==null?void 0:a.message)||i.detail||`HTTP ${s.status}: ${s.statusText}`;throw new k_(o,s.status,i)}return s.json()}const pe={health:{check:()=>Se("/health"),config:()=>Se("/config")},rag:{query:e=>Se("/rag/query",{method:"POST",body:JSON.stringify(e)}).catch(async t=>{if(t.status===500||t.status===503){console.log("RAG query failed, falling back to direct Gemini...");try{return await Se("/rag/query-direct",{method:"POST",body:JSON.stringify(e)})}catch(r){throw console.error("Direct Gemini fallback also failed:",r),r}}throw t}),queryDirect:e=>Se("/rag/query-direct",{method:"POST",body:JSON.stringify(e)}),embed:e=>Se("/rag/embed",{method:"POST",body:JSON.stringify(e)}),similar:e=>Se("/rag/similar",{method:"POST",body:JSON.stringify(e)}),stats:()=>Se("/rag/stats"),initialize:()=>Se("/rag/initialize",{method:"POST"})},doubt:{text:e=>{const t=new URLSearchParams({user_id:e.user_id,text:e.text});return e.subject&&t.append("subject",e.subject),Se(`/doubt/text?${t}`,{method:"POST"})},image:e=>{const t=new FormData;return t.append("user_id",e.user_id),t.append("image",e.image),e.subject&&t.append("subject",e.subject),Hx("/doubt/image",t)},voice:e=>{const t=new FormData;return t.append("user_id",e.user_id),t.append("audio",e.audio),e.subject&&t.append("subject",e.subject),Hx("/doubt/voice",t)},history:e=>{const t=new URLSearchParams({user_id:e.user_id});return e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString()),Se(`/doubt/history?${t}`)},wolframChat:e=>{const t=new URLSearchParams({query:e.query});return e.include_steps!==void 0&&t.append("include_steps",e.include_steps.toString()),Se(`/doubt/wolfram/chat?${t}`,{method:"POST"})}},homework:{start:e=>Se("/homework/start",{method:"POST",body:JSON.stringify(e)}),hint:e=>Se("/homework/hint",{method:"POST",body:JSON.stringify(e)}),attempt:e=>Se("/homework/attempt",{method:"POST",body:JSON.stringify(e)}),getSession:e=>Se(`/homework/session/${e}`),getSessions:e=>{const t=new URLSearchParams;e!=null&&e.user_id&&t.append("user_id",e.user_id),e!=null&&e.limit&&t.append("limit",e.limit.toString()),e!=null&&e.offset&&t.append("offset",e.offset.toString());const r=t.toString();return Se(`/homework/sessions${r?`?${r}`:""}`)}},microplan:{generate:e=>{const t=new URLSearchParams({user_id:e.user_id});return e.plan_date&&t.append("plan_date",e.plan_date),e.subject&&t.append("subject",e.subject),Se(`/microplan/generate?${t}`,{method:"POST"})},getToday:e=>{const t=new URLSearchParams({user_id:e});return Se(`/microplan/today?${t}`)},getByDate:e=>{const t=new URLSearchParams({user_id:e.user_id});return Se(`/microplan/${e.plan_date}?${t}`)},getMicroplan:e=>Se(`/microplan/${e}`),markComplete:e=>{const t=new URLSearchParams({user_id:e.user_id});return Se(`/microplan/${e.microplan_id}/complete?${t}`,{method:"POST"})}},exam:{getSets:e=>{const t=new URLSearchParams;e!=null&&e.subject&&t.append("subject",e.subject),e!=null&&e.year&&t.append("year",e.year.toString()),e!=null&&e.limit&&t.append("limit",e.limit.toString()),e!=null&&e.offset&&t.append("offset",e.offset.toString());const r=t.toString();return Se(`/exam/sets${r?`?${r}`:""}`)},getSet:e=>Se(`/exam/sets/${e}`),createSet:e=>Se("/exam/sets",{method:"POST",body:JSON.stringify(e)}),startSession:e=>Se("/exam/start",{method:"POST",body:JSON.stringify(e)}),saveAnswer:e=>{const t=new URLSearchParams({session_id:e.session_id,user_id:e.user_id});return Se(`/exam/answer?${t}`,{method:"PUT",body:JSON.stringify(e.answer)})},submitTest:e=>{const t=new URLSearchParams(e);return Se(`/exam/submit?${t}`,{method:"POST"})},getResults:(e,t)=>{const r=new URLSearchParams({user_id:t});return Se(`/exam/results/${e}?${r}`)},getHistory:e=>{const t=new URLSearchParams({user_id:e.user_id});return e.subject&&t.append("subject",e.subject),e.limit&&t.append("limit",e.limit.toString()),Se(`/exam/history?${t}`)}},quiz:{startSession:e=>Se("/quiz/start",{method:"POST",body:JSON.stringify(e)}),saveAnswer:e=>{const t=new URLSearchParams({session_id:e.session_id,user_id:e.user_id});return Se(`/quiz/answer?${t}`,{method:"PUT",body:JSON.stringify(e.answer)})},submitQuiz:e=>{const t=new URLSearchParams({session_id:e.session_id,user_id:e.user_id});return Se(`/quiz/submit?${t}`,{method:"POST"})},getSession:(e,t)=>{const r=new URLSearchParams({user_id:t});return Se(`/quiz/session/${e}?${r}`)}},videos:{curate:e=>Se("/videos/curate",{method:"POST",body:JSON.stringify(e)}),getByTopic:(e,t)=>{const r=t?`?limit=${t}`:"";return Se(`/videos/topic/${e}${r}`)},getBySubject:(e,t)=>{const r=t?`?limit=${t}`:"";return Se(`/videos/subject/${e}${r}`)},getById:e=>Se(`/videos/${e}`),getByYoutubeId:e=>Se(`/videos/youtube/${e}`),searchYouTube:e=>{const t=new URLSearchParams({query:e.query});return e.max_results&&t.append("max_results",e.max_results.toString()),Se(`/videos/search/youtube?${t}`)}},hots:{generate:e=>Se("/hots/generate",{method:"POST",body:JSON.stringify(e)}),getByTopic:e=>Se(`/hots/topic/${e}`),submitAttempt:e=>Se("/hots/attempt",{method:"POST",body:JSON.stringify(e)}),getPerformance:e=>Se(`/hots/performance/${e}`)},admin:{getDashboard:()=>Se("/admin/dashboard"),getStudents:e=>{const t=new URLSearchParams;e!=null&&e.subject&&t.append("subject",e.subject),e!=null&&e.min_mastery&&t.append("min_mastery",e.min_mastery.toString()),e!=null&&e.limit&&t.append("limit",e.limit.toString()),e!=null&&e.offset&&t.append("offset",e.offset.toString());const r=t.toString();return Se(`/admin/students${r?`?${r}`:""}`)},getStudentProfile:e=>Se(`/admin/students/${e}`),uploadContent:e=>Se("/content/upload",{method:"POST",body:JSON.stringify(e)}),getContentStatus:e=>Se(`/content/status/${e}`),uploadContentFile:e=>{const t=new FormData;t.append("file",e.file);const r=new URLSearchParams;r.append("subject",e.subject),e.chapter&&r.append("chapter",e.chapter),e.topic_ids&&e.topic_ids.length>0&&r.append("topic_id",e.topic_ids[0]),e.class_grade&&r.append("class_grade",e.class_grade.toString()),e.difficulty&&e.difficulty!=="none"&&r.append("difficulty",e.difficulty);const s=r.toString();return Hx(`/content/upload/file?${s}`,t)},reindexContent:()=>Se("/content/reindex",{method:"POST"}),previewContent:e=>Se(`/content/preview/${e}`),openContent:e=>{const t=new URLSearchParams({user_id:e.user_id});return e.trigger_processing!==void 0&&t.append("trigger_processing",e.trigger_processing.toString()),Se(`/content/open/${e.content_id}?${t}`)},getContentFolders:e=>{const t=new URLSearchParams;e!=null&&e.class_grade&&t.append("class_grade",e.class_grade.toString()),e!=null&&e.subject&&t.append("subject",e.subject),e!=null&&e.parent_folder_id&&t.append("parent_folder_id",e.parent_folder_id);const r=t.toString();return Se(`/content/folders${r?`?${r}`:""}`)},getContentByFolder:e=>{const t=new URLSearchParams;e!=null&&e.folder_path&&t.append("folder_path",e.folder_path),e!=null&&e.class_grade&&t.append("class_grade",e.class_grade.toString()),e!=null&&e.subject&&t.append("subject",e.subject),e!=null&&e.limit&&t.append("limit",e.limit.toString()),e!=null&&e.offset&&t.append("offset",e.offset.toString());const r=t.toString();return Se(`/content/by-folder${r?`?${r}`:""}`)},listAllContent:e=>{const t=new URLSearchParams;e!=null&&e.subject&&t.append("subject",e.subject),e!=null&&e.content_type&&t.append("content_type",e.content_type),e!=null&&e.processing_status&&t.append("processing_status",e.processing_status),e!=null&&e.limit&&t.append("limit",e.limit.toString()),e!=null&&e.offset&&t.append("offset",e.offset.toString());const r=t.toString();return Se(`/content/list${r?`?${r}`:""}`)},updateContent:e=>Se(`/content/${e.content_id}`,{method:"PUT",body:JSON.stringify({title:e.title,chapter:e.chapter,difficulty:e.difficulty,class_grade:e.class_grade,chapter_number:e.chapter_number,metadata:e.metadata})}),deleteContent:e=>Se(`/content/${e}`,{method:"DELETE"}),exportStudents:e=>{const t=new URLSearchParams;e!=null&&e.subject&&t.append("subject",e.subject),e!=null&&e.min_mastery&&t.append("min_mastery",e.min_mastery.toString());const r=t.toString();return Se(`/admin/export${r?`?${r}`:""}`,{method:"GET"})},createSchool:e=>Se("/admin/schools",{method:"POST",body:JSON.stringify(e)}),getSchools:e=>{const t=new URLSearchParams;e!=null&&e.city&&t.append("city",e.city),e!=null&&e.state&&t.append("state",e.state),(e==null?void 0:e.is_active)!==void 0&&t.append("is_active",e.is_active.toString()),e!=null&&e.limit&&t.append("limit",e.limit.toString()),e!=null&&e.offset&&t.append("offset",e.offset.toString());const r=t.toString();return Se(`/admin/schools${r?`?${r}`:""}`)},getSchool:e=>Se(`/admin/schools/${e}`),updateSchool:(e,t)=>{const r=Object.fromEntries(Object.entries(t).filter(([s,a])=>a!==void 0));return Se(`/admin/schools/${e}`,{method:"PUT",body:JSON.stringify(r)})},deleteSchool:e=>Se(`/admin/schools/${e}`,{method:"DELETE"}),assignTeacherToSchool:(e,t)=>Se(`/admin/schools/${e}/teachers/${t}`,{method:"POST"}),removeTeacherFromSchool:(e,t)=>Se(`/admin/schools/${e}/teachers/${t}`,{method:"DELETE"}),getSchoolTeachers:e=>Se(`/admin/schools/${e}/teachers`),getSchoolStudents:(e,t)=>{const r=new URLSearchParams;t!=null&&t.limit&&r.append("limit",t.limit.toString()),t!=null&&t.offset&&r.append("offset",t.offset.toString());const s=r.toString();return Se(`/admin/schools/${e}/students${s?`?${s}`:""}`)},assignStudentToSchool:(e,t)=>Se(`/admin/schools/${e}/students/${t}`,{method:"POST"}),getAllTeachers:()=>Se("/admin/teachers"),getAllUsers:()=>Se("/admin/users"),createUser:e=>Se("/admin/users",{method:"POST",body:JSON.stringify(e)})},progress:{getUserProgress:e=>{const t=new URLSearchParams;e.subject&&t.append("subject",e.subject);const r=t.toString();return Se(`/progress/${e.user_id}${r?`?${r}`:""}`)},getSummary:e=>Se(`/progress/${e}/summary`),getTopicProgress:e=>Se(`/progress/${e.user_id}/topic/${e.topic_id}`),updateProgress:e=>{const t=new URLSearchParams({user_id:e.user_id,topic_id:e.topic_id,subject:e.subject,correct_answers:e.correct_answers.toString(),total_questions:e.total_questions.toString(),time_spent_minutes:e.time_spent_minutes.toString()});return Se(`/progress?${t}`,{method:"PUT"})},getAchievements:e=>Se(`/progress/${e}/achievements`)},analytics:{getDashboard:()=>Se("/analytics/dashboard"),getStudentAnalytics:e=>Se(`/analytics/student/${e}`),getTrends:e=>{const t=new URLSearchParams;e!=null&&e.user_id&&t.append("user_id",e.user_id),e!=null&&e.subject&&t.append("subject",e.subject),e!=null&&e.days&&t.append("days",e.days.toString());const r=t.toString();return Se(`/analytics/trends${r?`?${r}`:""}`)},logEvent:e=>{const t=new URLSearchParams({user_id:e.user_id,event_type:e.event_type});return e.subject&&t.append("subject",e.subject),e.topic_id&&t.append("topic_id",e.topic_id),Se(`/analytics/event?${t}`,{method:"POST"})},logTestResult:e=>{const t=new URLSearchParams({test_id:e.test_id,user_id:e.user_id,subject:e.subject,score:e.score.toString(),total_marks:e.total_marks.toString(),duration_minutes:e.duration_minutes.toString(),questions_attempted:e.questions_attempted.toString(),correct_answers:e.correct_answers.toString()});return e.exam_set_id&&t.append("exam_set_id",e.exam_set_id),Se(`/analytics/test-result?${t}`,{method:"POST"})},logProgressSnapshot:e=>{const t=new URLSearchParams({user_id:e.user_id,subject:e.subject,topic_id:e.topic_id,mastery_score:e.mastery_score.toString(),questions_attempted:e.questions_attempted.toString(),correct_answers:e.correct_answers.toString(),total_time_minutes:e.total_time_minutes.toString(),streak_days:e.streak_days.toString()});return Se(`/analytics/progress-snapshot?${t}`,{method:"POST"})}},translation:{translate:e=>Se("/translation/translate",{method:"POST",body:JSON.stringify(e)}),translateBatch:e=>Se("/translation/translate/batch",{method:"POST",body:JSON.stringify(e)}),detectLanguage:e=>Se("/translation/detect",{method:"POST",body:JSON.stringify({text:e})}),getSupportedLanguages:()=>Se("/translation/languages")},aiTutoring:{getFeedback:e=>Se("/ai-tutoring/feedback",{method:"POST",body:JSON.stringify(e)}),generateStudyPlan:e=>Se("/ai-tutoring/study-plan",{method:"POST",body:JSON.stringify(e)}),answerQuestion:e=>Se("/ai-tutoring/answer",{method:"POST",body:JSON.stringify(e)}),createSession:e=>Se("/ai-tutoring/sessions",{method:"POST",body:JSON.stringify(e)}),getSessions:e=>{const t=new URLSearchParams;return t.append("user_id",e.user_id),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString()),Se(`/ai-tutoring/sessions?${t.toString()}`)},getSessionMessages:(e,t)=>{const r=new URLSearchParams;return t&&r.append("limit",t.toString()),Se(`/ai-tutoring/sessions/${e}/messages?${r.toString()}`)},sendMessage:e=>Se("/ai-tutoring/sessions/message",{method:"POST",body:JSON.stringify(e)}),generateLessonPlan:e=>Se("/ai-tutoring/lesson-plans/generate",{method:"POST",body:JSON.stringify(e)}),getLessonPlans:e=>{const t=new URLSearchParams;return t.append("user_id",e.user_id),e.subject&&t.append("subject",e.subject),e.is_active!==void 0&&t.append("is_active",e.is_active.toString()),Se(`/ai-tutoring/lesson-plans?${t.toString()}`)},getTeacherStudentSessions:e=>{const t=new URLSearchParams;return t.append("teacher_id",e.teacher_id),e.student_id&&t.append("student_id",e.student_id),e.limit&&t.append("limit",e.limit.toString()),Se(`/ai-tutoring/teacher/student-sessions?${t.toString()}`)}},teacher:{getDashboard:e=>{const t=new URLSearchParams({teacher_id:e});return Se(`/teacher/dashboard?${t.toString()}`)},getStudents:e=>{const t=new URLSearchParams({teacher_id:e});return Se(`/teacher/students?${t.toString()}`)},getStudentPerformance:(e,t)=>{const r=new URLSearchParams({teacher_id:t});return Se(`/teacher/students/${e}/performance?${r.toString()}`)},generateLessonPlan:e=>Se("/teacher/lesson-plan",{method:"POST",body:JSON.stringify(e)}),createAssessment:e=>Se("/teacher/assessment",{method:"POST",body:JSON.stringify(e)}),generateParentMessage:e=>Se("/teacher/parent-message",{method:"POST",body:JSON.stringify(e)}),createQuiz:e=>Se("/teacher/quizzes",{method:"POST",body:JSON.stringify(e)}),getQuizzes:e=>{const t=new URLSearchParams({teacher_id:e});return Se(`/teacher/quizzes?${t.toString()}`)},getQuiz:(e,t)=>{const r=new URLSearchParams({teacher_id:t});return Se(`/teacher/quizzes/${e}?${r.toString()}`)},getQuizSessions:e=>{const t=new URLSearchParams({teacher_id:e});return Se(`/teacher/quiz-sessions?${t.toString()}`)}},messages:{getConversations:e=>{const t=new URLSearchParams({user_id:e});return Se(`/messages/conversations?${t}`)},getMessages:e=>{const t=new URLSearchParams({conversation_id:e.conversation_id,user_id:e.user_id});return e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString()),Se(`/messages/conversations/${e.conversation_id}/messages?${t}`)},createConversation:e=>Se("/messages/conversations",{method:"POST",body:JSON.stringify(e)}),sendMessage:e=>Se("/messages/send",{method:"POST",body:JSON.stringify(e)}),improveMessage:e=>Se("/messages/improve",{method:"POST",body:JSON.stringify(e)}),getSuggestions:e=>Se("/messages/suggestions",{method:"POST",body:JSON.stringify(e)}),markAsRead:(e,t)=>{const r=new URLSearchParams({user_id:t});return Se(`/messages/messages/${e}/read?${r}`,{method:"PUT"})}},wellbeing:{startFocusSession:e=>Se("/wellbeing/focus/start",{method:"POST",body:JSON.stringify(e)}),endFocusSession:e=>Se("/wellbeing/focus/end",{method:"POST",body:JSON.stringify(e)}),getMotivation:(e,t)=>{const r=new URLSearchParams;t&&r.append("context",t);const s=r.toString();return Se(`/wellbeing/motivation/${e}${s?`?${s}`:""}`)},getDistractionGuardSettings:e=>Se(`/wellbeing/distraction-guard/${e}`),updateDistractionGuardSettings:(e,t)=>Se(`/wellbeing/distraction-guard/${e}`,{method:"PUT",body:JSON.stringify(t)})},notifications:{getAll:e=>{const t=new URLSearchParams({user_id:e.user_id});return e.is_read!==void 0&&t.append("is_read",e.is_read.toString()),e.notification_type&&t.append("notification_type",e.notification_type),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString()),Se(`/notifications?${t}`)},getTeacherNotifications:e=>{const t=new URLSearchParams({user_id:e});return Se(`/notifications/teacher?${t}`)},getAdminNotifications:e=>{const t=new URLSearchParams({user_id:e});return Se(`/notifications/admin?${t}`)},markAsRead:(e,t)=>{const r=new URLSearchParams({user_id:t});return Se(`/notifications/${e}/read?${r}`,{method:"PUT"})},markAllAsRead:e=>{const t=new URLSearchParams({user_id:e});return Se(`/notifications/read-all?${t}`,{method:"PUT"})},getUnreadCount:e=>{const t=new URLSearchParams({user_id:e});return Se(`/notifications/unread-count?${t}`)},create:e=>Se("/notifications",{method:"POST",body:JSON.stringify(e)})}},cV=()=>{var T,A;const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState({grade:null,schoolName:"",lessonsCompleted:0,timeSpent:"0h",overallScore:0,mathProgress:0,scienceProgress:0}),[o,l]=p.useState(null),[c,u]=p.useState(null),[d,h]=p.useState(!0),[m,f]=p.useState([]),[x,g]=p.useState([]),[y,b]=p.useState([]),[v,w]=p.useState({}),[S,k]=p.useState(new Set);if(p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{e&&(async()=>{var M,I,se,ee,Y,F,ne,q,V;if(e)try{h(!0);const{data:_,error:U}=await st.from("student_profiles").select("class_grade, school_name").eq("user_id",e.id).maybeSingle();if(U&&(console.error("Error fetching student profile:",U),U.code==="PGRST406"||(M=U.message)!=null&&M.includes("406"))){const{data:H}=await st.from("student_profiles").select("class_grade, school_name").eq("user_id",e.id).limit(1);if(H&&H.length>0){const O=H[0];i(B=>({...B,grade:O.class_grade,schoolName:O.school_name||""}))}return}_&&i(H=>({...H,grade:_.class_grade,schoolName:_.school_name||""}));try{const H=await pe.progress.getSummary(e.id);if(u(H),H){const O=H.total_topics_attempted||H.total_topics||0,B=H.average_mastery||H.avg_mastery_score||0,W=H.total_time_minutes||0;let K="0h";if(W>0){const de=Math.floor(W/60),oe=W%60;de>0?K=oe>0?`${de}h ${oe}m`:`${de}h`:K=`${oe}m`}i(de=>({...de,lessonsCompleted:O,timeSpent:K,overallScore:Math.round(B)}));const X=H.subject_breakdown||H.subjects||{};if(X){const de=((I=X.mathematics)==null?void 0:I.average_mastery)||((se=X.mathematics)==null?void 0:se.avg_mastery_score)||0,oe=((ee=X.physics)==null?void 0:ee.average_mastery)||((Y=X.physics)==null?void 0:Y.avg_mastery_score)||((F=X.chemistry)==null?void 0:F.average_mastery)||((ne=X.chemistry)==null?void 0:ne.avg_mastery_score)||((q=X.biology)==null?void 0:q.average_mastery)||((V=X.biology)==null?void 0:V.avg_mastery_score)||0;i(we=>({...we,mathProgress:Math.round(de),scienceProgress:Math.round(oe)}));const me={};["mathematics","physics","chemistry","biology"].forEach(we=>{const Le=X[we];Le&&(me[we]={averageMastery:Math.round(Le.average_mastery||Le.avg_mastery_score||0),topicsAttempted:Le.topics_attempted||Le.total_topics||0,totalTopics:Le.total_topics||0,totalTimeMinutes:Le.total_time_minutes||0,questionsAttempted:Le.total_questions||Le.questions_attempted||0,correctAnswers:Le.correct_answers||0,completionRate:Le.completion_rate||0})}),w(me)}}}catch(H){console.error("Error fetching progress:",H)}try{const H=await pe.microplan.getToday(e.id);l(H)}catch(H){console.error("Error fetching microplan:",H)}try{const H=["mathematics","physics","chemistry","biology"],O=await Promise.all(H.map(async B=>{try{const W=await pe.progress.getUserProgress({user_id:e.id,subject:B});if(W&&W.length>0){const K=W.reduce((oe,me)=>oe+(me.questions_attempted||0),0),X=W.reduce((oe,me)=>oe+(me.correct_answers||0),0),de=W.reduce((oe,me)=>oe+(me.total_time_minutes||0),0);return{subject:B,topicsCount:W.length,totalQuestions:K,totalCorrect:X,totalTime:de}}return null}catch(W){return console.error(`Error fetching ${B} progress:`,W),null}}));w(B=>{const W={...B};return O.forEach(K=>{K&&K.subject&&(W[K.subject]={...W[K.subject],topicsCount:K.topicsCount,totalQuestions:K.totalQuestions,totalCorrect:K.totalCorrect,totalTime:K.totalTime})}),W})}catch(H){console.error("Error fetching subject progress:",H)}try{const{data:H,error:O}=await st.from("topics").select("*").order("order_index",{ascending:!0}).limit(5);if(!O&&H){const B=await Promise.all(H.map(async W=>{try{const K=await pe.progress.getTopicProgress({user_id:e.id,topic_id:W.id});return{...W,progress:(K==null?void 0:K.mastery_score)||0,isCompleted:((K==null?void 0:K.mastery_score)||0)>=80}}catch{return{...W,progress:0,isCompleted:!1}}}));f(B)}}catch(H){console.error("Error fetching recommended topics:",H)}try{const H=await pe.progress.getAchievements(e.id);if(H&&H.achievements){const O=H.achievements.sort((B,W)=>{const K=B.earned_at?new Date(B.earned_at).getTime():0;return(W.earned_at?new Date(W.earned_at).getTime():0)-K}).slice(0,3);g(O)}}catch(H){console.error("Error fetching achievements:",H)}try{const H=await pe.exam.getHistory({user_id:e.id,limit:5});if(H&&H.test_sessions&&Array.isArray(H.test_sessions)){const O=H.test_sessions.filter(W=>W&&W.is_completed!==!1).sort((W,K)=>{const X=W.created_at||W.start_time||W.end_time||"",de=K.created_at||K.start_time||K.end_time||"";return!X&&!de?0:X?de?new Date(de).getTime()-new Date(X).getTime():-1:1}).slice(0,3);b(O);const B={};O.forEach(W=>{var X;const K=(X=W.subject)==null?void 0:X.toLowerCase();K&&(B[K]||(B[K]=[]),B[K].push(W))}),w(W=>{const K={...W};return Object.keys(B).forEach(X=>{const de=B[X],oe=de.reduce((me,Ee)=>{const we=Ee.score||0,Le=Ee.total_marks||100;return me+(Le>0?we/Le*100:0)},0)/de.length;K[X]||(K[X]={}),K[X]={...K[X],examCount:de.length,avgExamScore:Math.round(oe)}}),K})}}catch(H){console.error("Error fetching exam history:",H)}}catch(_){console.error("Error fetching student data:",_),s({variant:"destructive",title:"Error",description:"Failed to load dashboard data"})}finally{h(!1)}})()},[e,s]),t||d)return n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx("p",{className:"text-muted-foreground",children:"Loading..."})});const N=((A=(T=e==null?void 0:e.user_metadata)==null?void 0:T.full_name)==null?void 0:A.split(" ")[0])||"there",P=async()=>{if(e)try{const E=await pe.microplan.generate({user_id:e.id});l(E),s({title:"Microplan Generated",description:"Your daily learning plan is ready!"})}catch(E){s({variant:"destructive",title:"Error",description:E.message||"Failed to generate microplan"})}};return n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(yn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Good morning, ",N,"!"]}),n.jsx("p",{className:"text-muted-foreground",children:"Ready to continue your learning journey?"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-8",children:[o?n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(An,{className:"h-5 w-5 text-primary"}),"Today's Learning Plan"]}),n.jsx(ze,{children:"Your personalized daily microplan"})]}),n.jsxs(ie,{className:"space-y-4",children:[o.concept_summary&&n.jsxs("div",{className:"p-4 bg-primary/5 rounded-lg border border-primary/20",children:[n.jsx("p",{className:"text-sm font-semibold text-primary mb-2",children:"Concept Summary"}),n.jsx("p",{className:"text-sm",children:o.concept_summary.topic_name})]}),o.pyqs&&o.pyqs.length>0&&n.jsxs("div",{className:"p-4 bg-blue-500/5 rounded-lg border border-blue-500/20",children:[n.jsxs("p",{className:"text-sm font-semibold text-blue-500 mb-2",children:["PYQs (",o.pyqs.length,")"]}),n.jsx("p",{className:"text-sm",children:"Practice previous year questions"})]}),o.hots_question&&n.jsxs("div",{className:"p-4 bg-purple-500/5 rounded-lg border border-purple-500/20",children:[n.jsx("p",{className:"text-sm font-semibold text-purple-500 mb-2",children:"HOTS Question"}),n.jsx("p",{className:"text-sm",children:"Challenge yourself with higher-order thinking"})]}),n.jsxs(z,{onClick:()=>r("/dashboard/student/microplan"),className:"w-full",children:["View Full Plan",n.jsx(ji,{className:"h-4 w-4 ml-2"})]})]})]}):n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(An,{className:"h-5 w-5 text-primary"}),"Daily Learning Plan"]}),n.jsx(ze,{children:"Get your personalized microplan for today"})]}),n.jsx(ie,{children:n.jsxs(z,{onClick:P,className:"w-full gap-2",children:[n.jsx(An,{className:"h-4 w-4"}),"Generate Today's Plan"]})})]}),n.jsx("h2",{className:"text-xl font-bold",children:"Subject Analysis"}),n.jsx("div",{className:"space-y-4",children:Object.keys(v).length>0?Object.entries(v).map(([E,M])=>{const I=S.has(E),se={mathematics:Wn,physics:Ev,chemistry:_v,biology:Jt},ee={mathematics:{bg:"bg-primary/10",text:"text-primary",border:"border-primary/20",progress:"bg-primary"},physics:{bg:"bg-chart-1/10",text:"text-chart-1",border:"border-chart-1/20",progress:"bg-chart-1"},chemistry:{bg:"bg-blue-500/10",text:"text-blue-500",border:"border-blue-500/20",progress:"bg-blue-500"},biology:{bg:"bg-green-500/10",text:"text-green-500",border:"border-green-500/20",progress:"bg-green-500"}},Y=se[E]||Jt,F=ee[E]||ee.mathematics,ne=M.averageMastery||0,q=M.topicsAttempted||M.topicsCount||0,V=M.totalTopics||M.topicsCount||q||0,_=M.totalTimeMinutes||M.totalTime||0,U=M.questionsAttempted||M.totalQuestions||0,H=M.correctAnswers||M.totalCorrect||0,O=U>0?Math.round(H/U*100):0,B=M.examCount||0,W=M.avgExamScore||0,K=X=>{if(X<60)return`${X}m`;const de=Math.floor(X/60),oe=X%60;return oe>0?`${de}h ${oe}m`:`${de}h`};return n.jsxs(ae,{className:"overflow-hidden",children:[n.jsxs(he,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>{const X=new Set(S);I?X.delete(E):X.add(E),k(X)},children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`${F.bg} ${F.border} p-2 rounded-lg border`,children:n.jsx(Y,{className:`h-5 w-5 ${F.text}`})}),n.jsxs("div",{children:[n.jsx(fe,{className:"capitalize text-lg",children:E}),n.jsxs(ze,{children:[q," of ",V," topics attempted"]})]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:`text-2xl font-bold ${F.text}`,children:[ne,"%"]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Mastery"})]}),I?n.jsx(X6,{className:"h-5 w-5 text-muted-foreground"}):n.jsx(By,{className:"h-5 w-5 text-muted-foreground"})]})]}),n.jsx("div",{className:"mt-4 w-full bg-muted rounded-full h-2",children:n.jsx("div",{className:`${F.progress} h-2 rounded-full transition-all`,style:{width:`${ne}%`}})})]}),I&&n.jsxs(ie,{className:"pt-0",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[n.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Ad,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Time Spent"})]}),n.jsx("p",{className:"text-lg font-semibold",children:K(_)})]}),n.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(An,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Questions"})]}),n.jsx("p",{className:"text-lg font-semibold",children:U})]}),n.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Qt,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Accuracy"})]}),n.jsxs("p",{className:"text-lg font-semibold",children:[O,"%"]})]}),n.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(or,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Exams"})]}),n.jsx("p",{className:"text-lg font-semibold",children:B>0?`${W}% avg`:"No exams"})]})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Correct Answers"}),n.jsxs("span",{className:"font-semibold",children:[H," / ",U]})]}),B>0&&n.jsxs("div",{className:"flex items-center justify-between text-sm mt-2",children:[n.jsx("span",{className:"text-muted-foreground",children:"Tests Completed"}),n.jsxs("span",{className:"font-semibold",children:[B," tests"]})]})]})]})]},E)}):n.jsx(ae,{children:n.jsx(ie,{className:"py-8 text-center",children:n.jsx("p",{className:"text-muted-foreground",children:"Start learning to see your subject analysis"})})})}),a.grade&&n.jsx("div",{className:"p-4 bg-card rounded-lg border",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"bg-primary/10 p-3 rounded-lg",children:n.jsx(Wn,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{children:[n.jsxs("p",{className:"font-semibold",children:["Grade ",a.grade," Student"]}),a.schoolName&&n.jsx("p",{className:"text-sm text-muted-foreground",children:a.schoolName})]})]})}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-card p-4 rounded-lg border flex items-center gap-4",children:[n.jsx("div",{className:"bg-primary/10 p-3 rounded-full",children:n.jsx(Qt,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold",children:a.lessonsCompleted}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Lessons Done"})]})]}),n.jsxs("div",{className:"bg-card p-4 rounded-lg border flex items-center gap-4",children:[n.jsx("div",{className:"bg-chart-1/20 p-3 rounded-full",children:n.jsx(Ur,{className:"h-5 w-5 text-chart-1"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold",children:a.timeSpent}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Time Spent"})]})]}),n.jsxs("div",{className:"bg-card p-4 rounded-lg border flex items-center gap-4",children:[n.jsx("div",{className:"bg-chart-2/20 p-3 rounded-full",children:n.jsx(Mn,{className:"h-5 w-5 text-chart-2"})}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-2xl font-bold",children:[a.overallScore,"%"]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Overall Score"})]})]})]}),m.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:"text-xl font-bold pt-4",children:"Recommended Topics"}),n.jsx("div",{className:"flex flex-col gap-3",children:m.slice(0,3).map(E=>{const I={mathematics:Wn,physics:Ev,chemistry:_v,biology:Jt}[E.subject]||Jt,ee={mathematics:"bg-primary/10 text-primary",physics:"bg-chart-1/10 text-chart-1",chemistry:"bg-blue-500/10 text-blue-500",biology:"bg-green-500/10 text-green-500"}[E.subject]||"bg-muted text-muted-foreground";return n.jsxs("div",{className:`flex items-center justify-between p-4 bg-card rounded-lg border hover:shadow-md transition-shadow ${E.isCompleted?"opacity-60":""}`,children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:`${ee} p-3 rounded-lg`,children:n.jsx(I,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsxs("p",{className:`font-semibold ${E.isCompleted?"text-muted-foreground":""}`,children:[E.chapter," - ",E.name]}),n.jsxs("p",{className:"text-sm text-muted-foreground capitalize",children:[E.subject,E.progress>0&&`  ${Math.round(E.progress)}% mastered`]})]})]}),E.isCompleted?n.jsxs("span",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[n.jsx(Qt,{className:"h-4 w-4"}),"Done"]}):n.jsxs(z,{variant:"ghost",size:"sm",className:"gap-1",onClick:()=>r(`/dashboard/student/classroom?subject=${E.subject}&chapter=${E.id}`),children:[n.jsx("span",{children:"Start"}),n.jsx(ji,{className:"h-4 w-4"})]})]},E.id)})})]}),y.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("h2",{className:"text-xl font-bold pt-4",children:"Recent Exams"}),n.jsx("div",{className:"flex flex-col gap-3",children:y.map(E=>{var ne;const I={mathematics:"bg-primary/10 text-primary border-primary/20",physics:"bg-chart-1/10 text-chart-1 border-chart-1/20",chemistry:"bg-blue-500/10 text-blue-500 border-blue-500/20",biology:"bg-green-500/10 text-green-500 border-green-500/20"}[((ne=E.subject)==null?void 0:ne.toLowerCase())||""]||"bg-muted text-muted-foreground border-muted",se=E.score||0,ee=E.total_marks||100,Y=ee>0?Math.round(se/ee*100):0,F=E.created_at||E.start_time;return n.jsxs("div",{className:"flex items-center justify-between p-4 bg-card rounded-lg border hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[n.jsx("div",{className:`${I} p-3 rounded-lg border`,children:n.jsx(or,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold capitalize",children:E.subject||"Exam"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[F?new Date(F).toLocaleDateString():"Recently",Y>0&&`  ${Y}%`]})]})]}),n.jsxs(z,{variant:"ghost",size:"sm",className:"gap-1",onClick:()=>{E.id||E.session_id?r(`/dashboard/student/exam-results/${E.id||E.session_id}`):r("/dashboard/student/exams")},children:[n.jsx("span",{children:"View"}),n.jsx(ji,{className:"h-4 w-4"})]})]},E.id||E.session_id)})}),n.jsxs(z,{variant:"outline",className:"w-full mt-2",onClick:()=>r("/dashboard/student/exams"),children:["View All Exams",n.jsx(ji,{className:"h-4 w-4 ml-2"})]})]})]}),n.jsx("div",{className:"lg:col-span-1",children:n.jsxs("div",{className:"bg-card rounded-lg border p-6",children:[n.jsx("h3",{className:"text-lg font-bold mb-4",children:"Recent Achievements"}),x.length>0?n.jsxs("div",{className:"space-y-4",children:[x.map((E,M)=>{const I=ee=>{var Y,F;return ee?n.jsx("span",{className:"text-2xl",children:ee}):(Y=E.id)!=null&&Y.includes("mastery")?n.jsx(Qt,{className:"h-8 w-8 text-chart-2"}):(F=E.id)!=null&&F.includes("streak")?n.jsx(Ur,{className:"h-8 w-8 text-chart-1"}):n.jsx(An,{className:"h-8 w-8 text-primary"})},se=()=>{var ee,Y,F,ne;return(ee=E.id)!=null&&ee.includes("mastery_90")?"text-chart-2":(Y=E.id)!=null&&Y.includes("mastery_80")?"text-chart-1":(F=E.id)!=null&&F.includes("streak_30")?"text-primary":(ne=E.id)!=null&&ne.includes("streak_7")?"text-chart-1":"text-muted-foreground"};return n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:se(),children:I(E.icon)}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold",children:E.name||"Achievement"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:E.description||`Earned in ${E.subject||"learning"}`}),E.earned_at&&n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(E.earned_at).toLocaleDateString()})]})]},E.id||M)}),n.jsxs(z,{variant:"outline",className:"w-full mt-4",onClick:()=>r("/dashboard/student/achievements"),children:["View All Achievements",n.jsx(ji,{className:"h-4 w-4 ml-2"})]})]}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-muted-foreground mb-4",children:"No achievements yet"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Start learning to earn your first achievement!"})]})]})})]})]})})]})},uV=Iu("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function je({className:e,variant:t,...r}){return n.jsx("div",{className:qe(uV({variant:t}),e),...r})}const W4={mathematics:Wn,physics:Ev,chemistry:_v,biology:Jt},Dm={mathematics:{text:"text-primary",bg:"bg-primary/10"},physics:{text:"text-chart-1",bg:"bg-chart-1/10"},chemistry:{text:"text-blue-500",bg:"bg-blue-500/10"},biology:{text:"text-green-500",bg:"bg-green-500/10"}},dV=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState([]),[o,l]=p.useState(!0),[c,u]=p.useState({}),[d,h]=p.useState({});p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{e&&(m(),f(),x())},[e]);const m=async()=>{try{l(!0);const v=["mathematics","physics","chemistry","biology"],{data:w,error:S}=await st.from("topics").select("subject, chapter").order("subject");S&&console.warn("Error fetching topics, showing all subjects anyway:",S);const k={};v.forEach(P=>{k[P]={chapters:new Set,totalTopics:0}}),w==null||w.forEach(P=>{k[P.subject]&&(k[P.subject].chapters.add(P.chapter),k[P.subject].totalTopics+=1)});const N=v.map(P=>{var A,E;const T=k[P]||{chapters:new Set,totalTopics:0};return{id:P,name:P.charAt(0).toUpperCase()+P.slice(1),icon:W4[P]||Jt,color:((A=Dm[P])==null?void 0:A.text)||"text-muted-foreground",bgColor:((E=Dm[P])==null?void 0:E.bg)||"bg-muted",description:g(P),totalChapters:T.chapters.size,totalTopics:T.totalTopics}});i(N)}catch(v){console.error("Error fetching subjects:",v);const S=["mathematics","physics","chemistry","biology"].map(k=>{var N,P;return{id:k,name:k.charAt(0).toUpperCase()+k.slice(1),icon:W4[k]||Jt,color:((N=Dm[k])==null?void 0:N.text)||"text-muted-foreground",bgColor:((P=Dm[k])==null?void 0:P.bg)||"bg-muted",description:g(k),totalChapters:0,totalTopics:0}});i(S),s({variant:"destructive",title:"Warning",description:"Could not load topic data, but all subjects are available"})}finally{l(!1)}},f=async()=>{if(e)try{const v=await pe.progress.getSummary(e.id),w=(v==null?void 0:v.subject_breakdown)||(v==null?void 0:v.subjects)||{};Object.keys(w).length>0&&u(w)}catch(v){console.error("Error fetching progress:",v)}},x=async()=>{try{const v=["mathematics","physics","chemistry","biology"],w={};for(const S of v){const{count:k,error:N}=await st.from("content").select("*",{count:"exact",head:!0}).eq("subject",S).not("file_url","is",null);N?(console.warn(`Error fetching document count for ${S}:`,N),w[S]=0):w[S]=k||0}h(w)}catch(v){console.error("Error fetching document counts:",v);const w=["mathematics","physics","chemistry","biology"],S={};w.forEach(k=>{S[k]=0}),h(S)}},g=v=>({mathematics:"Algebra, Geometry, Calculus, and more",physics:"Mechanics, Thermodynamics, Electromagnetism",chemistry:"Organic Chemistry, Reactions, Equations",biology:"Cell Biology, Genetics, Ecology"})[v]||"Explore and learn",y=v=>{const w=c[v];return w?Math.round(w.average_mastery||0):0},b=v=>{var S;const w=c[v];return{topicsAttempted:(w==null?void 0:w.topics_attempted)||0,totalTopics:((S=a.find(k=>k.id===v))==null?void 0:S.totalTopics)||0}};return t||o?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):t?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx("p",{className:"text-muted-foreground",children:"Loading..."})}):n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(yn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"All Subjects"}),n.jsx("p",{className:"text-muted-foreground",children:"Explore and continue learning across all subjects"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[n.jsx(ae,{children:n.jsxs(he,{className:"pb-3",children:[n.jsx(ze,{children:"Total Subjects"}),n.jsx(fe,{className:"text-2xl",children:a.length})]})}),n.jsx(ae,{children:n.jsxs(he,{className:"pb-3",children:[n.jsx(ze,{children:"In Progress"}),n.jsx(fe,{className:"text-2xl",children:a.filter(v=>y(v.id)>0&&y(v.id)<100).length})]})}),n.jsx(ae,{children:n.jsxs(he,{className:"pb-3",children:[n.jsx(ze,{children:"Total Topics"}),n.jsx(fe,{className:"text-2xl",children:a.reduce((v,w)=>v+w.totalTopics,0)})]})}),n.jsx(ae,{children:n.jsxs(he,{className:"pb-3",children:[n.jsx(ze,{children:"Total Chapters"}),n.jsx(fe,{className:"text-2xl",children:a.reduce((v,w)=>v+w.totalChapters,0)})]})})]}),a.length===0?n.jsx(ae,{children:n.jsx(ie,{className:"py-12 text-center",children:n.jsx("p",{className:"text-muted-foreground",children:"No subjects available"})})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(v=>{const w=v.icon,S=y(v.id),k=b(v.id),N=S<30?"Beginner":S<70?"Intermediate":"Advanced";return n.jsxs(ae,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>r(`/dashboard/student/classroom?subject=${v.id}`),children:[n.jsxs(he,{children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsx("div",{className:`${v.bgColor} p-3 rounded-lg`,children:n.jsx(w,{className:`h-6 w-6 ${v.color}`})}),n.jsx(je,{variant:"secondary",children:N})]}),n.jsx(fe,{className:"text-xl mb-2",children:v.name}),n.jsx(ze,{children:v.description})]}),n.jsx(ie,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-sm font-medium",children:"Mastery"}),n.jsxs("span",{className:"text-sm font-semibold",children:[S,"%"]})]}),n.jsx("div",{className:"w-full bg-muted rounded-full h-2.5",children:n.jsx("div",{className:`h-2.5 rounded-full ${v.color.replace("text-","bg-")}`,style:{width:`${S}%`}})})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[n.jsx("span",{children:k.totalTopics>0?`${k.topicsAttempted} / ${k.totalTopics} topics`:"No topics yet"}),n.jsx("span",{children:v.totalChapters>0?`${v.totalChapters} chapters`:"No chapters yet"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground pt-2 border-t",children:[n.jsx(or,{className:"h-4 w-4"}),n.jsx("span",{children:d[v.id]!==void 0?`${d[v.id]} ${d[v.id]===1?"document":"documents"}`:"Loading..."})]}),n.jsxs(z,{className:"w-full gap-2",variant:"outline",onClick:P=>{P.stopPropagation(),r(`/dashboard/student/classroom?subject=${v.id}`)},children:[n.jsx(Z6,{className:"h-4 w-4"}),"Start Learning",n.jsx(ji,{className:"h-4 w-4"})]})]})})]},v.id)})})]})})]})};var Cb="Progress",Eb=100,[hV,zse]=On(Cb),[mV,fV]=hV(Cb),__=p.forwardRef((e,t)=>{const{__scopeProgress:r,value:s=null,max:a,getValueLabel:i=pV,...o}=e;(a||a===0)&&!G4(a)&&console.error(xV(`${a}`,"Progress"));const l=G4(a)?a:Eb;s!==null&&!Q4(s,l)&&console.error(gV(`${s}`,"Progress"));const c=Q4(s,l)?s:null,u=df(c)?i(c,l):void 0;return n.jsx(mV,{scope:r,value:c,max:l,children:n.jsx(_t.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":df(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":T_(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});__.displayName=Cb;var C_="ProgressIndicator",E_=p.forwardRef((e,t)=>{const{__scopeProgress:r,...s}=e,a=fV(C_,r);return n.jsx(_t.div,{"data-state":T_(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:t})});E_.displayName=C_;function pV(e,t){return`${Math.round(e/t*100)}%`}function T_(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function df(e){return typeof e=="number"}function G4(e){return df(e)&&!isNaN(e)&&e>0}function Q4(e,t){return df(e)&&!isNaN(e)&&e<=t&&e>=0}function xV(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Eb}\`.`}function gV(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Eb} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var A_=__,vV=E_;const _i=p.forwardRef(({className:e,value:t,...r},s)=>n.jsx(A_,{ref:s,className:qe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:n.jsx(vV,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));_i.displayName=A_.displayName;const yV=()=>{var Y;const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState(null),[o,l]=p.useState(!0),[c,u]=p.useState(null),[d,h]=p.useState(null),[m,f]=p.useState(null),[x,g]=p.useState(!0);p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{e&&(async()=>{if(e){l(!0);try{const ne=await pe.progress.getAchievements(e.id);i(ne)}catch(ne){console.error("Error fetching achievements:",ne),ne.message&&!ne.message.includes("Failed to fetch")&&s({variant:"destructive",title:"Error",description:ne.message||"Failed to load achievements"}),i({total_achievements:0,achievements:[]})}finally{l(!1)}}})()},[e,s]),p.useEffect(()=>{e&&(async()=>{if(e){g(!0);try{const[ne,q,V]=await Promise.allSettled([pe.analytics.getStudentAnalytics(e.id),pe.exam.getHistory({user_id:e.id,limit:10}),pe.progress.getSummary(e.id)]);ne.status==="fulfilled"&&u(ne.value),q.status==="fulfilled"&&h(q.value),V.status==="fulfilled"&&f(V.value)}catch(ne){console.error("Error fetching performance data:",ne)}finally{g(!1)}}})()},[e]);const y=((Y=a==null?void 0:a.achievements)==null?void 0:Y.map((F,ne)=>({id:F.id||ne,name:F.name||F.achievement_name||"Achievement",description:F.description||`Earned in ${F.subject||"subject"}`,icon:ik,color:"text-yellow-500",bgColor:"bg-yellow-500/10",unlocked:!0,unlockedDate:F.earned_at||new Date().toISOString(),progress:100,category:F.category||"General",topic:F.topic_id,subject:F.subject})))||[],b=y.length,v=y.length||0,w=v>0?100:0,S=(c==null?void 0:c.avg_mastery_score)||0,k=(c==null?void 0:c.total_time_minutes)||0,N=(c==null?void 0:c.max_streak)||0,P=(c==null?void 0:c.test_count)||0,T=(c==null?void 0:c.avg_test_score)||0,A=(c==null?void 0:c.subjects)||{},E=(c==null?void 0:c.recent_tests)||[],M=Object.entries(A).map(([F,ne])=>({subject:F,mastery:ne.avg_mastery_score||0,topics:ne.topics_count||0,time:ne.total_time_minutes||0})),I=M.filter(F=>F.mastery>=70).sort((F,ne)=>ne.mastery-F.mastery).slice(0,3),se=M.filter(F=>F.mastery<70&&F.mastery>0).sort((F,ne)=>F.mastery-ne.mastery).slice(0,3),ee=F=>{if(F<60)return`${F}m`;const ne=Math.floor(F/60),q=F%60;return q>0?`${ne}h ${q}m`:`${ne}h`};return t||o?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx("p",{className:"text-muted-foreground",children:"Loading..."})}):n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(yn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Achievements"}),n.jsx("p",{className:"text-muted-foreground",children:"Track your learning milestones and accomplishments"})]}),n.jsxs(ae,{className:"mb-8",children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Overall Progress"}),n.jsx(ze,{children:"Your achievement collection progress"})]}),n.jsx(ie,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"text-2xl font-bold",children:[b," / ",v]}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[Math.round(w),"% Complete"]})]}),n.jsx(_i,{value:w,className:"h-3"})]})})]}),!x&&(c||d||m)&&n.jsxs("div",{className:"mb-8",children:[n.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2",children:[n.jsx(Fi,{className:"h-6 w-6"}),"Performance Analysis"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[n.jsxs(ae,{children:[n.jsx(he,{className:"pb-3",children:n.jsx(fe,{className:"text-sm font-medium text-muted-foreground",children:"Average Mastery"})}),n.jsxs(ie,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(An,{className:"h-5 w-5 text-primary"}),n.jsxs("span",{className:"text-2xl font-bold",children:[S.toFixed(1),"%"]})]}),n.jsx(_i,{value:S,className:"mt-2 h-2"})]})]}),n.jsxs(ae,{children:[n.jsx(he,{className:"pb-3",children:n.jsx(fe,{className:"text-sm font-medium text-muted-foreground",children:"Total Study Time"})}),n.jsxs(ie,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ur,{className:"h-5 w-5 text-blue-500"}),n.jsx("span",{className:"text-2xl font-bold",children:ee(k)})]}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Across ",(c==null?void 0:c.total_topics)||0," topics"]})]})]}),n.jsxs(ae,{children:[n.jsx(he,{className:"pb-3",children:n.jsx(fe,{className:"text-sm font-medium text-muted-foreground",children:"Current Streak"})}),n.jsxs(ie,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(MO,{className:"h-5 w-5 text-orange-500"}),n.jsxs("span",{className:"text-2xl font-bold",children:[N," days"]})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Keep it up!"})]})]}),n.jsxs(ae,{children:[n.jsx(he,{className:"pb-3",children:n.jsx(fe,{className:"text-sm font-medium text-muted-foreground",children:"Test Performance"})}),n.jsxs(ie,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Mn,{className:"h-5 w-5 text-green-500"}),n.jsxs("span",{className:"text-2xl font-bold",children:[T.toFixed(1),"%"]})]}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[P," ",P===1?"test":"tests"," completed"]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"h-5 w-5"}),"Subject-wise Performance"]}),n.jsx(ze,{children:"Your mastery across different subjects"})]}),n.jsx(ie,{children:M.length>0?n.jsx("div",{className:"space-y-4",children:M.map(F=>n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"font-medium capitalize",children:F.subject}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[F.mastery.toFixed(1),"%  ",F.topics," topics"]})]}),n.jsx(_i,{value:F.mastery,className:"h-2"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[ee(F.time)," studied"]})]},F.subject))}):n.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No subject data available yet"})})]}),n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(Di,{className:"h-5 w-5"}),"Strengths & Areas for Improvement"]}),n.jsx(ze,{children:"Insights based on your performance"})]}),n.jsx(ie,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2 text-green-600",children:[n.jsx(TO,{className:"h-4 w-4"}),"Strengths"]}),I.length>0?n.jsx("div",{className:"space-y-2",children:I.map(F=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-green-50 dark:bg-green-950/20 rounded",children:[n.jsx("span",{className:"font-medium capitalize text-sm",children:F.subject}),n.jsxs(je,{variant:"outline",className:"bg-green-100 dark:bg-green-900/30",children:[F.mastery.toFixed(1),"%"]})]},F.subject))}):n.jsx("p",{className:"text-sm text-muted-foreground",children:"Keep practicing to identify strengths!"})]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2 text-orange-600",children:[n.jsx(Hs,{className:"h-4 w-4"}),"Areas for Improvement"]}),se.length>0?n.jsx("div",{className:"space-y-2",children:se.map(F=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-orange-50 dark:bg-orange-950/20 rounded",children:[n.jsx("span",{className:"font-medium capitalize text-sm",children:F.subject}),n.jsxs(je,{variant:"outline",className:"bg-orange-100 dark:bg-orange-900/30",children:[F.mastery.toFixed(1),"%"]})]},F.subject))}):n.jsx("p",{className:"text-sm text-muted-foreground",children:"No areas identified yet"})]})]})})]})]}),E.length>0&&n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(VO,{className:"h-5 w-5"}),"Recent Test Performance"]}),n.jsxs(ze,{children:["Your last ",E.length," test attempts"]})]}),n.jsx(ie,{children:n.jsx("div",{className:"space-y-3",children:E.slice(0,5).map((F,ne)=>{const q=F.score?parseFloat(F.score):0,V=F.total_marks||100,_=V>0?q/V*100:0,U=F.end_time||F.created_at||new Date().toISOString();return n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("span",{className:"font-medium capitalize",children:F.subject||"Unknown"}),n.jsxs(je,{variant:_>=70?"default":_>=50?"secondary":"destructive",children:[_.toFixed(1),"%"]})]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[n.jsx("span",{children:new Date(U).toLocaleDateString()}),F.duration_minutes&&n.jsxs("span",{children:[F.duration_minutes," min"]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-lg font-bold",children:q.toFixed(1)}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["/ ",V]})]})]},F.id||ne)})})})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Unlocked Achievements"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:y.filter(F=>F.unlocked).map(F=>{const ne=F.icon;return n.jsxs(ae,{className:"border-2 border-primary/20",children:[n.jsxs(he,{children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsx("div",{className:`${F.bgColor} p-3 rounded-lg`,children:n.jsx(ne,{className:`h-6 w-6 ${F.color}`})}),n.jsxs(je,{variant:"default",className:"bg-primary",children:[n.jsx(Qt,{className:"h-3 w-3 mr-1"}),"Unlocked"]})]}),n.jsx(fe,{className:"text-xl mb-2",children:F.name}),n.jsx(ze,{children:F.description})]}),n.jsx(ie,{children:n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Unlocked on ",new Date(F.unlockedDate).toLocaleDateString()]})})]},F.id)})})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"In Progress"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.filter(F=>!F.unlocked).map(F=>{const ne=F.icon;return n.jsxs(ae,{className:"opacity-75",children:[n.jsxs(he,{children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsx("div",{className:`${F.bgColor} p-3 rounded-lg opacity-50`,children:n.jsx(ne,{className:`h-6 w-6 ${F.color}`})}),n.jsxs(je,{variant:"secondary",children:[n.jsx(IO,{className:"h-3 w-3 mr-1"}),"Locked"]})]}),n.jsx(fe,{className:"text-xl mb-2",children:F.name}),n.jsx(ze,{children:F.description})]}),n.jsx(ie,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Progress"}),n.jsxs("span",{className:"font-semibold",children:[F.progress,"%"]})]}),n.jsx(_i,{value:F.progress,className:"h-2"})]})})]},F.id)})})]})]})})]})},Xn=()=>{var i,o;const{user:e,signOut:t}=Wt();Gt();const[r,s]=p.useState(null),a=l=>l.split(" ").map(c=>c[0]).join("").toUpperCase();return p.useEffect(()=>{(async()=>{var c,u,d;if(e)try{const{data:h,error:m}=await st.from("teacher_profiles").select("school_id").eq("user_id",e.id).maybeSingle();if(m){if(m.code==="42P17"||(c=m.message)!=null&&c.includes("infinite recursion")){console.warn("Skipping school name fetch due to policy recursion:",m);return}console.error("Error fetching teacher profile:",m);return}if(h!=null&&h.school_id){const{data:f,error:x}=await st.from("schools").select("name").eq("id",h.school_id).maybeSingle();if(x){if(x.code==="42P17"||(u=x.message)!=null&&u.includes("infinite recursion")){console.warn("Skipping school name due to policy recursion");return}console.error("Error fetching school:",x);return}f!=null&&f.name&&s(f.name)}}catch(h){h.code==="42P17"||(d=h.message)!=null&&d.includes("infinite recursion")?console.warn("Skipping teacher profile fetch due to policy recursion"):console.error("Error fetching teacher profile:",h)}})()},[e]),n.jsxs("aside",{className:"w-64 flex-shrink-0 bg-card border-r flex flex-col justify-between",children:[n.jsxs("div",{className:"flex flex-col gap-8 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 p-2",children:[n.jsx(pa,{className:"h-8 w-8 text-primary"}),n.jsx("h1",{className:"text-xl font-bold",children:"AI Tutor"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(an,{className:"h-12 w-12",children:[n.jsx(os,{src:""}),n.jsx(on,{className:"bg-primary text-primary-foreground",children:(i=e==null?void 0:e.user_metadata)!=null&&i.full_name?a(e.user_metadata.full_name):"TE"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("h2",{className:"text-base font-semibold",children:((o=e==null?void 0:e.user_metadata)==null?void 0:o.full_name)||"Teacher"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:r||"Teacher"})]})]}),n.jsxs("nav",{className:"flex flex-col gap-2",children:[n.jsxs(xr,{to:"/dashboard/teacher",end:!0,className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(Vy,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Dashboard"})]}),n.jsxs(xr,{to:"/dashboard/teacher/students",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(vn,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"My Students"})]}),n.jsxs(xr,{to:"/dashboard/teacher/performance",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(Fi,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Performance"})]}),n.jsxs(xr,{to:"/dashboard/teacher/content",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(Kn,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"View Content"})]}),n.jsxs(xr,{to:"/dashboard/teacher/create",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(_n,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Create Exam / Homework"})]}),n.jsxs(xr,{to:"/dashboard/teacher/view-content",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(or,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"View Created Content"})]}),n.jsxs(xr,{to:"/dashboard/teacher/quizzes",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(ua,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Manage Quizzes"})]}),n.jsxs(xr,{to:"/dashboard/teacher/tools",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(Ii,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"AI Tools"})]}),n.jsxs(xr,{to:"/dashboard/teacher/ai-tutor-monitoring",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(Qn,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"AI Tutor Monitoring"})]}),n.jsxs(xr,{to:"/dashboard/teacher/notifications",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(Oh,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Notifications"})]}),n.jsxs(xr,{to:"/profile-setup",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(ii,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Profile"})]}),n.jsxs(xr,{to:"/dashboard/teacher/settings",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(Gy,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Settings"})]})]})]}),n.jsx("div",{className:"p-4",children:n.jsxs(z,{variant:"outline",className:"w-full justify-start gap-2",onClick:t,children:[n.jsx(Hy,{className:"h-4 w-4"}),"Sign Out"]})})]})},el=()=>{var s,a;const{user:e,signOut:t}=Wt(),r=i=>i.split(" ").map(o=>o[0]).join("").toUpperCase();return n.jsxs("aside",{className:"w-64 flex-shrink-0 bg-card border-r flex flex-col justify-between",children:[n.jsxs("div",{className:"flex flex-col gap-8 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 p-2",children:[n.jsx(pa,{className:"h-8 w-8 text-primary"}),n.jsx("h1",{className:"text-xl font-bold",children:"AI Tutor"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(an,{className:"h-12 w-12",children:[n.jsx(os,{src:""}),n.jsx(on,{className:"bg-primary text-primary-foreground",children:(s=e==null?void 0:e.user_metadata)!=null&&s.full_name?r(e.user_metadata.full_name):"AD"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("h2",{className:"text-base font-semibold",children:((a=e==null?void 0:e.user_metadata)==null?void 0:a.full_name)||"Admin"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Administrator"})]})]}),n.jsxs("nav",{className:"flex flex-col gap-2",children:[n.jsxs(xr,{to:"/dashboard/admin",end:!0,className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(Vy,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Dashboard"})]}),n.jsxs(xr,{to:"/dashboard/admin/users",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(vn,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"User Management"})]}),n.jsxs(xr,{to:"/dashboard/admin/schools",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(K6,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"School Management"})]}),n.jsxs(xr,{to:"/dashboard/admin/analytics",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(Fi,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Analytics"})]}),n.jsxs(xr,{to:"/dashboard/admin/content",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(or,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Content Management"})]}),n.jsxs(xr,{to:"/dashboard/admin/content/manage",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors ml-4",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(or,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm font-medium",children:"Manage All Content"})]}),n.jsxs(xr,{to:"/dashboard/admin/notifications/create",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(Oh,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Send Notifications"})]}),n.jsxs(xr,{to:"/profile-setup",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(ii,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Profile Setup"})]}),n.jsxs(xr,{to:"/dashboard/admin/settings",className:"flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-accent transition-colors",activeClassName:"bg-primary/20 text-primary hover:bg-primary/30",children:[n.jsx(Gy,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Settings"})]})]})]}),n.jsx("div",{className:"p-4",children:n.jsxs(z,{variant:"outline",className:"w-full justify-start gap-2",onClick:t,children:[n.jsx(Hy,{className:"h-4 w-4"}),"Sign Out"]})})]})};var Wx="rovingFocusGroup.onEntryFocus",bV={bubbles:!1,cancelable:!0},zh="RovingFocusGroup",[x1,P_,wV]=Wf(zh),[jV,Hu]=On(zh,[wV]),[NV,SV]=jV(zh),R_=p.forwardRef((e,t)=>n.jsx(x1.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(x1.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(kV,{...e,ref:t})})}));R_.displayName=zh;var kV=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:s,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,m=p.useRef(null),f=Yt(t,m),x=Uu(i),[g,y]=ai({prop:o,defaultProp:l??null,onChange:c,caller:zh}),[b,v]=p.useState(!1),w=sn(u),S=P_(r),k=p.useRef(!1),[N,P]=p.useState(0);return p.useEffect(()=>{const T=m.current;if(T)return T.addEventListener(Wx,w),()=>T.removeEventListener(Wx,w)},[w]),n.jsx(NV,{scope:r,orientation:s,dir:x,loop:a,currentTabStopId:g,onItemFocus:p.useCallback(T=>y(T),[y]),onItemShiftTab:p.useCallback(()=>v(!0),[]),onFocusableItemAdd:p.useCallback(()=>P(T=>T+1),[]),onFocusableItemRemove:p.useCallback(()=>P(T=>T-1),[]),children:n.jsx(_t.div,{tabIndex:b||N===0?-1:0,"data-orientation":s,...h,ref:f,style:{outline:"none",...e.style},onMouseDown:Ze(e.onMouseDown,()=>{k.current=!0}),onFocus:Ze(e.onFocus,T=>{const A=!k.current;if(T.target===T.currentTarget&&A&&!b){const E=new CustomEvent(Wx,bV);if(T.currentTarget.dispatchEvent(E),!E.defaultPrevented){const M=S().filter(F=>F.focusable),I=M.find(F=>F.active),se=M.find(F=>F.id===g),Y=[I,se,...M].filter(Boolean).map(F=>F.ref.current);I_(Y,d)}}k.current=!1}),onBlur:Ze(e.onBlur,()=>v(!1))})})}),M_="RovingFocusGroupItem",O_=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:s=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=ri(),u=i||c,d=SV(M_,r),h=d.currentTabStopId===u,m=P_(r),{onFocusableItemAdd:f,onFocusableItemRemove:x,currentTabStopId:g}=d;return p.useEffect(()=>{if(s)return f(),()=>x()},[s,f,x]),n.jsx(x1.ItemSlot,{scope:r,id:u,focusable:s,active:a,children:n.jsx(_t.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:Ze(e.onMouseDown,y=>{s?d.onItemFocus(u):y.preventDefault()}),onFocus:Ze(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:Ze(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){d.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const b=EV(y,d.orientation,d.dir);if(b!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let w=m().filter(S=>S.focusable).map(S=>S.ref.current);if(b==="last")w.reverse();else if(b==="prev"||b==="next"){b==="prev"&&w.reverse();const S=w.indexOf(y.currentTarget);w=d.loop?TV(w,S+1):w.slice(S+1)}setTimeout(()=>I_(w))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:g!=null}):o})})});O_.displayName=M_;var _V={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function CV(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function EV(e,t,r){const s=CV(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return _V[s]}function I_(e,t=!1){const r=document.activeElement;for(const s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}function TV(e,t){return e.map((r,s)=>e[(t+s)%e.length])}var Tb=R_,Ab=O_,pp="Tabs",[AV,$se]=On(pp,[Hu]),D_=Hu(),[PV,Pb]=AV(pp),F_=p.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=Uu(l),[h,m]=ai({prop:s,onChange:a,defaultProp:i??"",caller:pp});return n.jsx(PV,{scope:r,baseId:ri(),value:h,onValueChange:m,orientation:o,dir:d,activationMode:c,children:n.jsx(_t.div,{dir:d,"data-orientation":o,...u,ref:t})})});F_.displayName=pp;var L_="TabsList",z_=p.forwardRef((e,t)=>{const{__scopeTabs:r,loop:s=!0,...a}=e,i=Pb(L_,r),o=D_(r);return n.jsx(Tb,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:s,children:n.jsx(_t.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});z_.displayName=L_;var $_="TabsTrigger",q_=p.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,disabled:a=!1,...i}=e,o=Pb($_,r),l=D_(r),c=V_(o.baseId,s),u=H_(o.baseId,s),d=s===o.value;return n.jsx(Ab,{asChild:!0,...l,focusable:!a,active:d,children:n.jsx(_t.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:Ze(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(s):h.preventDefault()}),onKeyDown:Ze(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(s)}),onFocus:Ze(e.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!a&&h&&o.onValueChange(s)})})})});q_.displayName=$_;var B_="TabsContent",U_=p.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,forceMount:a,children:i,...o}=e,l=Pb(B_,r),c=V_(l.baseId,s),u=H_(l.baseId,s),d=s===l.value,h=p.useRef(d);return p.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),n.jsx($n,{present:a||d,children:({present:m})=>n.jsx(_t.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&i})})});U_.displayName=B_;function V_(e,t){return`${e}-trigger-${t}`}function H_(e,t){return`${e}-content-${t}`}var RV=F_,W_=z_,G_=q_,Q_=U_;const Zs=RV,Ps=p.forwardRef(({className:e,...t},r)=>n.jsx(W_,{ref:r,className:qe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Ps.displayName=W_.displayName;const gr=p.forwardRef(({className:e,...t},r)=>n.jsx(G_,{ref:r,className:qe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));gr.displayName=G_.displayName;const Er=p.forwardRef(({className:e,...t},r)=>n.jsx(Q_,{ref:r,className:qe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Er.displayName=Q_.displayName;function MV(e,t){return p.useReducer((r,s)=>t[r][s]??r,e)}var Rb="ScrollArea",[Y_,qse]=On(Rb),[OV,ya]=Y_(Rb),K_=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:s="hover",dir:a,scrollHideDelay:i=600,...o}=e,[l,c]=p.useState(null),[u,d]=p.useState(null),[h,m]=p.useState(null),[f,x]=p.useState(null),[g,y]=p.useState(null),[b,v]=p.useState(0),[w,S]=p.useState(0),[k,N]=p.useState(!1),[P,T]=p.useState(!1),A=Yt(t,M=>c(M)),E=Uu(a);return n.jsx(OV,{scope:r,type:s,dir:E,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:m,scrollbarX:f,onScrollbarXChange:x,scrollbarXEnabled:k,onScrollbarXEnabledChange:N,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:P,onScrollbarYEnabledChange:T,onCornerWidthChange:v,onCornerHeightChange:S,children:n.jsx(_t.div,{dir:E,...o,ref:A,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});K_.displayName=Rb;var J_="ScrollAreaViewport",X_=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:s,nonce:a,...i}=e,o=ya(J_,r),l=p.useRef(null),c=Yt(t,l,o.onViewportChange);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),n.jsx(_t.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:n.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});X_.displayName=J_;var ci="ScrollAreaScrollbar",Mb=p.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=ya(ci,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return p.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?n.jsx(IV,{...s,ref:t,forceMount:r}):a.type==="scroll"?n.jsx(DV,{...s,ref:t,forceMount:r}):a.type==="auto"?n.jsx(Z_,{...s,ref:t,forceMount:r}):a.type==="always"?n.jsx(Ob,{...s,ref:t}):null});Mb.displayName=ci;var IV=p.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=ya(ci,e.__scopeScrollArea),[i,o]=p.useState(!1);return p.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),n.jsx($n,{present:r||i,children:n.jsx(Z_,{"data-state":i?"visible":"hidden",...s,ref:t})})}),DV=p.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=ya(ci,e.__scopeScrollArea),i=e.orientation==="horizontal",o=gp(()=>c("SCROLL_END"),100),[l,c]=MV("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,a.scrollHideDelay,c]),p.useEffect(()=>{const u=a.viewport,d=i?"scrollLeft":"scrollTop";if(u){let h=u[d];const m=()=>{const f=u[d];h!==f&&(c("SCROLL"),o()),h=f};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[a.viewport,i,c,o]),n.jsx($n,{present:r||l!=="hidden",children:n.jsx(Ob,{"data-state":l==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:Ze(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Ze(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Z_=p.forwardRef((e,t)=>{const r=ya(ci,e.__scopeScrollArea),{forceMount:s,...a}=e,[i,o]=p.useState(!1),l=e.orientation==="horizontal",c=gp(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?u:d)}},10);return ju(r.viewport,c),ju(r.content,c),n.jsx($n,{present:s||i,children:n.jsx(Ob,{"data-state":i?"visible":"hidden",...a,ref:t})})}),Ob=p.forwardRef((e,t)=>{const{orientation:r="vertical",...s}=e,a=ya(ci,e.__scopeScrollArea),i=p.useRef(null),o=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=sC(l.viewport,l.content),d={...s,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function h(m,f){return BV(m,o.current,l,f)}return r==="horizontal"?n.jsx(FV,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollLeft,f=Y4(m,l,a.dir);i.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=h(m,a.dir))}}):r==="vertical"?n.jsx(LV,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollTop,f=Y4(m,l);i.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=h(m))}}):null}),FV=p.forwardRef((e,t)=>{const{sizes:r,onSizesChange:s,...a}=e,i=ya(ci,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=Yt(t,c,i.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),n.jsx(tC,{"data-orientation":"horizontal",...a,ref:u,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":xp(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const m=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(m),iC(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&s({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:mf(o.paddingLeft),paddingEnd:mf(o.paddingRight)}})}})}),LV=p.forwardRef((e,t)=>{const{sizes:r,onSizesChange:s,...a}=e,i=ya(ci,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=Yt(t,c,i.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),n.jsx(tC,{"data-orientation":"vertical",...a,ref:u,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":xp(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const m=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(m),iC(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&s({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:mf(o.paddingTop),paddingEnd:mf(o.paddingBottom)}})}})}),[zV,eC]=Y_(ci),tC=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:s,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...m}=e,f=ya(ci,r),[x,g]=p.useState(null),y=Yt(t,A=>g(A)),b=p.useRef(null),v=p.useRef(""),w=f.viewport,S=s.content-s.viewport,k=sn(d),N=sn(c),P=gp(h,10);function T(A){if(b.current){const E=A.clientX-b.current.left,M=A.clientY-b.current.top;u({x:E,y:M})}}return p.useEffect(()=>{const A=E=>{const M=E.target;(x==null?void 0:x.contains(M))&&k(E,S)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[w,x,S,k]),p.useEffect(N,[s,N]),ju(x,P),ju(f.content,P),n.jsx(zV,{scope:r,scrollbar:x,hasThumb:a,onThumbChange:sn(i),onThumbPointerUp:sn(o),onThumbPositionChange:N,onThumbPointerDown:sn(l),children:n.jsx(_t.div,{...m,ref:y,style:{position:"absolute",...m.style},onPointerDown:Ze(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),b.current=x.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),T(A))}),onPointerMove:Ze(e.onPointerMove,T),onPointerUp:Ze(e.onPointerUp,A=>{const E=A.target;E.hasPointerCapture(A.pointerId)&&E.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=v.current,f.viewport&&(f.viewport.style.scrollBehavior=""),b.current=null})})})}),hf="ScrollAreaThumb",rC=p.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=eC(hf,e.__scopeScrollArea);return n.jsx($n,{present:r||a.hasThumb,children:n.jsx($V,{ref:t,...s})})}),$V=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:s,...a}=e,i=ya(hf,r),o=eC(hf,r),{onThumbPositionChange:l}=o,c=Yt(t,h=>o.onThumbChange(h)),u=p.useRef(void 0),d=gp(()=>{u.current&&(u.current(),u.current=void 0)},100);return p.useEffect(()=>{const h=i.viewport;if(h){const m=()=>{if(d(),!u.current){const f=UV(h,l);u.current=f,l()}};return l(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[i.viewport,d,l]),n.jsx(_t.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:Ze(e.onPointerDownCapture,h=>{const f=h.target.getBoundingClientRect(),x=h.clientX-f.left,g=h.clientY-f.top;o.onThumbPointerDown({x,y:g})}),onPointerUp:Ze(e.onPointerUp,o.onThumbPointerUp)})});rC.displayName=hf;var Ib="ScrollAreaCorner",nC=p.forwardRef((e,t)=>{const r=ya(Ib,e.__scopeScrollArea),s=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&s?n.jsx(qV,{...e,ref:t}):null});nC.displayName=Ib;var qV=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,...s}=e,a=ya(Ib,r),[i,o]=p.useState(0),[l,c]=p.useState(0),u=!!(i&&l);return ju(a.scrollbarX,()=>{var h;const d=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(d),c(d)}),ju(a.scrollbarY,()=>{var h;const d=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(d),o(d)}),u?n.jsx(_t.div,{...s,ref:t,style:{width:i,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function mf(e){return e?parseInt(e,10):0}function sC(e,t){const r=e/t;return isNaN(r)?0:r}function xp(e){const t=sC(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-r)*t;return Math.max(s,18)}function BV(e,t,r,s="ltr"){const a=xp(r),i=a/2,o=t||i,l=a-o,c=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,h=s==="ltr"?[0,d]:[d*-1,0];return aC([c,u],h)(e)}function Y4(e,t,r="ltr"){const s=xp(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,l=i-s,c=r==="ltr"?[0,o]:[o*-1,0],u=n1(e,c);return aC([0,o],[0,l])(u)}function aC(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(r-e[0])}}function iC(e,t){return e>0&&e<t}var UV=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},s=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&t(),r=i,s=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(s)};function gp(e,t){const r=sn(e),s=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(s.current),[]),p.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(r,t)},[r,t])}function ju(e,t){const r=sn(t);hn(()=>{let s=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(s),a.unobserve(e)}}},[e,r])}var oC=K_,VV=X_,HV=nC;const Pn=p.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(oC,{ref:s,className:qe("relative overflow-hidden",e),...r,children:[n.jsx(VV,{className:"h-full w-full rounded-[inherit]",children:t}),n.jsx(lC,{}),n.jsx(HV,{})]}));Pn.displayName=oC.displayName;const lC=p.forwardRef(({className:e,orientation:t="vertical",...r},s)=>n.jsx(Mb,{ref:s,orientation:t,className:qe("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:n.jsx(rC,{className:"relative flex-1 rounded-full bg-border"})}));lC.displayName=Mb.displayName;function za(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Ul(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const cC=6048e5,WV=864e5;let GV={};function vp(){return GV}function xh(e,t){var l,c,u,d;const r=vp(),s=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=za(e),i=a.getDay(),o=(i<s?7:0)+i-s;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function ff(e){return xh(e,{weekStartsOn:1})}function uC(e){const t=za(e),r=t.getFullYear(),s=Ul(e,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=ff(s),i=Ul(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=ff(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function K4(e){const t=za(e);return t.setHours(0,0,0,0),t}function J4(e){const t=za(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function QV(e,t){const r=K4(e),s=K4(t),a=+r-J4(r),i=+s-J4(s);return Math.round((a-i)/WV)}function YV(e){const t=uC(e),r=Ul(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),ff(r)}function KV(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function JV(e){if(!KV(e)&&typeof e!="number")return!1;const t=za(e);return!isNaN(Number(t))}function XV(e){const t=za(e),r=Ul(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const ZV={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},eH=(e,t,r)=>{let s;const a=ZV[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function Gx(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const tH={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},rH={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},nH={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},sH={date:Gx({formats:tH,defaultWidth:"full"}),time:Gx({formats:rH,defaultWidth:"full"}),dateTime:Gx({formats:nH,defaultWidth:"full"})},aH={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},iH=(e,t,r,s)=>aH[e];function id(e){return(t,r)=>{const s=r!=null&&r.context?String(r.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const oH={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},lH={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},cH={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},uH={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},hH={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},mH=(e,t)=>{const r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},fH={ordinalNumber:mH,era:id({values:oH,defaultWidth:"wide"}),quarter:id({values:lH,defaultWidth:"wide",argumentCallback:e=>e-1}),month:id({values:cH,defaultWidth:"wide"}),day:id({values:uH,defaultWidth:"wide"}),dayPeriod:id({values:dH,defaultWidth:"wide",formattingValues:hH,defaultFormattingWidth:"wide"})};function od(e){return(t,r={})=>{const s=r.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?xH(l,h=>h.test(o)):pH(l,h=>h.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function pH(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function xH(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function gH(e){return(t,r={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const vH=/^(\d+)(th|st|nd|rd)?/i,yH=/\d+/i,bH={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},wH={any:[/^b/i,/^(a|c)/i]},jH={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},NH={any:[/1/i,/2/i,/3/i,/4/i]},SH={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},kH={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},_H={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},CH={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},EH={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},TH={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},AH={ordinalNumber:gH({matchPattern:vH,parsePattern:yH,valueCallback:e=>parseInt(e,10)}),era:od({matchPatterns:bH,defaultMatchWidth:"wide",parsePatterns:wH,defaultParseWidth:"any"}),quarter:od({matchPatterns:jH,defaultMatchWidth:"wide",parsePatterns:NH,defaultParseWidth:"any",valueCallback:e=>e+1}),month:od({matchPatterns:SH,defaultMatchWidth:"wide",parsePatterns:kH,defaultParseWidth:"any"}),day:od({matchPatterns:_H,defaultMatchWidth:"wide",parsePatterns:CH,defaultParseWidth:"any"}),dayPeriod:od({matchPatterns:EH,defaultMatchWidth:"any",parsePatterns:TH,defaultParseWidth:"any"})},PH={code:"en-US",formatDistance:eH,formatLong:sH,formatRelative:iH,localize:fH,match:AH,options:{weekStartsOn:0,firstWeekContainsDate:1}};function RH(e){const t=za(e);return QV(t,XV(t))+1}function MH(e){const t=za(e),r=+ff(t)-+YV(t);return Math.round(r/cC)+1}function dC(e,t){var d,h,m,f;const r=za(e),s=r.getFullYear(),a=vp(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((f=(m=a.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??1,o=Ul(e,0);o.setFullYear(s+1,0,i),o.setHours(0,0,0,0);const l=xh(o,t),c=Ul(e,0);c.setFullYear(s,0,i),c.setHours(0,0,0,0);const u=xh(c,t);return r.getTime()>=l.getTime()?s+1:r.getTime()>=u.getTime()?s:s-1}function OH(e,t){var l,c,u,d;const r=vp(),s=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=dC(e,t),i=Ul(e,0);return i.setFullYear(a,0,s),i.setHours(0,0,0,0),xh(i,t)}function IH(e,t){const r=za(e),s=+xh(r,t)-+OH(r,t);return Math.round(s/cC)+1}function Tr(e,t){const r=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return r+s}const ro={y(e,t){const r=e.getFullYear(),s=r>0?r:1-r;return Tr(t==="yy"?s%100:s,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Tr(r+1,2)},d(e,t){return Tr(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Tr(e.getHours()%12||12,t.length)},H(e,t){return Tr(e.getHours(),t.length)},m(e,t){return Tr(e.getMinutes(),t.length)},s(e,t){return Tr(e.getSeconds(),t.length)},S(e,t){const r=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,r-3));return Tr(a,t.length)}},pc={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},X4={G:function(e,t,r){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return ro.y(e,t)},Y:function(e,t,r,s){const a=dC(e,s),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return Tr(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):Tr(i,t.length)},R:function(e,t){const r=uC(e);return Tr(r,t.length)},u:function(e,t){const r=e.getFullYear();return Tr(r,t.length)},Q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return Tr(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return Tr(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,r){const s=e.getMonth();switch(t){case"M":case"MM":return ro.M(e,t);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,r){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return Tr(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,r,s){const a=IH(e,s);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):Tr(a,t.length)},I:function(e,t,r){const s=MH(e);return t==="Io"?r.ordinalNumber(s,{unit:"week"}):Tr(s,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):ro.d(e,t)},D:function(e,t,r){const s=RH(e);return t==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):Tr(s,t.length)},E:function(e,t,r){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,r,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Tr(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Tr(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return Tr(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const s=e.getHours();let a;switch(s===12?a=pc.noon:s===0?a=pc.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const s=e.getHours();let a;switch(s>=17?a=pc.evening:s>=12?a=pc.afternoon:s>=4?a=pc.morning:a=pc.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return ro.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):ro.H(e,t)},K:function(e,t,r){const s=e.getHours()%12;return t==="Ko"?r.ordinalNumber(s,{unit:"hour"}):Tr(s,t.length)},k:function(e,t,r){let s=e.getHours();return s===0&&(s=24),t==="ko"?r.ordinalNumber(s,{unit:"hour"}):Tr(s,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):ro.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):ro.s(e,t)},S:function(e,t){return ro.S(e,t)},X:function(e,t,r){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return e5(s);case"XXXX":case"XX":return dl(s);case"XXXXX":case"XXX":default:return dl(s,":")}},x:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"x":return e5(s);case"xxxx":case"xx":return dl(s);case"xxxxx":case"xxx":default:return dl(s,":")}},O:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Z4(s,":");case"OOOO":default:return"GMT"+dl(s,":")}},z:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Z4(s,":");case"zzzz":default:return"GMT"+dl(s,":")}},t:function(e,t,r){const s=Math.trunc(e.getTime()/1e3);return Tr(s,t.length)},T:function(e,t,r){const s=e.getTime();return Tr(s,t.length)}};function Z4(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),i=s%60;return i===0?r+String(a):r+String(a)+t+Tr(i,2)}function e5(e,t){return e%60===0?(e>0?"-":"+")+Tr(Math.abs(e)/60,2):dl(e,t)}function dl(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Tr(Math.trunc(s/60),2),i=Tr(s%60,2);return r+a+t+i}const t5=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},hC=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},DH=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return t5(e,t);let i;switch(s){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",t5(s,t)).replace("{{time}}",hC(a,t))},FH={p:hC,P:DH},LH=/^D+$/,zH=/^Y+$/,$H=["D","DD","YY","YYYY"];function qH(e){return LH.test(e)}function BH(e){return zH.test(e)}function UH(e,t,r){const s=VH(e,t,r);if(console.warn(s),$H.includes(e))throw new RangeError(s)}function VH(e,t,r){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const HH=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,WH=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,GH=/^'([^]*?)'?$/,QH=/''/g,YH=/[a-zA-Z]/;function Db(e,t,r){var d,h,m,f;const s=vp(),a=s.locale??PH,i=s.firstWeekContainsDate??((h=(d=s.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=s.weekStartsOn??((f=(m=s.locale)==null?void 0:m.options)==null?void 0:f.weekStartsOn)??0,l=za(e);if(!JV(l))throw new RangeError("Invalid time value");let c=t.match(WH).map(x=>{const g=x[0];if(g==="p"||g==="P"){const y=FH[g];return y(x,a.formatLong)}return x}).join("").match(HH).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const g=x[0];if(g==="'")return{isToken:!1,value:KH(x)};if(X4[g])return{isToken:!0,value:x};if(g.match(YH))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:x}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(x=>{if(!x.isToken)return x.value;const g=x.value;(BH(g)||qH(g))&&UH(g,t,String(e));const y=X4[g[0]];return y(l,g,a.localize,u)}).join("")}function KH(e){const t=e.match(GH);return t?t[1].replace(QH,"'"):e}const Qx=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState([]),[o,l]=p.useState([]),[c,u]=p.useState(!0),[d,h]=p.useState(null),[m,f]=p.useState("student");p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{e&&(x(),g())},[e]);const x=async()=>{if(e)try{const{data:T}=await st.from("user_roles").select("role").eq("user_id",e.id).single();T!=null&&T.role&&f(T.role)}catch(T){console.error("Error fetching user role:",T)}},g=async()=>{if(e)try{u(!0);const[T,A]=await Promise.all([pe.notifications.getTeacherNotifications(e.id),pe.notifications.getAdminNotifications(e.id)]);i(T||[]),l(A||[])}catch(T){console.error("Error fetching notifications:",T),s({variant:"destructive",title:"Error",description:T.message||"Failed to load notifications"})}finally{u(!1)}},y=async T=>{if(!(!e||d))try{h(T),await pe.notifications.markAsRead(T,e.id),i(A=>A.map(E=>E.id===T?{...E,is_read:!0,read_at:new Date().toISOString()}:E)),l(A=>A.map(E=>E.id===T?{...E,is_read:!0,read_at:new Date().toISOString()}:E)),s({title:"Notification marked as read",description:"Notification has been marked as read"})}catch(A){s({variant:"destructive",title:"Error",description:A.message||"Failed to mark notification as read"})}finally{h(null)}},b=async()=>{if(e)try{await pe.notifications.markAllAsRead(e.id),await g(),s({title:"All notifications marked as read",description:"All notifications have been marked as read"})}catch(T){s({variant:"destructive",title:"Error",description:T.message||"Failed to mark all notifications as read"})}},v=T=>{switch(T){case"urgent":return"bg-red-500";case"high":return"bg-orange-500";case"medium":return"bg-blue-500";case"low":return"bg-gray-500";default:return"bg-gray-500"}},w=T=>{switch(T){case"assignment":return"";case"grade":return"";case"announcement":return"";case"homework":return"";case"exam":return"";case"quiz":return"";case"message":return"";default:return""}},S=T=>{try{return Db(new Date(T),"MMM dd, yyyy 'at' hh:mm a")}catch{return T}},k=({notification:T})=>n.jsx(ae,{className:`mb-3 transition-all hover:shadow-md ${T.is_read?"opacity-75":"border-l-4 border-l-primary"}`,children:n.jsx(ie,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"text-2xl",children:w(T.type)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:`font-semibold ${T.is_read?"text-muted-foreground":""}`,children:T.title}),n.jsx(je,{variant:"outline",className:`${v(T.priority)} text-white text-xs`,children:T.priority})]}),n.jsx("p",{className:`text-sm ${T.is_read?"text-muted-foreground":""}`,children:T.message})]}),!T.is_read&&n.jsx(je,{variant:"default",className:"h-5 min-w-5 px-1.5 flex items-center justify-center",children:"New"})]}),n.jsxs("div",{className:"flex items-center justify-between mt-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:S(T.created_at)}),T.action_url&&n.jsxs(z,{variant:"ghost",size:"sm",className:"h-6 text-xs",onClick:()=>{var A;(A=T.action_url)!=null&&A.startsWith("http")?window.open(T.action_url,"_blank"):r(T.action_url||"#")},children:[n.jsx(PO,{className:"h-3 w-3 mr-1"}),"View"]})]}),!T.is_read&&n.jsxs(z,{variant:"ghost",size:"sm",className:"h-6 text-xs",onClick:()=>y(T.id),disabled:d===T.id,children:[d===T.id?n.jsx(Oe,{className:"h-3 w-3 animate-spin"}):n.jsx(Qt,{className:"h-3 w-3 mr-1"}),"Mark Read"]})]})]})]})})});if(t||c)return n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-primary"})});const N=[...a,...o].filter(T=>!T.is_read).length,P=m==="teacher"?Xn:m==="admin"?el:yn;return n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(P,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Notifications"}),n.jsx("p",{className:"text-muted-foreground",children:"Stay updated with announcements and updates"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[m==="teacher"&&n.jsxs(z,{variant:"default",onClick:()=>r("/dashboard/teacher/notifications/create"),className:"gap-2",children:[n.jsx(_n,{className:"h-4 w-4"}),"Create Notification"]}),N>0&&n.jsxs(z,{variant:"outline",onClick:b,className:"gap-2",children:[n.jsx(EO,{className:"h-4 w-4"}),"Mark All Read (",N,")"]})]})]})}),n.jsxs(Zs,{defaultValue:"teacher",className:"w-full",children:[n.jsxs(Ps,{className:"grid w-full grid-cols-2 mb-6",children:[n.jsxs(gr,{value:"teacher",className:"gap-2",children:[n.jsx(Oh,{className:"h-4 w-4"}),"Teacher Notifications",a.filter(T=>!T.is_read).length>0&&n.jsx(je,{variant:"default",className:"ml-2",children:a.filter(T=>!T.is_read).length})]}),n.jsxs(gr,{value:"admin",className:"gap-2",children:[n.jsx(Hs,{className:"h-4 w-4"}),"Admin Notifications",o.filter(T=>!T.is_read).length>0&&n.jsx(je,{variant:"default",className:"ml-2",children:o.filter(T=>!T.is_read).length})]})]}),n.jsx(Er,{value:"teacher",className:"space-y-4",children:n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Teacher Notifications"}),n.jsx(ze,{children:"Updates and announcements from your teachers"})]}),n.jsx(ie,{children:n.jsx(Pn,{className:"h-[600px]",children:a.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(f2,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4 opacity-50"}),n.jsx("p",{className:"text-muted-foreground",children:"No teacher notifications yet"})]}):n.jsx("div",{children:a.map(T=>n.jsx(k,{notification:T},T.id))})})})]})}),n.jsx(Er,{value:"admin",className:"space-y-4",children:n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Admin Notifications"}),n.jsx(ze,{children:"System announcements and important updates"})]}),n.jsx(ie,{children:n.jsx(Pn,{className:"h-[600px]",children:o.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(f2,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4 opacity-50"}),n.jsx("p",{className:"text-muted-foreground",children:"No admin notifications yet"})]}):n.jsx("div",{children:o.map(T=>n.jsx(k,{notification:T},T.id))})})})]})})]})]})})]})};var yp="Checkbox",[JH,Bse]=On(yp),[XH,Fb]=JH(yp);function ZH(e){const{__scopeCheckbox:t,checked:r,children:s,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=e,[m,f]=ai({prop:r,defaultProp:a??!1,onChange:c,caller:yp}),[x,g]=p.useState(null),[y,b]=p.useState(null),v=p.useRef(!1),w=x?!!o||!!x.closest("form"):!0,S={checked:m,disabled:i,setChecked:f,control:x,setControl:g,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:v,required:u,defaultChecked:Io(a)?!1:a,isFormControl:w,bubbleInput:y,setBubbleInput:b};return n.jsx(XH,{scope:t,...S,children:eW(h)?h(S):s})}var mC="CheckboxTrigger",fC=p.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...s},a)=>{const{control:i,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:m,isFormControl:f,bubbleInput:x}=Fb(mC,e),g=Yt(a,d),y=p.useRef(c);return p.useEffect(()=>{const b=i==null?void 0:i.form;if(b){const v=()=>h(y.current);return b.addEventListener("reset",v),()=>b.removeEventListener("reset",v)}},[i,h]),n.jsx(_t.button,{type:"button",role:"checkbox","aria-checked":Io(c)?"mixed":c,"aria-required":u,"data-state":yC(c),"data-disabled":l?"":void 0,disabled:l,value:o,...s,ref:g,onKeyDown:Ze(t,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:Ze(r,b=>{h(v=>Io(v)?!0:!v),x&&f&&(m.current=b.isPropagationStopped(),m.current||b.stopPropagation())})})});fC.displayName=mC;var Lb=p.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:s,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...h}=e;return n.jsx(ZH,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:s,form:d,value:c,internal_do_not_use_render:({isFormControl:m})=>n.jsxs(n.Fragment,{children:[n.jsx(fC,{...h,ref:t,__scopeCheckbox:r}),m&&n.jsx(vC,{__scopeCheckbox:r})]})})});Lb.displayName=yp;var pC="CheckboxIndicator",xC=p.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:s,...a}=e,i=Fb(pC,r);return n.jsx($n,{present:s||Io(i.checked)||i.checked===!0,children:n.jsx(_t.span,{"data-state":yC(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});xC.displayName=pC;var gC="CheckboxBubbleInput",vC=p.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:s,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:h,bubbleInput:m,setBubbleInput:f}=Fb(gC,e),x=Yt(r,f),g=cp(i),y=Xf(s);p.useEffect(()=>{const v=m;if(!v)return;const w=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(w,"checked").set,N=!a.current;if(g!==i&&k){const P=new Event("click",{bubbles:N});v.indeterminate=Io(i),k.call(v,Io(i)?!1:i),v.dispatchEvent(P)}},[m,g,i,a]);const b=p.useRef(Io(i)?!1:i);return n.jsx(_t.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??b.current,required:l,disabled:c,name:u,value:d,form:h,...t,tabIndex:-1,ref:x,style:{...t.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});vC.displayName=gC;function eW(e){return typeof e=="function"}function Io(e){return e==="indeterminate"}function yC(e){return Io(e)?"indeterminate":e?"checked":"unchecked"}const bp=p.forwardRef(({className:e,...t},r)=>n.jsx(Lb,{ref:r,className:qe("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n.jsx(xC,{className:qe("flex items-center justify-center text-current"),children:n.jsx($c,{className:"h-4 w-4"})})}));bp.displayName=Lb.displayName;const r5=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState(null),[o,l]=p.useState([]),[c,u]=p.useState([]),[d,h]=p.useState(new Set),[m,f]=p.useState("students"),[x,g]=p.useState(""),[y,b]=p.useState(""),[v,w]=p.useState("announcement"),[S,k]=p.useState("medium"),[N,P]=p.useState(""),[T,A]=p.useState(!1),[E,M]=p.useState(!1),[I,se]=p.useState("");p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{e&&ee()},[e]),p.useEffect(()=>{e&&a&&(a==="admin"?Y():F())},[e,a]);const ee=async()=>{if(e)try{const{data:B,error:W}=await st.from("user_roles").select("role").eq("user_id",e.id).maybeSingle();if(W&&W.code!=="PGRST116"){const{data:K}=await st.from("user_roles").select("role").eq("user_id",e.id).limit(1);if(K&&K.length>0){const X=K[0].role;i(X==="admin"?"admin":"teacher")}}else B&&i(B.role==="admin"?"admin":"teacher")}catch(B){console.error("Error fetching user role:",B)}},Y=async()=>{if(e)try{M(!0);const{data:B}=await st.from("profiles").select("*"),{data:W}=await st.from("user_roles").select("*"),{data:K}=await st.from("student_profiles").select("user_id, class_grade");if(!B||!W)return;const X=[],de=[];B.forEach(oe=>{const me=W.find(we=>we.user_id===oe.user_id),Ee=K==null?void 0:K.find(we=>we.user_id===oe.user_id);(me==null?void 0:me.role)==="student"?X.push({user_id:oe.user_id,full_name:oe.full_name||"Unknown Student",class_grade:Ee==null?void 0:Ee.class_grade,avatar_url:oe.avatar_url}):(me==null?void 0:me.role)==="teacher"&&de.push({user_id:oe.user_id,full_name:oe.full_name||"Unknown Teacher",avatar_url:oe.avatar_url})}),l(X),u(de)}catch(B){console.error("Error fetching users:",B),s({variant:"destructive",title:"Error",description:B.message||"Failed to fetch users"})}finally{M(!1)}},F=async()=>{if(e)try{M(!0);const B=await pe.teacher.getStudents(e.id),W=await Promise.all((B||[]).map(async K=>{const{data:X}=await st.from("profiles").select("full_name, avatar_url").eq("user_id",K.user_id).single();return{user_id:K.user_id,full_name:(X==null?void 0:X.full_name)||"Unknown Student",class_grade:K.class_grade,avatar_url:X==null?void 0:X.avatar_url}}));l(W)}catch(B){console.error("Error fetching students:",B),s({variant:"destructive",title:"Error",description:B.message||"Failed to fetch students"})}finally{M(!1)}},ne=p.useCallback(B=>{h(W=>{const K=new Set(W);return K.has(B)?K.delete(B):K.add(B),K})},[]),q=p.useMemo(()=>{if(!a)return[];const B=a==="admin";let W=[];return B?m==="students"?W=o.map(K=>({...K,type:"student"})):m==="teachers"?W=c.map(K=>({...K,type:"teacher"})):W=[...o.map(K=>({...K,type:"student"})),...c.map(K=>({...K,type:"teacher"}))]:W=o.map(K=>({...K,type:"student"})),I.trim()?W.filter(K=>K.full_name.toLowerCase().includes(I.toLowerCase())):W},[o,c,m,I,a]),V=p.useCallback(()=>{const B=q;d.size===B.length&&B.length>0?h(new Set):h(new Set(B.map(W=>W.user_id)))},[d.size,q]),_=async B=>{if(B.preventDefault(),!x.trim()||!y.trim()){s({variant:"destructive",title:"Error",description:"Title and message are required"});return}if(d.size===0){s({variant:"destructive",title:"Error",description:"Please select at least one recipient"});return}if(e)try{A(!0);const W=Array.from(d).map(de=>pe.notifications.create({user_id:de,title:x.trim(),message:y.trim(),type:v,priority:S,action_url:N.trim()||void 0,created_by:e.id}));await Promise.all(W);const K=d.size,X=a==="admin"?`${K} recipient(s) (${m})`:`${K} student(s)`;s({title:"Success",description:`Notification sent to ${X}`}),g(""),b(""),P(""),h(new Set),w("announcement"),k("medium"),f("students"),r(a==="admin"?"/dashboard/admin":"/dashboard/teacher/notifications")}catch(W){s({variant:"destructive",title:"Error",description:W.message||"Failed to send notifications"})}finally{A(!1)}},U=q.length>0&&d.size===q.length;if(t)return n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-primary"})});if(t||!a)return n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-primary"})});const H=a==="admin"?el:Xn,O=a==="admin";return n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(H,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Create Notification"}),n.jsx("p",{className:"text-muted-foreground",children:O?"Send notifications to teachers and students":"Send notifications to your students"})]}),n.jsxs("form",{onSubmit:_,className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx("div",{className:"lg:col-span-2 space-y-6",children:n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Notification Details"}),n.jsx(ze,{children:"Enter the notification title and message"})]}),n.jsxs(ie,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"title",children:"Title *"}),n.jsx(Ve,{id:"title",value:x,onChange:B=>g(B.target.value),placeholder:"e.g., New Assignment Available",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"message",children:"Message *"}),n.jsx(kr,{id:"message",value:y,onChange:B=>b(B.target.value),placeholder:"Enter the notification message...",rows:6,required:!0})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"type",children:"Type"}),n.jsxs(Nt,{value:v,onValueChange:w,children:[n.jsx(wt,{id:"type",children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"announcement",children:"Announcement"}),n.jsx(re,{value:"assignment",children:"Assignment"}),n.jsx(re,{value:"homework",children:"Homework"}),n.jsx(re,{value:"exam",children:"Exam"}),n.jsx(re,{value:"quiz",children:"Quiz"}),n.jsx(re,{value:"grade",children:"Grade"}),n.jsx(re,{value:"message",children:"Message"}),n.jsx(re,{value:"system",children:"System"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"priority",children:"Priority"}),n.jsxs(Nt,{value:S,onValueChange:k,children:[n.jsx(wt,{id:"priority",children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"low",children:"Low"}),n.jsx(re,{value:"medium",children:"Medium"}),n.jsx(re,{value:"high",children:"High"}),n.jsx(re,{value:"urgent",children:"Urgent"})]})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"actionUrl",children:"Action URL (Optional)"}),n.jsx(Ve,{id:"actionUrl",value:N,onChange:B=>P(B.target.value),placeholder:"e.g., /dashboard/student/exams"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"URL to navigate when notification is clicked"})]})]})]})}),n.jsx("div",{className:"space-y-6",children:n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx(fe,{children:O?"Select Recipients":"Select Students"}),n.jsxs(ze,{children:[d.size," selected"]})]}),n.jsx(z,{type:"button",variant:"outline",size:"sm",onClick:V,children:U?"Deselect All":"Select All"})]}),O&&n.jsx(Zs,{value:m,onValueChange:B=>{f(B),h(new Set),se("")},children:n.jsxs(Ps,{className:"grid w-full grid-cols-3",children:[n.jsxs(gr,{value:"students",children:[n.jsx(vn,{className:"h-4 w-4 mr-2"}),"Students"]}),n.jsxs(gr,{value:"teachers",children:[n.jsx(pa,{className:"h-4 w-4 mr-2"}),"Teachers"]}),n.jsxs(gr,{value:"both",children:[n.jsx(Av,{className:"h-4 w-4 mr-2"}),"Both"]})]})})]}),n.jsx(ie,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsx(Ve,{placeholder:O?"Search recipients...":"Search students...",value:I,onChange:B=>se(B.target.value),className:"mb-3"}),n.jsx(Pn,{className:"h-[500px]",children:E?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(Oe,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):q.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(vn,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"No recipients found"})]}):n.jsx("div",{className:"space-y-2",children:q.map(B=>n.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-accent",children:[n.jsx(bp,{checked:d.has(B.user_id),onCheckedChange:()=>ne(B.user_id)}),n.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[B.type==="teacher"&&n.jsx(je,{variant:"outline",className:"text-xs",children:"Teacher"}),B.type==="student"&&n.jsx(je,{variant:"secondary",className:"text-xs",children:"Student"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium truncate",children:B.full_name}),"class_grade"in B&&B.class_grade&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Grade ",B.class_grade]})]})]})]},B.user_id))})})]})})]})})]}),n.jsxs("div",{className:"flex items-center justify-end gap-3",children:[n.jsx(z,{type:"button",variant:"outline",onClick:()=>{r(O?"/dashboard/admin":"/dashboard/teacher/notifications")},children:"Cancel"}),n.jsx(z,{type:"submit",disabled:T||d.size===0,children:T?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx($i,{className:"h-4 w-4 mr-2"}),"Send to ",d.size," ",O?m==="both"?"Recipient(s)":m==="teachers"?"Teacher(s)":"Student(s)":"Student(s)"]})})]})]})]})})]})};var wp="Switch",[tW,Use]=On(wp),[rW,nW]=tW(wp),bC=p.forwardRef((e,t)=>{const{__scopeSwitch:r,name:s,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=e,[m,f]=p.useState(null),x=Yt(t,w=>f(w)),g=p.useRef(!1),y=m?d||!!m.closest("form"):!0,[b,v]=ai({prop:a,defaultProp:i??!1,onChange:u,caller:wp});return n.jsxs(rW,{scope:r,checked:b,disabled:l,children:[n.jsx(_t.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":SC(b),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:x,onClick:Ze(e.onClick,w=>{v(S=>!S),y&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})}),y&&n.jsx(NC,{control:m,bubbles:!g.current,name:s,value:c,checked:b,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});bC.displayName=wp;var wC="SwitchThumb",jC=p.forwardRef((e,t)=>{const{__scopeSwitch:r,...s}=e,a=nW(wC,r);return n.jsx(_t.span,{"data-state":SC(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})});jC.displayName=wC;var sW="SwitchBubbleInput",NC=p.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:s=!0,...a},i)=>{const o=p.useRef(null),l=Yt(o,i),c=cp(r),u=Xf(t);return p.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&f){const x=new Event("click",{bubbles:s});f.call(d,r),d.dispatchEvent(x)}},[c,r,s]),n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});NC.displayName=sW;function SC(e){return e?"checked":"unchecked"}var kC=bC,aW=jC;const hl=p.forwardRef(({className:e,...t},r)=>n.jsx(kC,{className:qe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:r,children:n.jsx(aW,{className:qe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));hl.displayName=kC.displayName;var iW="Separator",n5="horizontal",oW=["horizontal","vertical"],_C=p.forwardRef((e,t)=>{const{decorative:r,orientation:s=n5,...a}=e,i=lW(s)?s:n5,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return n.jsx(_t.div,{"data-orientation":i,...l,...a,ref:t})});_C.displayName=iW;function lW(e){return oW.includes(e)}var CC=_C;const zb=p.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...s},a)=>n.jsx(CC,{ref:a,decorative:r,orientation:t,className:qe("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...s}));zb.displayName=CC.displayName;function cW({onLanguageChange:e,defaultLanguage:t="en"}){const[r,s]=p.useState(t),[a,i]=p.useState([]),[o,l]=p.useState(!1),{toast:c}=Ut();p.useEffect(()=>{u()},[]);const u=async()=>{try{l(!0);const m=await pe.translation.getSupportedLanguages();i(m.languages||[])}catch{c({title:"Error",description:"Failed to load languages",variant:"destructive"})}finally{l(!1)}},d=m=>{s(m),e==null||e(m),localStorage.setItem("preferred_language",m),c({title:"Language changed",description:`Interface language set to ${m.toUpperCase()}`})},h=[{code:"en",name:"English"},{code:"hi",name:"Hindi"},{code:"es",name:"Spanish"},{code:"fr",name:"French"},{code:"de",name:"German"},{code:"zh",name:"Chinese"},{code:"ja",name:"Japanese"},{code:"ar",name:"Arabic"}];return n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(nh,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs(Nt,{value:r,onValueChange:d,disabled:o,children:[n.jsx(wt,{className:"w-[180px]",children:n.jsx(St,{placeholder:"Select language"})}),n.jsxs(jt,{children:[h.map(m=>n.jsxs(re,{value:m.code,children:[m.name," (",m.code.toUpperCase(),")"]},m.code)),a.filter(m=>!h.find(f=>f.code===m.language)).slice(0,10).map(m=>n.jsxs(re,{value:m.language,children:[m.name||m.language," (",m.language.toUpperCase(),")"]},m.language))]})]})]})}const s5=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState(""),[o,l]=p.useState(""),[c,u]=p.useState(""),[d,h]=p.useState(""),[m,f]=p.useState(!0),[x,g]=p.useState(!0),[y,b]=p.useState(!1),[v,w]=p.useState("light"),[S,k]=p.useState("en"),[N,P]=p.useState(!1);p.useEffect(()=>{var M,I;!t&&!e?r("/login"):e&&(i(((M=e.user_metadata)==null?void 0:M.full_name)||""),l(e.email||""),h(((I=e.user_metadata)==null?void 0:I.location)||""),k(localStorage.getItem("preferred_language")||"en"),P(localStorage.getItem("low_bandwidth_mode")==="true"),T())},[e,t,r]);const T=async()=>{if(e)try{const{data:M,error:I}=await st.from("student_profiles").select("parent_phone").eq("user_id",e.id).single();if(I&&I.code!=="PGRST116"){console.error("Error fetching profile:",I);return}M&&u(M.parent_phone||"")}catch(M){console.error("Error fetching profile:",M)}},A=async()=>{if(e)try{const{error:M}=await st.auth.updateUser({data:{full_name:a}});if(M)throw M;const{error:I}=await st.from("student_profiles").update({parent_phone:c||null,updated_at:new Date().toISOString()}).eq("user_id",e.id);if(I&&console.error("Profile update error:",I),d){const{error:se}=await st.auth.updateUser({data:{location:d}});se&&console.error("Error updating location in metadata:",se)}s({title:"Settings saved",description:"Your settings have been updated successfully."})}catch(M){s({variant:"destructive",title:"Error",description:M.message||"Failed to save settings"})}};if(t)return n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx("p",{className:"text-muted-foreground",children:"Loading..."})});const E=M=>M.split(" ").map(I=>I[0]).join("").toUpperCase();return n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(yn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Settings"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage your account settings and preferences"})]}),n.jsxs(ae,{className:"mb-6",children:[n.jsxs(he,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ii,{className:"h-5 w-5"}),n.jsx(fe,{children:"Profile Information"})]}),n.jsx(ze,{children:"Update your personal information"})]}),n.jsxs(ie,{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsxs(an,{className:"h-20 w-20",children:[n.jsx(os,{src:""}),n.jsx(on,{className:"bg-primary text-primary-foreground text-xl",children:a?E(a):"U"})]}),n.jsxs("div",{children:[n.jsxs(z,{variant:"outline",size:"sm",className:"gap-2",children:[n.jsx(CO,{className:"h-4 w-4"}),"Change Photo"]}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"JPG, GIF or PNG. Max size of 2MB."})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"fullName",children:"Full Name"}),n.jsx(Ve,{id:"fullName",value:a,onChange:M=>i(M.target.value),placeholder:"John Doe"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"email",children:"Email"}),n.jsx(Ve,{id:"email",type:"email",value:o,onChange:M=>l(M.target.value),placeholder:"john@example.com"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"phone",children:"Phone Number"}),n.jsx(Ve,{id:"phone",type:"tel",value:c,onChange:M=>u(M.target.value),placeholder:"+1 (555) 000-0000"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"location",children:"Location"}),n.jsx(Ve,{id:"location",value:d,onChange:M=>h(M.target.value),placeholder:"City, Country"})]})]})]})]}),n.jsxs(ae,{className:"mb-6",children:[n.jsxs(he,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Oh,{className:"h-5 w-5"}),n.jsx(fe,{children:"Notifications"})]}),n.jsx(ze,{children:"Manage how you receive notifications"})]}),n.jsxs(ie,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(be,{htmlFor:"notifications",children:"Enable Notifications"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications about your learning progress"})]}),n.jsx(hl,{id:"notifications",checked:m,onCheckedChange:f})]}),n.jsx(zb,{}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(be,{htmlFor:"email-notifications",children:"Email Notifications"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]}),n.jsx(hl,{id:"email-notifications",checked:x,onCheckedChange:g,disabled:!m})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(be,{htmlFor:"push-notifications",children:"Push Notifications"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive push notifications on your device"})]}),n.jsx(hl,{id:"push-notifications",checked:y,onCheckedChange:b,disabled:!m})]})]})]}),n.jsxs(ae,{className:"mb-6",children:[n.jsxs(he,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx($O,{className:"h-5 w-5"}),n.jsx(fe,{children:"Appearance"})]}),n.jsx(ze,{children:"Customize the look and feel of your dashboard"})]}),n.jsx(ie,{className:"space-y-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"theme",children:"Theme"}),n.jsxs(Nt,{value:v,onValueChange:w,children:[n.jsx(wt,{id:"theme",children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"light",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(BO,{className:"h-4 w-4"}),"Light"]})}),n.jsx(re,{value:"dark",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(zO,{className:"h-4 w-4"}),"Dark"]})}),n.jsx(re,{value:"system",children:"System"})]})]})]})})]}),n.jsxs(ae,{className:"mb-6",children:[n.jsxs(he,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(x2,{className:"h-5 w-5"}),n.jsx(fe,{children:"Language & Region"})]}),n.jsx(ze,{children:"Choose your preferred language"})]}),n.jsxs(ie,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Language"}),n.jsx(cW,{defaultLanguage:S,onLanguageChange:M=>{k(M),localStorage.setItem("preferred_language",M)}})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(be,{htmlFor:"low-bandwidth",children:"Low-Bandwidth Mode"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Optimize for slower connections by reducing data usage"})]}),n.jsx(hl,{id:"low-bandwidth",checked:N,onCheckedChange:M=>{P(M),localStorage.setItem("low_bandwidth_mode",M.toString()),M?document.documentElement.setAttribute("data-low-bandwidth","true"):document.documentElement.removeAttribute("data-low-bandwidth")}})]})]})]}),n.jsxs(ae,{className:"mb-6",children:[n.jsxs(he,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(x2,{className:"h-5 w-5"}),n.jsx(fe,{children:"Access & Inclusion"})]}),n.jsx(ze,{children:"Accessibility and performance settings"})]}),n.jsxs(ie,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(be,{htmlFor:"screen-reader",children:"Screen Reader Support"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Enhanced ARIA labels and semantic HTML"})]}),n.jsx(hl,{id:"screen-reader",defaultChecked:!0,disabled:!0})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(be,{htmlFor:"low-bandwidth-access",children:"Low-Bandwidth Optimization"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Compress images and reduce data usage"})]}),n.jsx(hl,{id:"low-bandwidth-access",checked:N,onCheckedChange:M=>{P(M),localStorage.setItem("low_bandwidth_mode",M.toString())}})]})]})]}),n.jsxs(ae,{className:"mb-6",children:[n.jsxs(he,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(sh,{className:"h-5 w-5"}),n.jsx(fe,{children:"Privacy & Security"})]}),n.jsx(ze,{children:"Manage your account security settings"})]}),n.jsxs(ie,{className:"space-y-4",children:[n.jsx(z,{variant:"outline",className:"w-full justify-start",children:"Change Password"}),n.jsx(z,{variant:"outline",className:"w-full justify-start",children:"Two-Factor Authentication"}),n.jsx(z,{variant:"outline",className:"w-full justify-start text-destructive",children:"Delete Account"})]})]}),n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx(z,{variant:"outline",onClick:()=>r("/dashboard/student"),children:"Cancel"}),n.jsxs(z,{onClick:A,className:"gap-2",children:[n.jsx(ti,{className:"h-4 w-4"}),"Save Changes"]})]})]})})]})};function a5(e){const t=[],r=String(e||"");let s=r.indexOf(","),a=0,i=!1;for(;!i;){s===-1&&(s=r.length,i=!0);const o=r.slice(a,s).trim();(o||!i)&&t.push(o),a=s+1,s=r.indexOf(",",a)}return t}function uW(e,t){const r={};return(e[e.length-1]===""?[...e,""]:e).join((r.padRight?" ":"")+","+(r.padLeft===!1?"":" ")).trim()}const dW=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,hW=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,mW={};function i5(e,t){return(mW.jsx?hW:dW).test(e)}const fW=/[ \t\n\f\r]/g;function pW(e){return typeof e=="object"?e.type==="text"?o5(e.value):!1:o5(e)}function o5(e){return e.replace(fW,"")===""}class $h{constructor(t,r,s){this.normal=r,this.property=t,s&&(this.space=s)}}$h.prototype.normal={};$h.prototype.property={};$h.prototype.space=void 0;function EC(e,t){const r={},s={};for(const a of e)Object.assign(r,a.property),Object.assign(s,a.normal);return new $h(r,s,t)}function gh(e){return e.toLowerCase()}class Rs{constructor(t,r){this.attribute=r,this.property=t}}Rs.prototype.attribute="";Rs.prototype.booleanish=!1;Rs.prototype.boolean=!1;Rs.prototype.commaOrSpaceSeparated=!1;Rs.prototype.commaSeparated=!1;Rs.prototype.defined=!1;Rs.prototype.mustUseProperty=!1;Rs.prototype.number=!1;Rs.prototype.overloadedBoolean=!1;Rs.prototype.property="";Rs.prototype.spaceSeparated=!1;Rs.prototype.space=void 0;let xW=0;const ir=ec(),fn=ec(),g1=ec(),Xe=ec(),Ir=ec(),Wc=ec(),Is=ec();function ec(){return 2**++xW}const v1=Object.freeze(Object.defineProperty({__proto__:null,boolean:ir,booleanish:fn,commaOrSpaceSeparated:Is,commaSeparated:Wc,number:Xe,overloadedBoolean:g1,spaceSeparated:Ir},Symbol.toStringTag,{value:"Module"})),Yx=Object.keys(v1);class $b extends Rs{constructor(t,r,s,a){let i=-1;if(super(t,r),l5(this,"space",a),typeof s=="number")for(;++i<Yx.length;){const o=Yx[i];l5(this,Yx[i],(s&v1[o])===v1[o])}}}$b.prototype.defined=!0;function l5(e,t,r){r&&(e[t]=r)}function Wu(e){const t={},r={};for(const[s,a]of Object.entries(e.properties)){const i=new $b(s,e.transform(e.attributes||{},s),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(s)&&(i.mustUseProperty=!0),t[s]=i,r[gh(s)]=s,r[gh(i.attribute)]=s}return new $h(t,r,e.space)}const TC=Wu({properties:{ariaActiveDescendant:null,ariaAtomic:fn,ariaAutoComplete:null,ariaBusy:fn,ariaChecked:fn,ariaColCount:Xe,ariaColIndex:Xe,ariaColSpan:Xe,ariaControls:Ir,ariaCurrent:null,ariaDescribedBy:Ir,ariaDetails:null,ariaDisabled:fn,ariaDropEffect:Ir,ariaErrorMessage:null,ariaExpanded:fn,ariaFlowTo:Ir,ariaGrabbed:fn,ariaHasPopup:null,ariaHidden:fn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ir,ariaLevel:Xe,ariaLive:null,ariaModal:fn,ariaMultiLine:fn,ariaMultiSelectable:fn,ariaOrientation:null,ariaOwns:Ir,ariaPlaceholder:null,ariaPosInSet:Xe,ariaPressed:fn,ariaReadOnly:fn,ariaRelevant:null,ariaRequired:fn,ariaRoleDescription:Ir,ariaRowCount:Xe,ariaRowIndex:Xe,ariaRowSpan:Xe,ariaSelected:fn,ariaSetSize:Xe,ariaSort:null,ariaValueMax:Xe,ariaValueMin:Xe,ariaValueNow:Xe,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function AC(e,t){return t in e?e[t]:t}function PC(e,t){return AC(e,t.toLowerCase())}const gW=Wu({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Wc,acceptCharset:Ir,accessKey:Ir,action:null,allow:null,allowFullScreen:ir,allowPaymentRequest:ir,allowUserMedia:ir,alt:null,as:null,async:ir,autoCapitalize:null,autoComplete:Ir,autoFocus:ir,autoPlay:ir,blocking:Ir,capture:null,charSet:null,checked:ir,cite:null,className:Ir,cols:Xe,colSpan:null,content:null,contentEditable:fn,controls:ir,controlsList:Ir,coords:Xe|Wc,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ir,defer:ir,dir:null,dirName:null,disabled:ir,download:g1,draggable:fn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ir,formTarget:null,headers:Ir,height:Xe,hidden:g1,high:Xe,href:null,hrefLang:null,htmlFor:Ir,httpEquiv:Ir,id:null,imageSizes:null,imageSrcSet:null,inert:ir,inputMode:null,integrity:null,is:null,isMap:ir,itemId:null,itemProp:Ir,itemRef:Ir,itemScope:ir,itemType:Ir,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ir,low:Xe,manifest:null,max:null,maxLength:Xe,media:null,method:null,min:null,minLength:Xe,multiple:ir,muted:ir,name:null,nonce:null,noModule:ir,noValidate:ir,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ir,optimum:Xe,pattern:null,ping:Ir,placeholder:null,playsInline:ir,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ir,referrerPolicy:null,rel:Ir,required:ir,reversed:ir,rows:Xe,rowSpan:Xe,sandbox:Ir,scope:null,scoped:ir,seamless:ir,selected:ir,shadowRootClonable:ir,shadowRootDelegatesFocus:ir,shadowRootMode:null,shape:null,size:Xe,sizes:null,slot:null,span:Xe,spellCheck:fn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Xe,step:null,style:null,tabIndex:Xe,target:null,title:null,translate:null,type:null,typeMustMatch:ir,useMap:null,value:fn,width:Xe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ir,axis:null,background:null,bgColor:null,border:Xe,borderColor:null,bottomMargin:Xe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ir,declare:ir,event:null,face:null,frame:null,frameBorder:null,hSpace:Xe,leftMargin:Xe,link:null,longDesc:null,lowSrc:null,marginHeight:Xe,marginWidth:Xe,noResize:ir,noHref:ir,noShade:ir,noWrap:ir,object:null,profile:null,prompt:null,rev:null,rightMargin:Xe,rules:null,scheme:null,scrolling:fn,standby:null,summary:null,text:null,topMargin:Xe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Xe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ir,disableRemotePlayback:ir,prefix:null,property:null,results:Xe,security:null,unselectable:null},space:"html",transform:PC}),vW=Wu({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Is,accentHeight:Xe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Xe,amplitude:Xe,arabicForm:null,ascent:Xe,attributeName:null,attributeType:null,azimuth:Xe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Xe,by:null,calcMode:null,capHeight:Xe,className:Ir,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Xe,diffuseConstant:Xe,direction:null,display:null,dur:null,divisor:Xe,dominantBaseline:null,download:ir,dx:null,dy:null,edgeMode:null,editable:null,elevation:Xe,enableBackground:null,end:null,event:null,exponent:Xe,externalResourcesRequired:null,fill:null,fillOpacity:Xe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Wc,g2:Wc,glyphName:Wc,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Xe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Xe,horizOriginX:Xe,horizOriginY:Xe,id:null,ideographic:Xe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Xe,k:Xe,k1:Xe,k2:Xe,k3:Xe,k4:Xe,kernelMatrix:Is,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Xe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Xe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Xe,overlineThickness:Xe,paintOrder:null,panose1:null,path:null,pathLength:Xe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ir,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Xe,pointsAtY:Xe,pointsAtZ:Xe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Is,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Is,rev:Is,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Is,requiredFeatures:Is,requiredFonts:Is,requiredFormats:Is,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Xe,specularExponent:Xe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Xe,strikethroughThickness:Xe,string:null,stroke:null,strokeDashArray:Is,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Xe,strokeOpacity:Xe,strokeWidth:null,style:null,surfaceScale:Xe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Is,tabIndex:Xe,tableValues:null,target:null,targetX:Xe,targetY:Xe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Is,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Xe,underlineThickness:Xe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Xe,values:null,vAlphabetic:Xe,vMathematical:Xe,vectorEffect:null,vHanging:Xe,vIdeographic:Xe,version:null,vertAdvY:Xe,vertOriginX:Xe,vertOriginY:Xe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Xe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:AC}),RC=Wu({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),MC=Wu({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:PC}),OC=Wu({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),yW={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},bW=/[A-Z]/g,c5=/-[a-z]/g,wW=/^data[-\w.:]+$/i;function IC(e,t){const r=gh(t);let s=t,a=Rs;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&wW.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(c5,NW);s="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!c5.test(i)){let o=i.replace(bW,jW);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}a=$b}return new a(s,t)}function jW(e){return"-"+e.toLowerCase()}function NW(e){return e.charAt(1).toUpperCase()}const DC=EC([TC,gW,RC,MC,OC],"html"),jp=EC([TC,vW,RC,MC,OC],"svg");function u5(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function SW(e){return e.join(" ").trim()}var qb={},d5=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,kW=/\n/g,_W=/^\s*/,CW=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,EW=/^:\s*/,TW=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,AW=/^[;\s]*/,PW=/^\s+|\s+$/g,RW=`
`,h5="/",m5="*",xl="",MW="comment",OW="declaration";function IW(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var r=1,s=1;function a(x){var g=x.match(kW);g&&(r+=g.length);var y=x.lastIndexOf(RW);s=~y?x.length-y:s+x.length}function i(){var x={line:r,column:s};return function(g){return g.position=new o(x),u(),g}}function o(x){this.start=x,this.end={line:r,column:s},this.source=t.source}o.prototype.content=e;function l(x){var g=new Error(t.source+":"+r+":"+s+": "+x);if(g.reason=x,g.filename=t.source,g.line=r,g.column=s,g.source=e,!t.silent)throw g}function c(x){var g=x.exec(e);if(g){var y=g[0];return a(y),e=e.slice(y.length),g}}function u(){c(_W)}function d(x){var g;for(x=x||[];g=h();)g!==!1&&x.push(g);return x}function h(){var x=i();if(!(h5!=e.charAt(0)||m5!=e.charAt(1))){for(var g=2;xl!=e.charAt(g)&&(m5!=e.charAt(g)||h5!=e.charAt(g+1));)++g;if(g+=2,xl===e.charAt(g-1))return l("End of comment missing");var y=e.slice(2,g-2);return s+=2,a(y),e=e.slice(g),s+=2,x({type:MW,comment:y})}}function m(){var x=i(),g=c(CW);if(g){if(h(),!c(EW))return l("property missing ':'");var y=c(TW),b=x({type:OW,property:f5(g[0].replace(d5,xl)),value:y?f5(y[0].replace(d5,xl)):xl});return c(AW),b}}function f(){var x=[];d(x);for(var g;g=m();)g!==!1&&(x.push(g),d(x));return x}return u(),f()}function f5(e){return e?e.replace(PW,xl):xl}var DW=IW,FW=Ld&&Ld.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qb,"__esModule",{value:!0});qb.default=zW;const LW=FW(DW);function zW(e,t){let r=null;if(!e||typeof e!="string")return r;const s=(0,LW.default)(e),a=typeof t=="function";return s.forEach(i=>{if(i.type!=="declaration")return;const{property:o,value:l}=i;a?t(o,l,i):l&&(r=r||{},r[o]=l)}),r}var Np={};Object.defineProperty(Np,"__esModule",{value:!0});Np.camelCase=void 0;var $W=/^--[a-zA-Z0-9_-]+$/,qW=/-([a-z])/g,BW=/^[^-]+$/,UW=/^-(webkit|moz|ms|o|khtml)-/,VW=/^-(ms)-/,HW=function(e){return!e||BW.test(e)||$W.test(e)},WW=function(e,t){return t.toUpperCase()},p5=function(e,t){return"".concat(t,"-")},GW=function(e,t){return t===void 0&&(t={}),HW(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(VW,p5):e=e.replace(UW,p5),e.replace(qW,WW))};Np.camelCase=GW;var QW=Ld&&Ld.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},YW=QW(qb),KW=Np;function y1(e,t){var r={};return!e||typeof e!="string"||(0,YW.default)(e,function(s,a){s&&a&&(r[(0,KW.camelCase)(s,t)]=a)}),r}y1.default=y1;var JW=y1;const XW=Ef(JW),FC=LC("end"),Bb=LC("start");function LC(e){return t;function t(r){const s=r&&r.position&&r.position[e]||{};if(typeof s.line=="number"&&s.line>0&&typeof s.column=="number"&&s.column>0)return{line:s.line,column:s.column,offset:typeof s.offset=="number"&&s.offset>-1?s.offset:void 0}}}function ZW(e){const t=Bb(e),r=FC(e);if(t&&r)return{start:t,end:r}}function Md(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?x5(e.position):"start"in e||"end"in e?x5(e):"line"in e||"column"in e?b1(e):""}function b1(e){return g5(e&&e.line)+":"+g5(e&&e.column)}function x5(e){return b1(e&&e.start)+"-"+b1(e&&e.end)}function g5(e){return e&&typeof e=="number"?e:1}class Zn extends Error{constructor(t,r,s){super(),typeof r=="string"&&(s=r,r=void 0);let a="",i={},o=!1;if(r&&("line"in r&&"column"in r?i={place:r}:"start"in r&&"end"in r?i={place:r}:"type"in r?i={ancestors:[r],place:r.position}:i={...r}),typeof t=="string"?a=t:!i.cause&&t&&(o=!0,a=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof s=="string"){const c=s.indexOf(":");c===-1?i.ruleId=s:(i.source=s.slice(0,c),i.ruleId=s.slice(c+1))}if(!i.place&&i.ancestors&&i.ancestors){const c=i.ancestors[i.ancestors.length-1];c&&(i.place=c.position)}const l=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=l?l.line:void 0,this.name=Md(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=o&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Zn.prototype.file="";Zn.prototype.name="";Zn.prototype.reason="";Zn.prototype.message="";Zn.prototype.stack="";Zn.prototype.column=void 0;Zn.prototype.line=void 0;Zn.prototype.ancestors=void 0;Zn.prototype.cause=void 0;Zn.prototype.fatal=void 0;Zn.prototype.place=void 0;Zn.prototype.ruleId=void 0;Zn.prototype.source=void 0;const Ub={}.hasOwnProperty,eG=new Map,tG=/[A-Z]/g,rG=new Set(["table","tbody","thead","tfoot","tr"]),nG=new Set(["td","th"]),zC="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function sG(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const r=t.filePath||void 0;let s;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");s=hG(r,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");s=dG(r,t.jsx,t.jsxs)}const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:s,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?jp:DC,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=$C(a,e,void 0);return i&&typeof i!="string"?i:a.create(e,a.Fragment,{children:i||void 0},void 0)}function $C(e,t,r){if(t.type==="element")return aG(e,t,r);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return iG(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return lG(e,t,r);if(t.type==="mdxjsEsm")return oG(e,t);if(t.type==="root")return cG(e,t,r);if(t.type==="text")return uG(e,t)}function aG(e,t,r){const s=e.schema;let a=s;t.tagName.toLowerCase()==="svg"&&s.space==="html"&&(a=jp,e.schema=a),e.ancestors.push(t);const i=BC(e,t.tagName,!1),o=mG(e,t);let l=Hb(e,t);return rG.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!pW(c):!0})),qC(e,o,i,t),Vb(o,l),e.ancestors.pop(),e.schema=s,e.create(t,i,o,r)}function iG(e,t){if(t.data&&t.data.estree&&e.evaluater){const s=t.data.estree.body[0];return s.type,e.evaluater.evaluateExpression(s.expression)}vh(e,t.position)}function oG(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);vh(e,t.position)}function lG(e,t,r){const s=e.schema;let a=s;t.name==="svg"&&s.space==="html"&&(a=jp,e.schema=a),e.ancestors.push(t);const i=t.name===null?e.Fragment:BC(e,t.name,!0),o=fG(e,t),l=Hb(e,t);return qC(e,o,i,t),Vb(o,l),e.ancestors.pop(),e.schema=s,e.create(t,i,o,r)}function cG(e,t,r){const s={};return Vb(s,Hb(e,t)),e.create(t,e.Fragment,s,r)}function uG(e,t){return t.value}function qC(e,t,r,s){typeof r!="string"&&r!==e.Fragment&&e.passNode&&(t.node=s)}function Vb(e,t){if(t.length>0){const r=t.length>1?t:t[0];r&&(e.children=r)}}function dG(e,t,r){return s;function s(a,i,o,l){const u=Array.isArray(o.children)?r:t;return l?u(i,o,l):u(i,o)}}function hG(e,t){return r;function r(s,a,i,o){const l=Array.isArray(i.children),c=Bb(s);return t(a,i,o,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function mG(e,t){const r={};let s,a;for(a in t.properties)if(a!=="children"&&Ub.call(t.properties,a)){const i=pG(e,a,t.properties[a]);if(i){const[o,l]=i;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&nG.has(t.tagName)?s=l:r[o]=l}}if(s){const i=r.style||(r.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=s}return r}function fG(e,t){const r={};for(const s of t.attributes)if(s.type==="mdxJsxExpressionAttribute")if(s.data&&s.data.estree&&e.evaluater){const i=s.data.estree.body[0];i.type;const o=i.expression;o.type;const l=o.properties[0];l.type,Object.assign(r,e.evaluater.evaluateExpression(l.argument))}else vh(e,t.position);else{const a=s.name;let i;if(s.value&&typeof s.value=="object")if(s.value.data&&s.value.data.estree&&e.evaluater){const l=s.value.data.estree.body[0];l.type,i=e.evaluater.evaluateExpression(l.expression)}else vh(e,t.position);else i=s.value===null?!0:s.value;r[a]=i}return r}function Hb(e,t){const r=[];let s=-1;const a=e.passKeys?new Map:eG;for(;++s<t.children.length;){const i=t.children[s];let o;if(e.passKeys){const c=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(c){const u=a.get(c)||0;o=c+"-"+u,a.set(c,u+1)}}const l=$C(e,i,o);l!==void 0&&r.push(l)}return r}function pG(e,t,r){const s=IC(e.schema,t);if(!(r==null||typeof r=="number"&&Number.isNaN(r))){if(Array.isArray(r)&&(r=s.commaSeparated?uW(r):SW(r)),s.property==="style"){let a=typeof r=="object"?r:xG(e,String(r));return e.stylePropertyNameCase==="css"&&(a=gG(a)),["style",a]}return[e.elementAttributeNameCase==="react"&&s.space?yW[s.property]||s.property:s.attribute,r]}}function xG(e,t){try{return XW(t,{reactCompat:!0})}catch(r){if(e.ignoreInvalidStyle)return{};const s=r,a=new Zn("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=e.filePath||void 0,a.url=zC+"#cannot-parse-style-attribute",a}}function BC(e,t,r){let s;if(!r)s={type:"Literal",value:t};else if(t.includes(".")){const a=t.split(".");let i=-1,o;for(;++i<a.length;){const l=i5(a[i])?{type:"Identifier",name:a[i]}:{type:"Literal",value:a[i]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(i&&l.type==="Literal"),optional:!1}:l}s=o}else s=i5(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(s.type==="Literal"){const a=s.value;return Ub.call(e.components,a)?e.components[a]:a}if(e.evaluater)return e.evaluater.evaluateExpression(s);vh(e)}function vh(e,t){const r=new Zn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=zC+"#cannot-handle-mdx-estrees-without-createevaluater",r}function gG(e){const t={};let r;for(r in e)Ub.call(e,r)&&(t[vG(r)]=e[r]);return t}function vG(e){let t=e.replace(tG,yG);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function yG(e){return"-"+e.toLowerCase()}const Kx={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},bG={};function Wb(e,t){const r=bG,s=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,a=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return UC(e,s,a)}function UC(e,t,r){if(wG(e)){if("value"in e)return e.type==="html"&&!r?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return v5(e.children,t,r)}return Array.isArray(e)?v5(e,t,r):""}function v5(e,t,r){const s=[];let a=-1;for(;++a<e.length;)s[a]=UC(e[a],t,r);return s.join("")}function wG(e){return!!(e&&typeof e=="object")}const y5=document.createElement("i");function Gb(e){const t="&"+e+";";y5.innerHTML=t;const r=y5.textContent;return r.charCodeAt(r.length-1)===59&&e!=="semi"||r===t?!1:r}function Gs(e,t,r,s){const a=e.length;let i=0,o;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,r=r>0?r:0,s.length<1e4)o=Array.from(s),o.unshift(t,r),e.splice(...o);else for(r&&e.splice(t,r);i<s.length;)o=s.slice(i,i+1e4),o.unshift(t,0),e.splice(...o),i+=1e4,t+=1e4}function aa(e,t){return e.length>0?(Gs(e,e.length,0,t),e):t}const b5={}.hasOwnProperty;function VC(e){const t={};let r=-1;for(;++r<e.length;)jG(t,e[r]);return t}function jG(e,t){let r;for(r in t){const a=(b5.call(e,r)?e[r]:void 0)||(e[r]={}),i=t[r];let o;if(i)for(o in i){b5.call(a,o)||(a[o]=[]);const l=i[o];NG(a[o],Array.isArray(l)?l:l?[l]:[])}}}function NG(e,t){let r=-1;const s=[];for(;++r<t.length;)(t[r].add==="after"?e:s).push(t[r]);Gs(e,0,0,s)}function HC(e,t){const r=Number.parseInt(e,t);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"":String.fromCodePoint(r)}function Ia(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const is=tl(/[A-Za-z]/),Yn=tl(/[\dA-Za-z]/),SG=tl(/[#-'*+\--9=?A-Z^-~]/);function pf(e){return e!==null&&(e<32||e===127)}const w1=tl(/\d/),kG=tl(/[\dA-Fa-f]/),_G=tl(/[!-/:-@[-`{-~]/);function Mt(e){return e!==null&&e<-2}function Pr(e){return e!==null&&(e<0||e===32)}function mr(e){return e===-2||e===-1||e===32}const Sp=tl(new RegExp("\\p{P}|\\p{S}","u")),Vl=tl(/\s/);function tl(e){return t;function t(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}function Gu(e){const t=[];let r=-1,s=0,a=0;for(;++r<e.length;){const i=e.charCodeAt(r);let o="";if(i===37&&Yn(e.charCodeAt(r+1))&&Yn(e.charCodeAt(r+2)))a=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(o=String.fromCharCode(i));else if(i>55295&&i<57344){const l=e.charCodeAt(r+1);i<56320&&l>56319&&l<57344?(o=String.fromCharCode(i,l),a=1):o=""}else o=String.fromCharCode(i);o&&(t.push(e.slice(s,r),encodeURIComponent(o)),s=r+a+1,o=""),a&&(r+=a,a=0)}return t.join("")+e.slice(s)}function cr(e,t,r,s){const a=s?s-1:Number.POSITIVE_INFINITY;let i=0;return o;function o(c){return mr(c)?(e.enter(r),l(c)):t(c)}function l(c){return mr(c)&&i++<a?(e.consume(c),l):(e.exit(r),t(c))}}const CG={tokenize:EG};function EG(e){const t=e.attempt(this.parser.constructs.contentInitial,s,a);let r;return t;function s(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),cr(e,t,"linePrefix")}function a(l){return e.enter("paragraph"),i(l)}function i(l){const c=e.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=c),r=c,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return Mt(l)?(e.consume(l),e.exit("chunkText"),i):(e.consume(l),o)}}const TG={tokenize:AG},w5={tokenize:PG};function AG(e){const t=this,r=[];let s=0,a,i,o;return l;function l(w){if(s<r.length){const S=r[s];return t.containerState=S[1],e.attempt(S[0].continuation,c,u)(w)}return u(w)}function c(w){if(s++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&v();const S=t.events.length;let k=S,N;for(;k--;)if(t.events[k][0]==="exit"&&t.events[k][1].type==="chunkFlow"){N=t.events[k][1].end;break}b(s);let P=S;for(;P<t.events.length;)t.events[P][1].end={...N},P++;return Gs(t.events,k+1,0,t.events.slice(S)),t.events.length=P,u(w)}return l(w)}function u(w){if(s===r.length){if(!a)return m(w);if(a.currentConstruct&&a.currentConstruct.concrete)return x(w);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(w5,d,h)(w)}function d(w){return a&&v(),b(s),m(w)}function h(w){return t.parser.lazy[t.now().line]=s!==r.length,o=t.now().offset,x(w)}function m(w){return t.containerState={},e.attempt(w5,f,x)(w)}function f(w){return s++,r.push([t.currentConstruct,t.containerState]),m(w)}function x(w){if(w===null){a&&v(),b(0),e.consume(w);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:i}),g(w)}function g(w){if(w===null){y(e.exit("chunkFlow"),!0),b(0),e.consume(w);return}return Mt(w)?(e.consume(w),y(e.exit("chunkFlow")),s=0,t.interrupt=void 0,l):(e.consume(w),g)}function y(w,S){const k=t.sliceStream(w);if(S&&k.push(null),w.previous=i,i&&(i.next=w),i=w,a.defineSkip(w.start),a.write(k),t.parser.lazy[w.start.line]){let N=a.events.length;for(;N--;)if(a.events[N][1].start.offset<o&&(!a.events[N][1].end||a.events[N][1].end.offset>o))return;const P=t.events.length;let T=P,A,E;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){if(A){E=t.events[T][1].end;break}A=!0}for(b(s),N=P;N<t.events.length;)t.events[N][1].end={...E},N++;Gs(t.events,T+1,0,t.events.slice(P)),t.events.length=N}}function b(w){let S=r.length;for(;S-- >w;){const k=r[S];t.containerState=k[1],k[0].exit.call(t,e)}r.length=w}function v(){a.write([null]),i=void 0,a=void 0,t.containerState._closeFlow=void 0}}function PG(e,t,r){return cr(e,e.attempt(this.parser.constructs.document,t,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Nu(e){if(e===null||Pr(e)||Vl(e))return 1;if(Sp(e))return 2}function kp(e,t,r){const s=[];let a=-1;for(;++a<e.length;){const i=e[a].resolveAll;i&&!s.includes(i)&&(t=i(t,r),s.push(i))}return t}const j1={name:"attention",resolveAll:RG,tokenize:MG};function RG(e,t){let r=-1,s,a,i,o,l,c,u,d;for(;++r<e.length;)if(e[r][0]==="enter"&&e[r][1].type==="attentionSequence"&&e[r][1]._close){for(s=r;s--;)if(e[s][0]==="exit"&&e[s][1].type==="attentionSequence"&&e[s][1]._open&&t.sliceSerialize(e[s][1]).charCodeAt(0)===t.sliceSerialize(e[r][1]).charCodeAt(0)){if((e[s][1]._close||e[r][1]._open)&&(e[r][1].end.offset-e[r][1].start.offset)%3&&!((e[s][1].end.offset-e[s][1].start.offset+e[r][1].end.offset-e[r][1].start.offset)%3))continue;c=e[s][1].end.offset-e[s][1].start.offset>1&&e[r][1].end.offset-e[r][1].start.offset>1?2:1;const h={...e[s][1].end},m={...e[r][1].start};j5(h,-c),j5(m,c),o={type:c>1?"strongSequence":"emphasisSequence",start:h,end:{...e[s][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[r][1].start},end:m},i={type:c>1?"strongText":"emphasisText",start:{...e[s][1].end},end:{...e[r][1].start}},a={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[s][1].end={...o.start},e[r][1].start={...l.end},u=[],e[s][1].end.offset-e[s][1].start.offset&&(u=aa(u,[["enter",e[s][1],t],["exit",e[s][1],t]])),u=aa(u,[["enter",a,t],["enter",o,t],["exit",o,t],["enter",i,t]]),u=aa(u,kp(t.parser.constructs.insideSpan.null,e.slice(s+1,r),t)),u=aa(u,[["exit",i,t],["enter",l,t],["exit",l,t],["exit",a,t]]),e[r][1].end.offset-e[r][1].start.offset?(d=2,u=aa(u,[["enter",e[r][1],t],["exit",e[r][1],t]])):d=0,Gs(e,s-1,r-s+3,u),r=s+u.length-d-2;break}}for(r=-1;++r<e.length;)e[r][1].type==="attentionSequence"&&(e[r][1].type="data");return e}function MG(e,t){const r=this.parser.constructs.attentionMarkers.null,s=this.previous,a=Nu(s);let i;return o;function o(c){return i=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===i)return e.consume(c),l;const u=e.exit("attentionSequence"),d=Nu(c),h=!d||d===2&&a||r.includes(c),m=!a||a===2&&d||r.includes(s);return u._open=!!(i===42?h:h&&(a||!m)),u._close=!!(i===42?m:m&&(d||!h)),t(c)}}function j5(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const OG={name:"autolink",tokenize:IG};function IG(e,t,r){let s=0;return a;function a(f){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(f){return is(f)?(e.consume(f),o):f===64?r(f):u(f)}function o(f){return f===43||f===45||f===46||Yn(f)?(s=1,l(f)):u(f)}function l(f){return f===58?(e.consume(f),s=0,c):(f===43||f===45||f===46||Yn(f))&&s++<32?(e.consume(f),l):(s=0,u(f))}function c(f){return f===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):f===null||f===32||f===60||pf(f)?r(f):(e.consume(f),c)}function u(f){return f===64?(e.consume(f),d):SG(f)?(e.consume(f),u):r(f)}function d(f){return Yn(f)?h(f):r(f)}function h(f){return f===46?(e.consume(f),s=0,d):f===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):m(f)}function m(f){if((f===45||Yn(f))&&s++<63){const x=f===45?m:h;return e.consume(f),x}return r(f)}}const qh={partial:!0,tokenize:DG};function DG(e,t,r){return s;function s(i){return mr(i)?cr(e,a,"linePrefix")(i):a(i)}function a(i){return i===null||Mt(i)?t(i):r(i)}}const WC={continuation:{tokenize:LG},exit:zG,name:"blockQuote",tokenize:FG};function FG(e,t,r){const s=this;return a;function a(o){if(o===62){const l=s.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),i}return r(o)}function i(o){return mr(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function LG(e,t,r){const s=this;return a;function a(o){return mr(o)?cr(e,i,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):i(o)}function i(o){return e.attempt(WC,t,r)(o)}}function zG(e){e.exit("blockQuote")}const GC={name:"characterEscape",tokenize:$G};function $G(e,t,r){return s;function s(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),a}function a(i){return _G(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):r(i)}}const QC={name:"characterReference",tokenize:qG};function qG(e,t,r){const s=this;let a=0,i,o;return l;function l(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),c}function c(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),i=31,o=Yn,d(h))}function u(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,o=kG,d):(e.enter("characterReferenceValue"),i=7,o=w1,d(h))}function d(h){if(h===59&&a){const m=e.exit("characterReferenceValue");return o===Yn&&!Gb(s.sliceSerialize(m))?r(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(h)&&a++<i?(e.consume(h),d):r(h)}}const N5={partial:!0,tokenize:UG},S5={concrete:!0,name:"codeFenced",tokenize:BG};function BG(e,t,r){const s=this,a={partial:!0,tokenize:k};let i=0,o=0,l;return c;function c(N){return u(N)}function u(N){const P=s.events[s.events.length-1];return i=P&&P[1].type==="linePrefix"?P[2].sliceSerialize(P[1],!0).length:0,l=N,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),d(N)}function d(N){return N===l?(o++,e.consume(N),d):o<3?r(N):(e.exit("codeFencedFenceSequence"),mr(N)?cr(e,h,"whitespace")(N):h(N))}function h(N){return N===null||Mt(N)?(e.exit("codeFencedFence"),s.interrupt?t(N):e.check(N5,g,S)(N)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),m(N))}function m(N){return N===null||Mt(N)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(N)):mr(N)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),cr(e,f,"whitespace")(N)):N===96&&N===l?r(N):(e.consume(N),m)}function f(N){return N===null||Mt(N)?h(N):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),x(N))}function x(N){return N===null||Mt(N)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(N)):N===96&&N===l?r(N):(e.consume(N),x)}function g(N){return e.attempt(a,S,y)(N)}function y(N){return e.enter("lineEnding"),e.consume(N),e.exit("lineEnding"),b}function b(N){return i>0&&mr(N)?cr(e,v,"linePrefix",i+1)(N):v(N)}function v(N){return N===null||Mt(N)?e.check(N5,g,S)(N):(e.enter("codeFlowValue"),w(N))}function w(N){return N===null||Mt(N)?(e.exit("codeFlowValue"),v(N)):(e.consume(N),w)}function S(N){return e.exit("codeFenced"),t(N)}function k(N,P,T){let A=0;return E;function E(Y){return N.enter("lineEnding"),N.consume(Y),N.exit("lineEnding"),M}function M(Y){return N.enter("codeFencedFence"),mr(Y)?cr(N,I,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Y):I(Y)}function I(Y){return Y===l?(N.enter("codeFencedFenceSequence"),se(Y)):T(Y)}function se(Y){return Y===l?(A++,N.consume(Y),se):A>=o?(N.exit("codeFencedFenceSequence"),mr(Y)?cr(N,ee,"whitespace")(Y):ee(Y)):T(Y)}function ee(Y){return Y===null||Mt(Y)?(N.exit("codeFencedFence"),P(Y)):T(Y)}}}function UG(e,t,r){const s=this;return a;function a(o){return o===null?r(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i)}function i(o){return s.parser.lazy[s.now().line]?r(o):t(o)}}const Jx={name:"codeIndented",tokenize:HG},VG={partial:!0,tokenize:WG};function HG(e,t,r){const s=this;return a;function a(u){return e.enter("codeIndented"),cr(e,i,"linePrefix",5)(u)}function i(u){const d=s.events[s.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(u):r(u)}function o(u){return u===null?c(u):Mt(u)?e.attempt(VG,o,c)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||Mt(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),l)}function c(u){return e.exit("codeIndented"),t(u)}}function WG(e,t,r){const s=this;return a;function a(o){return s.parser.lazy[s.now().line]?r(o):Mt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):cr(e,i,"linePrefix",5)(o)}function i(o){const l=s.events[s.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):Mt(o)?a(o):r(o)}}const GG={name:"codeText",previous:YG,resolve:QG,tokenize:KG};function QG(e){let t=e.length-4,r=3,s,a;if((e[r][1].type==="lineEnding"||e[r][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(s=r;++s<t;)if(e[s][1].type==="codeTextData"){e[r][1].type="codeTextPadding",e[t][1].type="codeTextPadding",r+=2,t-=2;break}}for(s=r-1,t++;++s<=t;)a===void 0?s!==t&&e[s][1].type!=="lineEnding"&&(a=s):(s===t||e[s][1].type==="lineEnding")&&(e[a][1].type="codeTextData",s!==a+2&&(e[a][1].end=e[s-1][1].end,e.splice(a+2,s-a-2),t-=s-a-2,s=a+2),a=void 0);return e}function YG(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function KG(e,t,r){let s=0,a,i;return o;function o(h){return e.enter("codeText"),e.enter("codeTextSequence"),l(h)}function l(h){return h===96?(e.consume(h),s++,l):(e.exit("codeTextSequence"),c(h))}function c(h){return h===null?r(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),c):h===96?(i=e.enter("codeTextSequence"),a=0,d(h)):Mt(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(h))}function u(h){return h===null||h===32||h===96||Mt(h)?(e.exit("codeTextData"),c(h)):(e.consume(h),u)}function d(h){return h===96?(e.consume(h),a++,d):a===s?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(i.type="codeTextData",u(h))}}class JG{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,r){const s=r??Number.POSITIVE_INFINITY;return s<this.left.length?this.left.slice(t,s):t>this.left.length?this.right.slice(this.right.length-s+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-s+this.left.length).reverse())}splice(t,r,s){const a=r||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return s&&ld(this.left,s),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),ld(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),ld(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const r=this.left.splice(t,Number.POSITIVE_INFINITY);ld(this.right,r.reverse())}else{const r=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);ld(this.left,r.reverse())}}}function ld(e,t){let r=0;if(t.length<1e4)e.push(...t);else for(;r<t.length;)e.push(...t.slice(r,r+1e4)),r+=1e4}function YC(e){const t={};let r=-1,s,a,i,o,l,c,u;const d=new JG(e);for(;++r<d.length;){for(;r in t;)r=t[r];if(s=d.get(r),r&&s[1].type==="chunkFlow"&&d.get(r-1)[1].type==="listItemPrefix"&&(c=s[1]._tokenizer.events,i=0,i<c.length&&c[i][1].type==="lineEndingBlank"&&(i+=2),i<c.length&&c[i][1].type==="content"))for(;++i<c.length&&c[i][1].type!=="content";)c[i][1].type==="chunkText"&&(c[i][1]._isInFirstContentOfListItem=!0,i++);if(s[0]==="enter")s[1].contentType&&(Object.assign(t,XG(d,r)),r=t[r],u=!0);else if(s[1]._container){for(i=r,a=void 0;i--;)if(o=d.get(i),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(a&&(d.get(a)[1].type="lineEndingBlank"),o[1].type="lineEnding",a=i);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;a&&(s[1].end={...d.get(a)[1].start},l=d.slice(a,r),l.unshift(s),d.splice(a,r-a+1,l))}}return Gs(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}function XG(e,t){const r=e.get(t)[1],s=e.get(t)[2];let a=t-1;const i=[];let o=r._tokenizer;o||(o=s.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],u={};let d,h,m=-1,f=r,x=0,g=0;const y=[g];for(;f;){for(;e.get(++a)[1]!==f;);i.push(a),f._tokenizer||(d=s.sliceStream(f),f.next||d.push(null),h&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=f,f=f.next}for(f=r;++m<l.length;)l[m][0]==="exit"&&l[m-1][0]==="enter"&&l[m][1].type===l[m-1][1].type&&l[m][1].start.line!==l[m][1].end.line&&(g=m+1,y.push(g),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):y.pop(),m=y.length;m--;){const b=l.slice(y[m],y[m+1]),v=i.pop();c.push([v,v+b.length-1]),e.splice(v,2,b)}for(c.reverse(),m=-1;++m<c.length;)u[x+c[m][0]]=x+c[m][1],x+=c[m][1]-c[m][0]-1;return u}const ZG={resolve:tQ,tokenize:rQ},eQ={partial:!0,tokenize:nQ};function tQ(e){return YC(e),e}function rQ(e,t){let r;return s;function s(l){return e.enter("content"),r=e.enter("chunkContent",{contentType:"content"}),a(l)}function a(l){return l===null?i(l):Mt(l)?e.check(eQ,o,i)(l):(e.consume(l),a)}function i(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),r.next=e.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,a}}function nQ(e,t,r){const s=this;return a;function a(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),cr(e,i,"linePrefix")}function i(o){if(o===null||Mt(o))return r(o);const l=s.events[s.events.length-1];return!s.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(s.parser.constructs.flow,r,t)(o)}}function KC(e,t,r,s,a,i,o,l,c){const u=c||Number.POSITIVE_INFINITY;let d=0;return h;function h(b){return b===60?(e.enter(s),e.enter(a),e.enter(i),e.consume(b),e.exit(i),m):b===null||b===32||b===41||pf(b)?r(b):(e.enter(s),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),g(b))}function m(b){return b===62?(e.enter(i),e.consume(b),e.exit(i),e.exit(a),e.exit(s),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),f(b))}function f(b){return b===62?(e.exit("chunkString"),e.exit(l),m(b)):b===null||b===60||Mt(b)?r(b):(e.consume(b),b===92?x:f)}function x(b){return b===60||b===62||b===92?(e.consume(b),f):f(b)}function g(b){return!d&&(b===null||b===41||Pr(b))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(s),t(b)):d<u&&b===40?(e.consume(b),d++,g):b===41?(e.consume(b),d--,g):b===null||b===32||b===40||pf(b)?r(b):(e.consume(b),b===92?y:g)}function y(b){return b===40||b===41||b===92?(e.consume(b),g):g(b)}}function JC(e,t,r,s,a,i){const o=this;let l=0,c;return u;function u(f){return e.enter(s),e.enter(a),e.consume(f),e.exit(a),e.enter(i),d}function d(f){return l>999||f===null||f===91||f===93&&!c||f===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?r(f):f===93?(e.exit(i),e.enter(a),e.consume(f),e.exit(a),e.exit(s),t):Mt(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),h(f))}function h(f){return f===null||f===91||f===93||Mt(f)||l++>999?(e.exit("chunkString"),d(f)):(e.consume(f),c||(c=!mr(f)),f===92?m:h)}function m(f){return f===91||f===92||f===93?(e.consume(f),l++,h):h(f)}}function XC(e,t,r,s,a,i){let o;return l;function l(m){return m===34||m===39||m===40?(e.enter(s),e.enter(a),e.consume(m),e.exit(a),o=m===40?41:m,c):r(m)}function c(m){return m===o?(e.enter(a),e.consume(m),e.exit(a),e.exit(s),t):(e.enter(i),u(m))}function u(m){return m===o?(e.exit(i),c(o)):m===null?r(m):Mt(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),cr(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(m))}function d(m){return m===o||m===null||Mt(m)?(e.exit("chunkString"),u(m)):(e.consume(m),m===92?h:d)}function h(m){return m===o||m===92?(e.consume(m),d):d(m)}}function Od(e,t){let r;return s;function s(a){return Mt(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),r=!0,s):mr(a)?cr(e,s,r?"linePrefix":"lineSuffix")(a):t(a)}}const sQ={name:"definition",tokenize:iQ},aQ={partial:!0,tokenize:oQ};function iQ(e,t,r){const s=this;let a;return i;function i(f){return e.enter("definition"),o(f)}function o(f){return JC.call(s,e,l,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function l(f){return a=Ia(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)),f===58?(e.enter("definitionMarker"),e.consume(f),e.exit("definitionMarker"),c):r(f)}function c(f){return Pr(f)?Od(e,u)(f):u(f)}function u(f){return KC(e,d,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function d(f){return e.attempt(aQ,h,h)(f)}function h(f){return mr(f)?cr(e,m,"whitespace")(f):m(f)}function m(f){return f===null||Mt(f)?(e.exit("definition"),s.parser.defined.push(a),t(f)):r(f)}}function oQ(e,t,r){return s;function s(l){return Pr(l)?Od(e,a)(l):r(l)}function a(l){return XC(e,i,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function i(l){return mr(l)?cr(e,o,"whitespace")(l):o(l)}function o(l){return l===null||Mt(l)?t(l):r(l)}}const lQ={name:"hardBreakEscape",tokenize:cQ};function cQ(e,t,r){return s;function s(i){return e.enter("hardBreakEscape"),e.consume(i),a}function a(i){return Mt(i)?(e.exit("hardBreakEscape"),t(i)):r(i)}}const uQ={name:"headingAtx",resolve:dQ,tokenize:hQ};function dQ(e,t){let r=e.length-2,s=3,a,i;return e[s][1].type==="whitespace"&&(s+=2),r-2>s&&e[r][1].type==="whitespace"&&(r-=2),e[r][1].type==="atxHeadingSequence"&&(s===r-1||r-4>s&&e[r-2][1].type==="whitespace")&&(r-=s+1===r?2:4),r>s&&(a={type:"atxHeadingText",start:e[s][1].start,end:e[r][1].end},i={type:"chunkText",start:e[s][1].start,end:e[r][1].end,contentType:"text"},Gs(e,s,r-s+1,[["enter",a,t],["enter",i,t],["exit",i,t],["exit",a,t]])),e}function hQ(e,t,r){let s=0;return a;function a(d){return e.enter("atxHeading"),i(d)}function i(d){return e.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&s++<6?(e.consume(d),o):d===null||Pr(d)?(e.exit("atxHeadingSequence"),l(d)):r(d)}function l(d){return d===35?(e.enter("atxHeadingSequence"),c(d)):d===null||Mt(d)?(e.exit("atxHeading"),t(d)):mr(d)?cr(e,l,"whitespace")(d):(e.enter("atxHeadingText"),u(d))}function c(d){return d===35?(e.consume(d),c):(e.exit("atxHeadingSequence"),l(d))}function u(d){return d===null||d===35||Pr(d)?(e.exit("atxHeadingText"),l(d)):(e.consume(d),u)}}const mQ=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],k5=["pre","script","style","textarea"],fQ={concrete:!0,name:"htmlFlow",resolveTo:gQ,tokenize:vQ},pQ={partial:!0,tokenize:bQ},xQ={partial:!0,tokenize:yQ};function gQ(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function vQ(e,t,r){const s=this;let a,i,o,l,c;return u;function u(O){return d(O)}function d(O){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(O),h}function h(O){return O===33?(e.consume(O),m):O===47?(e.consume(O),i=!0,g):O===63?(e.consume(O),a=3,s.interrupt?t:_):is(O)?(e.consume(O),o=String.fromCharCode(O),y):r(O)}function m(O){return O===45?(e.consume(O),a=2,f):O===91?(e.consume(O),a=5,l=0,x):is(O)?(e.consume(O),a=4,s.interrupt?t:_):r(O)}function f(O){return O===45?(e.consume(O),s.interrupt?t:_):r(O)}function x(O){const B="CDATA[";return O===B.charCodeAt(l++)?(e.consume(O),l===B.length?s.interrupt?t:I:x):r(O)}function g(O){return is(O)?(e.consume(O),o=String.fromCharCode(O),y):r(O)}function y(O){if(O===null||O===47||O===62||Pr(O)){const B=O===47,W=o.toLowerCase();return!B&&!i&&k5.includes(W)?(a=1,s.interrupt?t(O):I(O)):mQ.includes(o.toLowerCase())?(a=6,B?(e.consume(O),b):s.interrupt?t(O):I(O)):(a=7,s.interrupt&&!s.parser.lazy[s.now().line]?r(O):i?v(O):w(O))}return O===45||Yn(O)?(e.consume(O),o+=String.fromCharCode(O),y):r(O)}function b(O){return O===62?(e.consume(O),s.interrupt?t:I):r(O)}function v(O){return mr(O)?(e.consume(O),v):E(O)}function w(O){return O===47?(e.consume(O),E):O===58||O===95||is(O)?(e.consume(O),S):mr(O)?(e.consume(O),w):E(O)}function S(O){return O===45||O===46||O===58||O===95||Yn(O)?(e.consume(O),S):k(O)}function k(O){return O===61?(e.consume(O),N):mr(O)?(e.consume(O),k):w(O)}function N(O){return O===null||O===60||O===61||O===62||O===96?r(O):O===34||O===39?(e.consume(O),c=O,P):mr(O)?(e.consume(O),N):T(O)}function P(O){return O===c?(e.consume(O),c=null,A):O===null||Mt(O)?r(O):(e.consume(O),P)}function T(O){return O===null||O===34||O===39||O===47||O===60||O===61||O===62||O===96||Pr(O)?k(O):(e.consume(O),T)}function A(O){return O===47||O===62||mr(O)?w(O):r(O)}function E(O){return O===62?(e.consume(O),M):r(O)}function M(O){return O===null||Mt(O)?I(O):mr(O)?(e.consume(O),M):r(O)}function I(O){return O===45&&a===2?(e.consume(O),F):O===60&&a===1?(e.consume(O),ne):O===62&&a===4?(e.consume(O),U):O===63&&a===3?(e.consume(O),_):O===93&&a===5?(e.consume(O),V):Mt(O)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(pQ,H,se)(O)):O===null||Mt(O)?(e.exit("htmlFlowData"),se(O)):(e.consume(O),I)}function se(O){return e.check(xQ,ee,H)(O)}function ee(O){return e.enter("lineEnding"),e.consume(O),e.exit("lineEnding"),Y}function Y(O){return O===null||Mt(O)?se(O):(e.enter("htmlFlowData"),I(O))}function F(O){return O===45?(e.consume(O),_):I(O)}function ne(O){return O===47?(e.consume(O),o="",q):I(O)}function q(O){if(O===62){const B=o.toLowerCase();return k5.includes(B)?(e.consume(O),U):I(O)}return is(O)&&o.length<8?(e.consume(O),o+=String.fromCharCode(O),q):I(O)}function V(O){return O===93?(e.consume(O),_):I(O)}function _(O){return O===62?(e.consume(O),U):O===45&&a===2?(e.consume(O),_):I(O)}function U(O){return O===null||Mt(O)?(e.exit("htmlFlowData"),H(O)):(e.consume(O),U)}function H(O){return e.exit("htmlFlow"),t(O)}}function yQ(e,t,r){const s=this;return a;function a(o){return Mt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):r(o)}function i(o){return s.parser.lazy[s.now().line]?r(o):t(o)}}function bQ(e,t,r){return s;function s(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(qh,t,r)}}const wQ={name:"htmlText",tokenize:jQ};function jQ(e,t,r){const s=this;let a,i,o;return l;function l(_){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(_),c}function c(_){return _===33?(e.consume(_),u):_===47?(e.consume(_),k):_===63?(e.consume(_),w):is(_)?(e.consume(_),T):r(_)}function u(_){return _===45?(e.consume(_),d):_===91?(e.consume(_),i=0,x):is(_)?(e.consume(_),v):r(_)}function d(_){return _===45?(e.consume(_),f):r(_)}function h(_){return _===null?r(_):_===45?(e.consume(_),m):Mt(_)?(o=h,ne(_)):(e.consume(_),h)}function m(_){return _===45?(e.consume(_),f):h(_)}function f(_){return _===62?F(_):_===45?m(_):h(_)}function x(_){const U="CDATA[";return _===U.charCodeAt(i++)?(e.consume(_),i===U.length?g:x):r(_)}function g(_){return _===null?r(_):_===93?(e.consume(_),y):Mt(_)?(o=g,ne(_)):(e.consume(_),g)}function y(_){return _===93?(e.consume(_),b):g(_)}function b(_){return _===62?F(_):_===93?(e.consume(_),b):g(_)}function v(_){return _===null||_===62?F(_):Mt(_)?(o=v,ne(_)):(e.consume(_),v)}function w(_){return _===null?r(_):_===63?(e.consume(_),S):Mt(_)?(o=w,ne(_)):(e.consume(_),w)}function S(_){return _===62?F(_):w(_)}function k(_){return is(_)?(e.consume(_),N):r(_)}function N(_){return _===45||Yn(_)?(e.consume(_),N):P(_)}function P(_){return Mt(_)?(o=P,ne(_)):mr(_)?(e.consume(_),P):F(_)}function T(_){return _===45||Yn(_)?(e.consume(_),T):_===47||_===62||Pr(_)?A(_):r(_)}function A(_){return _===47?(e.consume(_),F):_===58||_===95||is(_)?(e.consume(_),E):Mt(_)?(o=A,ne(_)):mr(_)?(e.consume(_),A):F(_)}function E(_){return _===45||_===46||_===58||_===95||Yn(_)?(e.consume(_),E):M(_)}function M(_){return _===61?(e.consume(_),I):Mt(_)?(o=M,ne(_)):mr(_)?(e.consume(_),M):A(_)}function I(_){return _===null||_===60||_===61||_===62||_===96?r(_):_===34||_===39?(e.consume(_),a=_,se):Mt(_)?(o=I,ne(_)):mr(_)?(e.consume(_),I):(e.consume(_),ee)}function se(_){return _===a?(e.consume(_),a=void 0,Y):_===null?r(_):Mt(_)?(o=se,ne(_)):(e.consume(_),se)}function ee(_){return _===null||_===34||_===39||_===60||_===61||_===96?r(_):_===47||_===62||Pr(_)?A(_):(e.consume(_),ee)}function Y(_){return _===47||_===62||Pr(_)?A(_):r(_)}function F(_){return _===62?(e.consume(_),e.exit("htmlTextData"),e.exit("htmlText"),t):r(_)}function ne(_){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),q}function q(_){return mr(_)?cr(e,V,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_):V(_)}function V(_){return e.enter("htmlTextData"),o(_)}}const Qb={name:"labelEnd",resolveAll:_Q,resolveTo:CQ,tokenize:EQ},NQ={tokenize:TQ},SQ={tokenize:AQ},kQ={tokenize:PQ};function _Q(e){let t=-1;const r=[];for(;++t<e.length;){const s=e[t][1];if(r.push(e[t]),s.type==="labelImage"||s.type==="labelLink"||s.type==="labelEnd"){const a=s.type==="labelImage"?4:2;s.type="data",t+=a}}return e.length!==r.length&&Gs(e,0,e.length,r),e}function CQ(e,t){let r=e.length,s=0,a,i,o,l;for(;r--;)if(a=e[r][1],i){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[r][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(o){if(e[r][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(i=r,a.type!=="labelLink")){s=2;break}}else a.type==="labelEnd"&&(o=r);const c={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[i][1].start},end:{...e[o][1].end}},d={type:"labelText",start:{...e[i+s+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",c,t],["enter",u,t]],l=aa(l,e.slice(i+1,i+s+3)),l=aa(l,[["enter",d,t]]),l=aa(l,kp(t.parser.constructs.insideSpan.null,e.slice(i+s+4,o-3),t)),l=aa(l,[["exit",d,t],e[o-2],e[o-1],["exit",u,t]]),l=aa(l,e.slice(o+1)),l=aa(l,[["exit",c,t]]),Gs(e,i,e.length,l),e}function EQ(e,t,r){const s=this;let a=s.events.length,i,o;for(;a--;)if((s.events[a][1].type==="labelImage"||s.events[a][1].type==="labelLink")&&!s.events[a][1]._balanced){i=s.events[a][1];break}return l;function l(m){return i?i._inactive?h(m):(o=s.parser.defined.includes(Ia(s.sliceSerialize({start:i.end,end:s.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(m),e.exit("labelMarker"),e.exit("labelEnd"),c):r(m)}function c(m){return m===40?e.attempt(NQ,d,o?d:h)(m):m===91?e.attempt(SQ,d,o?u:h)(m):o?d(m):h(m)}function u(m){return e.attempt(kQ,d,h)(m)}function d(m){return t(m)}function h(m){return i._balanced=!0,r(m)}}function TQ(e,t,r){return s;function s(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),a}function a(h){return Pr(h)?Od(e,i)(h):i(h)}function i(h){return h===41?d(h):KC(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return Pr(h)?Od(e,c)(h):d(h)}function l(h){return r(h)}function c(h){return h===34||h===39||h===40?XC(e,u,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):d(h)}function u(h){return Pr(h)?Od(e,d)(h):d(h)}function d(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):r(h)}}function AQ(e,t,r){const s=this;return a;function a(l){return JC.call(s,e,i,o,"reference","referenceMarker","referenceString")(l)}function i(l){return s.parser.defined.includes(Ia(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)))?t(l):r(l)}function o(l){return r(l)}}function PQ(e,t,r){return s;function s(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),a}function a(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):r(i)}}const RQ={name:"labelStartImage",resolveAll:Qb.resolveAll,tokenize:MQ};function MQ(e,t,r){const s=this;return a;function a(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),i}function i(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):r(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in s.parser.constructs?r(l):t(l)}}const OQ={name:"labelStartLink",resolveAll:Qb.resolveAll,tokenize:IQ};function IQ(e,t,r){const s=this;return a;function a(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),i}function i(o){return o===94&&"_hiddenFootnoteSupport"in s.parser.constructs?r(o):t(o)}}const Xx={name:"lineEnding",tokenize:DQ};function DQ(e,t){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),cr(e,t,"linePrefix")}}const m0={name:"thematicBreak",tokenize:FQ};function FQ(e,t,r){let s=0,a;return i;function i(u){return e.enter("thematicBreak"),o(u)}function o(u){return a=u,l(u)}function l(u){return u===a?(e.enter("thematicBreakSequence"),c(u)):s>=3&&(u===null||Mt(u))?(e.exit("thematicBreak"),t(u)):r(u)}function c(u){return u===a?(e.consume(u),s++,c):(e.exit("thematicBreakSequence"),mr(u)?cr(e,l,"whitespace")(u):l(u))}}const gs={continuation:{tokenize:qQ},exit:UQ,name:"list",tokenize:$Q},LQ={partial:!0,tokenize:VQ},zQ={partial:!0,tokenize:BQ};function $Q(e,t,r){const s=this,a=s.events[s.events.length-1];let i=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,o=0;return l;function l(f){const x=s.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!s.containerState.marker||f===s.containerState.marker:w1(f)){if(s.containerState.type||(s.containerState.type=x,e.enter(x,{_container:!0})),x==="listUnordered")return e.enter("listItemPrefix"),f===42||f===45?e.check(m0,r,u)(f):u(f);if(!s.interrupt||f===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(f)}return r(f)}function c(f){return w1(f)&&++o<10?(e.consume(f),c):(!s.interrupt||o<2)&&(s.containerState.marker?f===s.containerState.marker:f===41||f===46)?(e.exit("listItemValue"),u(f)):r(f)}function u(f){return e.enter("listItemMarker"),e.consume(f),e.exit("listItemMarker"),s.containerState.marker=s.containerState.marker||f,e.check(qh,s.interrupt?r:d,e.attempt(LQ,m,h))}function d(f){return s.containerState.initialBlankLine=!0,i++,m(f)}function h(f){return mr(f)?(e.enter("listItemPrefixWhitespace"),e.consume(f),e.exit("listItemPrefixWhitespace"),m):r(f)}function m(f){return s.containerState.size=i+s.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(f)}}function qQ(e,t,r){const s=this;return s.containerState._closeFlow=void 0,e.check(qh,a,i);function a(l){return s.containerState.furtherBlankLines=s.containerState.furtherBlankLines||s.containerState.initialBlankLine,cr(e,t,"listItemIndent",s.containerState.size+1)(l)}function i(l){return s.containerState.furtherBlankLines||!mr(l)?(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,o(l)):(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,e.attempt(zQ,t,o)(l))}function o(l){return s.containerState._closeFlow=!0,s.interrupt=void 0,cr(e,e.attempt(gs,t,r),"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function BQ(e,t,r){const s=this;return cr(e,a,"listItemIndent",s.containerState.size+1);function a(i){const o=s.events[s.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===s.containerState.size?t(i):r(i)}}function UQ(e){e.exit(this.containerState.type)}function VQ(e,t,r){const s=this;return cr(e,a,"listItemPrefixWhitespace",s.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(i){const o=s.events[s.events.length-1];return!mr(i)&&o&&o[1].type==="listItemPrefixWhitespace"?t(i):r(i)}}const _5={name:"setextUnderline",resolveTo:HQ,tokenize:WQ};function HQ(e,t){let r=e.length,s,a,i;for(;r--;)if(e[r][0]==="enter"){if(e[r][1].type==="content"){s=r;break}e[r][1].type==="paragraph"&&(a=r)}else e[r][1].type==="content"&&e.splice(r,1),!i&&e[r][1].type==="definition"&&(i=r);const o={type:"setextHeading",start:{...e[s][1].start},end:{...e[e.length-1][1].end}};return e[a][1].type="setextHeadingText",i?(e.splice(a,0,["enter",o,t]),e.splice(i+1,0,["exit",e[s][1],t]),e[s][1].end={...e[i][1].end}):e[s][1]=o,e.push(["exit",o,t]),e}function WQ(e,t,r){const s=this;let a;return i;function i(u){let d=s.events.length,h;for(;d--;)if(s.events[d][1].type!=="lineEnding"&&s.events[d][1].type!=="linePrefix"&&s.events[d][1].type!=="content"){h=s.events[d][1].type==="paragraph";break}return!s.parser.lazy[s.now().line]&&(s.interrupt||h)?(e.enter("setextHeadingLine"),a=u,o(u)):r(u)}function o(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===a?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),mr(u)?cr(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||Mt(u)?(e.exit("setextHeadingLine"),t(u)):r(u)}}const GQ={tokenize:QQ};function QQ(e){const t=this,r=e.attempt(qh,s,e.attempt(this.parser.constructs.flowInitial,a,cr(e,e.attempt(this.parser.constructs.flow,a,e.attempt(ZG,a)),"linePrefix")));return r;function s(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,r}function a(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,r}}const YQ={resolveAll:e9()},KQ=ZC("string"),JQ=ZC("text");function ZC(e){return{resolveAll:e9(e==="text"?XQ:void 0),tokenize:t};function t(r){const s=this,a=this.parser.constructs[e],i=r.attempt(a,o,l);return o;function o(d){return u(d)?i(d):l(d)}function l(d){if(d===null){r.consume(d);return}return r.enter("data"),r.consume(d),c}function c(d){return u(d)?(r.exit("data"),i(d)):(r.consume(d),c)}function u(d){if(d===null)return!0;const h=a[d];let m=-1;if(h)for(;++m<h.length;){const f=h[m];if(!f.previous||f.previous.call(s,s.previous))return!0}return!1}}}function e9(e){return t;function t(r,s){let a=-1,i;for(;++a<=r.length;)i===void 0?r[a]&&r[a][1].type==="data"&&(i=a,a++):(!r[a]||r[a][1].type!=="data")&&(a!==i+2&&(r[i][1].end=r[a-1][1].end,r.splice(i+2,a-i-2),a=i+2),i=void 0);return e?e(r,s):r}}function XQ(e,t){let r=0;for(;++r<=e.length;)if((r===e.length||e[r][1].type==="lineEnding")&&e[r-1][1].type==="data"){const s=e[r-1][1],a=t.sliceStream(s);let i=a.length,o=-1,l=0,c;for(;i--;){const u=a[i];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(u===-2)c=!0,l++;else if(u!==-1){i++;break}}if(t._contentTypeTextTrailing&&r===e.length&&(l=0),l){const u={type:r===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?o:s.start._bufferIndex+o,_index:s.start._index+i,line:s.end.line,column:s.end.column-l,offset:s.end.offset-l},end:{...s.end}};s.end={...u.start},s.start.offset===s.end.offset?Object.assign(s,u):(e.splice(r,0,["enter",u,t],["exit",u,t]),r+=2)}r++}return e}const ZQ={42:gs,43:gs,45:gs,48:gs,49:gs,50:gs,51:gs,52:gs,53:gs,54:gs,55:gs,56:gs,57:gs,62:WC},eY={91:sQ},tY={[-2]:Jx,[-1]:Jx,32:Jx},rY={35:uQ,42:m0,45:[_5,m0],60:fQ,61:_5,95:m0,96:S5,126:S5},nY={38:QC,92:GC},sY={[-5]:Xx,[-4]:Xx,[-3]:Xx,33:RQ,38:QC,42:j1,60:[OG,wQ],91:OQ,92:[lQ,GC],93:Qb,95:j1,96:GG},aY={null:[j1,YQ]},iY={null:[42,95]},oY={null:[]},lY=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:iY,contentInitial:eY,disable:oY,document:ZQ,flow:rY,flowInitial:tY,insideSpan:aY,string:nY,text:sY},Symbol.toStringTag,{value:"Module"}));function cY(e,t,r){let s={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0};const a={},i=[];let o=[],l=[];const c={attempt:P(k),check:P(N),consume:v,enter:w,exit:S,interrupt:P(N,{interrupt:!0})},u={code:null,containerState:{},defineSkip:g,events:[],now:x,parser:e,previous:null,sliceSerialize:m,sliceStream:f,write:h};let d=t.tokenize.call(u,c);return t.resolveAll&&i.push(t),u;function h(M){return o=aa(o,M),y(),o[o.length-1]!==null?[]:(T(t,0),u.events=kp(i,u.events,u),u.events)}function m(M,I){return dY(f(M),I)}function f(M){return uY(o,M)}function x(){const{_bufferIndex:M,_index:I,line:se,column:ee,offset:Y}=s;return{_bufferIndex:M,_index:I,line:se,column:ee,offset:Y}}function g(M){a[M.line]=M.column,E()}function y(){let M;for(;s._index<o.length;){const I=o[s._index];if(typeof I=="string")for(M=s._index,s._bufferIndex<0&&(s._bufferIndex=0);s._index===M&&s._bufferIndex<I.length;)b(I.charCodeAt(s._bufferIndex));else b(I)}}function b(M){d=d(M)}function v(M){Mt(M)?(s.line++,s.column=1,s.offset+=M===-3?2:1,E()):M!==-1&&(s.column++,s.offset++),s._bufferIndex<0?s._index++:(s._bufferIndex++,s._bufferIndex===o[s._index].length&&(s._bufferIndex=-1,s._index++)),u.previous=M}function w(M,I){const se=I||{};return se.type=M,se.start=x(),u.events.push(["enter",se,u]),l.push(se),se}function S(M){const I=l.pop();return I.end=x(),u.events.push(["exit",I,u]),I}function k(M,I){T(M,I.from)}function N(M,I){I.restore()}function P(M,I){return se;function se(ee,Y,F){let ne,q,V,_;return Array.isArray(ee)?H(ee):"tokenize"in ee?H([ee]):U(ee);function U(K){return X;function X(de){const oe=de!==null&&K[de],me=de!==null&&K.null,Ee=[...Array.isArray(oe)?oe:oe?[oe]:[],...Array.isArray(me)?me:me?[me]:[]];return H(Ee)(de)}}function H(K){return ne=K,q=0,K.length===0?F:O(K[q])}function O(K){return X;function X(de){return _=A(),V=K,K.partial||(u.currentConstruct=K),K.name&&u.parser.constructs.disable.null.includes(K.name)?W():K.tokenize.call(I?Object.assign(Object.create(u),I):u,c,B,W)(de)}}function B(K){return M(V,_),Y}function W(K){return _.restore(),++q<ne.length?O(ne[q]):F}}}function T(M,I){M.resolveAll&&!i.includes(M)&&i.push(M),M.resolve&&Gs(u.events,I,u.events.length-I,M.resolve(u.events.slice(I),u)),M.resolveTo&&(u.events=M.resolveTo(u.events,u))}function A(){const M=x(),I=u.previous,se=u.currentConstruct,ee=u.events.length,Y=Array.from(l);return{from:ee,restore:F};function F(){s=M,u.previous=I,u.currentConstruct=se,u.events.length=ee,l=Y,E()}}function E(){s.line in a&&s.column<2&&(s.column=a[s.line],s.offset+=a[s.line]-1)}}function uY(e,t){const r=t.start._index,s=t.start._bufferIndex,a=t.end._index,i=t.end._bufferIndex;let o;if(r===a)o=[e[r].slice(s,i)];else{if(o=e.slice(r,a),s>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(s):o.shift()}i>0&&o.push(e[a].slice(0,i))}return o}function dY(e,t){let r=-1;const s=[];let a;for(;++r<e.length;){const i=e[r];let o;if(typeof i=="string")o=i;else switch(i){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&a)continue;o=" ";break}default:o=String.fromCharCode(i)}a=i===-2,s.push(o)}return s.join("")}function hY(e){const s={constructs:VC([lY,...(e||{}).extensions||[]]),content:a(CG),defined:[],document:a(TG),flow:a(GQ),lazy:{},string:a(KQ),text:a(JQ)};return s;function a(i){return o;function o(l){return cY(s,i,l)}}}function mY(e){for(;!YC(e););return e}const C5=/[\0\t\n\r]/g;function fY(){let e=1,t="",r=!0,s;return a;function a(i,o,l){const c=[];let u,d,h,m,f;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(o||void 0).decode(i)),h=0,t="",r&&(i.charCodeAt(0)===65279&&h++,r=void 0);h<i.length;){if(C5.lastIndex=h,u=C5.exec(i),m=u&&u.index!==void 0?u.index:i.length,f=i.charCodeAt(m),!u){t=i.slice(h);break}if(f===10&&h===m&&s)c.push(-3),s=void 0;else switch(s&&(c.push(-5),s=void 0),h<m&&(c.push(i.slice(h,m)),e+=m-h),f){case 0:{c.push(65533),e++;break}case 9:{for(d=Math.ceil(e/4)*4,c.push(-2);e++<d;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:s=!0,e=1}h=m+1}return l&&(s&&c.push(-5),t&&c.push(t),c.push(null)),c}}const pY=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function xY(e){return e.replace(pY,gY)}function gY(e,t,r){if(t)return t;if(r.charCodeAt(0)===35){const a=r.charCodeAt(1),i=a===120||a===88;return HC(r.slice(i?2:1),i?16:10)}return Gb(r)||e}const t9={}.hasOwnProperty;function vY(e,t,r){return typeof t!="string"&&(r=t,t=void 0),yY(r)(mY(hY(r).document().write(fY()(e,t,!0))))}function yY(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(ke),autolinkProtocol:A,autolinkEmail:A,atxHeading:i(ut),blockQuote:i(me),characterEscape:A,characterReference:A,codeFenced:i(Ee),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:i(Ee,o),codeText:i(we,o),codeTextData:A,data:A,codeFlowValue:A,definition:i(Le),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:i(_e),hardBreakEscape:i(at),hardBreakTrailing:i(at),htmlFlow:i(Ct,o),htmlFlowData:A,htmlText:i(Ct,o),htmlTextData:A,image:i(L),label:o,link:i(ke),listItem:i(ct),listItemValue:m,listOrdered:i(ot,h),listUnordered:i(ot),paragraph:i($),reference:O,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:i(ut),strong:i(Ne),thematicBreak:i(zt)},exit:{atxHeading:c(),atxHeadingSequence:k,autolink:c(),autolinkEmail:oe,autolinkProtocol:de,blockQuote:c(),characterEscapeValue:E,characterReferenceMarkerHexadecimal:W,characterReferenceMarkerNumeric:W,characterReferenceValue:K,characterReference:X,codeFenced:c(y),codeFencedFence:g,codeFencedFenceInfo:f,codeFencedFenceMeta:x,codeFlowValue:E,codeIndented:c(b),codeText:c(Y),codeTextData:E,data:E,definition:c(),definitionDestinationString:S,definitionLabelString:v,definitionTitleString:w,emphasis:c(),hardBreakEscape:c(I),hardBreakTrailing:c(I),htmlFlow:c(se),htmlFlowData:E,htmlText:c(ee),htmlTextData:E,image:c(ne),label:V,labelText:q,lineEnding:M,link:c(F),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:B,resourceDestinationString:_,resourceTitleString:U,resource:H,setextHeading:c(T),setextHeadingLineSequence:P,setextHeadingText:N,strong:c(),thematicBreak:c()}};r9(t,(e||{}).mdastExtensions||[]);const r={};return s;function s(ue){let G={type:"root",children:[]};const ye={stack:[G],tokenStack:[],config:t,enter:l,exit:u,buffer:o,resume:d,data:r},Me=[];let De=-1;for(;++De<ue.length;)if(ue[De][1].type==="listOrdered"||ue[De][1].type==="listUnordered")if(ue[De][0]==="enter")Me.push(De);else{const He=Me.pop();De=a(ue,He,De)}for(De=-1;++De<ue.length;){const He=t[ue[De][0]];t9.call(He,ue[De][1].type)&&He[ue[De][1].type].call(Object.assign({sliceSerialize:ue[De][2].sliceSerialize},ye),ue[De][1])}if(ye.tokenStack.length>0){const He=ye.tokenStack[ye.tokenStack.length-1];(He[1]||E5).call(ye,void 0,He[0])}for(G.position={start:no(ue.length>0?ue[0][1].start:{line:1,column:1,offset:0}),end:no(ue.length>0?ue[ue.length-2][1].end:{line:1,column:1,offset:0})},De=-1;++De<t.transforms.length;)G=t.transforms[De](G)||G;return G}function a(ue,G,ye){let Me=G-1,De=-1,He=!1,ve,Be,pt,gt;for(;++Me<=ye;){const Ft=ue[Me];switch(Ft[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ft[0]==="enter"?De++:De--,gt=void 0;break}case"lineEndingBlank":{Ft[0]==="enter"&&(ve&&!gt&&!De&&!pt&&(pt=Me),gt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:gt=void 0}if(!De&&Ft[0]==="enter"&&Ft[1].type==="listItemPrefix"||De===-1&&Ft[0]==="exit"&&(Ft[1].type==="listUnordered"||Ft[1].type==="listOrdered")){if(ve){let ge=Me;for(Be=void 0;ge--;){const J=ue[ge];if(J[1].type==="lineEnding"||J[1].type==="lineEndingBlank"){if(J[0]==="exit")continue;Be&&(ue[Be][1].type="lineEndingBlank",He=!0),J[1].type="lineEnding",Be=ge}else if(!(J[1].type==="linePrefix"||J[1].type==="blockQuotePrefix"||J[1].type==="blockQuotePrefixWhitespace"||J[1].type==="blockQuoteMarker"||J[1].type==="listItemIndent"))break}pt&&(!Be||pt<Be)&&(ve._spread=!0),ve.end=Object.assign({},Be?ue[Be][1].start:Ft[1].end),ue.splice(Be||Me,0,["exit",ve,Ft[2]]),Me++,ye++}if(Ft[1].type==="listItemPrefix"){const ge={type:"listItem",_spread:!1,start:Object.assign({},Ft[1].start),end:void 0};ve=ge,ue.splice(Me,0,["enter",ge,Ft[2]]),Me++,ye++,pt=void 0,gt=!0}}}return ue[G][1]._spread=He,ye}function i(ue,G){return ye;function ye(Me){l.call(this,ue(Me),Me),G&&G.call(this,Me)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(ue,G,ye){this.stack[this.stack.length-1].children.push(ue),this.stack.push(ue),this.tokenStack.push([G,ye||void 0]),ue.position={start:no(G.start),end:void 0}}function c(ue){return G;function G(ye){ue&&ue.call(this,ye),u.call(this,ye)}}function u(ue,G){const ye=this.stack.pop(),Me=this.tokenStack.pop();if(Me)Me[0].type!==ue.type&&(G?G.call(this,ue,Me[0]):(Me[1]||E5).call(this,ue,Me[0]));else throw new Error("Cannot close `"+ue.type+"` ("+Md({start:ue.start,end:ue.end})+"): its not open");ye.position.end=no(ue.end)}function d(){return Wb(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function m(ue){if(this.data.expectingFirstListItemValue){const G=this.stack[this.stack.length-2];G.start=Number.parseInt(this.sliceSerialize(ue),10),this.data.expectingFirstListItemValue=void 0}}function f(){const ue=this.resume(),G=this.stack[this.stack.length-1];G.lang=ue}function x(){const ue=this.resume(),G=this.stack[this.stack.length-1];G.meta=ue}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const ue=this.resume(),G=this.stack[this.stack.length-1];G.value=ue.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function b(){const ue=this.resume(),G=this.stack[this.stack.length-1];G.value=ue.replace(/(\r?\n|\r)$/g,"")}function v(ue){const G=this.resume(),ye=this.stack[this.stack.length-1];ye.label=G,ye.identifier=Ia(this.sliceSerialize(ue)).toLowerCase()}function w(){const ue=this.resume(),G=this.stack[this.stack.length-1];G.title=ue}function S(){const ue=this.resume(),G=this.stack[this.stack.length-1];G.url=ue}function k(ue){const G=this.stack[this.stack.length-1];if(!G.depth){const ye=this.sliceSerialize(ue).length;G.depth=ye}}function N(){this.data.setextHeadingSlurpLineEnding=!0}function P(ue){const G=this.stack[this.stack.length-1];G.depth=this.sliceSerialize(ue).codePointAt(0)===61?1:2}function T(){this.data.setextHeadingSlurpLineEnding=void 0}function A(ue){const ye=this.stack[this.stack.length-1].children;let Me=ye[ye.length-1];(!Me||Me.type!=="text")&&(Me=dt(),Me.position={start:no(ue.start),end:void 0},ye.push(Me)),this.stack.push(Me)}function E(ue){const G=this.stack.pop();G.value+=this.sliceSerialize(ue),G.position.end=no(ue.end)}function M(ue){const G=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ye=G.children[G.children.length-1];ye.position.end=no(ue.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(G.type)&&(A.call(this,ue),E.call(this,ue))}function I(){this.data.atHardBreak=!0}function se(){const ue=this.resume(),G=this.stack[this.stack.length-1];G.value=ue}function ee(){const ue=this.resume(),G=this.stack[this.stack.length-1];G.value=ue}function Y(){const ue=this.resume(),G=this.stack[this.stack.length-1];G.value=ue}function F(){const ue=this.stack[this.stack.length-1];if(this.data.inReference){const G=this.data.referenceType||"shortcut";ue.type+="Reference",ue.referenceType=G,delete ue.url,delete ue.title}else delete ue.identifier,delete ue.label;this.data.referenceType=void 0}function ne(){const ue=this.stack[this.stack.length-1];if(this.data.inReference){const G=this.data.referenceType||"shortcut";ue.type+="Reference",ue.referenceType=G,delete ue.url,delete ue.title}else delete ue.identifier,delete ue.label;this.data.referenceType=void 0}function q(ue){const G=this.sliceSerialize(ue),ye=this.stack[this.stack.length-2];ye.label=xY(G),ye.identifier=Ia(G).toLowerCase()}function V(){const ue=this.stack[this.stack.length-1],G=this.resume(),ye=this.stack[this.stack.length-1];if(this.data.inReference=!0,ye.type==="link"){const Me=ue.children;ye.children=Me}else ye.alt=G}function _(){const ue=this.resume(),G=this.stack[this.stack.length-1];G.url=ue}function U(){const ue=this.resume(),G=this.stack[this.stack.length-1];G.title=ue}function H(){this.data.inReference=void 0}function O(){this.data.referenceType="collapsed"}function B(ue){const G=this.resume(),ye=this.stack[this.stack.length-1];ye.label=G,ye.identifier=Ia(this.sliceSerialize(ue)).toLowerCase(),this.data.referenceType="full"}function W(ue){this.data.characterReferenceType=ue.type}function K(ue){const G=this.sliceSerialize(ue),ye=this.data.characterReferenceType;let Me;ye?(Me=HC(G,ye==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Me=Gb(G);const De=this.stack[this.stack.length-1];De.value+=Me}function X(ue){const G=this.stack.pop();G.position.end=no(ue.end)}function de(ue){E.call(this,ue);const G=this.stack[this.stack.length-1];G.url=this.sliceSerialize(ue)}function oe(ue){E.call(this,ue);const G=this.stack[this.stack.length-1];G.url="mailto:"+this.sliceSerialize(ue)}function me(){return{type:"blockquote",children:[]}}function Ee(){return{type:"code",lang:null,meta:null,value:""}}function we(){return{type:"inlineCode",value:""}}function Le(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function _e(){return{type:"emphasis",children:[]}}function ut(){return{type:"heading",depth:0,children:[]}}function at(){return{type:"break"}}function Ct(){return{type:"html",value:""}}function L(){return{type:"image",title:null,url:"",alt:null}}function ke(){return{type:"link",title:null,url:"",children:[]}}function ot(ue){return{type:"list",ordered:ue.type==="listOrdered",start:null,spread:ue._spread,children:[]}}function ct(ue){return{type:"listItem",spread:ue._spread,checked:null,children:[]}}function $(){return{type:"paragraph",children:[]}}function Ne(){return{type:"strong",children:[]}}function dt(){return{type:"text",value:""}}function zt(){return{type:"thematicBreak"}}}function no(e){return{line:e.line,column:e.column,offset:e.offset}}function r9(e,t){let r=-1;for(;++r<t.length;){const s=t[r];Array.isArray(s)?r9(e,s):bY(e,s)}}function bY(e,t){let r;for(r in t)if(t9.call(t,r))switch(r){case"canContainEols":{const s=t[r];s&&e[r].push(...s);break}case"transforms":{const s=t[r];s&&e[r].push(...s);break}case"enter":case"exit":{const s=t[r];s&&Object.assign(e[r],s);break}}}function E5(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Md({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Md({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Md({start:t.start,end:t.end})+") is still open")}function wY(e){const t=this;t.parser=r;function r(s){return vY(s,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function jY(e,t){const r={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,r),e.applyData(t,r)}function NY(e,t){const r={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,r),[e.applyData(t,r),{type:"text",value:`
`}]}function SY(e,t){const r=t.value?t.value+`
`:"",s={},a=t.lang?t.lang.split(/\s+/):[];a.length>0&&(s.className=["language-"+a[0]]);let i={type:"element",tagName:"code",properties:s,children:[{type:"text",value:r}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function kY(e,t){const r={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function _Y(e,t){const r={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function CY(e,t){const r=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",s=String(t.identifier).toUpperCase(),a=Gu(s.toLowerCase()),i=e.footnoteOrder.indexOf(s);let o,l=e.footnoteCounts.get(s);l===void 0?(l=0,e.footnoteOrder.push(s),o=e.footnoteOrder.length):o=i+1,l+=1,e.footnoteCounts.set(s,l);const c={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+a,id:r+"fnref-"+a+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function EY(e,t){const r={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function TY(e,t){if(e.options.allowDangerousHtml){const r={type:"raw",value:t.value};return e.patch(t,r),e.applyData(t,r)}}function n9(e,t){const r=t.referenceType;let s="]";if(r==="collapsed"?s+="[]":r==="full"&&(s+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+s}];const a=e.all(t),i=a[0];i&&i.type==="text"?i.value="["+i.value:a.unshift({type:"text",value:"["});const o=a[a.length-1];return o&&o.type==="text"?o.value+=s:a.push({type:"text",value:s}),a}function AY(e,t){const r=String(t.identifier).toUpperCase(),s=e.definitionById.get(r);if(!s)return n9(e,t);const a={src:Gu(s.url||""),alt:t.alt};s.title!==null&&s.title!==void 0&&(a.title=s.title);const i={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,i),e.applyData(t,i)}function PY(e,t){const r={src:Gu(t.url)};t.alt!==null&&t.alt!==void 0&&(r.alt=t.alt),t.title!==null&&t.title!==void 0&&(r.title=t.title);const s={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,s),e.applyData(t,s)}function RY(e,t){const r={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,r);const s={type:"element",tagName:"code",properties:{},children:[r]};return e.patch(t,s),e.applyData(t,s)}function MY(e,t){const r=String(t.identifier).toUpperCase(),s=e.definitionById.get(r);if(!s)return n9(e,t);const a={href:Gu(s.url||"")};s.title!==null&&s.title!==void 0&&(a.title=s.title);const i={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function OY(e,t){const r={href:Gu(t.url)};t.title!==null&&t.title!==void 0&&(r.title=t.title);const s={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function IY(e,t,r){const s=e.all(t),a=r?DY(r):s9(t),i={},o=[];if(typeof t.checked=="boolean"){const d=s[0];let h;d&&d.type==="element"&&d.tagName==="p"?h=d:(h={type:"element",tagName:"p",properties:{},children:[]},s.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let l=-1;for(;++l<s.length;){const d=s[l];(a||l!==0||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!a?o.push(...d.children):o.push(d)}const c=s[s.length-1];c&&(a||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:i,children:o};return e.patch(t,u),e.applyData(t,u)}function DY(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const r=e.children;let s=-1;for(;!t&&++s<r.length;)t=s9(r[s])}return t}function s9(e){const t=e.spread;return t??e.children.length>1}function FY(e,t){const r={},s=e.all(t);let a=-1;for(typeof t.start=="number"&&t.start!==1&&(r.start=t.start);++a<s.length;){const o=s[a];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){r.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:r,children:e.wrap(s,!0)};return e.patch(t,i),e.applyData(t,i)}function LY(e,t){const r={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function zY(e,t){const r={type:"root",children:e.wrap(e.all(t))};return e.patch(t,r),e.applyData(t,r)}function $Y(e,t){const r={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function qY(e,t){const r=e.all(t),s=r.shift(),a=[];if(s){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([s],!0)};e.patch(t.children[0],o),a.push(o)}if(r.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(r,!0)},l=Bb(t.children[1]),c=FC(t.children[t.children.length-1]);l&&c&&(o.position={start:l,end:c}),a.push(o)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(t,i),e.applyData(t,i)}function BY(e,t,r){const s=r?r.children:void 0,i=(s?s.indexOf(t):1)===0?"th":"td",o=r&&r.type==="table"?r.align:void 0,l=o?o.length:t.children.length;let c=-1;const u=[];for(;++c<l;){const h=t.children[c],m={},f=o?o[c]:void 0;f&&(m.align=f);let x={type:"element",tagName:i,properties:m,children:[]};h&&(x.children=e.all(h),e.patch(h,x),x=e.applyData(h,x)),u.push(x)}const d={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,d),e.applyData(t,d)}function UY(e,t){const r={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}const T5=9,A5=32;function VY(e){const t=String(e),r=/\r?\n|\r/g;let s=r.exec(t),a=0;const i=[];for(;s;)i.push(P5(t.slice(a,s.index),a>0,!0),s[0]),a=s.index+s[0].length,s=r.exec(t);return i.push(P5(t.slice(a),a>0,!1)),i.join("")}function P5(e,t,r){let s=0,a=e.length;if(t){let i=e.codePointAt(s);for(;i===T5||i===A5;)s++,i=e.codePointAt(s)}if(r){let i=e.codePointAt(a-1);for(;i===T5||i===A5;)a--,i=e.codePointAt(a-1)}return a>s?e.slice(s,a):""}function HY(e,t){const r={type:"text",value:VY(String(t.value))};return e.patch(t,r),e.applyData(t,r)}function WY(e,t){const r={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,r),e.applyData(t,r)}const GY={blockquote:jY,break:NY,code:SY,delete:kY,emphasis:_Y,footnoteReference:CY,heading:EY,html:TY,imageReference:AY,image:PY,inlineCode:RY,linkReference:MY,link:OY,listItem:IY,list:FY,paragraph:LY,root:zY,strong:$Y,table:qY,tableCell:UY,tableRow:BY,text:HY,thematicBreak:WY,toml:Fm,yaml:Fm,definition:Fm,footnoteDefinition:Fm};function Fm(){}const a9=-1,_p=0,Id=1,xf=2,Yb=3,Kb=4,Jb=5,Xb=6,i9=7,o9=8,R5=typeof self=="object"?self:globalThis,QY=(e,t)=>{const r=(a,i)=>(e.set(i,a),a),s=a=>{if(e.has(a))return e.get(a);const[i,o]=t[a];switch(i){case _p:case a9:return r(o,a);case Id:{const l=r([],a);for(const c of o)l.push(s(c));return l}case xf:{const l=r({},a);for(const[c,u]of o)l[s(c)]=s(u);return l}case Yb:return r(new Date(o),a);case Kb:{const{source:l,flags:c}=o;return r(new RegExp(l,c),a)}case Jb:{const l=r(new Map,a);for(const[c,u]of o)l.set(s(c),s(u));return l}case Xb:{const l=r(new Set,a);for(const c of o)l.add(s(c));return l}case i9:{const{name:l,message:c}=o;return r(new R5[l](c),a)}case o9:return r(BigInt(o),a);case"BigInt":return r(Object(BigInt(o)),a);case"ArrayBuffer":return r(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return r(new DataView(l),o)}}return r(new R5[i](o),a)};return s},M5=e=>QY(new Map,e)(0),xc="",{toString:YY}={},{keys:KY}=Object,cd=e=>{const t=typeof e;if(t!=="object"||!e)return[_p,t];const r=YY.call(e).slice(8,-1);switch(r){case"Array":return[Id,xc];case"Object":return[xf,xc];case"Date":return[Yb,xc];case"RegExp":return[Kb,xc];case"Map":return[Jb,xc];case"Set":return[Xb,xc];case"DataView":return[Id,r]}return r.includes("Array")?[Id,r]:r.includes("Error")?[i9,r]:[xf,r]},Lm=([e,t])=>e===_p&&(t==="function"||t==="symbol"),JY=(e,t,r,s)=>{const a=(o,l)=>{const c=s.push(o)-1;return r.set(l,c),c},i=o=>{if(r.has(o))return r.get(o);let[l,c]=cd(o);switch(l){case _p:{let d=o;switch(c){case"bigint":l=o9,d=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);d=null;break;case"undefined":return a([a9],o)}return a([l,d],o)}case Id:{if(c){let m=o;return c==="DataView"?m=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(m=new Uint8Array(o)),a([c,[...m]],o)}const d=[],h=a([l,d],o);for(const m of o)d.push(i(m));return h}case xf:{if(c)switch(c){case"BigInt":return a([c,o.toString()],o);case"Boolean":case"Number":case"String":return a([c,o.valueOf()],o)}if(t&&"toJSON"in o)return i(o.toJSON());const d=[],h=a([l,d],o);for(const m of KY(o))(e||!Lm(cd(o[m])))&&d.push([i(m),i(o[m])]);return h}case Yb:return a([l,o.toISOString()],o);case Kb:{const{source:d,flags:h}=o;return a([l,{source:d,flags:h}],o)}case Jb:{const d=[],h=a([l,d],o);for(const[m,f]of o)(e||!(Lm(cd(m))||Lm(cd(f))))&&d.push([i(m),i(f)]);return h}case Xb:{const d=[],h=a([l,d],o);for(const m of o)(e||!Lm(cd(m)))&&d.push(i(m));return h}}const{message:u}=o;return a([l,{name:c,message:u}],o)};return i},O5=(e,{json:t,lossy:r}={})=>{const s=[];return JY(!(t||r),!!t,new Map,s)(e),s},gf=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?M5(O5(e,t)):structuredClone(e):(e,t)=>M5(O5(e,t));function XY(e,t){const r=[{type:"text",value:""}];return t>1&&r.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),r}function ZY(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function eK(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=e.options.footnoteBackContent||XY,s=e.options.footnoteBackLabel||ZY,a=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const d=e.all(u),h=String(u.identifier).toUpperCase(),m=Gu(h.toLowerCase());let f=0;const x=[],g=e.footnoteCounts.get(h);for(;g!==void 0&&++f<=g;){x.length>0&&x.push({type:"text",value:" "});let v=typeof r=="string"?r:r(c,f);typeof v=="string"&&(v={type:"text",value:v}),x.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+m+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof s=="string"?s:s(c,f),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const y=d[d.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const v=y.children[y.children.length-1];v&&v.type==="text"?v.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...x)}else d.push(...x);const b={type:"element",tagName:"li",properties:{id:t+"fn-"+m},children:e.wrap(d,!0)};e.patch(u,b),l.push(b)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...gf(o),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const Bh=function(e){if(e==null)return sK;if(typeof e=="function")return Cp(e);if(typeof e=="object")return Array.isArray(e)?tK(e):rK(e);if(typeof e=="string")return nK(e);throw new Error("Expected function, string, or object as test")};function tK(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=Bh(e[r]);return Cp(s);function s(...a){let i=-1;for(;++i<t.length;)if(t[i].apply(this,a))return!0;return!1}}function rK(e){const t=e;return Cp(r);function r(s){const a=s;let i;for(i in e)if(a[i]!==t[i])return!1;return!0}}function nK(e){return Cp(t);function t(r){return r&&r.type===e}}function Cp(e){return t;function t(r,s,a){return!!(aK(r)&&e.call(this,r,typeof s=="number"?s:void 0,a||void 0))}}function sK(){return!0}function aK(e){return e!==null&&typeof e=="object"&&"type"in e}const l9=[],iK=!0,N1=!1,c9="skip";function Zb(e,t,r,s){let a;typeof t=="function"&&typeof r!="function"?(s=r,r=t):a=t;const i=Bh(a),o=s?-1:1;l(e,void 0,[])();function l(c,u,d){const h=c&&typeof c=="object"?c:{};if(typeof h.type=="string"){const f=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(c.type+(f?"<"+f+">":""))+")"})}return m;function m(){let f=l9,x,g,y;if((!t||i(c,u,d[d.length-1]||void 0))&&(f=oK(r(c,d)),f[0]===N1))return f;if("children"in c&&c.children){const b=c;if(b.children&&f[0]!==c9)for(g=(s?b.children.length:-1)+o,y=d.concat(b);g>-1&&g<b.children.length;){const v=b.children[g];if(x=l(v,g,y)(),x[0]===N1)return x;g=typeof x[1]=="number"?x[1]:g+o}}return f}}}function oK(e){return Array.isArray(e)?e:typeof e=="number"?[iK,e]:e==null?l9:[e]}function ew(e,t,r,s){let a,i,o;typeof t=="function"&&typeof r!="function"?(i=void 0,o=t,a=r):(i=t,o=r,a=s),Zb(e,i,l,a);function l(c,u){const d=u[u.length-1],h=d?d.children.indexOf(c):void 0;return o(c,h,d)}}const S1={}.hasOwnProperty,lK={};function cK(e,t){const r=t||lK,s=new Map,a=new Map,i=new Map,o={...GY,...r.handlers},l={all:u,applyData:dK,definitionById:s,footnoteById:a,footnoteCounts:i,footnoteOrder:[],handlers:o,one:c,options:r,patch:uK,wrap:mK};return ew(e,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const h=d.type==="definition"?s:a,m=String(d.identifier).toUpperCase();h.has(m)||h.set(m,d)}}),l;function c(d,h){const m=d.type,f=l.handlers[m];if(S1.call(l.handlers,m)&&f)return f(l,d,h);if(l.options.passThrough&&l.options.passThrough.includes(m)){if("children"in d){const{children:g,...y}=d,b=gf(y);return b.children=l.all(d),b}return gf(d)}return(l.options.unknownHandler||hK)(l,d,h)}function u(d){const h=[];if("children"in d){const m=d.children;let f=-1;for(;++f<m.length;){const x=l.one(m[f],d);if(x){if(f&&m[f-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=I5(x.value)),!Array.isArray(x)&&x.type==="element")){const g=x.children[0];g&&g.type==="text"&&(g.value=I5(g.value))}Array.isArray(x)?h.push(...x):h.push(x)}}}return h}}function uK(e,t){e.position&&(t.position=ZW(e))}function dK(e,t){let r=t;if(e&&e.data){const s=e.data.hName,a=e.data.hChildren,i=e.data.hProperties;if(typeof s=="string")if(r.type==="element")r.tagName=s;else{const o="children"in r?r.children:[r];r={type:"element",tagName:s,properties:{},children:o}}r.type==="element"&&i&&Object.assign(r.properties,gf(i)),"children"in r&&r.children&&a!==null&&a!==void 0&&(r.children=a)}return r}function hK(e,t){const r=t.data||{},s="value"in t&&!(S1.call(r,"hProperties")||S1.call(r,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function mK(e,t){const r=[];let s=-1;for(t&&r.push({type:"text",value:`
`});++s<e.length;)s&&r.push({type:"text",value:`
`}),r.push(e[s]);return t&&e.length>0&&r.push({type:"text",value:`
`}),r}function I5(e){let t=0,r=e.charCodeAt(t);for(;r===9||r===32;)t++,r=e.charCodeAt(t);return e.slice(t)}function D5(e,t){const r=cK(e,t),s=r.one(e,void 0),a=eK(r),i=Array.isArray(s)?{type:"root",children:s}:s||{type:"root",children:[]};return a&&i.children.push({type:"text",value:`
`},a),i}function fK(e,t){return e&&"run"in e?async function(r,s){const a=D5(r,{file:s,...t});await e.run(a,s)}:function(r,s){return D5(r,{file:s,...e||t})}}function F5(e){if(e)throw e}var f0=Object.prototype.hasOwnProperty,u9=Object.prototype.toString,L5=Object.defineProperty,z5=Object.getOwnPropertyDescriptor,$5=function(t){return typeof Array.isArray=="function"?Array.isArray(t):u9.call(t)==="[object Array]"},q5=function(t){if(!t||u9.call(t)!=="[object Object]")return!1;var r=f0.call(t,"constructor"),s=t.constructor&&t.constructor.prototype&&f0.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!s)return!1;var a;for(a in t);return typeof a>"u"||f0.call(t,a)},B5=function(t,r){L5&&r.name==="__proto__"?L5(t,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):t[r.name]=r.newValue},U5=function(t,r){if(r==="__proto__")if(f0.call(t,r)){if(z5)return z5(t,r).value}else return;return t[r]},pK=function e(){var t,r,s,a,i,o,l=arguments[0],c=1,u=arguments.length,d=!1;for(typeof l=="boolean"&&(d=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<u;++c)if(t=arguments[c],t!=null)for(r in t)s=U5(l,r),a=U5(t,r),l!==a&&(d&&a&&(q5(a)||(i=$5(a)))?(i?(i=!1,o=s&&$5(s)?s:[]):o=s&&q5(s)?s:{},B5(l,{name:r,newValue:e(d,o,a)})):typeof a<"u"&&B5(l,{name:r,newValue:a}));return l};const Zx=Ef(pK);function k1(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function xK(){const e=[],t={run:r,use:s};return t;function r(...a){let i=-1;const o=a.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...a);function l(c,...u){const d=e[++i];let h=-1;if(c){o(c);return}for(;++h<a.length;)(u[h]===null||u[h]===void 0)&&(u[h]=a[h]);a=u,d?gK(d,l)(...u):o(null,...u)}}function s(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function gK(e,t){let r;return s;function s(...o){const l=e.length>o.length;let c;l&&o.push(a);try{c=e.apply(this,o)}catch(u){const d=u;if(l&&r)throw d;return a(d)}l||(c&&c.then&&typeof c.then=="function"?c.then(i,a):c instanceof Error?a(c):i(c))}function a(o,...l){r||(r=!0,t(o,...l))}function i(o){a(null,o)}}const Ua={basename:vK,dirname:yK,extname:bK,join:wK,sep:"/"};function vK(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Uh(e);let r=0,s=-1,a=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.codePointAt(a)===47){if(i){r=a+1;break}}else s<0&&(i=!0,s=a+1);return s<0?"":e.slice(r,s)}if(t===e)return"";let o=-1,l=t.length-1;for(;a--;)if(e.codePointAt(a)===47){if(i){r=a+1;break}}else o<0&&(i=!0,o=a+1),l>-1&&(e.codePointAt(a)===t.codePointAt(l--)?l<0&&(s=a):(l=-1,s=o));return r===s?s=o:s<0&&(s=e.length),e.slice(r,s)}function yK(e){if(Uh(e),e.length===0)return".";let t=-1,r=e.length,s;for(;--r;)if(e.codePointAt(r)===47){if(s){t=r;break}}else s||(s=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function bK(e){Uh(e);let t=e.length,r=-1,s=0,a=-1,i=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){s=t+1;break}continue}r<0&&(o=!0,r=t+1),l===46?a<0?a=t:i!==1&&(i=1):a>-1&&(i=-1)}return a<0||r<0||i===0||i===1&&a===r-1&&a===s+1?"":e.slice(a,r)}function wK(...e){let t=-1,r;for(;++t<e.length;)Uh(e[t]),e[t]&&(r=r===void 0?e[t]:r+"/"+e[t]);return r===void 0?".":jK(r)}function jK(e){Uh(e);const t=e.codePointAt(0)===47;let r=NK(e,!t);return r.length===0&&!t&&(r="."),r.length>0&&e.codePointAt(e.length-1)===47&&(r+="/"),t?"/"+r:r}function NK(e,t){let r="",s=0,a=-1,i=0,o=-1,l,c;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(a===o-1||i===1))if(a!==o-1&&i===2){if(r.length<2||s!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(c=r.lastIndexOf("/"),c!==r.length-1){c<0?(r="",s=0):(r=r.slice(0,c),s=r.length-1-r.lastIndexOf("/")),a=o,i=0;continue}}else if(r.length>0){r="",s=0,a=o,i=0;continue}}t&&(r=r.length>0?r+"/..":"..",s=2)}else r.length>0?r+="/"+e.slice(a+1,o):r=e.slice(a+1,o),s=o-a-1;a=o,i=0}else l===46&&i>-1?i++:i=-1}return r}function Uh(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const SK={cwd:kK};function kK(){return"/"}function _1(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function _K(e){if(typeof e=="string")e=new URL(e);else if(!_1(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return CK(e)}function CK(e){if(e.hostname!==""){const s=new TypeError('File URL host must be "localhost" or empty on darwin');throw s.code="ERR_INVALID_FILE_URL_HOST",s}const t=e.pathname;let r=-1;for(;++r<t.length;)if(t.codePointAt(r)===37&&t.codePointAt(r+1)===50){const s=t.codePointAt(r+2);if(s===70||s===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const eg=["history","path","basename","stem","extname","dirname"];class d9{constructor(t){let r;t?_1(t)?r={path:t}:typeof t=="string"||EK(t)?r={value:t}:r=t:r={},this.cwd="cwd"in r?"":SK.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let s=-1;for(;++s<eg.length;){const i=eg[s];i in r&&r[i]!==void 0&&r[i]!==null&&(this[i]=i==="history"?[...r[i]]:r[i])}let a;for(a in r)eg.includes(a)||(this[a]=r[a])}get basename(){return typeof this.path=="string"?Ua.basename(this.path):void 0}set basename(t){rg(t,"basename"),tg(t,"basename"),this.path=Ua.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Ua.dirname(this.path):void 0}set dirname(t){V5(this.basename,"dirname"),this.path=Ua.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Ua.extname(this.path):void 0}set extname(t){if(tg(t,"extname"),V5(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ua.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){_1(t)&&(t=_K(t)),rg(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Ua.basename(this.path,this.extname):void 0}set stem(t){rg(t,"stem"),tg(t,"stem"),this.path=Ua.join(this.dirname||"",t+(this.extname||""))}fail(t,r,s){const a=this.message(t,r,s);throw a.fatal=!0,a}info(t,r,s){const a=this.message(t,r,s);return a.fatal=void 0,a}message(t,r,s){const a=new Zn(t,r,s);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function tg(e,t){if(e&&e.includes(Ua.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Ua.sep+"`")}function rg(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function V5(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function EK(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const TK=function(e){const s=this.constructor.prototype,a=s[e],i=function(){return a.apply(i,arguments)};return Object.setPrototypeOf(i,s),i},AK={}.hasOwnProperty;class tw extends TK{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=xK()}copy(){const t=new tw;let r=-1;for(;++r<this.attachers.length;){const s=this.attachers[r];t.use(...s)}return t.data(Zx(!0,{},this.namespace)),t}data(t,r){return typeof t=="string"?arguments.length===2?(ag("data",this.frozen),this.namespace[t]=r,this):AK.call(this.namespace,t)&&this.namespace[t]||void 0:t?(ag("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[r,...s]=this.attachers[this.freezeIndex];if(s[0]===!1)continue;s[0]===!0&&(s[0]=void 0);const a=r.call(t,...s);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const r=zm(t),s=this.parser||this.Parser;return ng("parse",s),s(String(r),r)}process(t,r){const s=this;return this.freeze(),ng("process",this.parser||this.Parser),sg("process",this.compiler||this.Compiler),r?a(void 0,r):new Promise(a);function a(i,o){const l=zm(t),c=s.parse(l);s.run(c,l,function(d,h,m){if(d||!h||!m)return u(d);const f=h,x=s.stringify(f,m);MK(x)?m.value=x:m.result=x,u(d,m)});function u(d,h){d||!h?o(d):i?i(h):r(void 0,h)}}}processSync(t){let r=!1,s;return this.freeze(),ng("processSync",this.parser||this.Parser),sg("processSync",this.compiler||this.Compiler),this.process(t,a),W5("processSync","process",r),s;function a(i,o){r=!0,F5(i),s=o}}run(t,r,s){H5(t),this.freeze();const a=this.transformers;return!s&&typeof r=="function"&&(s=r,r=void 0),s?i(void 0,s):new Promise(i);function i(o,l){const c=zm(r);a.run(t,c,u);function u(d,h,m){const f=h||t;d?l(d):o?o(f):s(void 0,f,m)}}}runSync(t,r){let s=!1,a;return this.run(t,r,i),W5("runSync","run",s),a;function i(o,l){F5(o),a=l,s=!0}}stringify(t,r){this.freeze();const s=zm(r),a=this.compiler||this.Compiler;return sg("stringify",a),H5(t),a(t,s)}use(t,...r){const s=this.attachers,a=this.namespace;if(ag("use",this.frozen),t!=null)if(typeof t=="function")c(t,r);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[d,...h]=u;c(d,h)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(a.settings=Zx(!0,a.settings,u.settings))}function l(u){let d=-1;if(u!=null)if(Array.isArray(u))for(;++d<u.length;){const h=u[d];i(h)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,d){let h=-1,m=-1;for(;++h<s.length;)if(s[h][0]===u){m=h;break}if(m===-1)s.push([u,...d]);else if(d.length>0){let[f,...x]=d;const g=s[m][1];k1(g)&&k1(f)&&(f=Zx(!0,g,f)),s[m]=[u,f,...x]}}}}const PK=new tw().freeze();function ng(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function sg(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function ag(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function H5(e){if(!k1(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function W5(e,t,r){if(!r)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function zm(e){return RK(e)?e:new d9(e)}function RK(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function MK(e){return typeof e=="string"||OK(e)}function OK(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const IK="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",G5=[],Q5={allowDangerousHtml:!0},DK=/^(https?|ircs?|mailto|xmpp)$/i,FK=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function tr(e){const t=LK(e),r=zK(e);return $K(t.runSync(t.parse(r),r),e)}function LK(e){const t=e.rehypePlugins||G5,r=e.remarkPlugins||G5,s=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Q5}:Q5;return PK().use(wY).use(r).use(fK,s).use(t)}function zK(e){const t=e.children||"",r=new d9;return typeof t=="string"&&(r.value=t),r}function $K(e,t){const r=t.allowedElements,s=t.allowElement,a=t.components,i=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||qK;for(const d of FK)Object.hasOwn(t,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+IK+d.id,void 0);return ew(e,u),sG(e,{Fragment:n.Fragment,components:a,ignoreInvalidStyle:!0,jsx:n.jsx,jsxs:n.jsxs,passKeys:!0,passNode:!0});function u(d,h,m){if(d.type==="raw"&&m&&typeof h=="number")return o?m.children.splice(h,1):m.children[h]={type:"text",value:d.value},h;if(d.type==="element"){let f;for(f in Kx)if(Object.hasOwn(Kx,f)&&Object.hasOwn(d.properties,f)){const x=d.properties[f],g=Kx[f];(g===null||g.includes(d.tagName))&&(d.properties[f]=c(String(x||""),f,d))}}if(d.type==="element"){let f=r?!r.includes(d.tagName):i?i.includes(d.tagName):!1;if(!f&&s&&typeof h=="number"&&(f=!s(d,h,m)),f&&m&&typeof h=="number")return l&&d.children?m.children.splice(h,1,...d.children):m.children.splice(h,1),h}}}function qK(e){const t=e.indexOf(":"),r=e.indexOf("?"),s=e.indexOf("#"),a=e.indexOf("/");return t===-1||a!==-1&&t>a||r!==-1&&t>r||s!==-1&&t>s||DK.test(e.slice(0,t))?e:""}function h9(e,t){const r=String(e);let s=r.indexOf(t),a=s,i=0,o=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;s!==-1;)s===a?++i>o&&(o=i):i=1,a=s+t.length,s=r.indexOf(t,a);return o}function BK(){return{enter:{mathFlow:e,mathFlowFenceMeta:t,mathText:i},exit:{mathFlow:a,mathFlowFence:s,mathFlowFenceMeta:r,mathFlowValue:l,mathText:o,mathTextData:l}};function e(c){const u={type:"element",tagName:"code",properties:{className:["language-math","math-display"]},children:[]};this.enter({type:"math",meta:null,value:"",data:{hName:"pre",hChildren:[u]}},c)}function t(){this.buffer()}function r(){const c=this.resume(),u=this.stack[this.stack.length-1];u.type,u.meta=c}function s(){this.data.mathFlowInside||(this.buffer(),this.data.mathFlowInside=!0)}function a(c){const u=this.resume().replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),d=this.stack[this.stack.length-1];d.type,this.exit(c),d.value=u;const h=d.data.hChildren[0];h.type,h.tagName,h.children.push({type:"text",value:u}),this.data.mathFlowInside=void 0}function i(c){this.enter({type:"inlineMath",value:"",data:{hName:"code",hProperties:{className:["language-math","math-inline"]},hChildren:[]}},c),this.buffer()}function o(c){const u=this.resume(),d=this.stack[this.stack.length-1];d.type,this.exit(c),d.value=u,d.data.hChildren.push({type:"text",value:u})}function l(c){this.config.enter.data.call(this,c),this.config.exit.data.call(this,c)}}function UK(e){let t=(e||{}).singleDollarTextMath;return t==null&&(t=!0),s.peek=a,{unsafe:[{character:"\r",inConstruct:"mathFlowMeta"},{character:`
`,inConstruct:"mathFlowMeta"},{character:"$",after:t?void 0:"\\$",inConstruct:"phrasing"},{character:"$",inConstruct:"mathFlowMeta"},{atBreak:!0,character:"$",after:"\\$"}],handlers:{math:r,inlineMath:s}};function r(i,o,l,c){const u=i.value||"",d=l.createTracker(c),h="$".repeat(Math.max(h9(u,"$")+1,2)),m=l.enter("mathFlow");let f=d.move(h);if(i.meta){const x=l.enter("mathFlowMeta");f+=d.move(l.safe(i.meta,{after:`
`,before:f,encode:["$"],...d.current()})),x()}return f+=d.move(`
`),u&&(f+=d.move(u+`
`)),f+=d.move(h),m(),f}function s(i,o,l){let c=i.value||"",u=1;for(t||u++;new RegExp("(^|[^$])"+"\\$".repeat(u)+"([^$]|$)").test(c);)u++;const d="$".repeat(u);/[^ \r\n]/.test(c)&&(/^[ \r\n]/.test(c)&&/[ \r\n]$/.test(c)||/^\$|\$$/.test(c))&&(c=" "+c+" ");let h=-1;for(;++h<l.unsafe.length;){const m=l.unsafe[h];if(!m.atBreak)continue;const f=l.compilePattern(m);let x;for(;x=f.exec(c);){let g=x.index;c.codePointAt(g)===10&&c.codePointAt(g-1)===13&&g--,c=c.slice(0,g)+" "+c.slice(x.index+1)}}return d+c+d}function a(){return"$"}}const VK={tokenize:HK,concrete:!0,name:"mathFlow"},Y5={tokenize:WK,partial:!0};function HK(e,t,r){const s=this,a=s.events[s.events.length-1],i=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0;let o=0;return l;function l(v){return e.enter("mathFlow"),e.enter("mathFlowFence"),e.enter("mathFlowFenceSequence"),c(v)}function c(v){return v===36?(e.consume(v),o++,c):o<2?r(v):(e.exit("mathFlowFenceSequence"),cr(e,u,"whitespace")(v))}function u(v){return v===null||Mt(v)?h(v):(e.enter("mathFlowFenceMeta"),e.enter("chunkString",{contentType:"string"}),d(v))}function d(v){return v===null||Mt(v)?(e.exit("chunkString"),e.exit("mathFlowFenceMeta"),h(v)):v===36?r(v):(e.consume(v),d)}function h(v){return e.exit("mathFlowFence"),s.interrupt?t(v):e.attempt(Y5,m,y)(v)}function m(v){return e.attempt({tokenize:b,partial:!0},y,f)(v)}function f(v){return(i?cr(e,x,"linePrefix",i+1):x)(v)}function x(v){return v===null?y(v):Mt(v)?e.attempt(Y5,m,y)(v):(e.enter("mathFlowValue"),g(v))}function g(v){return v===null||Mt(v)?(e.exit("mathFlowValue"),x(v)):(e.consume(v),g)}function y(v){return e.exit("mathFlow"),t(v)}function b(v,w,S){let k=0;return cr(v,N,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function N(A){return v.enter("mathFlowFence"),v.enter("mathFlowFenceSequence"),P(A)}function P(A){return A===36?(k++,v.consume(A),P):k<o?S(A):(v.exit("mathFlowFenceSequence"),cr(v,T,"whitespace")(A))}function T(A){return A===null||Mt(A)?(v.exit("mathFlowFence"),w(A)):S(A)}}}function WK(e,t,r){const s=this;return a;function a(o){return o===null?t(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i)}function i(o){return s.parser.lazy[s.now().line]?r(o):t(o)}}function GK(e){let r=(e||{}).singleDollarTextMath;return r==null&&(r=!0),{tokenize:s,resolve:QK,previous:YK,name:"mathText"};function s(a,i,o){let l=0,c,u;return d;function d(g){return a.enter("mathText"),a.enter("mathTextSequence"),h(g)}function h(g){return g===36?(a.consume(g),l++,h):l<2&&!r?o(g):(a.exit("mathTextSequence"),m(g))}function m(g){return g===null?o(g):g===36?(u=a.enter("mathTextSequence"),c=0,x(g)):g===32?(a.enter("space"),a.consume(g),a.exit("space"),m):Mt(g)?(a.enter("lineEnding"),a.consume(g),a.exit("lineEnding"),m):(a.enter("mathTextData"),f(g))}function f(g){return g===null||g===32||g===36||Mt(g)?(a.exit("mathTextData"),m(g)):(a.consume(g),f)}function x(g){return g===36?(a.consume(g),c++,x):c===l?(a.exit("mathTextSequence"),a.exit("mathText"),i(g)):(u.type="mathTextData",f(g))}}}function QK(e){let t=e.length-4,r=3,s,a;if((e[r][1].type==="lineEnding"||e[r][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(s=r;++s<t;)if(e[s][1].type==="mathTextData"){e[t][1].type="mathTextPadding",e[r][1].type="mathTextPadding",r+=2,t-=2;break}}for(s=r-1,t++;++s<=t;)a===void 0?s!==t&&e[s][1].type!=="lineEnding"&&(a=s):(s===t||e[s][1].type==="lineEnding")&&(e[a][1].type="mathTextData",s!==a+2&&(e[a][1].end=e[s-1][1].end,e.splice(a+2,s-a-2),t-=s-a-2,s=a+2),a=void 0);return e}function YK(e){return e!==36||this.events[this.events.length-1][1].type==="characterEscape"}function KK(e){return{flow:{36:VK},text:{36:GK(e)}}}class bs{constructor(t,r,s){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=t,this.start=r,this.end=s}static range(t,r){return r?!t||!t.loc||!r.loc||t.loc.lexer!==r.loc.lexer?null:new bs(t.loc.lexer,t.loc.start,r.loc.end):t&&t.loc}}class Qs{constructor(t,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=t,this.loc=r}range(t,r){return new Qs(r,bs.range(this,t))}}class Ke{constructor(t,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var s="KaTeX parse error: "+t,a,i,o=r&&r.loc;if(o&&o.start<=o.end){var l=o.lexer.input;a=o.start,i=o.end,a===l.length?s+=" at end of input: ":s+=" at position "+(a+1)+": ";var c=l.slice(a,i).replace(/[^]/g,"$&"),u;a>15?u=""+l.slice(a-15,a):u=l.slice(0,a);var d;i+15<l.length?d=l.slice(i,i+15)+"":d=l.slice(i),s+=u+c+d}var h=new Error(s);return h.name="ParseError",h.__proto__=Ke.prototype,h.position=a,a!=null&&i!=null&&(h.length=i-a),h.rawMessage=t,h}}Ke.prototype.__proto__=Error.prototype;var JK=function(t,r){return t===void 0?r:t},XK=/([A-Z])/g,ZK=function(t){return t.replace(XK,"-$1").toLowerCase()},eJ={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},tJ=/[&><"']/g;function rJ(e){return String(e).replace(tJ,t=>eJ[t])}var m9=function e(t){return t.type==="ordgroup"||t.type==="color"?t.body.length===1?e(t.body[0]):t:t.type==="font"?e(t.body):t},nJ=function(t){var r=m9(t);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},sJ=function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t},aJ=function(t){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(t);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},_r={deflt:JK,escape:rJ,hyphenate:ZK,getBaseElem:m9,isCharacterBox:nJ,protocolFromUrl:aJ},Dd={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:e=>"#"+e},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(e,t)=>(t.push(e),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:e=>Math.max(0,e),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:e=>Math.max(0,e),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:e=>Math.max(0,e),cli:"-e, --max-expand <n>",cliProcessor:e=>e==="Infinity"?1/0:parseInt(e)},globalGroup:{type:"boolean",cli:!1}};function iJ(e){if(e.default)return e.default;var t=e.type,r=Array.isArray(t)?t[0]:t;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class rw{constructor(t){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,t=t||{};for(var r in Dd)if(Dd.hasOwnProperty(r)){var s=Dd[r];this[r]=t[r]!==void 0?s.processor?s.processor(t[r]):t[r]:iJ(s)}}reportNonstrict(t,r,s){var a=this.strict;if(typeof a=="function"&&(a=a(t,r,s)),!(!a||a==="ignore")){if(a===!0||a==="error")throw new Ke("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+t+"]"),s);a==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+t+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+t+"]"))}}useStrictBehavior(t,r,s){var a=this.strict;if(typeof a=="function")try{a=a(t,r,s)}catch{a="error"}return!a||a==="ignore"?!1:a===!0||a==="error"?!0:a==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+t+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+t+"]")),!1)}isTrusted(t){if(t.url&&!t.protocol){var r=_r.protocolFromUrl(t.url);if(r==null)return!1;t.protocol=r}var s=typeof this.trust=="function"?this.trust(t):this.trust;return!!s}}class so{constructor(t,r,s){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=t,this.size=r,this.cramped=s}sup(){return Ga[oJ[this.id]]}sub(){return Ga[lJ[this.id]]}fracNum(){return Ga[cJ[this.id]]}fracDen(){return Ga[uJ[this.id]]}cramp(){return Ga[dJ[this.id]]}text(){return Ga[hJ[this.id]]}isTight(){return this.size>=2}}var nw=0,vf=1,Gc=2,Ti=3,yh=4,la=5,Su=6,ls=7,Ga=[new so(nw,0,!1),new so(vf,0,!0),new so(Gc,1,!1),new so(Ti,1,!0),new so(yh,2,!1),new so(la,2,!0),new so(Su,3,!1),new so(ls,3,!0)],oJ=[yh,la,yh,la,Su,ls,Su,ls],lJ=[la,la,la,la,ls,ls,ls,ls],cJ=[Gc,Ti,yh,la,Su,ls,Su,ls],uJ=[Ti,Ti,la,la,ls,ls,ls,ls],dJ=[vf,vf,Ti,Ti,la,la,ls,ls],hJ=[nw,vf,Gc,Ti,Gc,Ti,Gc,Ti],Bt={DISPLAY:Ga[nw],TEXT:Ga[Gc],SCRIPT:Ga[yh],SCRIPTSCRIPT:Ga[Su]},C1=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function mJ(e){for(var t=0;t<C1.length;t++)for(var r=C1[t],s=0;s<r.blocks.length;s++){var a=r.blocks[s];if(e>=a[0]&&e<=a[1])return r.name}return null}var p0=[];C1.forEach(e=>e.blocks.forEach(t=>p0.push(...t)));function f9(e){for(var t=0;t<p0.length;t+=2)if(e>=p0[t]&&e<=p0[t+1])return!0;return!1}var gc=80,fJ=function(t,r){return"M95,"+(622+t+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+t/2.075+" -"+t+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+t)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},pJ=function(t,r){return"M263,"+(601+t+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+t/2.084+" -"+t+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+t)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},xJ=function(t,r){return"M983 "+(10+t+r)+`
l`+t/3.13+" -"+t+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+t)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},gJ=function(t,r){return"M424,"+(2398+t+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+t/4.223+" -"+t+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+t)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+t)+" "+r+`
h400000v`+(40+t)+"h-400000z"},vJ=function(t,r){return"M473,"+(2713+t+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+t/5.298+" -"+t+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+t)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+t)+" "+r+"h400000v"+(40+t)+"H1017.7z"},yJ=function(t){var r=t/2;return"M400000 "+t+" H0 L"+r+" 0 l65 45 L145 "+(t-80)+" H400000z"},bJ=function(t,r,s){var a=s-54-r-t;return"M702 "+(t+r)+"H400000"+(40+t)+`
H742v`+a+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+t)+"H742z"},wJ=function(t,r,s){r=1e3*r;var a="";switch(t){case"sqrtMain":a=fJ(r,gc);break;case"sqrtSize1":a=pJ(r,gc);break;case"sqrtSize2":a=xJ(r,gc);break;case"sqrtSize3":a=gJ(r,gc);break;case"sqrtSize4":a=vJ(r,gc);break;case"sqrtTall":a=bJ(r,gc,s)}return a},jJ=function(t,r){switch(t){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},K5={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},NJ=function(t,r){switch(t){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};let Vh=class{constructor(t){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=t,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(t){return this.classes.includes(t)}toNode(){for(var t=document.createDocumentFragment(),r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t}toMarkup(){for(var t="",r=0;r<this.children.length;r++)t+=this.children[r].toMarkup();return t}toText(){var t=r=>r.toText();return this.children.map(t).join("")}};var Ja={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},$m={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},J5={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function p9(e,t){Ja[e]=t}function sw(e,t,r){if(!Ja[t])throw new Error("Font metrics not found for font: "+t+".");var s=e.charCodeAt(0),a=Ja[t][s];if(!a&&e[0]in J5&&(s=J5[e[0]].charCodeAt(0),a=Ja[t][s]),!a&&r==="text"&&f9(s)&&(a=Ja[t][77]),a)return{depth:a[0],height:a[1],italic:a[2],skew:a[3],width:a[4]}}var ig={};function SJ(e){var t;if(e>=5?t=0:e>=3?t=1:t=2,!ig[t]){var r=ig[t]={cssEmPerMu:$m.quad[t]/18};for(var s in $m)$m.hasOwnProperty(s)&&(r[s]=$m[s][t])}return ig[t]}var kJ=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],X5=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Z5=function(t,r){return r.size<2?t:kJ[t-1][r.size-1]};class bi{constructor(t){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=t.style,this.color=t.color,this.size=t.size||bi.BASESIZE,this.textSize=t.textSize||this.size,this.phantom=!!t.phantom,this.font=t.font||"",this.fontFamily=t.fontFamily||"",this.fontWeight=t.fontWeight||"",this.fontShape=t.fontShape||"",this.sizeMultiplier=X5[this.size-1],this.maxSize=t.maxSize,this.minRuleThickness=t.minRuleThickness,this._fontMetrics=void 0}extend(t){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var s in t)t.hasOwnProperty(s)&&(r[s]=t[s]);return new bi(r)}havingStyle(t){return this.style===t?this:this.extend({style:t,size:Z5(this.textSize,t)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(t){return this.size===t&&this.textSize===t?this:this.extend({style:this.style.text(),size:t,textSize:t,sizeMultiplier:X5[t-1]})}havingBaseStyle(t){t=t||this.style.text();var r=Z5(bi.BASESIZE,t);return this.size===r&&this.textSize===bi.BASESIZE&&this.style===t?this:this.extend({style:t,size:r})}havingBaseSizing(){var t;switch(this.style.id){case 4:case 5:t=3;break;case 6:case 7:t=1;break;default:t=6}return this.extend({style:this.style.text(),size:t})}withColor(t){return this.extend({color:t})}withPhantom(){return this.extend({phantom:!0})}withFont(t){return this.extend({font:t})}withTextFontFamily(t){return this.extend({fontFamily:t,font:""})}withTextFontWeight(t){return this.extend({fontWeight:t,font:""})}withTextFontShape(t){return this.extend({fontShape:t,font:""})}sizingClasses(t){return t.size!==this.size?["sizing","reset-size"+t.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==bi.BASESIZE?["sizing","reset-size"+this.size,"size"+bi.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=SJ(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}bi.BASESIZE=6;var E1={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},_J={ex:!0,em:!0,mu:!0},x9=function(t){return typeof t!="string"&&(t=t.unit),t in E1||t in _J||t==="ex"},Qr=function(t,r){var s;if(t.unit in E1)s=E1[t.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(t.unit==="mu")s=r.fontMetrics().cssEmPerMu;else{var a;if(r.style.isTight()?a=r.havingStyle(r.style.text()):a=r,t.unit==="ex")s=a.fontMetrics().xHeight;else if(t.unit==="em")s=a.fontMetrics().quad;else throw new Ke("Invalid unit: '"+t.unit+"'");a!==r&&(s*=a.sizeMultiplier/r.sizeMultiplier)}return Math.min(t.number*s,r.maxSize)},nt=function(t){return+t.toFixed(4)+"em"},Bo=function(t){return t.filter(r=>r).join(" ")},g9=function(t,r,s){if(this.classes=t||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=s||{},r){r.style.isTight()&&this.classes.push("mtight");var a=r.getColor();a&&(this.style.color=a)}},v9=function(t){var r=document.createElement(t);r.className=Bo(this.classes);for(var s in this.style)this.style.hasOwnProperty(s)&&(r.style[s]=this.style[s]);for(var a in this.attributes)this.attributes.hasOwnProperty(a)&&r.setAttribute(a,this.attributes[a]);for(var i=0;i<this.children.length;i++)r.appendChild(this.children[i].toNode());return r},CJ=/[\s"'>/=\x00-\x1f]/,y9=function(t){var r="<"+t;this.classes.length&&(r+=' class="'+_r.escape(Bo(this.classes))+'"');var s="";for(var a in this.style)this.style.hasOwnProperty(a)&&(s+=_r.hyphenate(a)+":"+this.style[a]+";");s&&(r+=' style="'+_r.escape(s)+'"');for(var i in this.attributes)if(this.attributes.hasOwnProperty(i)){if(CJ.test(i))throw new Ke("Invalid attribute name '"+i+"'");r+=" "+i+'="'+_r.escape(this.attributes[i])+'"'}r+=">";for(var o=0;o<this.children.length;o++)r+=this.children[o].toMarkup();return r+="</"+t+">",r};class Hh{constructor(t,r,s,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,g9.call(this,t,s,a),this.children=r||[]}setAttribute(t,r){this.attributes[t]=r}hasClass(t){return this.classes.includes(t)}toNode(){return v9.call(this,"span")}toMarkup(){return y9.call(this,"span")}}class aw{constructor(t,r,s,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,g9.call(this,r,a),this.children=s||[],this.setAttribute("href",t)}setAttribute(t,r){this.attributes[t]=r}hasClass(t){return this.classes.includes(t)}toNode(){return v9.call(this,"a")}toMarkup(){return y9.call(this,"a")}}class EJ{constructor(t,r,s){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=t,this.classes=["mord"],this.style=s}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createElement("img");t.src=this.src,t.alt=this.alt,t.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(t.style[r]=this.style[r]);return t}toMarkup(){var t='<img src="'+_r.escape(this.src)+'"'+(' alt="'+_r.escape(this.alt)+'"'),r="";for(var s in this.style)this.style.hasOwnProperty(s)&&(r+=_r.hyphenate(s)+":"+this.style[s]+";");return r&&(t+=' style="'+_r.escape(r)+'"'),t+="'/>",t}}var TJ={:"",:"",:"",:""};class xa{constructor(t,r,s,a,i,o,l,c){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=t,this.height=r||0,this.depth=s||0,this.italic=a||0,this.skew=i||0,this.width=o||0,this.classes=l||[],this.style=c||{},this.maxFontSize=0;var u=mJ(this.text.charCodeAt(0));u&&this.classes.push(u+"_fallback"),/[]/.test(this.text)&&(this.text=TJ[this.text])}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=nt(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=Bo(this.classes));for(var s in this.style)this.style.hasOwnProperty(s)&&(r=r||document.createElement("span"),r.style[s]=this.style[s]);return r?(r.appendChild(t),r):t}toMarkup(){var t=!1,r="<span";this.classes.length&&(t=!0,r+=' class="',r+=_r.escape(Bo(this.classes)),r+='"');var s="";this.italic>0&&(s+="margin-right:"+this.italic+"em;");for(var a in this.style)this.style.hasOwnProperty(a)&&(s+=_r.hyphenate(a)+":"+this.style[a]+";");s&&(t=!0,r+=' style="'+_r.escape(s)+'"');var i=_r.escape(this.text);return t?(r+=">",r+=i,r+="</span>",r):i}}class Vi{constructor(t,r){this.children=void 0,this.attributes=void 0,this.children=t||[],this.attributes=r||{}}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"svg");for(var s in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,s)&&r.setAttribute(s,this.attributes[s]);for(var a=0;a<this.children.length;a++)r.appendChild(this.children[a].toNode());return r}toMarkup(){var t='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="'+_r.escape(this.attributes[r])+'"');t+=">";for(var s=0;s<this.children.length;s++)t+=this.children[s].toMarkup();return t+="</svg>",t}}class Uo{constructor(t,r){this.pathName=void 0,this.alternate=void 0,this.pathName=t,this.alternate=r}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",K5[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+_r.escape(this.alternate)+'"/>':'<path d="'+_r.escape(K5[this.pathName])+'"/>'}}class T1{constructor(t){this.attributes=void 0,this.attributes=t||{}}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"line");for(var s in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,s)&&r.setAttribute(s,this.attributes[s]);return r}toMarkup(){var t="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="'+_r.escape(this.attributes[r])+'"');return t+="/>",t}}function eN(e){if(e instanceof xa)return e;throw new Error("Expected symbolNode but got "+String(e)+".")}function AJ(e){if(e instanceof Hh)return e;throw new Error("Expected span<HtmlDomNode> but got "+String(e)+".")}var PJ={bin:1,close:1,inner:1,open:1,punct:1,rel:1},RJ={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Fr={math:{},text:{}};function j(e,t,r,s,a,i){Fr[e][a]={font:t,group:r,replace:s},i&&s&&(Fr[e][s]=Fr[e][a])}var C="math",$e="text",R="main",Z="ams",Vr="accent-token",yt="bin",hs="close",Qu="inner",qt="mathord",bn="op-token",ea="open",Ep="punct",te="rel",Qi="spacing",le="textord";j(C,R,te,"","\\equiv",!0);j(C,R,te,"","\\prec",!0);j(C,R,te,"","\\succ",!0);j(C,R,te,"","\\sim",!0);j(C,R,te,"","\\perp");j(C,R,te,"","\\preceq",!0);j(C,R,te,"","\\succeq",!0);j(C,R,te,"","\\simeq",!0);j(C,R,te,"","\\mid",!0);j(C,R,te,"","\\ll",!0);j(C,R,te,"","\\gg",!0);j(C,R,te,"","\\asymp",!0);j(C,R,te,"","\\parallel");j(C,R,te,"","\\bowtie",!0);j(C,R,te,"","\\smile",!0);j(C,R,te,"","\\sqsubseteq",!0);j(C,R,te,"","\\sqsupseteq",!0);j(C,R,te,"","\\doteq",!0);j(C,R,te,"","\\frown",!0);j(C,R,te,"","\\ni",!0);j(C,R,te,"","\\propto",!0);j(C,R,te,"","\\vdash",!0);j(C,R,te,"","\\dashv",!0);j(C,R,te,"","\\owns");j(C,R,Ep,".","\\ldotp");j(C,R,Ep,"","\\cdotp");j(C,R,le,"#","\\#");j($e,R,le,"#","\\#");j(C,R,le,"&","\\&");j($e,R,le,"&","\\&");j(C,R,le,"","\\aleph",!0);j(C,R,le,"","\\forall",!0);j(C,R,le,"","\\hbar",!0);j(C,R,le,"","\\exists",!0);j(C,R,le,"","\\nabla",!0);j(C,R,le,"","\\flat",!0);j(C,R,le,"","\\ell",!0);j(C,R,le,"","\\natural",!0);j(C,R,le,"","\\clubsuit",!0);j(C,R,le,"","\\wp",!0);j(C,R,le,"","\\sharp",!0);j(C,R,le,"","\\diamondsuit",!0);j(C,R,le,"","\\Re",!0);j(C,R,le,"","\\heartsuit",!0);j(C,R,le,"","\\Im",!0);j(C,R,le,"","\\spadesuit",!0);j(C,R,le,"","\\S",!0);j($e,R,le,"","\\S");j(C,R,le,"","\\P",!0);j($e,R,le,"","\\P");j(C,R,le,"","\\dag");j($e,R,le,"","\\dag");j($e,R,le,"","\\textdagger");j(C,R,le,"","\\ddag");j($e,R,le,"","\\ddag");j($e,R,le,"","\\textdaggerdbl");j(C,R,hs,"","\\rmoustache",!0);j(C,R,ea,"","\\lmoustache",!0);j(C,R,hs,"","\\rgroup",!0);j(C,R,ea,"","\\lgroup",!0);j(C,R,yt,"","\\mp",!0);j(C,R,yt,"","\\ominus",!0);j(C,R,yt,"","\\uplus",!0);j(C,R,yt,"","\\sqcap",!0);j(C,R,yt,"","\\ast");j(C,R,yt,"","\\sqcup",!0);j(C,R,yt,"","\\bigcirc",!0);j(C,R,yt,"","\\bullet",!0);j(C,R,yt,"","\\ddagger");j(C,R,yt,"","\\wr",!0);j(C,R,yt,"","\\amalg");j(C,R,yt,"&","\\And");j(C,R,te,"","\\longleftarrow",!0);j(C,R,te,"","\\Leftarrow",!0);j(C,R,te,"","\\Longleftarrow",!0);j(C,R,te,"","\\longrightarrow",!0);j(C,R,te,"","\\Rightarrow",!0);j(C,R,te,"","\\Longrightarrow",!0);j(C,R,te,"","\\leftrightarrow",!0);j(C,R,te,"","\\longleftrightarrow",!0);j(C,R,te,"","\\Leftrightarrow",!0);j(C,R,te,"","\\Longleftrightarrow",!0);j(C,R,te,"","\\mapsto",!0);j(C,R,te,"","\\longmapsto",!0);j(C,R,te,"","\\nearrow",!0);j(C,R,te,"","\\hookleftarrow",!0);j(C,R,te,"","\\hookrightarrow",!0);j(C,R,te,"","\\searrow",!0);j(C,R,te,"","\\leftharpoonup",!0);j(C,R,te,"","\\rightharpoonup",!0);j(C,R,te,"","\\swarrow",!0);j(C,R,te,"","\\leftharpoondown",!0);j(C,R,te,"","\\rightharpoondown",!0);j(C,R,te,"","\\nwarrow",!0);j(C,R,te,"","\\rightleftharpoons",!0);j(C,Z,te,"","\\nless",!0);j(C,Z,te,"","\\@nleqslant");j(C,Z,te,"","\\@nleqq");j(C,Z,te,"","\\lneq",!0);j(C,Z,te,"","\\lneqq",!0);j(C,Z,te,"","\\@lvertneqq");j(C,Z,te,"","\\lnsim",!0);j(C,Z,te,"","\\lnapprox",!0);j(C,Z,te,"","\\nprec",!0);j(C,Z,te,"","\\npreceq",!0);j(C,Z,te,"","\\precnsim",!0);j(C,Z,te,"","\\precnapprox",!0);j(C,Z,te,"","\\nsim",!0);j(C,Z,te,"","\\@nshortmid");j(C,Z,te,"","\\nmid",!0);j(C,Z,te,"","\\nvdash",!0);j(C,Z,te,"","\\nvDash",!0);j(C,Z,te,"","\\ntriangleleft");j(C,Z,te,"","\\ntrianglelefteq",!0);j(C,Z,te,"","\\subsetneq",!0);j(C,Z,te,"","\\@varsubsetneq");j(C,Z,te,"","\\subsetneqq",!0);j(C,Z,te,"","\\@varsubsetneqq");j(C,Z,te,"","\\ngtr",!0);j(C,Z,te,"","\\@ngeqslant");j(C,Z,te,"","\\@ngeqq");j(C,Z,te,"","\\gneq",!0);j(C,Z,te,"","\\gneqq",!0);j(C,Z,te,"","\\@gvertneqq");j(C,Z,te,"","\\gnsim",!0);j(C,Z,te,"","\\gnapprox",!0);j(C,Z,te,"","\\nsucc",!0);j(C,Z,te,"","\\nsucceq",!0);j(C,Z,te,"","\\succnsim",!0);j(C,Z,te,"","\\succnapprox",!0);j(C,Z,te,"","\\ncong",!0);j(C,Z,te,"","\\@nshortparallel");j(C,Z,te,"","\\nparallel",!0);j(C,Z,te,"","\\nVDash",!0);j(C,Z,te,"","\\ntriangleright");j(C,Z,te,"","\\ntrianglerighteq",!0);j(C,Z,te,"","\\@nsupseteqq");j(C,Z,te,"","\\supsetneq",!0);j(C,Z,te,"","\\@varsupsetneq");j(C,Z,te,"","\\supsetneqq",!0);j(C,Z,te,"","\\@varsupsetneqq");j(C,Z,te,"","\\nVdash",!0);j(C,Z,te,"","\\precneqq",!0);j(C,Z,te,"","\\succneqq",!0);j(C,Z,te,"","\\@nsubseteqq");j(C,Z,yt,"","\\unlhd");j(C,Z,yt,"","\\unrhd");j(C,Z,te,"","\\nleftarrow",!0);j(C,Z,te,"","\\nrightarrow",!0);j(C,Z,te,"","\\nLeftarrow",!0);j(C,Z,te,"","\\nRightarrow",!0);j(C,Z,te,"","\\nleftrightarrow",!0);j(C,Z,te,"","\\nLeftrightarrow",!0);j(C,Z,te,"","\\vartriangle");j(C,Z,le,"","\\hslash");j(C,Z,le,"","\\triangledown");j(C,Z,le,"","\\lozenge");j(C,Z,le,"","\\circledS");j(C,Z,le,"","\\circledR");j($e,Z,le,"","\\circledR");j(C,Z,le,"","\\measuredangle",!0);j(C,Z,le,"","\\nexists");j(C,Z,le,"","\\mho");j(C,Z,le,"","\\Finv",!0);j(C,Z,le,"","\\Game",!0);j(C,Z,le,"","\\backprime");j(C,Z,le,"","\\blacktriangle");j(C,Z,le,"","\\blacktriangledown");j(C,Z,le,"","\\blacksquare");j(C,Z,le,"","\\blacklozenge");j(C,Z,le,"","\\bigstar");j(C,Z,le,"","\\sphericalangle",!0);j(C,Z,le,"","\\complement",!0);j(C,Z,le,"","\\eth",!0);j($e,R,le,"","");j(C,Z,le,"","\\diagup");j(C,Z,le,"","\\diagdown");j(C,Z,le,"","\\square");j(C,Z,le,"","\\Box");j(C,Z,le,"","\\Diamond");j(C,Z,le,"","\\yen",!0);j($e,Z,le,"","\\yen",!0);j(C,Z,le,"","\\checkmark",!0);j($e,Z,le,"","\\checkmark");j(C,Z,le,"","\\beth",!0);j(C,Z,le,"","\\daleth",!0);j(C,Z,le,"","\\gimel",!0);j(C,Z,le,"","\\digamma",!0);j(C,Z,le,"","\\varkappa");j(C,Z,ea,"","\\@ulcorner",!0);j(C,Z,hs,"","\\@urcorner",!0);j(C,Z,ea,"","\\@llcorner",!0);j(C,Z,hs,"","\\@lrcorner",!0);j(C,Z,te,"","\\leqq",!0);j(C,Z,te,"","\\leqslant",!0);j(C,Z,te,"","\\eqslantless",!0);j(C,Z,te,"","\\lesssim",!0);j(C,Z,te,"","\\lessapprox",!0);j(C,Z,te,"","\\approxeq",!0);j(C,Z,yt,"","\\lessdot");j(C,Z,te,"","\\lll",!0);j(C,Z,te,"","\\lessgtr",!0);j(C,Z,te,"","\\lesseqgtr",!0);j(C,Z,te,"","\\lesseqqgtr",!0);j(C,Z,te,"","\\doteqdot");j(C,Z,te,"","\\risingdotseq",!0);j(C,Z,te,"","\\fallingdotseq",!0);j(C,Z,te,"","\\backsim",!0);j(C,Z,te,"","\\backsimeq",!0);j(C,Z,te,"","\\subseteqq",!0);j(C,Z,te,"","\\Subset",!0);j(C,Z,te,"","\\sqsubset",!0);j(C,Z,te,"","\\preccurlyeq",!0);j(C,Z,te,"","\\curlyeqprec",!0);j(C,Z,te,"","\\precsim",!0);j(C,Z,te,"","\\precapprox",!0);j(C,Z,te,"","\\vartriangleleft");j(C,Z,te,"","\\trianglelefteq");j(C,Z,te,"","\\vDash",!0);j(C,Z,te,"","\\Vvdash",!0);j(C,Z,te,"","\\smallsmile");j(C,Z,te,"","\\smallfrown");j(C,Z,te,"","\\bumpeq",!0);j(C,Z,te,"","\\Bumpeq",!0);j(C,Z,te,"","\\geqq",!0);j(C,Z,te,"","\\geqslant",!0);j(C,Z,te,"","\\eqslantgtr",!0);j(C,Z,te,"","\\gtrsim",!0);j(C,Z,te,"","\\gtrapprox",!0);j(C,Z,yt,"","\\gtrdot");j(C,Z,te,"","\\ggg",!0);j(C,Z,te,"","\\gtrless",!0);j(C,Z,te,"","\\gtreqless",!0);j(C,Z,te,"","\\gtreqqless",!0);j(C,Z,te,"","\\eqcirc",!0);j(C,Z,te,"","\\circeq",!0);j(C,Z,te,"","\\triangleq",!0);j(C,Z,te,"","\\thicksim");j(C,Z,te,"","\\thickapprox");j(C,Z,te,"","\\supseteqq",!0);j(C,Z,te,"","\\Supset",!0);j(C,Z,te,"","\\sqsupset",!0);j(C,Z,te,"","\\succcurlyeq",!0);j(C,Z,te,"","\\curlyeqsucc",!0);j(C,Z,te,"","\\succsim",!0);j(C,Z,te,"","\\succapprox",!0);j(C,Z,te,"","\\vartriangleright");j(C,Z,te,"","\\trianglerighteq");j(C,Z,te,"","\\Vdash",!0);j(C,Z,te,"","\\shortmid");j(C,Z,te,"","\\shortparallel");j(C,Z,te,"","\\between",!0);j(C,Z,te,"","\\pitchfork",!0);j(C,Z,te,"","\\varpropto");j(C,Z,te,"","\\blacktriangleleft");j(C,Z,te,"","\\therefore",!0);j(C,Z,te,"","\\backepsilon");j(C,Z,te,"","\\blacktriangleright");j(C,Z,te,"","\\because",!0);j(C,Z,te,"","\\llless");j(C,Z,te,"","\\gggtr");j(C,Z,yt,"","\\lhd");j(C,Z,yt,"","\\rhd");j(C,Z,te,"","\\eqsim",!0);j(C,R,te,"","\\Join");j(C,Z,te,"","\\Doteq",!0);j(C,Z,yt,"","\\dotplus",!0);j(C,Z,yt,"","\\smallsetminus");j(C,Z,yt,"","\\Cap",!0);j(C,Z,yt,"","\\Cup",!0);j(C,Z,yt,"","\\doublebarwedge",!0);j(C,Z,yt,"","\\boxminus",!0);j(C,Z,yt,"","\\boxplus",!0);j(C,Z,yt,"","\\divideontimes",!0);j(C,Z,yt,"","\\ltimes",!0);j(C,Z,yt,"","\\rtimes",!0);j(C,Z,yt,"","\\leftthreetimes",!0);j(C,Z,yt,"","\\rightthreetimes",!0);j(C,Z,yt,"","\\curlywedge",!0);j(C,Z,yt,"","\\curlyvee",!0);j(C,Z,yt,"","\\circleddash",!0);j(C,Z,yt,"","\\circledast",!0);j(C,Z,yt,"","\\centerdot");j(C,Z,yt,"","\\intercal",!0);j(C,Z,yt,"","\\doublecap");j(C,Z,yt,"","\\doublecup");j(C,Z,yt,"","\\boxtimes",!0);j(C,Z,te,"","\\dashrightarrow",!0);j(C,Z,te,"","\\dashleftarrow",!0);j(C,Z,te,"","\\leftleftarrows",!0);j(C,Z,te,"","\\leftrightarrows",!0);j(C,Z,te,"","\\Lleftarrow",!0);j(C,Z,te,"","\\twoheadleftarrow",!0);j(C,Z,te,"","\\leftarrowtail",!0);j(C,Z,te,"","\\looparrowleft",!0);j(C,Z,te,"","\\leftrightharpoons",!0);j(C,Z,te,"","\\curvearrowleft",!0);j(C,Z,te,"","\\circlearrowleft",!0);j(C,Z,te,"","\\Lsh",!0);j(C,Z,te,"","\\upuparrows",!0);j(C,Z,te,"","\\upharpoonleft",!0);j(C,Z,te,"","\\downharpoonleft",!0);j(C,R,te,"","\\origof",!0);j(C,R,te,"","\\imageof",!0);j(C,Z,te,"","\\multimap",!0);j(C,Z,te,"","\\leftrightsquigarrow",!0);j(C,Z,te,"","\\rightrightarrows",!0);j(C,Z,te,"","\\rightleftarrows",!0);j(C,Z,te,"","\\twoheadrightarrow",!0);j(C,Z,te,"","\\rightarrowtail",!0);j(C,Z,te,"","\\looparrowright",!0);j(C,Z,te,"","\\curvearrowright",!0);j(C,Z,te,"","\\circlearrowright",!0);j(C,Z,te,"","\\Rsh",!0);j(C,Z,te,"","\\downdownarrows",!0);j(C,Z,te,"","\\upharpoonright",!0);j(C,Z,te,"","\\downharpoonright",!0);j(C,Z,te,"","\\rightsquigarrow",!0);j(C,Z,te,"","\\leadsto");j(C,Z,te,"","\\Rrightarrow",!0);j(C,Z,te,"","\\restriction");j(C,R,le,"","`");j(C,R,le,"$","\\$");j($e,R,le,"$","\\$");j($e,R,le,"$","\\textdollar");j(C,R,le,"%","\\%");j($e,R,le,"%","\\%");j(C,R,le,"_","\\_");j($e,R,le,"_","\\_");j($e,R,le,"_","\\textunderscore");j(C,R,le,"","\\angle",!0);j(C,R,le,"","\\infty",!0);j(C,R,le,"","\\prime");j(C,R,le,"","\\triangle");j(C,R,le,"","\\Gamma",!0);j(C,R,le,"","\\Delta",!0);j(C,R,le,"","\\Theta",!0);j(C,R,le,"","\\Lambda",!0);j(C,R,le,"","\\Xi",!0);j(C,R,le,"","\\Pi",!0);j(C,R,le,"","\\Sigma",!0);j(C,R,le,"","\\Upsilon",!0);j(C,R,le,"","\\Phi",!0);j(C,R,le,"","\\Psi",!0);j(C,R,le,"","\\Omega",!0);j(C,R,le,"A","");j(C,R,le,"B","");j(C,R,le,"E","");j(C,R,le,"Z","");j(C,R,le,"H","");j(C,R,le,"I","");j(C,R,le,"K","");j(C,R,le,"M","");j(C,R,le,"N","");j(C,R,le,"O","");j(C,R,le,"P","");j(C,R,le,"T","");j(C,R,le,"X","");j(C,R,le,"","\\neg",!0);j(C,R,le,"","\\lnot");j(C,R,le,"","\\top");j(C,R,le,"","\\bot");j(C,R,le,"","\\emptyset");j(C,Z,le,"","\\varnothing");j(C,R,qt,"","\\alpha",!0);j(C,R,qt,"","\\beta",!0);j(C,R,qt,"","\\gamma",!0);j(C,R,qt,"","\\delta",!0);j(C,R,qt,"","\\epsilon",!0);j(C,R,qt,"","\\zeta",!0);j(C,R,qt,"","\\eta",!0);j(C,R,qt,"","\\theta",!0);j(C,R,qt,"","\\iota",!0);j(C,R,qt,"","\\kappa",!0);j(C,R,qt,"","\\lambda",!0);j(C,R,qt,"","\\mu",!0);j(C,R,qt,"","\\nu",!0);j(C,R,qt,"","\\xi",!0);j(C,R,qt,"","\\omicron",!0);j(C,R,qt,"","\\pi",!0);j(C,R,qt,"","\\rho",!0);j(C,R,qt,"","\\sigma",!0);j(C,R,qt,"","\\tau",!0);j(C,R,qt,"","\\upsilon",!0);j(C,R,qt,"","\\phi",!0);j(C,R,qt,"","\\chi",!0);j(C,R,qt,"","\\psi",!0);j(C,R,qt,"","\\omega",!0);j(C,R,qt,"","\\varepsilon",!0);j(C,R,qt,"","\\vartheta",!0);j(C,R,qt,"","\\varpi",!0);j(C,R,qt,"","\\varrho",!0);j(C,R,qt,"","\\varsigma",!0);j(C,R,qt,"","\\varphi",!0);j(C,R,yt,"","*",!0);j(C,R,yt,"+","+");j(C,R,yt,"","-",!0);j(C,R,yt,"","\\cdot",!0);j(C,R,yt,"","\\circ",!0);j(C,R,yt,"","\\div",!0);j(C,R,yt,"","\\pm",!0);j(C,R,yt,"","\\times",!0);j(C,R,yt,"","\\cap",!0);j(C,R,yt,"","\\cup",!0);j(C,R,yt,"","\\setminus",!0);j(C,R,yt,"","\\land");j(C,R,yt,"","\\lor");j(C,R,yt,"","\\wedge",!0);j(C,R,yt,"","\\vee",!0);j(C,R,le,"","\\surd");j(C,R,ea,"","\\langle",!0);j(C,R,ea,"","\\lvert");j(C,R,ea,"","\\lVert");j(C,R,hs,"?","?");j(C,R,hs,"!","!");j(C,R,hs,"","\\rangle",!0);j(C,R,hs,"","\\rvert");j(C,R,hs,"","\\rVert");j(C,R,te,"=","=");j(C,R,te,":",":");j(C,R,te,"","\\approx",!0);j(C,R,te,"","\\cong",!0);j(C,R,te,"","\\ge");j(C,R,te,"","\\geq",!0);j(C,R,te,"","\\gets");j(C,R,te,">","\\gt",!0);j(C,R,te,"","\\in",!0);j(C,R,te,"","\\@not");j(C,R,te,"","\\subset",!0);j(C,R,te,"","\\supset",!0);j(C,R,te,"","\\subseteq",!0);j(C,R,te,"","\\supseteq",!0);j(C,Z,te,"","\\nsubseteq",!0);j(C,Z,te,"","\\nsupseteq",!0);j(C,R,te,"","\\models");j(C,R,te,"","\\leftarrow",!0);j(C,R,te,"","\\le");j(C,R,te,"","\\leq",!0);j(C,R,te,"<","\\lt",!0);j(C,R,te,"","\\rightarrow",!0);j(C,R,te,"","\\to");j(C,Z,te,"","\\ngeq",!0);j(C,Z,te,"","\\nleq",!0);j(C,R,Qi,"","\\ ");j(C,R,Qi,"","\\space");j(C,R,Qi,"","\\nobreakspace");j($e,R,Qi,"","\\ ");j($e,R,Qi,""," ");j($e,R,Qi,"","\\space");j($e,R,Qi,"","\\nobreakspace");j(C,R,Qi,null,"\\nobreak");j(C,R,Qi,null,"\\allowbreak");j(C,R,Ep,",",",");j(C,R,Ep,";",";");j(C,Z,yt,"","\\barwedge",!0);j(C,Z,yt,"","\\veebar",!0);j(C,R,yt,"","\\odot",!0);j(C,R,yt,"","\\oplus",!0);j(C,R,yt,"","\\otimes",!0);j(C,R,le,"","\\partial",!0);j(C,R,yt,"","\\oslash",!0);j(C,Z,yt,"","\\circledcirc",!0);j(C,Z,yt,"","\\boxdot",!0);j(C,R,yt,"","\\bigtriangleup");j(C,R,yt,"","\\bigtriangledown");j(C,R,yt,"","\\dagger");j(C,R,yt,"","\\diamond");j(C,R,yt,"","\\star");j(C,R,yt,"","\\triangleleft");j(C,R,yt,"","\\triangleright");j(C,R,ea,"{","\\{");j($e,R,le,"{","\\{");j($e,R,le,"{","\\textbraceleft");j(C,R,hs,"}","\\}");j($e,R,le,"}","\\}");j($e,R,le,"}","\\textbraceright");j(C,R,ea,"{","\\lbrace");j(C,R,hs,"}","\\rbrace");j(C,R,ea,"[","\\lbrack",!0);j($e,R,le,"[","\\lbrack",!0);j(C,R,hs,"]","\\rbrack",!0);j($e,R,le,"]","\\rbrack",!0);j(C,R,ea,"(","\\lparen",!0);j(C,R,hs,")","\\rparen",!0);j($e,R,le,"<","\\textless",!0);j($e,R,le,">","\\textgreater",!0);j(C,R,ea,"","\\lfloor",!0);j(C,R,hs,"","\\rfloor",!0);j(C,R,ea,"","\\lceil",!0);j(C,R,hs,"","\\rceil",!0);j(C,R,le,"\\","\\backslash");j(C,R,le,"","|");j(C,R,le,"","\\vert");j($e,R,le,"|","\\textbar",!0);j(C,R,le,"","\\|");j(C,R,le,"","\\Vert");j($e,R,le,"","\\textbardbl");j($e,R,le,"~","\\textasciitilde");j($e,R,le,"\\","\\textbackslash");j($e,R,le,"^","\\textasciicircum");j(C,R,te,"","\\uparrow",!0);j(C,R,te,"","\\Uparrow",!0);j(C,R,te,"","\\downarrow",!0);j(C,R,te,"","\\Downarrow",!0);j(C,R,te,"","\\updownarrow",!0);j(C,R,te,"","\\Updownarrow",!0);j(C,R,bn,"","\\coprod");j(C,R,bn,"","\\bigvee");j(C,R,bn,"","\\bigwedge");j(C,R,bn,"","\\biguplus");j(C,R,bn,"","\\bigcap");j(C,R,bn,"","\\bigcup");j(C,R,bn,"","\\int");j(C,R,bn,"","\\intop");j(C,R,bn,"","\\iint");j(C,R,bn,"","\\iiint");j(C,R,bn,"","\\prod");j(C,R,bn,"","\\sum");j(C,R,bn,"","\\bigotimes");j(C,R,bn,"","\\bigoplus");j(C,R,bn,"","\\bigodot");j(C,R,bn,"","\\oint");j(C,R,bn,"","\\oiint");j(C,R,bn,"","\\oiiint");j(C,R,bn,"","\\bigsqcup");j(C,R,bn,"","\\smallint");j($e,R,Qu,"","\\textellipsis");j(C,R,Qu,"","\\mathellipsis");j($e,R,Qu,"","\\ldots",!0);j(C,R,Qu,"","\\ldots",!0);j(C,R,Qu,"","\\@cdots",!0);j(C,R,Qu,"","\\ddots",!0);j(C,R,le,"","\\varvdots");j($e,R,le,"","\\varvdots");j(C,R,Vr,"","\\acute");j(C,R,Vr,"","\\grave");j(C,R,Vr,"","\\ddot");j(C,R,Vr,"~","\\tilde");j(C,R,Vr,"","\\bar");j(C,R,Vr,"","\\breve");j(C,R,Vr,"","\\check");j(C,R,Vr,"^","\\hat");j(C,R,Vr,"","\\vec");j(C,R,Vr,"","\\dot");j(C,R,Vr,"","\\mathring");j(C,R,qt,"","\\@imath");j(C,R,qt,"","\\@jmath");j(C,R,le,"","");j(C,R,le,"","");j($e,R,le,"","\\i",!0);j($e,R,le,"","\\j",!0);j($e,R,le,"","\\ss",!0);j($e,R,le,"","\\ae",!0);j($e,R,le,"","\\oe",!0);j($e,R,le,"","\\o",!0);j($e,R,le,"","\\AE",!0);j($e,R,le,"","\\OE",!0);j($e,R,le,"","\\O",!0);j($e,R,Vr,"","\\'");j($e,R,Vr,"","\\`");j($e,R,Vr,"","\\^");j($e,R,Vr,"","\\~");j($e,R,Vr,"","\\=");j($e,R,Vr,"","\\u");j($e,R,Vr,"","\\.");j($e,R,Vr,"","\\c");j($e,R,Vr,"","\\r");j($e,R,Vr,"","\\v");j($e,R,Vr,"",'\\"');j($e,R,Vr,"","\\H");j($e,R,Vr,"","\\textcircled");var b9={"--":!0,"---":!0,"``":!0,"''":!0};j($e,R,le,"","--",!0);j($e,R,le,"","\\textendash");j($e,R,le,"","---",!0);j($e,R,le,"","\\textemdash");j($e,R,le,"","`",!0);j($e,R,le,"","\\textquoteleft");j($e,R,le,"","'",!0);j($e,R,le,"","\\textquoteright");j($e,R,le,"","``",!0);j($e,R,le,"","\\textquotedblleft");j($e,R,le,"","''",!0);j($e,R,le,"","\\textquotedblright");j(C,R,le,"","\\degree",!0);j($e,R,le,"","\\degree");j($e,R,le,"","\\textdegree",!0);j(C,R,le,"","\\pounds");j(C,R,le,"","\\mathsterling",!0);j($e,R,le,"","\\pounds");j($e,R,le,"","\\textsterling",!0);j(C,Z,le,"","\\maltese");j($e,Z,le,"","\\maltese");var tN='0123456789/@."';for(var og=0;og<tN.length;og++){var rN=tN.charAt(og);j(C,R,le,rN,rN)}var nN='0123456789!@*()-=+";:?/.,';for(var lg=0;lg<nN.length;lg++){var sN=nN.charAt(lg);j($e,R,le,sN,sN)}var yf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var cg=0;cg<yf.length;cg++){var qm=yf.charAt(cg);j(C,R,qt,qm,qm),j($e,R,le,qm,qm)}j(C,Z,le,"C","");j($e,Z,le,"C","");j(C,Z,le,"H","");j($e,Z,le,"H","");j(C,Z,le,"N","");j($e,Z,le,"N","");j(C,Z,le,"P","");j($e,Z,le,"P","");j(C,Z,le,"Q","");j($e,Z,le,"Q","");j(C,Z,le,"R","");j($e,Z,le,"R","");j(C,Z,le,"Z","");j($e,Z,le,"Z","");j(C,R,qt,"h","");j($e,R,qt,"h","");var Ht="";for(var ts=0;ts<yf.length;ts++){var Jr=yf.charAt(ts);Ht=String.fromCharCode(55349,56320+ts),j(C,R,qt,Jr,Ht),j($e,R,le,Jr,Ht),Ht=String.fromCharCode(55349,56372+ts),j(C,R,qt,Jr,Ht),j($e,R,le,Jr,Ht),Ht=String.fromCharCode(55349,56424+ts),j(C,R,qt,Jr,Ht),j($e,R,le,Jr,Ht),Ht=String.fromCharCode(55349,56580+ts),j(C,R,qt,Jr,Ht),j($e,R,le,Jr,Ht),Ht=String.fromCharCode(55349,56684+ts),j(C,R,qt,Jr,Ht),j($e,R,le,Jr,Ht),Ht=String.fromCharCode(55349,56736+ts),j(C,R,qt,Jr,Ht),j($e,R,le,Jr,Ht),Ht=String.fromCharCode(55349,56788+ts),j(C,R,qt,Jr,Ht),j($e,R,le,Jr,Ht),Ht=String.fromCharCode(55349,56840+ts),j(C,R,qt,Jr,Ht),j($e,R,le,Jr,Ht),Ht=String.fromCharCode(55349,56944+ts),j(C,R,qt,Jr,Ht),j($e,R,le,Jr,Ht),ts<26&&(Ht=String.fromCharCode(55349,56632+ts),j(C,R,qt,Jr,Ht),j($e,R,le,Jr,Ht),Ht=String.fromCharCode(55349,56476+ts),j(C,R,qt,Jr,Ht),j($e,R,le,Jr,Ht))}Ht="";j(C,R,qt,"k",Ht);j($e,R,le,"k",Ht);for(var al=0;al<10;al++){var ao=al.toString();Ht=String.fromCharCode(55349,57294+al),j(C,R,qt,ao,Ht),j($e,R,le,ao,Ht),Ht=String.fromCharCode(55349,57314+al),j(C,R,qt,ao,Ht),j($e,R,le,ao,Ht),Ht=String.fromCharCode(55349,57324+al),j(C,R,qt,ao,Ht),j($e,R,le,ao,Ht),Ht=String.fromCharCode(55349,57334+al),j(C,R,qt,ao,Ht),j($e,R,le,ao,Ht)}var A1="";for(var ug=0;ug<A1.length;ug++){var Bm=A1.charAt(ug);j(C,R,qt,Bm,Bm),j($e,R,le,Bm,Bm)}var Um=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],aN=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],MJ=function(t,r){var s=t.charCodeAt(0),a=t.charCodeAt(1),i=(s-55296)*1024+(a-56320)+65536,o=r==="math"?0:1;if(119808<=i&&i<120484){var l=Math.floor((i-119808)/26);return[Um[l][2],Um[l][o]]}else if(120782<=i&&i<=120831){var c=Math.floor((i-120782)/10);return[aN[c][2],aN[c][o]]}else{if(i===120485||i===120486)return[Um[0][2],Um[0][o]];if(120486<i&&i<120782)return["",""];throw new Ke("Unsupported character: "+t)}},Tp=function(t,r,s){return Fr[s][t]&&Fr[s][t].replace&&(t=Fr[s][t].replace),{value:t,metrics:sw(t,r,s)}},Pa=function(t,r,s,a,i){var o=Tp(t,r,s),l=o.metrics;t=o.value;var c;if(l){var u=l.italic;(s==="text"||a&&a.font==="mathit")&&(u=0),c=new xa(t,l.height,l.depth,u,l.skew,l.width,i)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+t+"' in style '"+r+"' and mode '"+s+"'")),c=new xa(t,0,0,0,0,0,i);if(a){c.maxFontSize=a.sizeMultiplier,a.style.isTight()&&c.classes.push("mtight");var d=a.getColor();d&&(c.style.color=d)}return c},OJ=function(t,r,s,a){return a===void 0&&(a=[]),s.font==="boldsymbol"&&Tp(t,"Main-Bold",r).metrics?Pa(t,"Main-Bold",r,s,a.concat(["mathbf"])):t==="\\"||Fr[r][t].font==="main"?Pa(t,"Main-Regular",r,s,a):Pa(t,"AMS-Regular",r,s,a.concat(["amsrm"]))},IJ=function(t,r,s,a,i){return i!=="textord"&&Tp(t,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},DJ=function(t,r,s){var a=t.mode,i=t.text,o=["mord"],l=a==="math"||a==="text"&&r.font,c=l?r.font:r.fontFamily,u="",d="";if(i.charCodeAt(0)===55349&&([u,d]=MJ(i,a)),u.length>0)return Pa(i,u,a,r,o.concat(d));if(c){var h,m;if(c==="boldsymbol"){var f=IJ(i,a,r,o,s);h=f.fontName,m=[f.fontClass]}else l?(h=N9[c].fontName,m=[c]):(h=Vm(c,r.fontWeight,r.fontShape),m=[c,r.fontWeight,r.fontShape]);if(Tp(i,h,a).metrics)return Pa(i,h,a,r,o.concat(m));if(b9.hasOwnProperty(i)&&h.slice(0,10)==="Typewriter"){for(var x=[],g=0;g<i.length;g++)x.push(Pa(i[g],h,a,r,o.concat(m)));return j9(x)}}if(s==="mathord")return Pa(i,"Math-Italic",a,r,o.concat(["mathnormal"]));if(s==="textord"){var y=Fr[a][i]&&Fr[a][i].font;if(y==="ams"){var b=Vm("amsrm",r.fontWeight,r.fontShape);return Pa(i,b,a,r,o.concat("amsrm",r.fontWeight,r.fontShape))}else if(y==="main"||!y){var v=Vm("textrm",r.fontWeight,r.fontShape);return Pa(i,v,a,r,o.concat(r.fontWeight,r.fontShape))}else{var w=Vm(y,r.fontWeight,r.fontShape);return Pa(i,w,a,r,o.concat(w,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+s+" in makeOrd")},FJ=(e,t)=>{if(Bo(e.classes)!==Bo(t.classes)||e.skew!==t.skew||e.maxFontSize!==t.maxFontSize)return!1;if(e.classes.length===1){var r=e.classes[0];if(r==="mbin"||r==="mord")return!1}for(var s in e.style)if(e.style.hasOwnProperty(s)&&e.style[s]!==t.style[s])return!1;for(var a in t.style)if(t.style.hasOwnProperty(a)&&e.style[a]!==t.style[a])return!1;return!0},LJ=e=>{for(var t=0;t<e.length-1;t++){var r=e[t],s=e[t+1];r instanceof xa&&s instanceof xa&&FJ(r,s)&&(r.text+=s.text,r.height=Math.max(r.height,s.height),r.depth=Math.max(r.depth,s.depth),r.italic=s.italic,e.splice(t+1,1),t--)}return e},iw=function(t){for(var r=0,s=0,a=0,i=0;i<t.children.length;i++){var o=t.children[i];o.height>r&&(r=o.height),o.depth>s&&(s=o.depth),o.maxFontSize>a&&(a=o.maxFontSize)}t.height=r,t.depth=s,t.maxFontSize=a},vs=function(t,r,s,a){var i=new Hh(t,r,s,a);return iw(i),i},w9=(e,t,r,s)=>new Hh(e,t,r,s),zJ=function(t,r,s){var a=vs([t],[],r);return a.height=Math.max(s||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),a.style.borderBottomWidth=nt(a.height),a.maxFontSize=1,a},$J=function(t,r,s,a){var i=new aw(t,r,s,a);return iw(i),i},j9=function(t){var r=new Vh(t);return iw(r),r},qJ=function(t,r){return t instanceof Vh?vs([],[t],r):t},BJ=function(t){if(t.positionType==="individualShift"){for(var r=t.children,s=[r[0]],a=-r[0].shift-r[0].elem.depth,i=a,o=1;o<r.length;o++){var l=-r[o].shift-i-r[o].elem.depth,c=l-(r[o-1].elem.height+r[o-1].elem.depth);i=i+l,s.push({type:"kern",size:c}),s.push(r[o])}return{children:s,depth:a}}var u;if(t.positionType==="top"){for(var d=t.positionData,h=0;h<t.children.length;h++){var m=t.children[h];d-=m.type==="kern"?m.size:m.elem.height+m.elem.depth}u=d}else if(t.positionType==="bottom")u=-t.positionData;else{var f=t.children[0];if(f.type!=="elem")throw new Error('First child must have type "elem".');if(t.positionType==="shift")u=-f.elem.depth-t.positionData;else if(t.positionType==="firstBaseline")u=-f.elem.depth;else throw new Error("Invalid positionType "+t.positionType+".")}return{children:t.children,depth:u}},UJ=function(t,r){for(var{children:s,depth:a}=BJ(t),i=0,o=0;o<s.length;o++){var l=s[o];if(l.type==="elem"){var c=l.elem;i=Math.max(i,c.maxFontSize,c.height)}}i+=2;var u=vs(["pstrut"],[]);u.style.height=nt(i);for(var d=[],h=a,m=a,f=a,x=0;x<s.length;x++){var g=s[x];if(g.type==="kern")f+=g.size;else{var y=g.elem,b=g.wrapperClasses||[],v=g.wrapperStyle||{},w=vs(b,[u,y],void 0,v);w.style.top=nt(-i-f-y.depth),g.marginLeft&&(w.style.marginLeft=g.marginLeft),g.marginRight&&(w.style.marginRight=g.marginRight),d.push(w),f+=y.height+y.depth}h=Math.min(h,f),m=Math.max(m,f)}var S=vs(["vlist"],d);S.style.height=nt(m);var k;if(h<0){var N=vs([],[]),P=vs(["vlist"],[N]);P.style.height=nt(-h);var T=vs(["vlist-s"],[new xa("")]);k=[vs(["vlist-r"],[S,T]),vs(["vlist-r"],[P])]}else k=[vs(["vlist-r"],[S])];var A=vs(["vlist-t"],k);return k.length===2&&A.classes.push("vlist-t2"),A.height=m,A.depth=-h,A},VJ=(e,t)=>{var r=vs(["mspace"],[],t),s=Qr(e,t);return r.style.marginRight=nt(s),r},Vm=function(t,r,s){var a="";switch(t){case"amsrm":a="AMS";break;case"textrm":a="Main";break;case"textsf":a="SansSerif";break;case"texttt":a="Typewriter";break;default:a=t}var i;return r==="textbf"&&s==="textit"?i="BoldItalic":r==="textbf"?i="Bold":r==="textit"?i="Italic":i="Regular",a+"-"+i},N9={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},S9={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},HJ=function(t,r){var[s,a,i]=S9[t],o=new Uo(s),l=new Vi([o],{width:nt(a),height:nt(i),style:"width:"+nt(a),viewBox:"0 0 "+1e3*a+" "+1e3*i,preserveAspectRatio:"xMinYMin"}),c=w9(["overlay"],[l],r);return c.height=i,c.style.height=nt(i),c.style.width=nt(a),c},xe={fontMap:N9,makeSymbol:Pa,mathsym:OJ,makeSpan:vs,makeSvgSpan:w9,makeLineSpan:zJ,makeAnchor:$J,makeFragment:j9,wrapFragment:qJ,makeVList:UJ,makeOrd:DJ,makeGlue:VJ,staticSvg:HJ,svgData:S9,tryCombineChars:LJ},Hr={number:3,unit:"mu"},il={number:4,unit:"mu"},pi={number:5,unit:"mu"},WJ={mord:{mop:Hr,mbin:il,mrel:pi,minner:Hr},mop:{mord:Hr,mop:Hr,mrel:pi,minner:Hr},mbin:{mord:il,mop:il,mopen:il,minner:il},mrel:{mord:pi,mop:pi,mopen:pi,minner:pi},mopen:{},mclose:{mop:Hr,mbin:il,mrel:pi,minner:Hr},mpunct:{mord:Hr,mop:Hr,mrel:pi,mopen:Hr,mclose:Hr,mpunct:Hr,minner:Hr},minner:{mord:Hr,mop:Hr,mbin:il,mrel:pi,mopen:Hr,mpunct:Hr,minner:Hr}},GJ={mord:{mop:Hr},mop:{mord:Hr,mop:Hr},mbin:{},mrel:{},mopen:{},mclose:{mop:Hr},mpunct:{},minner:{mop:Hr}},k9={},bf={},wf={};function ft(e){for(var{type:t,names:r,props:s,handler:a,htmlBuilder:i,mathmlBuilder:o}=e,l={type:t,numArgs:s.numArgs,argTypes:s.argTypes,allowedInArgument:!!s.allowedInArgument,allowedInText:!!s.allowedInText,allowedInMath:s.allowedInMath===void 0?!0:s.allowedInMath,numOptionalArgs:s.numOptionalArgs||0,infix:!!s.infix,primitive:!!s.primitive,handler:a},c=0;c<r.length;++c)k9[r[c]]=l;t&&(i&&(bf[t]=i),o&&(wf[t]=o))}function tc(e){var{type:t,htmlBuilder:r,mathmlBuilder:s}=e;ft({type:t,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:s})}var jf=function(t){return t.type==="ordgroup"&&t.body.length===1?t.body[0]:t},dn=function(t){return t.type==="ordgroup"?t.body:[t]},Hi=xe.makeSpan,QJ=["leftmost","mbin","mopen","mrel","mop","mpunct"],YJ=["rightmost","mrel","mclose","mpunct"],KJ={display:Bt.DISPLAY,text:Bt.TEXT,script:Bt.SCRIPT,scriptscript:Bt.SCRIPTSCRIPT},JJ={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Cn=function(t,r,s,a){a===void 0&&(a=[null,null]);for(var i=[],o=0;o<t.length;o++){var l=br(t[o],r);if(l instanceof Vh){var c=l.children;i.push(...c)}else i.push(l)}if(xe.tryCombineChars(i),!s)return i;var u=r;if(t.length===1){var d=t[0];d.type==="sizing"?u=r.havingSize(d.size):d.type==="styling"&&(u=r.havingStyle(KJ[d.style]))}var h=Hi([a[0]||"leftmost"],[],r),m=Hi([a[1]||"rightmost"],[],r),f=s==="root";return iN(i,(x,g)=>{var y=g.classes[0],b=x.classes[0];y==="mbin"&&YJ.includes(b)?g.classes[0]="mord":b==="mbin"&&QJ.includes(y)&&(x.classes[0]="mord")},{node:h},m,f),iN(i,(x,g)=>{var y=P1(g),b=P1(x),v=y&&b?x.hasClass("mtight")?GJ[y][b]:WJ[y][b]:null;if(v)return xe.makeGlue(v,u)},{node:h},m,f),i},iN=function e(t,r,s,a,i){a&&t.push(a);for(var o=0;o<t.length;o++){var l=t[o],c=_9(l);if(c){e(c.children,r,s,null,i);continue}var u=!l.hasClass("mspace");if(u){var d=r(l,s.node);d&&(s.insertAfter?s.insertAfter(d):(t.unshift(d),o++))}u?s.node=l:i&&l.hasClass("newline")&&(s.node=Hi(["leftmost"])),s.insertAfter=(h=>m=>{t.splice(h+1,0,m),o++})(o)}a&&t.pop()},_9=function(t){return t instanceof Vh||t instanceof aw||t instanceof Hh&&t.hasClass("enclosing")?t:null},XJ=function e(t,r){var s=_9(t);if(s){var a=s.children;if(a.length){if(r==="right")return e(a[a.length-1],"right");if(r==="left")return e(a[0],"left")}}return t},P1=function(t,r){return t?(r&&(t=XJ(t,r)),JJ[t.classes[0]]||null):null},bh=function(t,r){var s=["nulldelimiter"].concat(t.baseSizingClasses());return Hi(r.concat(s))},br=function(t,r,s){if(!t)return Hi();if(bf[t.type]){var a=bf[t.type](t,r);if(s&&r.size!==s.size){a=Hi(r.sizingClasses(s),[a],r);var i=r.sizeMultiplier/s.sizeMultiplier;a.height*=i,a.depth*=i}return a}else throw new Ke("Got group of unknown type: '"+t.type+"'")};function Hm(e,t){var r=Hi(["base"],e,t),s=Hi(["strut"]);return s.style.height=nt(r.height+r.depth),r.depth&&(s.style.verticalAlign=nt(-r.depth)),r.children.unshift(s),r}function R1(e,t){var r=null;e.length===1&&e[0].type==="tag"&&(r=e[0].tag,e=e[0].body);var s=Cn(e,t,"root"),a;s.length===2&&s[1].hasClass("tag")&&(a=s.pop());for(var i=[],o=[],l=0;l<s.length;l++)if(o.push(s[l]),s[l].hasClass("mbin")||s[l].hasClass("mrel")||s[l].hasClass("allowbreak")){for(var c=!1;l<s.length-1&&s[l+1].hasClass("mspace")&&!s[l+1].hasClass("newline");)l++,o.push(s[l]),s[l].hasClass("nobreak")&&(c=!0);c||(i.push(Hm(o,t)),o=[])}else s[l].hasClass("newline")&&(o.pop(),o.length>0&&(i.push(Hm(o,t)),o=[]),i.push(s[l]));o.length>0&&i.push(Hm(o,t));var u;r?(u=Hm(Cn(r,t,!0)),u.classes=["tag"],i.push(u)):a&&i.push(a);var d=Hi(["katex-html"],i);if(d.setAttribute("aria-hidden","true"),u){var h=u.children[0];h.style.height=nt(d.height+d.depth),d.depth&&(h.style.verticalAlign=nt(-d.depth))}return d}function C9(e){return new Vh(e)}class Bs{constructor(t,r,s){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=t,this.attributes={},this.children=r||[],this.classes=s||[]}setAttribute(t,r){this.attributes[t]=r}getAttribute(t){return this.attributes[t]}toNode(){var t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&t.setAttribute(r,this.attributes[r]);this.classes.length>0&&(t.className=Bo(this.classes));for(var s=0;s<this.children.length;s++)if(this.children[s]instanceof Xa&&this.children[s+1]instanceof Xa){for(var a=this.children[s].toText()+this.children[++s].toText();this.children[s+1]instanceof Xa;)a+=this.children[++s].toText();t.appendChild(new Xa(a).toNode())}else t.appendChild(this.children[s].toNode());return t}toMarkup(){var t="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="',t+=_r.escape(this.attributes[r]),t+='"');this.classes.length>0&&(t+=' class ="'+_r.escape(Bo(this.classes))+'"'),t+=">";for(var s=0;s<this.children.length;s++)t+=this.children[s].toMarkup();return t+="</"+this.type+">",t}toText(){return this.children.map(t=>t.toText()).join("")}}class Xa{constructor(t){this.text=void 0,this.text=t}toNode(){return document.createTextNode(this.text)}toMarkup(){return _r.escape(this.toText())}toText(){return this.text}}class ZJ{constructor(t){this.width=void 0,this.character=void 0,this.width=t,t>=.05555&&t<=.05556?this.character="":t>=.1666&&t<=.1667?this.character="":t>=.2222&&t<=.2223?this.character="":t>=.2777&&t<=.2778?this.character="":t>=-.05556&&t<=-.05555?this.character="":t>=-.1667&&t<=-.1666?this.character="":t>=-.2223&&t<=-.2222?this.character="":t>=-.2778&&t<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var t=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return t.setAttribute("width",nt(this.width)),t}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+nt(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var Qe={MathNode:Bs,TextNode:Xa,SpaceNode:ZJ,newDocumentFragment:C9},ga=function(t,r,s){return Fr[r][t]&&Fr[r][t].replace&&t.charCodeAt(0)!==55349&&!(b9.hasOwnProperty(t)&&s&&(s.fontFamily&&s.fontFamily.slice(4,6)==="tt"||s.font&&s.font.slice(4,6)==="tt"))&&(t=Fr[r][t].replace),new Qe.TextNode(t)},ow=function(t){return t.length===1?t[0]:new Qe.MathNode("mrow",t)},lw=function(t,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var s=r.font;if(!s||s==="mathnormal")return null;var a=t.mode;if(s==="mathit")return"italic";if(s==="boldsymbol")return t.type==="textord"?"bold":"bold-italic";if(s==="mathbf")return"bold";if(s==="mathbb")return"double-struck";if(s==="mathsfit")return"sans-serif-italic";if(s==="mathfrak")return"fraktur";if(s==="mathscr"||s==="mathcal")return"script";if(s==="mathsf")return"sans-serif";if(s==="mathtt")return"monospace";var i=t.text;if(["\\imath","\\jmath"].includes(i))return null;Fr[a][i]&&Fr[a][i].replace&&(i=Fr[a][i].replace);var o=xe.fontMap[s].fontName;return sw(i,o,a)?xe.fontMap[s].variant:null};function dg(e){if(!e)return!1;if(e.type==="mi"&&e.children.length===1){var t=e.children[0];return t instanceof Xa&&t.text==="."}else if(e.type==="mo"&&e.children.length===1&&e.getAttribute("separator")==="true"&&e.getAttribute("lspace")==="0em"&&e.getAttribute("rspace")==="0em"){var r=e.children[0];return r instanceof Xa&&r.text===","}else return!1}var Ms=function(t,r,s){if(t.length===1){var a=Rr(t[0],r);return s&&a instanceof Bs&&a.type==="mo"&&(a.setAttribute("lspace","0em"),a.setAttribute("rspace","0em")),[a]}for(var i=[],o,l=0;l<t.length;l++){var c=Rr(t[l],r);if(c instanceof Bs&&o instanceof Bs){if(c.type==="mtext"&&o.type==="mtext"&&c.getAttribute("mathvariant")===o.getAttribute("mathvariant")){o.children.push(...c.children);continue}else if(c.type==="mn"&&o.type==="mn"){o.children.push(...c.children);continue}else if(dg(c)&&o.type==="mn"){o.children.push(...c.children);continue}else if(c.type==="mn"&&dg(o))c.children=[...o.children,...c.children],i.pop();else if((c.type==="msup"||c.type==="msub")&&c.children.length>=1&&(o.type==="mn"||dg(o))){var u=c.children[0];u instanceof Bs&&u.type==="mn"&&(u.children=[...o.children,...u.children],i.pop())}else if(o.type==="mi"&&o.children.length===1){var d=o.children[0];if(d instanceof Xa&&d.text===""&&(c.type==="mo"||c.type==="mi"||c.type==="mn")){var h=c.children[0];h instanceof Xa&&h.text.length>0&&(h.text=h.text.slice(0,1)+""+h.text.slice(1),i.pop())}}}i.push(c),o=c}return i},Vo=function(t,r,s){return ow(Ms(t,r,s))},Rr=function(t,r){if(!t)return new Qe.MathNode("mrow");if(wf[t.type]){var s=wf[t.type](t,r);return s}else throw new Ke("Got group of unknown type: '"+t.type+"'")};function oN(e,t,r,s,a){var i=Ms(e,r),o;i.length===1&&i[0]instanceof Bs&&["mrow","mtable"].includes(i[0].type)?o=i[0]:o=new Qe.MathNode("mrow",i);var l=new Qe.MathNode("annotation",[new Qe.TextNode(t)]);l.setAttribute("encoding","application/x-tex");var c=new Qe.MathNode("semantics",[o,l]),u=new Qe.MathNode("math",[c]);u.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),s&&u.setAttribute("display","block");var d=a?"katex":"katex-mathml";return xe.makeSpan([d],[u])}var E9=function(t){return new bi({style:t.displayMode?Bt.DISPLAY:Bt.TEXT,maxSize:t.maxSize,minRuleThickness:t.minRuleThickness})},T9=function(t,r){if(r.displayMode){var s=["katex-display"];r.leqno&&s.push("leqno"),r.fleqn&&s.push("fleqn"),t=xe.makeSpan(s,[t])}return t},eX=function(t,r,s){var a=E9(s),i;if(s.output==="mathml")return oN(t,r,a,s.displayMode,!0);if(s.output==="html"){var o=R1(t,a);i=xe.makeSpan(["katex"],[o])}else{var l=oN(t,r,a,s.displayMode,!1),c=R1(t,a);i=xe.makeSpan(["katex"],[l,c])}return T9(i,s)},tX=function(t,r,s){var a=E9(s),i=R1(t,a),o=xe.makeSpan(["katex"],[i]);return T9(o,s)},rX={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},nX=function(t){var r=new Qe.MathNode("mo",[new Qe.TextNode(rX[t.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},sX={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},aX=function(t){return t.type==="ordgroup"?t.body.length:1},iX=function(t,r){function s(){var l=4e5,c=t.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(c)){var u=t,d=aX(u.base),h,m,f;if(d>5)c==="widehat"||c==="widecheck"?(h=420,l=2364,f=.42,m=c+"4"):(h=312,l=2340,f=.34,m="tilde4");else{var x=[1,1,2,2,3,3][d];c==="widehat"||c==="widecheck"?(l=[0,1062,2364,2364,2364][x],h=[0,239,300,360,420][x],f=[0,.24,.3,.3,.36,.42][x],m=c+x):(l=[0,600,1033,2339,2340][x],h=[0,260,286,306,312][x],f=[0,.26,.286,.3,.306,.34][x],m="tilde"+x)}var g=new Uo(m),y=new Vi([g],{width:"100%",height:nt(f),viewBox:"0 0 "+l+" "+h,preserveAspectRatio:"none"});return{span:xe.makeSvgSpan([],[y],r),minWidth:0,height:f}}else{var b=[],v=sX[c],[w,S,k]=v,N=k/1e3,P=w.length,T,A;if(P===1){var E=v[3];T=["hide-tail"],A=[E]}else if(P===2)T=["halfarrow-left","halfarrow-right"],A=["xMinYMin","xMaxYMin"];else if(P===3)T=["brace-left","brace-center","brace-right"],A=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+P+" children.");for(var M=0;M<P;M++){var I=new Uo(w[M]),se=new Vi([I],{width:"400em",height:nt(N),viewBox:"0 0 "+l+" "+k,preserveAspectRatio:A[M]+" slice"}),ee=xe.makeSvgSpan([T[M]],[se],r);if(P===1)return{span:ee,minWidth:S,height:N};ee.style.height=nt(N),b.push(ee)}return{span:xe.makeSpan(["stretchy"],b,r),minWidth:S,height:N}}}var{span:a,minWidth:i,height:o}=s();return a.height=o,a.style.height=nt(o),i>0&&(a.style.minWidth=nt(i)),a},oX=function(t,r,s,a,i){var o,l=t.height+t.depth+s+a;if(/fbox|color|angl/.test(r)){if(o=xe.makeSpan(["stretchy",r],[],i),r==="fbox"){var c=i.color&&i.getColor();c&&(o.style.borderColor=c)}}else{var u=[];/^[bx]cancel$/.test(r)&&u.push(new T1({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&u.push(new T1({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var d=new Vi(u,{width:"100%",height:nt(l)});o=xe.makeSvgSpan([],[d],i)}return o.height=l,o.style.height=nt(l),o},Wi={encloseSpan:oX,mathMLnode:nX,svgSpan:iX};function lr(e,t){if(!e||e.type!==t)throw new Error("Expected node of type "+t+", but got "+(e?"node of type "+e.type:String(e)));return e}function cw(e){var t=Ap(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?"node of type "+e.type:String(e)));return t}function Ap(e){return e&&(e.type==="atom"||RJ.hasOwnProperty(e.type))?e:null}var uw=(e,t)=>{var r,s,a;e&&e.type==="supsub"?(s=lr(e.base,"accent"),r=s.base,e.base=r,a=AJ(br(e,t)),e.base=s):(s=lr(e,"accent"),r=s.base);var i=br(r,t.havingCrampedStyle()),o=s.isShifty&&_r.isCharacterBox(r),l=0;if(o){var c=_r.getBaseElem(r),u=br(c,t.havingCrampedStyle());l=eN(u).skew}var d=s.label==="\\c",h=d?i.height+i.depth:Math.min(i.height,t.fontMetrics().xHeight),m;if(s.isStretchy)m=Wi.svgSpan(s,t),m=xe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"elem",elem:m,wrapperClasses:["svg-align"],wrapperStyle:l>0?{width:"calc(100% - "+nt(2*l)+")",marginLeft:nt(2*l)}:void 0}]},t);else{var f,x;s.label==="\\vec"?(f=xe.staticSvg("vec",t),x=xe.svgData.vec[1]):(f=xe.makeOrd({mode:s.mode,text:s.label},t,"textord"),f=eN(f),f.italic=0,x=f.width,d&&(h+=f.depth)),m=xe.makeSpan(["accent-body"],[f]);var g=s.label==="\\textcircled";g&&(m.classes.push("accent-full"),h=i.height);var y=l;g||(y-=x/2),m.style.left=nt(y),s.label==="\\textcircled"&&(m.style.top=".2em"),m=xe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:-h},{type:"elem",elem:m}]},t)}var b=xe.makeSpan(["mord","accent"],[m],t);return a?(a.children[0]=b,a.height=Math.max(b.height,a.height),a.classes[0]="mord",a):b},A9=(e,t)=>{var r=e.isStretchy?Wi.mathMLnode(e.label):new Qe.MathNode("mo",[ga(e.label,e.mode)]),s=new Qe.MathNode("mover",[Rr(e.base,t),r]);return s.setAttribute("accent","true"),s},lX=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(e=>"\\"+e).join("|"));ft({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{var r=jf(t[0]),s=!lX.test(e.funcName),a=!s||e.funcName==="\\widehat"||e.funcName==="\\widetilde"||e.funcName==="\\widecheck";return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:s,isShifty:a,base:r}},htmlBuilder:uw,mathmlBuilder:A9});ft({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{var r=t[0],s=e.parser.mode;return s==="math"&&(e.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+e.funcName+" works only in text mode"),s="text"),{type:"accent",mode:s,label:e.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:uw,mathmlBuilder:A9});ft({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:s}=e,a=t[0];return{type:"accentUnder",mode:r.mode,label:s,base:a}},htmlBuilder:(e,t)=>{var r=br(e.base,t),s=Wi.svgSpan(e,t),a=e.label==="\\utilde"?.12:0,i=xe.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:s,wrapperClasses:["svg-align"]},{type:"kern",size:a},{type:"elem",elem:r}]},t);return xe.makeSpan(["mord","accentunder"],[i],t)},mathmlBuilder:(e,t)=>{var r=Wi.mathMLnode(e.label),s=new Qe.MathNode("munder",[Rr(e.base,t),r]);return s.setAttribute("accentunder","true"),s}});var Wm=e=>{var t=new Qe.MathNode("mpadded",e?[e]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};ft({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:s,funcName:a}=e;return{type:"xArrow",mode:s.mode,label:a,body:t[0],below:r[0]}},htmlBuilder(e,t){var r=t.style,s=t.havingStyle(r.sup()),a=xe.wrapFragment(br(e.body,s,t),t),i=e.label.slice(0,2)==="\\x"?"x":"cd";a.classes.push(i+"-arrow-pad");var o;e.below&&(s=t.havingStyle(r.sub()),o=xe.wrapFragment(br(e.below,s,t),t),o.classes.push(i+"-arrow-pad"));var l=Wi.svgSpan(e,t),c=-t.fontMetrics().axisHeight+.5*l.height,u=-t.fontMetrics().axisHeight-.5*l.height-.111;(a.depth>.25||e.label==="\\xleftequilibrium")&&(u-=a.depth);var d;if(o){var h=-t.fontMetrics().axisHeight+o.height+.5*l.height+.111;d=xe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:u},{type:"elem",elem:l,shift:c},{type:"elem",elem:o,shift:h}]},t)}else d=xe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:u},{type:"elem",elem:l,shift:c}]},t);return d.children[0].children[0].children[1].classes.push("svg-align"),xe.makeSpan(["mrel","x-arrow"],[d],t)},mathmlBuilder(e,t){var r=Wi.mathMLnode(e.label);r.setAttribute("minsize",e.label.charAt(0)==="x"?"1.75em":"3.0em");var s;if(e.body){var a=Wm(Rr(e.body,t));if(e.below){var i=Wm(Rr(e.below,t));s=new Qe.MathNode("munderover",[r,i,a])}else s=new Qe.MathNode("mover",[r,a])}else if(e.below){var o=Wm(Rr(e.below,t));s=new Qe.MathNode("munder",[r,o])}else s=Wm(),s=new Qe.MathNode("mover",[r,s]);return s}});var cX=xe.makeSpan;function P9(e,t){var r=Cn(e.body,t,!0);return cX([e.mclass],r,t)}function R9(e,t){var r,s=Ms(e.body,t);return e.mclass==="minner"?r=new Qe.MathNode("mpadded",s):e.mclass==="mord"?e.isCharacterBox?(r=s[0],r.type="mi"):r=new Qe.MathNode("mi",s):(e.isCharacterBox?(r=s[0],r.type="mo"):r=new Qe.MathNode("mo",s),e.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):e.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):e.mclass==="mopen"||e.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):e.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}ft({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(e,t){var{parser:r,funcName:s}=e,a=t[0];return{type:"mclass",mode:r.mode,mclass:"m"+s.slice(5),body:dn(a),isCharacterBox:_r.isCharacterBox(a)}},htmlBuilder:P9,mathmlBuilder:R9});var Pp=e=>{var t=e.type==="ordgroup"&&e.body.length?e.body[0]:e;return t.type==="atom"&&(t.family==="bin"||t.family==="rel")?"m"+t.family:"mord"};ft({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(e,t){var{parser:r}=e;return{type:"mclass",mode:r.mode,mclass:Pp(t[0]),body:dn(t[1]),isCharacterBox:_r.isCharacterBox(t[1])}}});ft({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(e,t){var{parser:r,funcName:s}=e,a=t[1],i=t[0],o;s!=="\\stackrel"?o=Pp(a):o="mrel";var l={type:"op",mode:a.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:s!=="\\stackrel",body:dn(a)},c={type:"supsub",mode:i.mode,base:l,sup:s==="\\underset"?null:i,sub:s==="\\underset"?i:null};return{type:"mclass",mode:r.mode,mclass:o,body:[c],isCharacterBox:_r.isCharacterBox(c)}},htmlBuilder:P9,mathmlBuilder:R9});ft({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"pmb",mode:r.mode,mclass:Pp(t[0]),body:dn(t[0])}},htmlBuilder(e,t){var r=Cn(e.body,t,!0),s=xe.makeSpan([e.mclass],r,t);return s.style.textShadow="0.02em 0.01em 0.04px",s},mathmlBuilder(e,t){var r=Ms(e.body,t),s=new Qe.MathNode("mstyle",r);return s.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),s}});var uX={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},lN=()=>({type:"styling",body:[],mode:"math",style:"display"}),cN=e=>e.type==="textord"&&e.text==="@",dX=(e,t)=>(e.type==="mathord"||e.type==="atom")&&e.text===t;function hX(e,t,r){var s=uX[e];switch(s){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(s,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":{var a=r.callFunction("\\\\cdleft",[t[0]],[]),i={type:"atom",text:s,mode:"math",family:"rel"},o=r.callFunction("\\Big",[i],[]),l=r.callFunction("\\\\cdright",[t[1]],[]),c={type:"ordgroup",mode:"math",body:[a,o,l]};return r.callFunction("\\\\cdparent",[c],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var u={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[u],[])}default:return{type:"textord",text:" ",mode:"math"}}}function mX(e){var t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();var r=e.fetch().text;if(r==="&"||r==="\\\\")e.consume();else if(r==="\\end"){t[t.length-1].length===0&&t.pop();break}else throw new Ke("Expected \\\\ or \\cr or \\end",e.nextToken)}for(var s=[],a=[s],i=0;i<t.length;i++){for(var o=t[i],l=lN(),c=0;c<o.length;c++)if(!cN(o[c]))l.body.push(o[c]);else{s.push(l),c+=1;var u=cw(o[c]).text,d=new Array(2);if(d[0]={type:"ordgroup",mode:"math",body:[]},d[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(u)>-1))if("<>AV".indexOf(u)>-1)for(var h=0;h<2;h++){for(var m=!0,f=c+1;f<o.length;f++){if(dX(o[f],u)){m=!1,c=f;break}if(cN(o[f]))throw new Ke("Missing a "+u+" character to complete a CD arrow.",o[f]);d[h].body.push(o[f])}if(m)throw new Ke("Missing a "+u+" character to complete a CD arrow.",o[c])}else throw new Ke('Expected one of "<>AV=|." after @',o[c]);var x=hX(u,d,e),g={type:"styling",body:[x],mode:"math",style:"display"};s.push(g),l=lN()}i%2===0?s.push(l):s.shift(),s=[],a.push(s)}e.gullet.endGroup(),e.gullet.endGroup();var y=new Array(a[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:a,arraystretch:1,addJot:!0,rowGaps:[null],cols:y,colSeparationType:"CD",hLinesBeforeRow:new Array(a.length+1).fill([])}}ft({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:s}=e;return{type:"cdlabel",mode:r.mode,side:s.slice(4),label:t[0]}},htmlBuilder(e,t){var r=t.havingStyle(t.style.sup()),s=xe.wrapFragment(br(e.label,r,t),t);return s.classes.push("cd-label-"+e.side),s.style.bottom=nt(.8-s.depth),s.height=0,s.depth=0,s},mathmlBuilder(e,t){var r=new Qe.MathNode("mrow",[Rr(e.label,t)]);return r=new Qe.MathNode("mpadded",[r]),r.setAttribute("width","0"),e.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new Qe.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});ft({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(e,t){var{parser:r}=e;return{type:"cdlabelparent",mode:r.mode,fragment:t[0]}},htmlBuilder(e,t){var r=xe.wrapFragment(br(e.fragment,t),t);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(e,t){return new Qe.MathNode("mrow",[Rr(e.fragment,t)])}});ft({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(e,t){for(var{parser:r}=e,s=lr(t[0],"ordgroup"),a=s.body,i="",o=0;o<a.length;o++){var l=lr(a[o],"textord");i+=l.text}var c=parseInt(i),u;if(isNaN(c))throw new Ke("\\@char has non-numeric argument "+i);if(c<0||c>=1114111)throw new Ke("\\@char with invalid code point "+i);return c<=65535?u=String.fromCharCode(c):(c-=65536,u=String.fromCharCode((c>>10)+55296,(c&1023)+56320)),{type:"textord",mode:r.mode,text:u}}});var M9=(e,t)=>{var r=Cn(e.body,t.withColor(e.color),!1);return xe.makeFragment(r)},O9=(e,t)=>{var r=Ms(e.body,t.withColor(e.color)),s=new Qe.MathNode("mstyle",r);return s.setAttribute("mathcolor",e.color),s};ft({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(e,t){var{parser:r}=e,s=lr(t[0],"color-token").color,a=t[1];return{type:"color",mode:r.mode,color:s,body:dn(a)}},htmlBuilder:M9,mathmlBuilder:O9});ft({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(e,t){var{parser:r,breakOnTokenText:s}=e,a=lr(t[0],"color-token").color;r.gullet.macros.set("\\current@color",a);var i=r.parseExpression(!0,s);return{type:"color",mode:r.mode,color:a,body:i}},htmlBuilder:M9,mathmlBuilder:O9});ft({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(e,t,r){var{parser:s}=e,a=s.gullet.future().text==="["?s.parseSizeGroup(!0):null,i=!s.settings.displayMode||!s.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:s.mode,newLine:i,size:a&&lr(a,"size").value}},htmlBuilder(e,t){var r=xe.makeSpan(["mspace"],[],t);return e.newLine&&(r.classes.push("newline"),e.size&&(r.style.marginTop=nt(Qr(e.size,t)))),r},mathmlBuilder(e,t){var r=new Qe.MathNode("mspace");return e.newLine&&(r.setAttribute("linebreak","newline"),e.size&&r.setAttribute("height",nt(Qr(e.size,t)))),r}});var M1={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},I9=e=>{var t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new Ke("Expected a control sequence",e);return t},fX=e=>{var t=e.gullet.popToken();return t.text==="="&&(t=e.gullet.popToken(),t.text===" "&&(t=e.gullet.popToken())),t},D9=(e,t,r,s)=>{var a=e.gullet.macros.get(r.text);a==null&&(r.noexpand=!0,a={tokens:[r],numArgs:0,unexpandable:!e.gullet.isExpandable(r.text)}),e.gullet.macros.set(t,a,s)};ft({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t,funcName:r}=e;t.consumeSpaces();var s=t.fetch();if(M1[s.text])return(r==="\\global"||r==="\\\\globallong")&&(s.text=M1[s.text]),lr(t.parseFunction(),"internal");throw new Ke("Invalid token after macro prefix",s)}});ft({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,s=t.gullet.popToken(),a=s.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(a))throw new Ke("Expected a control sequence",s);for(var i=0,o,l=[[]];t.gullet.future().text!=="{";)if(s=t.gullet.popToken(),s.text==="#"){if(t.gullet.future().text==="{"){o=t.gullet.future(),l[i].push("{");break}if(s=t.gullet.popToken(),!/^[1-9]$/.test(s.text))throw new Ke('Invalid argument number "'+s.text+'"');if(parseInt(s.text)!==i+1)throw new Ke('Argument number "'+s.text+'" out of order');i++,l.push([])}else{if(s.text==="EOF")throw new Ke("Expected a macro definition");l[i].push(s.text)}var{tokens:c}=t.gullet.consumeArg();return o&&c.unshift(o),(r==="\\edef"||r==="\\xdef")&&(c=t.gullet.expandTokens(c),c.reverse()),t.gullet.macros.set(a,{tokens:c,numArgs:i,delimiters:l},r===M1[r]),{type:"internal",mode:t.mode}}});ft({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,s=I9(t.gullet.popToken());t.gullet.consumeSpaces();var a=fX(t);return D9(t,s,a,r==="\\\\globallet"),{type:"internal",mode:t.mode}}});ft({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,s=I9(t.gullet.popToken()),a=t.gullet.popToken(),i=t.gullet.popToken();return D9(t,s,i,r==="\\\\globalfuture"),t.gullet.pushToken(i),t.gullet.pushToken(a),{type:"internal",mode:t.mode}}});var vd=function(t,r,s){var a=Fr.math[t]&&Fr.math[t].replace,i=sw(a||t,r,s);if(!i)throw new Error("Unsupported symbol "+t+" and font size "+r+".");return i},dw=function(t,r,s,a){var i=s.havingBaseStyle(r),o=xe.makeSpan(a.concat(i.sizingClasses(s)),[t],s),l=i.sizeMultiplier/s.sizeMultiplier;return o.height*=l,o.depth*=l,o.maxFontSize=i.sizeMultiplier,o},F9=function(t,r,s){var a=r.havingBaseStyle(s),i=(1-r.sizeMultiplier/a.sizeMultiplier)*r.fontMetrics().axisHeight;t.classes.push("delimcenter"),t.style.top=nt(i),t.height-=i,t.depth+=i},pX=function(t,r,s,a,i,o){var l=xe.makeSymbol(t,"Main-Regular",i,a),c=dw(l,r,a,o);return s&&F9(c,a,r),c},xX=function(t,r,s,a){return xe.makeSymbol(t,"Size"+r+"-Regular",s,a)},L9=function(t,r,s,a,i,o){var l=xX(t,r,i,a),c=dw(xe.makeSpan(["delimsizing","size"+r],[l],a),Bt.TEXT,a,o);return s&&F9(c,a,Bt.TEXT),c},hg=function(t,r,s){var a;r==="Size1-Regular"?a="delim-size1":a="delim-size4";var i=xe.makeSpan(["delimsizinginner",a],[xe.makeSpan([],[xe.makeSymbol(t,r,s)])]);return{type:"elem",elem:i}},mg=function(t,r,s){var a=Ja["Size4-Regular"][t.charCodeAt(0)]?Ja["Size4-Regular"][t.charCodeAt(0)][4]:Ja["Size1-Regular"][t.charCodeAt(0)][4],i=new Uo("inner",jJ(t,Math.round(1e3*r))),o=new Vi([i],{width:nt(a),height:nt(r),style:"width:"+nt(a),viewBox:"0 0 "+1e3*a+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),l=xe.makeSvgSpan([],[o],s);return l.height=r,l.style.height=nt(r),l.style.width=nt(a),{type:"elem",elem:l}},O1=.008,Gm={type:"kern",size:-1*O1},gX=["|","\\lvert","\\rvert","\\vert"],vX=["\\|","\\lVert","\\rVert","\\Vert"],z9=function(t,r,s,a,i,o){var l,c,u,d,h="",m=0;l=u=d=t,c=null;var f="Size1-Regular";t==="\\uparrow"?u=d="":t==="\\Uparrow"?u=d="":t==="\\downarrow"?l=u="":t==="\\Downarrow"?l=u="":t==="\\updownarrow"?(l="\\uparrow",u="",d="\\downarrow"):t==="\\Updownarrow"?(l="\\Uparrow",u="",d="\\Downarrow"):gX.includes(t)?(u="",h="vert",m=333):vX.includes(t)?(u="",h="doublevert",m=556):t==="["||t==="\\lbrack"?(l="",u="",d="",f="Size4-Regular",h="lbrack",m=667):t==="]"||t==="\\rbrack"?(l="",u="",d="",f="Size4-Regular",h="rbrack",m=667):t==="\\lfloor"||t===""?(u=l="",d="",f="Size4-Regular",h="lfloor",m=667):t==="\\lceil"||t===""?(l="",u=d="",f="Size4-Regular",h="lceil",m=667):t==="\\rfloor"||t===""?(u=l="",d="",f="Size4-Regular",h="rfloor",m=667):t==="\\rceil"||t===""?(l="",u=d="",f="Size4-Regular",h="rceil",m=667):t==="("||t==="\\lparen"?(l="",u="",d="",f="Size4-Regular",h="lparen",m=875):t===")"||t==="\\rparen"?(l="",u="",d="",f="Size4-Regular",h="rparen",m=875):t==="\\{"||t==="\\lbrace"?(l="",c="",d="",u="",f="Size4-Regular"):t==="\\}"||t==="\\rbrace"?(l="",c="",d="",u="",f="Size4-Regular"):t==="\\lgroup"||t===""?(l="",d="",u="",f="Size4-Regular"):t==="\\rgroup"||t===""?(l="",d="",u="",f="Size4-Regular"):t==="\\lmoustache"||t===""?(l="",d="",u="",f="Size4-Regular"):(t==="\\rmoustache"||t==="")&&(l="",d="",u="",f="Size4-Regular");var x=vd(l,f,i),g=x.height+x.depth,y=vd(u,f,i),b=y.height+y.depth,v=vd(d,f,i),w=v.height+v.depth,S=0,k=1;if(c!==null){var N=vd(c,f,i);S=N.height+N.depth,k=2}var P=g+w+S,T=Math.max(0,Math.ceil((r-P)/(k*b))),A=P+T*k*b,E=a.fontMetrics().axisHeight;s&&(E*=a.sizeMultiplier);var M=A/2-E,I=[];if(h.length>0){var se=A-g-w,ee=Math.round(A*1e3),Y=NJ(h,Math.round(se*1e3)),F=new Uo(h,Y),ne=(m/1e3).toFixed(3)+"em",q=(ee/1e3).toFixed(3)+"em",V=new Vi([F],{width:ne,height:q,viewBox:"0 0 "+m+" "+ee}),_=xe.makeSvgSpan([],[V],a);_.height=ee/1e3,_.style.width=ne,_.style.height=q,I.push({type:"elem",elem:_})}else{if(I.push(hg(d,f,i)),I.push(Gm),c===null){var U=A-g-w+2*O1;I.push(mg(u,U,a))}else{var H=(A-g-w-S)/2+2*O1;I.push(mg(u,H,a)),I.push(Gm),I.push(hg(c,f,i)),I.push(Gm),I.push(mg(u,H,a))}I.push(Gm),I.push(hg(l,f,i))}var O=a.havingBaseStyle(Bt.TEXT),B=xe.makeVList({positionType:"bottom",positionData:M,children:I},O);return dw(xe.makeSpan(["delimsizing","mult"],[B],O),Bt.TEXT,a,o)},fg=80,pg=.08,xg=function(t,r,s,a,i){var o=wJ(t,a,s),l=new Uo(t,o),c=new Vi([l],{width:"400em",height:nt(r),viewBox:"0 0 400000 "+s,preserveAspectRatio:"xMinYMin slice"});return xe.makeSvgSpan(["hide-tail"],[c],i)},yX=function(t,r){var s=r.havingBaseSizing(),a=U9("\\surd",t*s.sizeMultiplier,B9,s),i=s.sizeMultiplier,o=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),l,c=0,u=0,d=0,h;return a.type==="small"?(d=1e3+1e3*o+fg,t<1?i=1:t<1.4&&(i=.7),c=(1+o+pg)/i,u=(1+o)/i,l=xg("sqrtMain",c,d,o,r),l.style.minWidth="0.853em",h=.833/i):a.type==="large"?(d=(1e3+fg)*Fd[a.size],u=(Fd[a.size]+o)/i,c=(Fd[a.size]+o+pg)/i,l=xg("sqrtSize"+a.size,c,d,o,r),l.style.minWidth="1.02em",h=1/i):(c=t+o+pg,u=t+o,d=Math.floor(1e3*t+o)+fg,l=xg("sqrtTall",c,d,o,r),l.style.minWidth="0.742em",h=1.056),l.height=u,l.style.height=nt(c),{span:l,advanceWidth:h,ruleWidth:(r.fontMetrics().sqrtRuleThickness+o)*i}},$9=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],bX=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],q9=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Fd=[0,1.2,1.8,2.4,3],wX=function(t,r,s,a,i){if(t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle"),$9.includes(t)||q9.includes(t))return L9(t,r,!1,s,a,i);if(bX.includes(t))return z9(t,Fd[r],!1,s,a,i);throw new Ke("Illegal delimiter: '"+t+"'")},jX=[{type:"small",style:Bt.SCRIPTSCRIPT},{type:"small",style:Bt.SCRIPT},{type:"small",style:Bt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],NX=[{type:"small",style:Bt.SCRIPTSCRIPT},{type:"small",style:Bt.SCRIPT},{type:"small",style:Bt.TEXT},{type:"stack"}],B9=[{type:"small",style:Bt.SCRIPTSCRIPT},{type:"small",style:Bt.SCRIPT},{type:"small",style:Bt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],SX=function(t){if(t.type==="small")return"Main-Regular";if(t.type==="large")return"Size"+t.size+"-Regular";if(t.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+t.type+"' here.")},U9=function(t,r,s,a){for(var i=Math.min(2,3-a.style.size),o=i;o<s.length&&s[o].type!=="stack";o++){var l=vd(t,SX(s[o]),"math"),c=l.height+l.depth;if(s[o].type==="small"){var u=a.havingBaseStyle(s[o].style);c*=u.sizeMultiplier}if(c>r)return s[o]}return s[s.length-1]},V9=function(t,r,s,a,i,o){t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle");var l;q9.includes(t)?l=jX:$9.includes(t)?l=B9:l=NX;var c=U9(t,r,l,a);return c.type==="small"?pX(t,c.style,s,a,i,o):c.type==="large"?L9(t,c.size,s,a,i,o):z9(t,r,s,a,i,o)},kX=function(t,r,s,a,i,o){var l=a.fontMetrics().axisHeight*a.sizeMultiplier,c=901,u=5/a.fontMetrics().ptPerEm,d=Math.max(r-l,s+l),h=Math.max(d/500*c,2*d-u);return V9(t,h,!0,a,i,o)},Ai={sqrtImage:yX,sizedDelim:wX,sizeToMaxHeight:Fd,customSizedDelim:V9,leftRightDelim:kX},uN={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},_X=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function Rp(e,t){var r=Ap(e);if(r&&_X.includes(r.text))return r;throw r?new Ke("Invalid delimiter '"+r.text+"' after '"+t.funcName+"'",e):new Ke("Invalid delimiter type '"+e.type+"'",e)}ft({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{var r=Rp(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:uN[e.funcName].size,mclass:uN[e.funcName].mclass,delim:r.text}},htmlBuilder:(e,t)=>e.delim==="."?xe.makeSpan([e.mclass]):Ai.sizedDelim(e.delim,e.size,t,e.mode,[e.mclass]),mathmlBuilder:e=>{var t=[];e.delim!=="."&&t.push(ga(e.delim,e.mode));var r=new Qe.MathNode("mo",t);e.mclass==="mopen"||e.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var s=nt(Ai.sizeToMaxHeight[e.size]);return r.setAttribute("minsize",s),r.setAttribute("maxsize",s),r}});function dN(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}ft({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=e.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new Ke("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:e.parser.mode,delim:Rp(t[0],e).text,color:r}}});ft({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=Rp(t[0],e),s=e.parser;++s.leftrightDepth;var a=s.parseExpression(!1);--s.leftrightDepth,s.expect("\\right",!1);var i=lr(s.parseFunction(),"leftright-right");return{type:"leftright",mode:s.mode,body:a,left:r.text,right:i.delim,rightColor:i.color}},htmlBuilder:(e,t)=>{dN(e);for(var r=Cn(e.body,t,!0,["mopen","mclose"]),s=0,a=0,i=!1,o=0;o<r.length;o++)r[o].isMiddle?i=!0:(s=Math.max(r[o].height,s),a=Math.max(r[o].depth,a));s*=t.sizeMultiplier,a*=t.sizeMultiplier;var l;if(e.left==="."?l=bh(t,["mopen"]):l=Ai.leftRightDelim(e.left,s,a,t,e.mode,["mopen"]),r.unshift(l),i)for(var c=1;c<r.length;c++){var u=r[c],d=u.isMiddle;d&&(r[c]=Ai.leftRightDelim(d.delim,s,a,d.options,e.mode,[]))}var h;if(e.right===".")h=bh(t,["mclose"]);else{var m=e.rightColor?t.withColor(e.rightColor):t;h=Ai.leftRightDelim(e.right,s,a,m,e.mode,["mclose"])}return r.push(h),xe.makeSpan(["minner"],r,t)},mathmlBuilder:(e,t)=>{dN(e);var r=Ms(e.body,t);if(e.left!=="."){var s=new Qe.MathNode("mo",[ga(e.left,e.mode)]);s.setAttribute("fence","true"),r.unshift(s)}if(e.right!=="."){var a=new Qe.MathNode("mo",[ga(e.right,e.mode)]);a.setAttribute("fence","true"),e.rightColor&&a.setAttribute("mathcolor",e.rightColor),r.push(a)}return ow(r)}});ft({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=Rp(t[0],e);if(!e.parser.leftrightDepth)throw new Ke("\\middle without preceding \\left",r);return{type:"middle",mode:e.parser.mode,delim:r.text}},htmlBuilder:(e,t)=>{var r;if(e.delim===".")r=bh(t,[]);else{r=Ai.sizedDelim(e.delim,1,t,e.mode,[]);var s={delim:e.delim,options:t};r.isMiddle=s}return r},mathmlBuilder:(e,t)=>{var r=e.delim==="\\vert"||e.delim==="|"?ga("|","text"):ga(e.delim,e.mode),s=new Qe.MathNode("mo",[r]);return s.setAttribute("fence","true"),s.setAttribute("lspace","0.05em"),s.setAttribute("rspace","0.05em"),s}});var hw=(e,t)=>{var r=xe.wrapFragment(br(e.body,t),t),s=e.label.slice(1),a=t.sizeMultiplier,i,o=0,l=_r.isCharacterBox(e.body);if(s==="sout")i=xe.makeSpan(["stretchy","sout"]),i.height=t.fontMetrics().defaultRuleThickness/a,o=-.5*t.fontMetrics().xHeight;else if(s==="phase"){var c=Qr({number:.6,unit:"pt"},t),u=Qr({number:.35,unit:"ex"},t),d=t.havingBaseSizing();a=a/d.sizeMultiplier;var h=r.height+r.depth+c+u;r.style.paddingLeft=nt(h/2+c);var m=Math.floor(1e3*h*a),f=yJ(m),x=new Vi([new Uo("phase",f)],{width:"400em",height:nt(m/1e3),viewBox:"0 0 400000 "+m,preserveAspectRatio:"xMinYMin slice"});i=xe.makeSvgSpan(["hide-tail"],[x],t),i.style.height=nt(h),o=r.depth+c+u}else{/cancel/.test(s)?l||r.classes.push("cancel-pad"):s==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var g=0,y=0,b=0;/box/.test(s)?(b=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),g=t.fontMetrics().fboxsep+(s==="colorbox"?0:b),y=g):s==="angl"?(b=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness),g=4*b,y=Math.max(0,.25-r.depth)):(g=l?.2:0,y=g),i=Wi.encloseSpan(r,s,g,y,t),/fbox|boxed|fcolorbox/.test(s)?(i.style.borderStyle="solid",i.style.borderWidth=nt(b)):s==="angl"&&b!==.049&&(i.style.borderTopWidth=nt(b),i.style.borderRightWidth=nt(b)),o=r.depth+y,e.backgroundColor&&(i.style.backgroundColor=e.backgroundColor,e.borderColor&&(i.style.borderColor=e.borderColor))}var v;if(e.backgroundColor)v=xe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:o},{type:"elem",elem:r,shift:0}]},t);else{var w=/cancel|phase/.test(s)?["svg-align"]:[];v=xe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:i,shift:o,wrapperClasses:w}]},t)}return/cancel/.test(s)&&(v.height=r.height,v.depth=r.depth),/cancel/.test(s)&&!l?xe.makeSpan(["mord","cancel-lap"],[v],t):xe.makeSpan(["mord"],[v],t)},mw=(e,t)=>{var r=0,s=new Qe.MathNode(e.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Rr(e.body,t)]);switch(e.label){case"\\cancel":s.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":s.setAttribute("notation","downdiagonalstrike");break;case"\\phase":s.setAttribute("notation","phasorangle");break;case"\\sout":s.setAttribute("notation","horizontalstrike");break;case"\\fbox":s.setAttribute("notation","box");break;case"\\angl":s.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,s.setAttribute("width","+"+2*r+"pt"),s.setAttribute("height","+"+2*r+"pt"),s.setAttribute("lspace",r+"pt"),s.setAttribute("voffset",r+"pt"),e.label==="\\fcolorbox"){var a=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);s.setAttribute("style","border: "+a+"em solid "+String(e.borderColor))}break;case"\\xcancel":s.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return e.backgroundColor&&s.setAttribute("mathbackground",e.backgroundColor),s};ft({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(e,t,r){var{parser:s,funcName:a}=e,i=lr(t[0],"color-token").color,o=t[1];return{type:"enclose",mode:s.mode,label:a,backgroundColor:i,body:o}},htmlBuilder:hw,mathmlBuilder:mw});ft({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(e,t,r){var{parser:s,funcName:a}=e,i=lr(t[0],"color-token").color,o=lr(t[1],"color-token").color,l=t[2];return{type:"enclose",mode:s.mode,label:a,backgroundColor:o,borderColor:i,body:l}},htmlBuilder:hw,mathmlBuilder:mw});ft({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\fbox",body:t[0]}}});ft({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:s}=e,a=t[0];return{type:"enclose",mode:r.mode,label:s,body:a}},htmlBuilder:hw,mathmlBuilder:mw});ft({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\angl",body:t[0]}}});var H9={};function ui(e){for(var{type:t,names:r,props:s,handler:a,htmlBuilder:i,mathmlBuilder:o}=e,l={type:t,numArgs:s.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:a},c=0;c<r.length;++c)H9[r[c]]=l;i&&(bf[t]=i),o&&(wf[t]=o)}var W9={};function D(e,t){W9[e]=t}function hN(e){var t=[];e.consumeSpaces();var r=e.fetch().text;for(r==="\\relax"&&(e.consume(),e.consumeSpaces(),r=e.fetch().text);r==="\\hline"||r==="\\hdashline";)e.consume(),t.push(r==="\\hdashline"),e.consumeSpaces(),r=e.fetch().text;return t}var Mp=e=>{var t=e.parser.settings;if(!t.displayMode)throw new Ke("{"+e.envName+"} can be used only in display mode.")};function fw(e){if(e.indexOf("ed")===-1)return e.indexOf("*")===-1}function rl(e,t,r){var{hskipBeforeAndAfter:s,addJot:a,cols:i,arraystretch:o,colSeparationType:l,autoTag:c,singleRow:u,emptySingleRow:d,maxNumCols:h,leqno:m}=t;if(e.gullet.beginGroup(),u||e.gullet.macros.set("\\cr","\\\\\\relax"),!o){var f=e.gullet.expandMacroAsText("\\arraystretch");if(f==null)o=1;else if(o=parseFloat(f),!o||o<0)throw new Ke("Invalid \\arraystretch: "+f)}e.gullet.beginGroup();var x=[],g=[x],y=[],b=[],v=c!=null?[]:void 0;function w(){c&&e.gullet.macros.set("\\@eqnsw","1",!0)}function S(){v&&(e.gullet.macros.get("\\df@tag")?(v.push(e.subparse([new Qs("\\df@tag")])),e.gullet.macros.set("\\df@tag",void 0,!0)):v.push(!!c&&e.gullet.macros.get("\\@eqnsw")==="1"))}for(w(),b.push(hN(e));;){var k=e.parseExpression(!1,u?"\\end":"\\\\");e.gullet.endGroup(),e.gullet.beginGroup(),k={type:"ordgroup",mode:e.mode,body:k},r&&(k={type:"styling",mode:e.mode,style:r,body:[k]}),x.push(k);var N=e.fetch().text;if(N==="&"){if(h&&x.length===h){if(u||l)throw new Ke("Too many tab characters: &",e.nextToken);e.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}e.consume()}else if(N==="\\end"){S(),x.length===1&&k.type==="styling"&&k.body[0].body.length===0&&(g.length>1||!d)&&g.pop(),b.length<g.length+1&&b.push([]);break}else if(N==="\\\\"){e.consume();var P=void 0;e.gullet.future().text!==" "&&(P=e.parseSizeGroup(!0)),y.push(P?P.value:null),S(),b.push(hN(e)),x=[],g.push(x),w()}else throw new Ke("Expected & or \\\\ or \\cr or \\end",e.nextToken)}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:e.mode,addJot:a,arraystretch:o,body:g,cols:i,rowGaps:y,hskipBeforeAndAfter:s,hLinesBeforeRow:b,colSeparationType:l,tags:v,leqno:m}}function pw(e){return e.slice(0,1)==="d"?"display":"text"}var di=function(t,r){var s,a,i=t.body.length,o=t.hLinesBeforeRow,l=0,c=new Array(i),u=[],d=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),h=1/r.fontMetrics().ptPerEm,m=5*h;if(t.colSeparationType&&t.colSeparationType==="small"){var f=r.havingStyle(Bt.SCRIPT).sizeMultiplier;m=.2778*(f/r.sizeMultiplier)}var x=t.colSeparationType==="CD"?Qr({number:3,unit:"ex"},r):12*h,g=3*h,y=t.arraystretch*x,b=.7*y,v=.3*y,w=0;function S(L){for(var ke=0;ke<L.length;++ke)ke>0&&(w+=.25),u.push({pos:w,isDashed:L[ke]})}for(S(o[0]),s=0;s<t.body.length;++s){var k=t.body[s],N=b,P=v;l<k.length&&(l=k.length);var T=new Array(k.length);for(a=0;a<k.length;++a){var A=br(k[a],r);P<A.depth&&(P=A.depth),N<A.height&&(N=A.height),T[a]=A}var E=t.rowGaps[s],M=0;E&&(M=Qr(E,r),M>0&&(M+=v,P<M&&(P=M),M=0)),t.addJot&&(P+=g),T.height=N,T.depth=P,w+=N,T.pos=w,w+=P+M,c[s]=T,S(o[s+1])}var I=w/2+r.fontMetrics().axisHeight,se=t.cols||[],ee=[],Y,F,ne=[];if(t.tags&&t.tags.some(L=>L))for(s=0;s<i;++s){var q=c[s],V=q.pos-I,_=t.tags[s],U=void 0;_===!0?U=xe.makeSpan(["eqn-num"],[],r):_===!1?U=xe.makeSpan([],[],r):U=xe.makeSpan([],Cn(_,r,!0),r),U.depth=q.depth,U.height=q.height,ne.push({type:"elem",elem:U,shift:V})}for(a=0,F=0;a<l||F<se.length;++a,++F){for(var H=se[F]||{},O=!0;H.type==="separator";){if(O||(Y=xe.makeSpan(["arraycolsep"],[]),Y.style.width=nt(r.fontMetrics().doubleRuleSep),ee.push(Y)),H.separator==="|"||H.separator===":"){var B=H.separator==="|"?"solid":"dashed",W=xe.makeSpan(["vertical-separator"],[],r);W.style.height=nt(w),W.style.borderRightWidth=nt(d),W.style.borderRightStyle=B,W.style.margin="0 "+nt(-d/2);var K=w-I;K&&(W.style.verticalAlign=nt(-K)),ee.push(W)}else throw new Ke("Invalid separator type: "+H.separator);F++,H=se[F]||{},O=!1}if(!(a>=l)){var X=void 0;(a>0||t.hskipBeforeAndAfter)&&(X=_r.deflt(H.pregap,m),X!==0&&(Y=xe.makeSpan(["arraycolsep"],[]),Y.style.width=nt(X),ee.push(Y)));var de=[];for(s=0;s<i;++s){var oe=c[s],me=oe[a];if(me){var Ee=oe.pos-I;me.depth=oe.depth,me.height=oe.height,de.push({type:"elem",elem:me,shift:Ee})}}de=xe.makeVList({positionType:"individualShift",children:de},r),de=xe.makeSpan(["col-align-"+(H.align||"c")],[de]),ee.push(de),(a<l-1||t.hskipBeforeAndAfter)&&(X=_r.deflt(H.postgap,m),X!==0&&(Y=xe.makeSpan(["arraycolsep"],[]),Y.style.width=nt(X),ee.push(Y)))}}if(c=xe.makeSpan(["mtable"],ee),u.length>0){for(var we=xe.makeLineSpan("hline",r,d),Le=xe.makeLineSpan("hdashline",r,d),_e=[{type:"elem",elem:c,shift:0}];u.length>0;){var ut=u.pop(),at=ut.pos-I;ut.isDashed?_e.push({type:"elem",elem:Le,shift:at}):_e.push({type:"elem",elem:we,shift:at})}c=xe.makeVList({positionType:"individualShift",children:_e},r)}if(ne.length===0)return xe.makeSpan(["mord"],[c],r);var Ct=xe.makeVList({positionType:"individualShift",children:ne},r);return Ct=xe.makeSpan(["tag"],[Ct],r),xe.makeFragment([c,Ct])},CX={c:"center ",l:"left ",r:"right "},hi=function(t,r){for(var s=[],a=new Qe.MathNode("mtd",[],["mtr-glue"]),i=new Qe.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<t.body.length;o++){for(var l=t.body[o],c=[],u=0;u<l.length;u++)c.push(new Qe.MathNode("mtd",[Rr(l[u],r)]));t.tags&&t.tags[o]&&(c.unshift(a),c.push(a),t.leqno?c.unshift(i):c.push(i)),s.push(new Qe.MathNode("mtr",c))}var d=new Qe.MathNode("mtable",s),h=t.arraystretch===.5?.1:.16+t.arraystretch-1+(t.addJot?.09:0);d.setAttribute("rowspacing",nt(h));var m="",f="";if(t.cols&&t.cols.length>0){var x=t.cols,g="",y=!1,b=0,v=x.length;x[0].type==="separator"&&(m+="top ",b=1),x[x.length-1].type==="separator"&&(m+="bottom ",v-=1);for(var w=b;w<v;w++)x[w].type==="align"?(f+=CX[x[w].align],y&&(g+="none "),y=!0):x[w].type==="separator"&&y&&(g+=x[w].separator==="|"?"solid ":"dashed ",y=!1);d.setAttribute("columnalign",f.trim()),/[sd]/.test(g)&&d.setAttribute("columnlines",g.trim())}if(t.colSeparationType==="align"){for(var S=t.cols||[],k="",N=1;N<S.length;N++)k+=N%2?"0em ":"1em ";d.setAttribute("columnspacing",k.trim())}else t.colSeparationType==="alignat"||t.colSeparationType==="gather"?d.setAttribute("columnspacing","0em"):t.colSeparationType==="small"?d.setAttribute("columnspacing","0.2778em"):t.colSeparationType==="CD"?d.setAttribute("columnspacing","0.5em"):d.setAttribute("columnspacing","1em");var P="",T=t.hLinesBeforeRow;m+=T[0].length>0?"left ":"",m+=T[T.length-1].length>0?"right ":"";for(var A=1;A<T.length-1;A++)P+=T[A].length===0?"none ":T[A][0]?"dashed ":"solid ";return/[sd]/.test(P)&&d.setAttribute("rowlines",P.trim()),m!==""&&(d=new Qe.MathNode("menclose",[d]),d.setAttribute("notation",m.trim())),t.arraystretch&&t.arraystretch<1&&(d=new Qe.MathNode("mstyle",[d]),d.setAttribute("scriptlevel","1")),d},G9=function(t,r){t.envName.indexOf("ed")===-1&&Mp(t);var s=[],a=t.envName.indexOf("at")>-1?"alignat":"align",i=t.envName==="split",o=rl(t.parser,{cols:s,addJot:!0,autoTag:i?void 0:fw(t.envName),emptySingleRow:!0,colSeparationType:a,maxNumCols:i?2:void 0,leqno:t.parser.settings.leqno},"display"),l,c=0,u={type:"ordgroup",mode:t.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var d="",h=0;h<r[0].body.length;h++){var m=lr(r[0].body[h],"textord");d+=m.text}l=Number(d),c=l*2}var f=!c;o.body.forEach(function(b){for(var v=1;v<b.length;v+=2){var w=lr(b[v],"styling"),S=lr(w.body[0],"ordgroup");S.body.unshift(u)}if(f)c<b.length&&(c=b.length);else{var k=b.length/2;if(l<k)throw new Ke("Too many math in a row: "+("expected "+l+", but got "+k),b[0])}});for(var x=0;x<c;++x){var g="r",y=0;x%2===1?g="l":x>0&&f&&(y=1),s[x]={type:"align",align:g,pregap:y,postgap:0}}return o.colSeparationType=f?"align":"alignat",o};ui({type:"array",names:["array","darray"],props:{numArgs:1},handler(e,t){var r=Ap(t[0]),s=r?[t[0]]:lr(t[0],"ordgroup").body,a=s.map(function(o){var l=cw(o),c=l.text;if("lcr".indexOf(c)!==-1)return{type:"align",align:c};if(c==="|")return{type:"separator",separator:"|"};if(c===":")return{type:"separator",separator:":"};throw new Ke("Unknown column alignment: "+c,o)}),i={cols:a,hskipBeforeAndAfter:!0,maxNumCols:a.length};return rl(e.parser,i,pw(e.envName))},htmlBuilder:di,mathmlBuilder:hi});ui({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(e){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")],r="c",s={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(e.envName.charAt(e.envName.length-1)==="*"){var a=e.parser;if(a.consumeSpaces(),a.fetch().text==="["){if(a.consume(),a.consumeSpaces(),r=a.fetch().text,"lcr".indexOf(r)===-1)throw new Ke("Expected l or c or r",a.nextToken);a.consume(),a.consumeSpaces(),a.expect("]"),a.consume(),s.cols=[{type:"align",align:r}]}}var i=rl(e.parser,s,pw(e.envName)),o=Math.max(0,...i.body.map(l=>l.length));return i.cols=new Array(o).fill({type:"align",align:r}),t?{type:"leftright",mode:e.mode,body:[i],left:t[0],right:t[1],rightColor:void 0}:i},htmlBuilder:di,mathmlBuilder:hi});ui({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){var t={arraystretch:.5},r=rl(e.parser,t,"script");return r.colSeparationType="small",r},htmlBuilder:di,mathmlBuilder:hi});ui({type:"array",names:["subarray"],props:{numArgs:1},handler(e,t){var r=Ap(t[0]),s=r?[t[0]]:lr(t[0],"ordgroup").body,a=s.map(function(o){var l=cw(o),c=l.text;if("lc".indexOf(c)!==-1)return{type:"align",align:c};throw new Ke("Unknown column alignment: "+c,o)});if(a.length>1)throw new Ke("{subarray} can contain only one column");var i={cols:a,hskipBeforeAndAfter:!1,arraystretch:.5};if(i=rl(e.parser,i,"script"),i.body.length>0&&i.body[0].length>1)throw new Ke("{subarray} can contain only one column");return i},htmlBuilder:di,mathmlBuilder:hi});ui({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){var t={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=rl(e.parser,t,pw(e.envName));return{type:"leftright",mode:e.mode,body:[r],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:di,mathmlBuilder:hi});ui({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:G9,htmlBuilder:di,mathmlBuilder:hi});ui({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){["gather","gather*"].includes(e.envName)&&Mp(e);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:fw(e.envName),emptySingleRow:!0,leqno:e.parser.settings.leqno};return rl(e.parser,t,"display")},htmlBuilder:di,mathmlBuilder:hi});ui({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:G9,htmlBuilder:di,mathmlBuilder:hi});ui({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){Mp(e);var t={autoTag:fw(e.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:e.parser.settings.leqno};return rl(e.parser,t,"display")},htmlBuilder:di,mathmlBuilder:hi});ui({type:"array",names:["CD"],props:{numArgs:0},handler(e){return Mp(e),mX(e.parser)},htmlBuilder:di,mathmlBuilder:hi});D("\\nonumber","\\gdef\\@eqnsw{0}");D("\\notag","\\nonumber");ft({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(e,t){throw new Ke(e.funcName+" valid only within array environment")}});var mN=H9;ft({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(e,t){var{parser:r,funcName:s}=e,a=t[0];if(a.type!=="ordgroup")throw new Ke("Invalid environment name",a);for(var i="",o=0;o<a.body.length;++o)i+=lr(a.body[o],"textord").text;if(s==="\\begin"){if(!mN.hasOwnProperty(i))throw new Ke("No such environment: "+i,a);var l=mN[i],{args:c,optArgs:u}=r.parseArguments("\\begin{"+i+"}",l),d={mode:r.mode,envName:i,parser:r},h=l.handler(d,c,u);r.expect("\\end",!1);var m=r.nextToken,f=lr(r.parseFunction(),"environment");if(f.name!==i)throw new Ke("Mismatch: \\begin{"+i+"} matched by \\end{"+f.name+"}",m);return h}return{type:"environment",mode:r.mode,name:i,nameGroup:a}}});var Q9=(e,t)=>{var r=e.font,s=t.withFont(r);return br(e.body,s)},Y9=(e,t)=>{var r=e.font,s=t.withFont(r);return Rr(e.body,s)},fN={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};ft({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:s}=e,a=jf(t[0]),i=s;return i in fN&&(i=fN[i]),{type:"font",mode:r.mode,font:i.slice(1),body:a}},htmlBuilder:Q9,mathmlBuilder:Y9});ft({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(e,t)=>{var{parser:r}=e,s=t[0],a=_r.isCharacterBox(s);return{type:"mclass",mode:r.mode,mclass:Pp(s),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:s}],isCharacterBox:a}}});ft({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:s,breakOnTokenText:a}=e,{mode:i}=r,o=r.parseExpression(!0,a),l="math"+s.slice(1);return{type:"font",mode:i,font:l,body:{type:"ordgroup",mode:r.mode,body:o}}},htmlBuilder:Q9,mathmlBuilder:Y9});var K9=(e,t)=>{var r=t;return e==="display"?r=r.id>=Bt.SCRIPT.id?r.text():Bt.DISPLAY:e==="text"&&r.size===Bt.DISPLAY.size?r=Bt.TEXT:e==="script"?r=Bt.SCRIPT:e==="scriptscript"&&(r=Bt.SCRIPTSCRIPT),r},xw=(e,t)=>{var r=K9(e.size,t.style),s=r.fracNum(),a=r.fracDen(),i;i=t.havingStyle(s);var o=br(e.numer,i,t);if(e.continued){var l=8.5/t.fontMetrics().ptPerEm,c=3.5/t.fontMetrics().ptPerEm;o.height=o.height<l?l:o.height,o.depth=o.depth<c?c:o.depth}i=t.havingStyle(a);var u=br(e.denom,i,t),d,h,m;e.hasBarLine?(e.barSize?(h=Qr(e.barSize,t),d=xe.makeLineSpan("frac-line",t,h)):d=xe.makeLineSpan("frac-line",t),h=d.height,m=d.height):(d=null,h=0,m=t.fontMetrics().defaultRuleThickness);var f,x,g;r.size===Bt.DISPLAY.size||e.size==="display"?(f=t.fontMetrics().num1,h>0?x=3*m:x=7*m,g=t.fontMetrics().denom1):(h>0?(f=t.fontMetrics().num2,x=m):(f=t.fontMetrics().num3,x=3*m),g=t.fontMetrics().denom2);var y;if(d){var v=t.fontMetrics().axisHeight;f-o.depth-(v+.5*h)<x&&(f+=x-(f-o.depth-(v+.5*h))),v-.5*h-(u.height-g)<x&&(g+=x-(v-.5*h-(u.height-g)));var w=-(v-.5*h);y=xe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:g},{type:"elem",elem:d,shift:w},{type:"elem",elem:o,shift:-f}]},t)}else{var b=f-o.depth-(u.height-g);b<x&&(f+=.5*(x-b),g+=.5*(x-b)),y=xe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:g},{type:"elem",elem:o,shift:-f}]},t)}i=t.havingStyle(r),y.height*=i.sizeMultiplier/t.sizeMultiplier,y.depth*=i.sizeMultiplier/t.sizeMultiplier;var S;r.size===Bt.DISPLAY.size?S=t.fontMetrics().delim1:r.size===Bt.SCRIPTSCRIPT.size?S=t.havingStyle(Bt.SCRIPT).fontMetrics().delim2:S=t.fontMetrics().delim2;var k,N;return e.leftDelim==null?k=bh(t,["mopen"]):k=Ai.customSizedDelim(e.leftDelim,S,!0,t.havingStyle(r),e.mode,["mopen"]),e.continued?N=xe.makeSpan([]):e.rightDelim==null?N=bh(t,["mclose"]):N=Ai.customSizedDelim(e.rightDelim,S,!0,t.havingStyle(r),e.mode,["mclose"]),xe.makeSpan(["mord"].concat(i.sizingClasses(t)),[k,xe.makeSpan(["mfrac"],[y]),N],t)},gw=(e,t)=>{var r=new Qe.MathNode("mfrac",[Rr(e.numer,t),Rr(e.denom,t)]);if(!e.hasBarLine)r.setAttribute("linethickness","0px");else if(e.barSize){var s=Qr(e.barSize,t);r.setAttribute("linethickness",nt(s))}var a=K9(e.size,t.style);if(a.size!==t.style.size){r=new Qe.MathNode("mstyle",[r]);var i=a.size===Bt.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",i),r.setAttribute("scriptlevel","0")}if(e.leftDelim!=null||e.rightDelim!=null){var o=[];if(e.leftDelim!=null){var l=new Qe.MathNode("mo",[new Qe.TextNode(e.leftDelim.replace("\\",""))]);l.setAttribute("fence","true"),o.push(l)}if(o.push(r),e.rightDelim!=null){var c=new Qe.MathNode("mo",[new Qe.TextNode(e.rightDelim.replace("\\",""))]);c.setAttribute("fence","true"),o.push(c)}return ow(o)}return r};ft({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:s}=e,a=t[0],i=t[1],o,l=null,c=null,u="auto";switch(s){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o=!1,l="(",c=")";break;case"\\\\bracefrac":o=!1,l="\\{",c="\\}";break;case"\\\\brackfrac":o=!1,l="[",c="]";break;default:throw new Error("Unrecognized genfrac command")}switch(s){case"\\dfrac":case"\\dbinom":u="display";break;case"\\tfrac":case"\\tbinom":u="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:a,denom:i,hasBarLine:o,leftDelim:l,rightDelim:c,size:u,barSize:null}},htmlBuilder:xw,mathmlBuilder:gw});ft({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(e,t)=>{var{parser:r,funcName:s}=e,a=t[0],i=t[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:a,denom:i,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});ft({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(e){var{parser:t,funcName:r,token:s}=e,a;switch(r){case"\\over":a="\\frac";break;case"\\choose":a="\\binom";break;case"\\atop":a="\\\\atopfrac";break;case"\\brace":a="\\\\bracefrac";break;case"\\brack":a="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:t.mode,replaceWith:a,token:s}}});var pN=["display","text","script","scriptscript"],xN=function(t){var r=null;return t.length>0&&(r=t,r=r==="."?null:r),r};ft({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(e,t){var{parser:r}=e,s=t[4],a=t[5],i=jf(t[0]),o=i.type==="atom"&&i.family==="open"?xN(i.text):null,l=jf(t[1]),c=l.type==="atom"&&l.family==="close"?xN(l.text):null,u=lr(t[2],"size"),d,h=null;u.isBlank?d=!0:(h=u.value,d=h.number>0);var m="auto",f=t[3];if(f.type==="ordgroup"){if(f.body.length>0){var x=lr(f.body[0],"textord");m=pN[Number(x.text)]}}else f=lr(f,"textord"),m=pN[Number(f.text)];return{type:"genfrac",mode:r.mode,numer:s,denom:a,continued:!1,hasBarLine:d,barSize:h,leftDelim:o,rightDelim:c,size:m}},htmlBuilder:xw,mathmlBuilder:gw});ft({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(e,t){var{parser:r,funcName:s,token:a}=e;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:lr(t[0],"size").value,token:a}}});ft({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(e,t)=>{var{parser:r,funcName:s}=e,a=t[0],i=sJ(lr(t[1],"infix").size),o=t[2],l=i.number>0;return{type:"genfrac",mode:r.mode,numer:a,denom:o,continued:!1,hasBarLine:l,barSize:i,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:xw,mathmlBuilder:gw});var J9=(e,t)=>{var r=t.style,s,a;e.type==="supsub"?(s=e.sup?br(e.sup,t.havingStyle(r.sup()),t):br(e.sub,t.havingStyle(r.sub()),t),a=lr(e.base,"horizBrace")):a=lr(e,"horizBrace");var i=br(a.base,t.havingBaseStyle(Bt.DISPLAY)),o=Wi.svgSpan(a,t),l;if(a.isOver?(l=xe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:.1},{type:"elem",elem:o}]},t),l.children[0].children[0].children[1].classes.push("svg-align")):(l=xe.makeVList({positionType:"bottom",positionData:i.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:i}]},t),l.children[0].children[0].children[0].classes.push("svg-align")),s){var c=xe.makeSpan(["mord",a.isOver?"mover":"munder"],[l],t);a.isOver?l=xe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:c},{type:"kern",size:.2},{type:"elem",elem:s}]},t):l=xe.makeVList({positionType:"bottom",positionData:c.depth+.2+s.height+s.depth,children:[{type:"elem",elem:s},{type:"kern",size:.2},{type:"elem",elem:c}]},t)}return xe.makeSpan(["mord",a.isOver?"mover":"munder"],[l],t)},EX=(e,t)=>{var r=Wi.mathMLnode(e.label);return new Qe.MathNode(e.isOver?"mover":"munder",[Rr(e.base,t),r])};ft({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:s}=e;return{type:"horizBrace",mode:r.mode,label:s,isOver:/^\\over/.test(s),base:t[0]}},htmlBuilder:J9,mathmlBuilder:EX});ft({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,s=t[1],a=lr(t[0],"url").url;return r.settings.isTrusted({command:"\\href",url:a})?{type:"href",mode:r.mode,href:a,body:dn(s)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(e,t)=>{var r=Cn(e.body,t,!1);return xe.makeAnchor(e.href,[],r,t)},mathmlBuilder:(e,t)=>{var r=Vo(e.body,t);return r instanceof Bs||(r=new Bs("mrow",[r])),r.setAttribute("href",e.href),r}});ft({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,s=lr(t[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:s}))return r.formatUnsupportedCmd("\\url");for(var a=[],i=0;i<s.length;i++){var o=s[i];o==="~"&&(o="\\textasciitilde"),a.push({type:"textord",mode:"text",text:o})}var l={type:"text",mode:r.mode,font:"\\texttt",body:a};return{type:"href",mode:r.mode,href:s,body:dn(l)}}});ft({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(e,t){var{parser:r}=e;return{type:"hbox",mode:r.mode,body:dn(t[0])}},htmlBuilder(e,t){var r=Cn(e.body,t,!1);return xe.makeFragment(r)},mathmlBuilder(e,t){return new Qe.MathNode("mrow",Ms(e.body,t))}});ft({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:s,token:a}=e,i=lr(t[0],"raw").string,o=t[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var l,c={};switch(s){case"\\htmlClass":c.class=i,l={command:"\\htmlClass",class:i};break;case"\\htmlId":c.id=i,l={command:"\\htmlId",id:i};break;case"\\htmlStyle":c.style=i,l={command:"\\htmlStyle",style:i};break;case"\\htmlData":{for(var u=i.split(","),d=0;d<u.length;d++){var h=u[d].split("=");if(h.length!==2)throw new Ke("Error parsing key-value for \\htmlData");c["data-"+h[0].trim()]=h[1].trim()}l={command:"\\htmlData",attributes:c};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(l)?{type:"html",mode:r.mode,attributes:c,body:dn(o)}:r.formatUnsupportedCmd(s)},htmlBuilder:(e,t)=>{var r=Cn(e.body,t,!1),s=["enclosing"];e.attributes.class&&s.push(...e.attributes.class.trim().split(/\s+/));var a=xe.makeSpan(s,r,t);for(var i in e.attributes)i!=="class"&&e.attributes.hasOwnProperty(i)&&a.setAttribute(i,e.attributes[i]);return a},mathmlBuilder:(e,t)=>Vo(e.body,t)});ft({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"htmlmathml",mode:r.mode,html:dn(t[0]),mathml:dn(t[1])}},htmlBuilder:(e,t)=>{var r=Cn(e.html,t,!1);return xe.makeFragment(r)},mathmlBuilder:(e,t)=>Vo(e.mathml,t)});var gg=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!r)throw new Ke("Invalid size: '"+t+"' in \\includegraphics");var s={number:+(r[1]+r[2]),unit:r[3]};if(!x9(s))throw new Ke("Invalid unit: '"+s.unit+"' in \\includegraphics.");return s};ft({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(e,t,r)=>{var{parser:s}=e,a={number:0,unit:"em"},i={number:.9,unit:"em"},o={number:0,unit:"em"},l="";if(r[0])for(var c=lr(r[0],"raw").string,u=c.split(","),d=0;d<u.length;d++){var h=u[d].split("=");if(h.length===2){var m=h[1].trim();switch(h[0].trim()){case"alt":l=m;break;case"width":a=gg(m);break;case"height":i=gg(m);break;case"totalheight":o=gg(m);break;default:throw new Ke("Invalid key: '"+h[0]+"' in \\includegraphics.")}}}var f=lr(t[0],"url").url;return l===""&&(l=f,l=l.replace(/^.*[\\/]/,""),l=l.substring(0,l.lastIndexOf("."))),s.settings.isTrusted({command:"\\includegraphics",url:f})?{type:"includegraphics",mode:s.mode,alt:l,width:a,height:i,totalheight:o,src:f}:s.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(e,t)=>{var r=Qr(e.height,t),s=0;e.totalheight.number>0&&(s=Qr(e.totalheight,t)-r);var a=0;e.width.number>0&&(a=Qr(e.width,t));var i={height:nt(r+s)};a>0&&(i.width=nt(a)),s>0&&(i.verticalAlign=nt(-s));var o=new EJ(e.src,e.alt,i);return o.height=r,o.depth=s,o},mathmlBuilder:(e,t)=>{var r=new Qe.MathNode("mglyph",[]);r.setAttribute("alt",e.alt);var s=Qr(e.height,t),a=0;if(e.totalheight.number>0&&(a=Qr(e.totalheight,t)-s,r.setAttribute("valign",nt(-a))),r.setAttribute("height",nt(s+a)),e.width.number>0){var i=Qr(e.width,t);r.setAttribute("width",nt(i))}return r.setAttribute("src",e.src),r}});ft({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:s}=e,a=lr(t[0],"size");if(r.settings.strict){var i=s[1]==="m",o=a.value.unit==="mu";i?(o||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+s+" supports only mu units, "+("not "+a.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+s+" works only in math mode")):o&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+s+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:a.value}},htmlBuilder(e,t){return xe.makeGlue(e.dimension,t)},mathmlBuilder(e,t){var r=Qr(e.dimension,t);return new Qe.SpaceNode(r)}});ft({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:s}=e,a=t[0];return{type:"lap",mode:r.mode,alignment:s.slice(5),body:a}},htmlBuilder:(e,t)=>{var r;e.alignment==="clap"?(r=xe.makeSpan([],[br(e.body,t)]),r=xe.makeSpan(["inner"],[r],t)):r=xe.makeSpan(["inner"],[br(e.body,t)]);var s=xe.makeSpan(["fix"],[]),a=xe.makeSpan([e.alignment],[r,s],t),i=xe.makeSpan(["strut"]);return i.style.height=nt(a.height+a.depth),a.depth&&(i.style.verticalAlign=nt(-a.depth)),a.children.unshift(i),a=xe.makeSpan(["thinbox"],[a],t),xe.makeSpan(["mord","vbox"],[a],t)},mathmlBuilder:(e,t)=>{var r=new Qe.MathNode("mpadded",[Rr(e.body,t)]);if(e.alignment!=="rlap"){var s=e.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",s+"width")}return r.setAttribute("width","0px"),r}});ft({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){var{funcName:r,parser:s}=e,a=s.mode;s.switchMode("math");var i=r==="\\("?"\\)":"$",o=s.parseExpression(!1,i);return s.expect(i),s.switchMode(a),{type:"styling",mode:s.mode,style:"text",body:o}}});ft({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){throw new Ke("Mismatched "+e.funcName)}});var gN=(e,t)=>{switch(t.style.size){case Bt.DISPLAY.size:return e.display;case Bt.TEXT.size:return e.text;case Bt.SCRIPT.size:return e.script;case Bt.SCRIPTSCRIPT.size:return e.scriptscript;default:return e.text}};ft({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"mathchoice",mode:r.mode,display:dn(t[0]),text:dn(t[1]),script:dn(t[2]),scriptscript:dn(t[3])}},htmlBuilder:(e,t)=>{var r=gN(e,t),s=Cn(r,t,!1);return xe.makeFragment(s)},mathmlBuilder:(e,t)=>{var r=gN(e,t);return Vo(r,t)}});var X9=(e,t,r,s,a,i,o)=>{e=xe.makeSpan([],[e]);var l=r&&_r.isCharacterBox(r),c,u;if(t){var d=br(t,s.havingStyle(a.sup()),s);u={elem:d,kern:Math.max(s.fontMetrics().bigOpSpacing1,s.fontMetrics().bigOpSpacing3-d.depth)}}if(r){var h=br(r,s.havingStyle(a.sub()),s);c={elem:h,kern:Math.max(s.fontMetrics().bigOpSpacing2,s.fontMetrics().bigOpSpacing4-h.height)}}var m;if(u&&c){var f=s.fontMetrics().bigOpSpacing5+c.elem.height+c.elem.depth+c.kern+e.depth+o;m=xe.makeVList({positionType:"bottom",positionData:f,children:[{type:"kern",size:s.fontMetrics().bigOpSpacing5},{type:"elem",elem:c.elem,marginLeft:nt(-i)},{type:"kern",size:c.kern},{type:"elem",elem:e},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:nt(i)},{type:"kern",size:s.fontMetrics().bigOpSpacing5}]},s)}else if(c){var x=e.height-o;m=xe.makeVList({positionType:"top",positionData:x,children:[{type:"kern",size:s.fontMetrics().bigOpSpacing5},{type:"elem",elem:c.elem,marginLeft:nt(-i)},{type:"kern",size:c.kern},{type:"elem",elem:e}]},s)}else if(u){var g=e.depth+o;m=xe.makeVList({positionType:"bottom",positionData:g,children:[{type:"elem",elem:e},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:nt(i)},{type:"kern",size:s.fontMetrics().bigOpSpacing5}]},s)}else return e;var y=[m];if(c&&i!==0&&!l){var b=xe.makeSpan(["mspace"],[],s);b.style.marginRight=nt(i),y.unshift(b)}return xe.makeSpan(["mop","op-limits"],y,s)},Z9=["\\smallint"],Yu=(e,t)=>{var r,s,a=!1,i;e.type==="supsub"?(r=e.sup,s=e.sub,i=lr(e.base,"op"),a=!0):i=lr(e,"op");var o=t.style,l=!1;o.size===Bt.DISPLAY.size&&i.symbol&&!Z9.includes(i.name)&&(l=!0);var c;if(i.symbol){var u=l?"Size2-Regular":"Size1-Regular",d="";if((i.name==="\\oiint"||i.name==="\\oiiint")&&(d=i.name.slice(1),i.name=d==="oiint"?"\\iint":"\\iiint"),c=xe.makeSymbol(i.name,u,"math",t,["mop","op-symbol",l?"large-op":"small-op"]),d.length>0){var h=c.italic,m=xe.staticSvg(d+"Size"+(l?"2":"1"),t);c=xe.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:0},{type:"elem",elem:m,shift:l?.08:0}]},t),i.name="\\"+d,c.classes.unshift("mop"),c.italic=h}}else if(i.body){var f=Cn(i.body,t,!0);f.length===1&&f[0]instanceof xa?(c=f[0],c.classes[0]="mop"):c=xe.makeSpan(["mop"],f,t)}else{for(var x=[],g=1;g<i.name.length;g++)x.push(xe.mathsym(i.name[g],i.mode,t));c=xe.makeSpan(["mop"],x,t)}var y=0,b=0;return(c instanceof xa||i.name==="\\oiint"||i.name==="\\oiiint")&&!i.suppressBaseShift&&(y=(c.height-c.depth)/2-t.fontMetrics().axisHeight,b=c.italic),a?X9(c,r,s,t,o,b,y):(y&&(c.style.position="relative",c.style.top=nt(y)),c)},Wh=(e,t)=>{var r;if(e.symbol)r=new Bs("mo",[ga(e.name,e.mode)]),Z9.includes(e.name)&&r.setAttribute("largeop","false");else if(e.body)r=new Bs("mo",Ms(e.body,t));else{r=new Bs("mi",[new Xa(e.name.slice(1))]);var s=new Bs("mo",[ga("","text")]);e.parentIsSupSub?r=new Bs("mrow",[r,s]):r=C9([r,s])}return r},TX={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};ft({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(e,t)=>{var{parser:r,funcName:s}=e,a=s;return a.length===1&&(a=TX[a]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:a}},htmlBuilder:Yu,mathmlBuilder:Wh});ft({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var{parser:r}=e,s=t[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:dn(s)}},htmlBuilder:Yu,mathmlBuilder:Wh});var AX={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};ft({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Yu,mathmlBuilder:Wh});ft({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Yu,mathmlBuilder:Wh});ft({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e,s=r;return s.length===1&&(s=AX[s]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:s}},htmlBuilder:Yu,mathmlBuilder:Wh});var eE=(e,t)=>{var r,s,a=!1,i;e.type==="supsub"?(r=e.sup,s=e.sub,i=lr(e.base,"operatorname"),a=!0):i=lr(e,"operatorname");var o;if(i.body.length>0){for(var l=i.body.map(h=>{var m=h.text;return typeof m=="string"?{type:"textord",mode:h.mode,text:m}:h}),c=Cn(l,t.withFont("mathrm"),!0),u=0;u<c.length;u++){var d=c[u];d instanceof xa&&(d.text=d.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=xe.makeSpan(["mop"],c,t)}else o=xe.makeSpan(["mop"],[],t);return a?X9(o,r,s,t,t.style,0,0):o},PX=(e,t)=>{for(var r=Ms(e.body,t.withFont("mathrm")),s=!0,a=0;a<r.length;a++){var i=r[a];if(!(i instanceof Qe.SpaceNode))if(i instanceof Qe.MathNode)switch(i.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var o=i.children[0];i.children.length===1&&o instanceof Qe.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):s=!1;break}default:s=!1}else s=!1}if(s){var l=r.map(d=>d.toText()).join("");r=[new Qe.TextNode(l)]}var c=new Qe.MathNode("mi",r);c.setAttribute("mathvariant","normal");var u=new Qe.MathNode("mo",[ga("","text")]);return e.parentIsSupSub?new Qe.MathNode("mrow",[c,u]):Qe.newDocumentFragment([c,u])};ft({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:s}=e,a=t[0];return{type:"operatorname",mode:r.mode,body:dn(a),alwaysHandleSupSub:s==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:eE,mathmlBuilder:PX});D("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");tc({type:"ordgroup",htmlBuilder(e,t){return e.semisimple?xe.makeFragment(Cn(e.body,t,!1)):xe.makeSpan(["mord"],Cn(e.body,t,!0),t)},mathmlBuilder(e,t){return Vo(e.body,t,!0)}});ft({type:"overline",names:["\\overline"],props:{numArgs:1},handler(e,t){var{parser:r}=e,s=t[0];return{type:"overline",mode:r.mode,body:s}},htmlBuilder(e,t){var r=br(e.body,t.havingCrampedStyle()),s=xe.makeLineSpan("overline-line",t),a=t.fontMetrics().defaultRuleThickness,i=xe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*a},{type:"elem",elem:s},{type:"kern",size:a}]},t);return xe.makeSpan(["mord","overline"],[i],t)},mathmlBuilder(e,t){var r=new Qe.MathNode("mo",[new Qe.TextNode("")]);r.setAttribute("stretchy","true");var s=new Qe.MathNode("mover",[Rr(e.body,t),r]);return s.setAttribute("accent","true"),s}});ft({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,s=t[0];return{type:"phantom",mode:r.mode,body:dn(s)}},htmlBuilder:(e,t)=>{var r=Cn(e.body,t.withPhantom(),!1);return xe.makeFragment(r)},mathmlBuilder:(e,t)=>{var r=Ms(e.body,t);return new Qe.MathNode("mphantom",r)}});ft({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,s=t[0];return{type:"hphantom",mode:r.mode,body:s}},htmlBuilder:(e,t)=>{var r=xe.makeSpan([],[br(e.body,t.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var s=0;s<r.children.length;s++)r.children[s].height=0,r.children[s].depth=0;return r=xe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t),xe.makeSpan(["mord"],[r],t)},mathmlBuilder:(e,t)=>{var r=Ms(dn(e.body),t),s=new Qe.MathNode("mphantom",r),a=new Qe.MathNode("mpadded",[s]);return a.setAttribute("height","0px"),a.setAttribute("depth","0px"),a}});ft({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,s=t[0];return{type:"vphantom",mode:r.mode,body:s}},htmlBuilder:(e,t)=>{var r=xe.makeSpan(["inner"],[br(e.body,t.withPhantom())]),s=xe.makeSpan(["fix"],[]);return xe.makeSpan(["mord","rlap"],[r,s],t)},mathmlBuilder:(e,t)=>{var r=Ms(dn(e.body),t),s=new Qe.MathNode("mphantom",r),a=new Qe.MathNode("mpadded",[s]);return a.setAttribute("width","0px"),a}});ft({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e,s=lr(t[0],"size").value,a=t[1];return{type:"raisebox",mode:r.mode,dy:s,body:a}},htmlBuilder(e,t){var r=br(e.body,t),s=Qr(e.dy,t);return xe.makeVList({positionType:"shift",positionData:-s,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){var r=new Qe.MathNode("mpadded",[Rr(e.body,t)]),s=e.dy.number+e.dy.unit;return r.setAttribute("voffset",s),r}});ft({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(e){var{parser:t}=e;return{type:"internal",mode:t.mode}}});ft({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(e,t,r){var{parser:s}=e,a=r[0],i=lr(t[0],"size"),o=lr(t[1],"size");return{type:"rule",mode:s.mode,shift:a&&lr(a,"size").value,width:i.value,height:o.value}},htmlBuilder(e,t){var r=xe.makeSpan(["mord","rule"],[],t),s=Qr(e.width,t),a=Qr(e.height,t),i=e.shift?Qr(e.shift,t):0;return r.style.borderRightWidth=nt(s),r.style.borderTopWidth=nt(a),r.style.bottom=nt(i),r.width=s,r.height=a+i,r.depth=-i,r.maxFontSize=a*1.125*t.sizeMultiplier,r},mathmlBuilder(e,t){var r=Qr(e.width,t),s=Qr(e.height,t),a=e.shift?Qr(e.shift,t):0,i=t.color&&t.getColor()||"black",o=new Qe.MathNode("mspace");o.setAttribute("mathbackground",i),o.setAttribute("width",nt(r)),o.setAttribute("height",nt(s));var l=new Qe.MathNode("mpadded",[o]);return a>=0?l.setAttribute("height",nt(a)):(l.setAttribute("height",nt(a)),l.setAttribute("depth",nt(-a))),l.setAttribute("voffset",nt(a)),l}});function tE(e,t,r){for(var s=Cn(e,t,!1),a=t.sizeMultiplier/r.sizeMultiplier,i=0;i<s.length;i++){var o=s[i].classes.indexOf("sizing");o<0?Array.prototype.push.apply(s[i].classes,t.sizingClasses(r)):s[i].classes[o+1]==="reset-size"+t.size&&(s[i].classes[o+1]="reset-size"+r.size),s[i].height*=a,s[i].depth*=a}return xe.makeFragment(s)}var vN=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],RX=(e,t)=>{var r=t.havingSize(e.size);return tE(e.body,r,t)};ft({type:"sizing",names:vN,props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{breakOnTokenText:r,funcName:s,parser:a}=e,i=a.parseExpression(!1,r);return{type:"sizing",mode:a.mode,size:vN.indexOf(s)+1,body:i}},htmlBuilder:RX,mathmlBuilder:(e,t)=>{var r=t.havingSize(e.size),s=Ms(e.body,r),a=new Qe.MathNode("mstyle",s);return a.setAttribute("mathsize",nt(r.sizeMultiplier)),a}});ft({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(e,t,r)=>{var{parser:s}=e,a=!1,i=!1,o=r[0]&&lr(r[0],"ordgroup");if(o)for(var l="",c=0;c<o.body.length;++c){var u=o.body[c];if(l=u.text,l==="t")a=!0;else if(l==="b")i=!0;else{a=!1,i=!1;break}}else a=!0,i=!0;var d=t[0];return{type:"smash",mode:s.mode,body:d,smashHeight:a,smashDepth:i}},htmlBuilder:(e,t)=>{var r=xe.makeSpan([],[br(e.body,t)]);if(!e.smashHeight&&!e.smashDepth)return r;if(e.smashHeight&&(r.height=0,r.children))for(var s=0;s<r.children.length;s++)r.children[s].height=0;if(e.smashDepth&&(r.depth=0,r.children))for(var a=0;a<r.children.length;a++)r.children[a].depth=0;var i=xe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t);return xe.makeSpan(["mord"],[i],t)},mathmlBuilder:(e,t)=>{var r=new Qe.MathNode("mpadded",[Rr(e.body,t)]);return e.smashHeight&&r.setAttribute("height","0px"),e.smashDepth&&r.setAttribute("depth","0px"),r}});ft({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:s}=e,a=r[0],i=t[0];return{type:"sqrt",mode:s.mode,body:i,index:a}},htmlBuilder(e,t){var r=br(e.body,t.havingCrampedStyle());r.height===0&&(r.height=t.fontMetrics().xHeight),r=xe.wrapFragment(r,t);var s=t.fontMetrics(),a=s.defaultRuleThickness,i=a;t.style.id<Bt.TEXT.id&&(i=t.fontMetrics().xHeight);var o=a+i/4,l=r.height+r.depth+o+a,{span:c,ruleWidth:u,advanceWidth:d}=Ai.sqrtImage(l,t),h=c.height-u;h>r.height+r.depth+o&&(o=(o+h-r.height-r.depth)/2);var m=c.height-r.height-o-u;r.style.paddingLeft=nt(d);var f=xe.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+m)},{type:"elem",elem:c},{type:"kern",size:u}]},t);if(e.index){var x=t.havingStyle(Bt.SCRIPTSCRIPT),g=br(e.index,x,t),y=.6*(f.height-f.depth),b=xe.makeVList({positionType:"shift",positionData:-y,children:[{type:"elem",elem:g}]},t),v=xe.makeSpan(["root"],[b]);return xe.makeSpan(["mord","sqrt"],[v,f],t)}else return xe.makeSpan(["mord","sqrt"],[f],t)},mathmlBuilder(e,t){var{body:r,index:s}=e;return s?new Qe.MathNode("mroot",[Rr(r,t),Rr(s,t)]):new Qe.MathNode("msqrt",[Rr(r,t)])}});var yN={display:Bt.DISPLAY,text:Bt.TEXT,script:Bt.SCRIPT,scriptscript:Bt.SCRIPTSCRIPT};ft({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e,t){var{breakOnTokenText:r,funcName:s,parser:a}=e,i=a.parseExpression(!0,r),o=s.slice(1,s.length-5);return{type:"styling",mode:a.mode,style:o,body:i}},htmlBuilder(e,t){var r=yN[e.style],s=t.havingStyle(r).withFont("");return tE(e.body,s,t)},mathmlBuilder(e,t){var r=yN[e.style],s=t.havingStyle(r),a=Ms(e.body,s),i=new Qe.MathNode("mstyle",a),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},l=o[e.style];return i.setAttribute("scriptlevel",l[0]),i.setAttribute("displaystyle",l[1]),i}});var MX=function(t,r){var s=t.base;if(s)if(s.type==="op"){var a=s.limits&&(r.style.size===Bt.DISPLAY.size||s.alwaysHandleSupSub);return a?Yu:null}else if(s.type==="operatorname"){var i=s.alwaysHandleSupSub&&(r.style.size===Bt.DISPLAY.size||s.limits);return i?eE:null}else{if(s.type==="accent")return _r.isCharacterBox(s.base)?uw:null;if(s.type==="horizBrace"){var o=!t.sub;return o===s.isOver?J9:null}else return null}else return null};tc({type:"supsub",htmlBuilder(e,t){var r=MX(e,t);if(r)return r(e,t);var{base:s,sup:a,sub:i}=e,o=br(s,t),l,c,u=t.fontMetrics(),d=0,h=0,m=s&&_r.isCharacterBox(s);if(a){var f=t.havingStyle(t.style.sup());l=br(a,f,t),m||(d=o.height-f.fontMetrics().supDrop*f.sizeMultiplier/t.sizeMultiplier)}if(i){var x=t.havingStyle(t.style.sub());c=br(i,x,t),m||(h=o.depth+x.fontMetrics().subDrop*x.sizeMultiplier/t.sizeMultiplier)}var g;t.style===Bt.DISPLAY?g=u.sup1:t.style.cramped?g=u.sup3:g=u.sup2;var y=t.sizeMultiplier,b=nt(.5/u.ptPerEm/y),v=null;if(c){var w=e.base&&e.base.type==="op"&&e.base.name&&(e.base.name==="\\oiint"||e.base.name==="\\oiiint");(o instanceof xa||w)&&(v=nt(-o.italic))}var S;if(l&&c){d=Math.max(d,g,l.depth+.25*u.xHeight),h=Math.max(h,u.sub2);var k=u.defaultRuleThickness,N=4*k;if(d-l.depth-(c.height-h)<N){h=N-(d-l.depth)+c.height;var P=.8*u.xHeight-(d-l.depth);P>0&&(d+=P,h-=P)}var T=[{type:"elem",elem:c,shift:h,marginRight:b,marginLeft:v},{type:"elem",elem:l,shift:-d,marginRight:b}];S=xe.makeVList({positionType:"individualShift",children:T},t)}else if(c){h=Math.max(h,u.sub1,c.height-.8*u.xHeight);var A=[{type:"elem",elem:c,marginLeft:v,marginRight:b}];S=xe.makeVList({positionType:"shift",positionData:h,children:A},t)}else if(l)d=Math.max(d,g,l.depth+.25*u.xHeight),S=xe.makeVList({positionType:"shift",positionData:-d,children:[{type:"elem",elem:l,marginRight:b}]},t);else throw new Error("supsub must have either sup or sub.");var E=P1(o,"right")||"mord";return xe.makeSpan([E],[o,xe.makeSpan(["msupsub"],[S])],t)},mathmlBuilder(e,t){var r=!1,s,a;e.base&&e.base.type==="horizBrace"&&(a=!!e.sup,a===e.base.isOver&&(r=!0,s=e.base.isOver)),e.base&&(e.base.type==="op"||e.base.type==="operatorname")&&(e.base.parentIsSupSub=!0);var i=[Rr(e.base,t)];e.sub&&i.push(Rr(e.sub,t)),e.sup&&i.push(Rr(e.sup,t));var o;if(r)o=s?"mover":"munder";else if(e.sub)if(e.sup){var u=e.base;u&&u.type==="op"&&u.limits&&t.style===Bt.DISPLAY||u&&u.type==="operatorname"&&u.alwaysHandleSupSub&&(t.style===Bt.DISPLAY||u.limits)?o="munderover":o="msubsup"}else{var c=e.base;c&&c.type==="op"&&c.limits&&(t.style===Bt.DISPLAY||c.alwaysHandleSupSub)||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(c.limits||t.style===Bt.DISPLAY)?o="munder":o="msub"}else{var l=e.base;l&&l.type==="op"&&l.limits&&(t.style===Bt.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||t.style===Bt.DISPLAY)?o="mover":o="msup"}return new Qe.MathNode(o,i)}});tc({type:"atom",htmlBuilder(e,t){return xe.mathsym(e.text,e.mode,t,["m"+e.family])},mathmlBuilder(e,t){var r=new Qe.MathNode("mo",[ga(e.text,e.mode)]);if(e.family==="bin"){var s=lw(e,t);s==="bold-italic"&&r.setAttribute("mathvariant",s)}else e.family==="punct"?r.setAttribute("separator","true"):(e.family==="open"||e.family==="close")&&r.setAttribute("stretchy","false");return r}});var rE={mi:"italic",mn:"normal",mtext:"normal"};tc({type:"mathord",htmlBuilder(e,t){return xe.makeOrd(e,t,"mathord")},mathmlBuilder(e,t){var r=new Qe.MathNode("mi",[ga(e.text,e.mode,t)]),s=lw(e,t)||"italic";return s!==rE[r.type]&&r.setAttribute("mathvariant",s),r}});tc({type:"textord",htmlBuilder(e,t){return xe.makeOrd(e,t,"textord")},mathmlBuilder(e,t){var r=ga(e.text,e.mode,t),s=lw(e,t)||"normal",a;return e.mode==="text"?a=new Qe.MathNode("mtext",[r]):/[0-9]/.test(e.text)?a=new Qe.MathNode("mn",[r]):e.text==="\\prime"?a=new Qe.MathNode("mo",[r]):a=new Qe.MathNode("mi",[r]),s!==rE[a.type]&&a.setAttribute("mathvariant",s),a}});var vg={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},yg={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};tc({type:"spacing",htmlBuilder(e,t){if(yg.hasOwnProperty(e.text)){var r=yg[e.text].className||"";if(e.mode==="text"){var s=xe.makeOrd(e,t,"textord");return s.classes.push(r),s}else return xe.makeSpan(["mspace",r],[xe.mathsym(e.text,e.mode,t)],t)}else{if(vg.hasOwnProperty(e.text))return xe.makeSpan(["mspace",vg[e.text]],[],t);throw new Ke('Unknown type of space "'+e.text+'"')}},mathmlBuilder(e,t){var r;if(yg.hasOwnProperty(e.text))r=new Qe.MathNode("mtext",[new Qe.TextNode("")]);else{if(vg.hasOwnProperty(e.text))return new Qe.MathNode("mspace");throw new Ke('Unknown type of space "'+e.text+'"')}return r}});var bN=()=>{var e=new Qe.MathNode("mtd",[]);return e.setAttribute("width","50%"),e};tc({type:"tag",mathmlBuilder(e,t){var r=new Qe.MathNode("mtable",[new Qe.MathNode("mtr",[bN(),new Qe.MathNode("mtd",[Vo(e.body,t)]),bN(),new Qe.MathNode("mtd",[Vo(e.tag,t)])])]);return r.setAttribute("width","100%"),r}});var wN={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},jN={"\\textbf":"textbf","\\textmd":"textmd"},OX={"\\textit":"textit","\\textup":"textup"},NN=(e,t)=>{var r=e.font;if(r){if(wN[r])return t.withTextFontFamily(wN[r]);if(jN[r])return t.withTextFontWeight(jN[r]);if(r==="\\emph")return t.fontShape==="textit"?t.withTextFontShape("textup"):t.withTextFontShape("textit")}else return t;return t.withTextFontShape(OX[r])};ft({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:s}=e,a=t[0];return{type:"text",mode:r.mode,body:dn(a),font:s}},htmlBuilder(e,t){var r=NN(e,t),s=Cn(e.body,r,!0);return xe.makeSpan(["mord","text"],s,r)},mathmlBuilder(e,t){var r=NN(e,t);return Vo(e.body,r)}});ft({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"underline",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=br(e.body,t),s=xe.makeLineSpan("underline-line",t),a=t.fontMetrics().defaultRuleThickness,i=xe.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:a},{type:"elem",elem:s},{type:"kern",size:3*a},{type:"elem",elem:r}]},t);return xe.makeSpan(["mord","underline"],[i],t)},mathmlBuilder(e,t){var r=new Qe.MathNode("mo",[new Qe.TextNode("")]);r.setAttribute("stretchy","true");var s=new Qe.MathNode("munder",[Rr(e.body,t),r]);return s.setAttribute("accentunder","true"),s}});ft({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"vcenter",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=br(e.body,t),s=t.fontMetrics().axisHeight,a=.5*(r.height-s-(r.depth+s));return xe.makeVList({positionType:"shift",positionData:a,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){return new Qe.MathNode("mpadded",[Rr(e.body,t)],["vcenter"])}});ft({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(e,t,r){throw new Ke("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(e,t){for(var r=SN(e),s=[],a=t.havingStyle(t.style.text()),i=0;i<r.length;i++){var o=r[i];o==="~"&&(o="\\textasciitilde"),s.push(xe.makeSymbol(o,"Typewriter-Regular",e.mode,a,["mord","texttt"]))}return xe.makeSpan(["mord","text"].concat(a.sizingClasses(t)),xe.tryCombineChars(s),a)},mathmlBuilder(e,t){var r=new Qe.TextNode(SN(e)),s=new Qe.MathNode("mtext",[r]);return s.setAttribute("mathvariant","monospace"),s}});var SN=e=>e.body.replace(/ /g,e.star?"":""),So=k9,nE=`[ \r
	]`,IX="\\\\[a-zA-Z@]+",DX="\\\\[^\uD800-\uDFFF]",FX="("+IX+")"+nE+"*",LX=`\\\\(
|[ \r	]+
?)[ \r	]*`,I1="[-]",zX=new RegExp(I1+"+$"),$X="("+nE+"+)|"+(LX+"|")+"([!-\\[\\]---]"+(I1+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(I1+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+FX)+("|"+DX+")");class kN{constructor(t,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=t,this.settings=r,this.tokenRegex=new RegExp($X,"g"),this.catcodes={"%":14,"~":13}}setCatcode(t,r){this.catcodes[t]=r}lex(){var t=this.input,r=this.tokenRegex.lastIndex;if(r===t.length)return new Qs("EOF",new bs(this,r,r));var s=this.tokenRegex.exec(t);if(s===null||s.index!==r)throw new Ke("Unexpected character: '"+t[r]+"'",new Qs(t[r],new bs(this,r,r+1)));var a=s[6]||s[3]||(s[2]?"\\ ":" ");if(this.catcodes[a]===14){var i=t.indexOf(`
`,this.tokenRegex.lastIndex);return i===-1?(this.tokenRegex.lastIndex=t.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=i+1,this.lex()}return new Qs(a,new bs(this,r,this.tokenRegex.lastIndex))}}class qX{constructor(t,r){t===void 0&&(t={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=t,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new Ke("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var t=this.undefStack.pop();for(var r in t)t.hasOwnProperty(r)&&(t[r]==null?delete this.current[r]:this.current[r]=t[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(t){return this.current.hasOwnProperty(t)||this.builtins.hasOwnProperty(t)}get(t){return this.current.hasOwnProperty(t)?this.current[t]:this.builtins[t]}set(t,r,s){if(s===void 0&&(s=!1),s){for(var a=0;a<this.undefStack.length;a++)delete this.undefStack[a][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=r)}else{var i=this.undefStack[this.undefStack.length-1];i&&!i.hasOwnProperty(t)&&(i[t]=this.current[t])}r==null?delete this.current[t]:this.current[t]=r}}var BX=W9;D("\\noexpand",function(e){var t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}});D("\\expandafter",function(e){var t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}});D("\\@firstoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[0],numArgs:0}});D("\\@secondoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[1],numArgs:0}});D("\\@ifnextchar",function(e){var t=e.consumeArgs(3);e.consumeSpaces();var r=e.future();return t[0].length===1&&t[0][0].text===r.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}});D("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");D("\\TextOrMath",function(e){var t=e.consumeArgs(2);return e.mode==="text"?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}});var _N={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};D("\\char",function(e){var t=e.popToken(),r,s="";if(t.text==="'")r=8,t=e.popToken();else if(t.text==='"')r=16,t=e.popToken();else if(t.text==="`")if(t=e.popToken(),t.text[0]==="\\")s=t.text.charCodeAt(1);else{if(t.text==="EOF")throw new Ke("\\char` missing argument");s=t.text.charCodeAt(0)}else r=10;if(r){if(s=_N[t.text],s==null||s>=r)throw new Ke("Invalid base-"+r+" digit "+t.text);for(var a;(a=_N[e.future().text])!=null&&a<r;)s*=r,s+=a,e.popToken()}return"\\@char{"+s+"}"});var vw=(e,t,r,s)=>{var a=e.consumeArg().tokens;if(a.length!==1)throw new Ke("\\newcommand's first argument must be a macro name");var i=a[0].text,o=e.isDefined(i);if(o&&!t)throw new Ke("\\newcommand{"+i+"} attempting to redefine "+(i+"; use \\renewcommand"));if(!o&&!r)throw new Ke("\\renewcommand{"+i+"} when command "+i+" does not yet exist; use \\newcommand");var l=0;if(a=e.consumeArg().tokens,a.length===1&&a[0].text==="["){for(var c="",u=e.expandNextToken();u.text!=="]"&&u.text!=="EOF";)c+=u.text,u=e.expandNextToken();if(!c.match(/^\s*[0-9]+\s*$/))throw new Ke("Invalid number of arguments: "+c);l=parseInt(c),a=e.consumeArg().tokens}return o&&s||e.macros.set(i,{tokens:a,numArgs:l}),""};D("\\newcommand",e=>vw(e,!1,!0,!1));D("\\renewcommand",e=>vw(e,!0,!1,!1));D("\\providecommand",e=>vw(e,!0,!0,!0));D("\\message",e=>{var t=e.consumeArgs(1)[0];return console.log(t.reverse().map(r=>r.text).join("")),""});D("\\errmessage",e=>{var t=e.consumeArgs(1)[0];return console.error(t.reverse().map(r=>r.text).join("")),""});D("\\show",e=>{var t=e.popToken(),r=t.text;return console.log(t,e.macros.get(r),So[r],Fr.math[r],Fr.text[r]),""});D("\\bgroup","{");D("\\egroup","}");D("~","\\nobreakspace");D("\\lq","`");D("\\rq","'");D("\\aa","\\r a");D("\\AA","\\r A");D("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");D("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");D("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");D("","\\mathscr{B}");D("","\\mathscr{E}");D("","\\mathscr{F}");D("","\\mathscr{H}");D("","\\mathscr{I}");D("","\\mathscr{L}");D("","\\mathscr{M}");D("","\\mathscr{R}");D("","\\mathfrak{C}");D("","\\mathfrak{H}");D("","\\mathfrak{Z}");D("\\Bbbk","\\Bbb{k}");D("","\\cdotp");D("\\llap","\\mathllap{\\textrm{#1}}");D("\\rlap","\\mathrlap{\\textrm{#1}}");D("\\clap","\\mathclap{\\textrm{#1}}");D("\\mathstrut","\\vphantom{(}");D("\\underbar","\\underline{\\text{#1}}");D("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');D("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");D("\\ne","\\neq");D("","\\neq");D("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");D("","\\notin");D("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");D("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");D("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");D("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");D("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");D("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");D("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");D("","\\perp");D("","\\mathclose{!\\mkern-0.8mu!}");D("","\\notni");D("","\\ulcorner");D("","\\urcorner");D("","\\llcorner");D("","\\lrcorner");D("","\\copyright");D("","\\textregistered");D("","\\textregistered");D("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');D("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');D("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');D("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');D("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");D("","\\vdots");D("\\varGamma","\\mathit{\\Gamma}");D("\\varDelta","\\mathit{\\Delta}");D("\\varTheta","\\mathit{\\Theta}");D("\\varLambda","\\mathit{\\Lambda}");D("\\varXi","\\mathit{\\Xi}");D("\\varPi","\\mathit{\\Pi}");D("\\varSigma","\\mathit{\\Sigma}");D("\\varUpsilon","\\mathit{\\Upsilon}");D("\\varPhi","\\mathit{\\Phi}");D("\\varPsi","\\mathit{\\Psi}");D("\\varOmega","\\mathit{\\Omega}");D("\\substack","\\begin{subarray}{c}#1\\end{subarray}");D("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");D("\\boxed","\\fbox{$\\displaystyle{#1}$}");D("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");D("\\implies","\\DOTSB\\;\\Longrightarrow\\;");D("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");D("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");D("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var CN={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};D("\\dots",function(e){var t="\\dotso",r=e.expandAfterFuture().text;return r in CN?t=CN[r]:(r.slice(0,4)==="\\not"||r in Fr.math&&["bin","rel"].includes(Fr.math[r].group))&&(t="\\dotsb"),t});var yw={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};D("\\dotso",function(e){var t=e.future().text;return t in yw?"\\ldots\\,":"\\ldots"});D("\\dotsc",function(e){var t=e.future().text;return t in yw&&t!==","?"\\ldots\\,":"\\ldots"});D("\\cdots",function(e){var t=e.future().text;return t in yw?"\\@cdots\\,":"\\@cdots"});D("\\dotsb","\\cdots");D("\\dotsm","\\cdots");D("\\dotsi","\\!\\cdots");D("\\dotsx","\\ldots\\,");D("\\DOTSI","\\relax");D("\\DOTSB","\\relax");D("\\DOTSX","\\relax");D("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");D("\\,","\\tmspace+{3mu}{.1667em}");D("\\thinspace","\\,");D("\\>","\\mskip{4mu}");D("\\:","\\tmspace+{4mu}{.2222em}");D("\\medspace","\\:");D("\\;","\\tmspace+{5mu}{.2777em}");D("\\thickspace","\\;");D("\\!","\\tmspace-{3mu}{.1667em}");D("\\negthinspace","\\!");D("\\negmedspace","\\tmspace-{4mu}{.2222em}");D("\\negthickspace","\\tmspace-{5mu}{.277em}");D("\\enspace","\\kern.5em ");D("\\enskip","\\hskip.5em\\relax");D("\\quad","\\hskip1em\\relax");D("\\qquad","\\hskip2em\\relax");D("\\tag","\\@ifstar\\tag@literal\\tag@paren");D("\\tag@paren","\\tag@literal{({#1})}");D("\\tag@literal",e=>{if(e.macros.get("\\df@tag"))throw new Ke("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});D("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");D("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");D("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");D("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");D("\\newline","\\\\\\relax");D("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var sE=nt(Ja["Main-Regular"][84][1]-.7*Ja["Main-Regular"][65][1]);D("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+sE+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");D("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+sE+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");D("\\hspace","\\@ifstar\\@hspacer\\@hspace");D("\\@hspace","\\hskip #1\\relax");D("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");D("\\ordinarycolon",":");D("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");D("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');D("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');D("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');D("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');D("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');D("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');D("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');D("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');D("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');D("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');D("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');D("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');D("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');D("","\\dblcolon");D("","\\eqcolon");D("","\\coloneqq");D("","\\eqqcolon");D("","\\Coloneqq");D("\\ratio","\\vcentcolon");D("\\coloncolon","\\dblcolon");D("\\colonequals","\\coloneqq");D("\\coloncolonequals","\\Coloneqq");D("\\equalscolon","\\eqqcolon");D("\\equalscoloncolon","\\Eqqcolon");D("\\colonminus","\\coloneq");D("\\coloncolonminus","\\Coloneq");D("\\minuscolon","\\eqcolon");D("\\minuscoloncolon","\\Eqcolon");D("\\coloncolonapprox","\\Colonapprox");D("\\coloncolonsim","\\Colonsim");D("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");D("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");D("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");D("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");D("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");D("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");D("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");D("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");D("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");D("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");D("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");D("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");D("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");D("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");D("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");D("\\ngeqq","\\html@mathml{\\@ngeqq}{}");D("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");D("\\nleqq","\\html@mathml{\\@nleqq}{}");D("\\nleqslant","\\html@mathml{\\@nleqslant}{}");D("\\nshortmid","\\html@mathml{\\@nshortmid}{}");D("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");D("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");D("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");D("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");D("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");D("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");D("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");D("\\imath","\\html@mathml{\\@imath}{}");D("\\jmath","\\html@mathml{\\@jmath}{}");D("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");D("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");D("","\\llbracket");D("","\\rrbracket");D("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");D("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");D("","\\lBrace");D("","\\rBrace");D("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");D("","\\minuso");D("\\darr","\\downarrow");D("\\dArr","\\Downarrow");D("\\Darr","\\Downarrow");D("\\lang","\\langle");D("\\rang","\\rangle");D("\\uarr","\\uparrow");D("\\uArr","\\Uparrow");D("\\Uarr","\\Uparrow");D("\\N","\\mathbb{N}");D("\\R","\\mathbb{R}");D("\\Z","\\mathbb{Z}");D("\\alef","\\aleph");D("\\alefsym","\\aleph");D("\\Alpha","\\mathrm{A}");D("\\Beta","\\mathrm{B}");D("\\bull","\\bullet");D("\\Chi","\\mathrm{X}");D("\\clubs","\\clubsuit");D("\\cnums","\\mathbb{C}");D("\\Complex","\\mathbb{C}");D("\\Dagger","\\ddagger");D("\\diamonds","\\diamondsuit");D("\\empty","\\emptyset");D("\\Epsilon","\\mathrm{E}");D("\\Eta","\\mathrm{H}");D("\\exist","\\exists");D("\\harr","\\leftrightarrow");D("\\hArr","\\Leftrightarrow");D("\\Harr","\\Leftrightarrow");D("\\hearts","\\heartsuit");D("\\image","\\Im");D("\\infin","\\infty");D("\\Iota","\\mathrm{I}");D("\\isin","\\in");D("\\Kappa","\\mathrm{K}");D("\\larr","\\leftarrow");D("\\lArr","\\Leftarrow");D("\\Larr","\\Leftarrow");D("\\lrarr","\\leftrightarrow");D("\\lrArr","\\Leftrightarrow");D("\\Lrarr","\\Leftrightarrow");D("\\Mu","\\mathrm{M}");D("\\natnums","\\mathbb{N}");D("\\Nu","\\mathrm{N}");D("\\Omicron","\\mathrm{O}");D("\\plusmn","\\pm");D("\\rarr","\\rightarrow");D("\\rArr","\\Rightarrow");D("\\Rarr","\\Rightarrow");D("\\real","\\Re");D("\\reals","\\mathbb{R}");D("\\Reals","\\mathbb{R}");D("\\Rho","\\mathrm{P}");D("\\sdot","\\cdot");D("\\sect","\\S");D("\\spades","\\spadesuit");D("\\sub","\\subset");D("\\sube","\\subseteq");D("\\supe","\\supseteq");D("\\Tau","\\mathrm{T}");D("\\thetasym","\\vartheta");D("\\weierp","\\wp");D("\\Zeta","\\mathrm{Z}");D("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");D("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");D("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");D("\\bra","\\mathinner{\\langle{#1}|}");D("\\ket","\\mathinner{|{#1}\\rangle}");D("\\braket","\\mathinner{\\langle{#1}\\rangle}");D("\\Bra","\\left\\langle#1\\right|");D("\\Ket","\\left|#1\\right\\rangle");var aE=e=>t=>{var r=t.consumeArg().tokens,s=t.consumeArg().tokens,a=t.consumeArg().tokens,i=t.consumeArg().tokens,o=t.macros.get("|"),l=t.macros.get("\\|");t.macros.beginGroup();var c=h=>m=>{e&&(m.macros.set("|",o),a.length&&m.macros.set("\\|",l));var f=h;if(!h&&a.length){var x=m.future();x.text==="|"&&(m.popToken(),f=!0)}return{tokens:f?a:s,numArgs:0}};t.macros.set("|",c(!1)),a.length&&t.macros.set("\\|",c(!0));var u=t.consumeArg().tokens,d=t.expandTokens([...i,...u,...r]);return t.macros.endGroup(),{tokens:d.reverse(),numArgs:0}};D("\\bra@ket",aE(!1));D("\\bra@set",aE(!0));D("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");D("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");D("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");D("\\angln","{\\angl n}");D("\\blue","\\textcolor{##6495ed}{#1}");D("\\orange","\\textcolor{##ffa500}{#1}");D("\\pink","\\textcolor{##ff00af}{#1}");D("\\red","\\textcolor{##df0030}{#1}");D("\\green","\\textcolor{##28ae7b}{#1}");D("\\gray","\\textcolor{gray}{#1}");D("\\purple","\\textcolor{##9d38bd}{#1}");D("\\blueA","\\textcolor{##ccfaff}{#1}");D("\\blueB","\\textcolor{##80f6ff}{#1}");D("\\blueC","\\textcolor{##63d9ea}{#1}");D("\\blueD","\\textcolor{##11accd}{#1}");D("\\blueE","\\textcolor{##0c7f99}{#1}");D("\\tealA","\\textcolor{##94fff5}{#1}");D("\\tealB","\\textcolor{##26edd5}{#1}");D("\\tealC","\\textcolor{##01d1c1}{#1}");D("\\tealD","\\textcolor{##01a995}{#1}");D("\\tealE","\\textcolor{##208170}{#1}");D("\\greenA","\\textcolor{##b6ffb0}{#1}");D("\\greenB","\\textcolor{##8af281}{#1}");D("\\greenC","\\textcolor{##74cf70}{#1}");D("\\greenD","\\textcolor{##1fab54}{#1}");D("\\greenE","\\textcolor{##0d923f}{#1}");D("\\goldA","\\textcolor{##ffd0a9}{#1}");D("\\goldB","\\textcolor{##ffbb71}{#1}");D("\\goldC","\\textcolor{##ff9c39}{#1}");D("\\goldD","\\textcolor{##e07d10}{#1}");D("\\goldE","\\textcolor{##a75a05}{#1}");D("\\redA","\\textcolor{##fca9a9}{#1}");D("\\redB","\\textcolor{##ff8482}{#1}");D("\\redC","\\textcolor{##f9685d}{#1}");D("\\redD","\\textcolor{##e84d39}{#1}");D("\\redE","\\textcolor{##bc2612}{#1}");D("\\maroonA","\\textcolor{##ffbde0}{#1}");D("\\maroonB","\\textcolor{##ff92c6}{#1}");D("\\maroonC","\\textcolor{##ed5fa6}{#1}");D("\\maroonD","\\textcolor{##ca337c}{#1}");D("\\maroonE","\\textcolor{##9e034e}{#1}");D("\\purpleA","\\textcolor{##ddd7ff}{#1}");D("\\purpleB","\\textcolor{##c6b9fc}{#1}");D("\\purpleC","\\textcolor{##aa87ff}{#1}");D("\\purpleD","\\textcolor{##7854ab}{#1}");D("\\purpleE","\\textcolor{##543b78}{#1}");D("\\mintA","\\textcolor{##f5f9e8}{#1}");D("\\mintB","\\textcolor{##edf2df}{#1}");D("\\mintC","\\textcolor{##e0e5cc}{#1}");D("\\grayA","\\textcolor{##f6f7f7}{#1}");D("\\grayB","\\textcolor{##f0f1f2}{#1}");D("\\grayC","\\textcolor{##e3e5e6}{#1}");D("\\grayD","\\textcolor{##d6d8da}{#1}");D("\\grayE","\\textcolor{##babec2}{#1}");D("\\grayF","\\textcolor{##888d93}{#1}");D("\\grayG","\\textcolor{##626569}{#1}");D("\\grayH","\\textcolor{##3b3e40}{#1}");D("\\grayI","\\textcolor{##21242c}{#1}");D("\\kaBlue","\\textcolor{##314453}{#1}");D("\\kaGreen","\\textcolor{##71B307}{#1}");var iE={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class UX{constructor(t,r,s){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(t),this.macros=new qX(BX,r.macros),this.mode=s,this.stack=[]}feed(t){this.lexer=new kN(t,this.settings)}switchMode(t){this.mode=t}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(t){this.stack.push(t)}pushTokens(t){this.stack.push(...t)}scanArgument(t){var r,s,a;if(t){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:a,end:s}=this.consumeArg(["]"])}else({tokens:a,start:r,end:s}=this.consumeArg());return this.pushToken(new Qs("EOF",s.loc)),this.pushTokens(a),new Qs("",bs.range(r,s))}consumeSpaces(){for(;;){var t=this.future();if(t.text===" ")this.stack.pop();else break}}consumeArg(t){var r=[],s=t&&t.length>0;s||this.consumeSpaces();var a=this.future(),i,o=0,l=0;do{if(i=this.popToken(),r.push(i),i.text==="{")++o;else if(i.text==="}"){if(--o,o===-1)throw new Ke("Extra }",i)}else if(i.text==="EOF")throw new Ke("Unexpected end of input in a macro argument, expected '"+(t&&s?t[l]:"}")+"'",i);if(t&&s)if((o===0||o===1&&t[l]==="{")&&i.text===t[l]){if(++l,l===t.length){r.splice(-l,l);break}}else l=0}while(o!==0||s);return a.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:a,end:i}}consumeArgs(t,r){if(r){if(r.length!==t+1)throw new Ke("The length of delimiters doesn't match the number of args!");for(var s=r[0],a=0;a<s.length;a++){var i=this.popToken();if(s[a]!==i.text)throw new Ke("Use of the macro doesn't match its definition",i)}}for(var o=[],l=0;l<t;l++)o.push(this.consumeArg(r&&r[l+1]).tokens);return o}countExpansion(t){if(this.expansionCount+=t,this.expansionCount>this.settings.maxExpand)throw new Ke("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(t){var r=this.popToken(),s=r.text,a=r.noexpand?null:this._getExpansion(s);if(a==null||t&&a.unexpandable){if(t&&a==null&&s[0]==="\\"&&!this.isDefined(s))throw new Ke("Undefined control sequence: "+s);return this.pushToken(r),!1}this.countExpansion(1);var i=a.tokens,o=this.consumeArgs(a.numArgs,a.delimiters);if(a.numArgs){i=i.slice();for(var l=i.length-1;l>=0;--l){var c=i[l];if(c.text==="#"){if(l===0)throw new Ke("Incomplete placeholder at end of macro body",c);if(c=i[--l],c.text==="#")i.splice(l+1,1);else if(/^[1-9]$/.test(c.text))i.splice(l,2,...o[+c.text-1]);else throw new Ke("Not a valid argument number",c)}}}return this.pushTokens(i),i.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var t=this.stack.pop();return t.treatAsRelax&&(t.text="\\relax"),t}throw new Error}expandMacro(t){return this.macros.has(t)?this.expandTokens([new Qs(t)]):void 0}expandTokens(t){var r=[],s=this.stack.length;for(this.pushTokens(t);this.stack.length>s;)if(this.expandOnce(!0)===!1){var a=this.stack.pop();a.treatAsRelax&&(a.noexpand=!1,a.treatAsRelax=!1),r.push(a)}return this.countExpansion(r.length),r}expandMacroAsText(t){var r=this.expandMacro(t);return r&&r.map(s=>s.text).join("")}_getExpansion(t){var r=this.macros.get(t);if(r==null)return r;if(t.length===1){var s=this.lexer.catcodes[t];if(s!=null&&s!==13)return}var a=typeof r=="function"?r(this):r;if(typeof a=="string"){var i=0;if(a.indexOf("#")!==-1)for(var o=a.replace(/##/g,"");o.indexOf("#"+(i+1))!==-1;)++i;for(var l=new kN(a,this.settings),c=[],u=l.lex();u.text!=="EOF";)c.push(u),u=l.lex();c.reverse();var d={tokens:c,numArgs:i};return d}return a}isDefined(t){return this.macros.has(t)||So.hasOwnProperty(t)||Fr.math.hasOwnProperty(t)||Fr.text.hasOwnProperty(t)||iE.hasOwnProperty(t)}isExpandable(t){var r=this.macros.get(t);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:So.hasOwnProperty(t)&&!So[t].primitive}}var EN=/^[]/,Qm=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),bg={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},TN={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class Op{constructor(t,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new UX(t,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(t,r){if(r===void 0&&(r=!0),this.fetch().text!==t)throw new Ke("Expected '"+t+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(t){this.mode=t,this.gullet.switchMode(t)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var t=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),t}finally{this.gullet.endGroups()}}subparse(t){var r=this.nextToken;this.consume(),this.gullet.pushToken(new Qs("}")),this.gullet.pushTokens(t);var s=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,s}parseExpression(t,r){for(var s=[];;){this.mode==="math"&&this.consumeSpaces();var a=this.fetch();if(Op.endOfExpression.indexOf(a.text)!==-1||r&&a.text===r||t&&So[a.text]&&So[a.text].infix)break;var i=this.parseAtom(r);if(i){if(i.type==="internal")continue}else break;s.push(i)}return this.mode==="text"&&this.formLigatures(s),this.handleInfixNodes(s)}handleInfixNodes(t){for(var r=-1,s,a=0;a<t.length;a++)if(t[a].type==="infix"){if(r!==-1)throw new Ke("only one infix operator per group",t[a].token);r=a,s=t[a].replaceWith}if(r!==-1&&s){var i,o,l=t.slice(0,r),c=t.slice(r+1);l.length===1&&l[0].type==="ordgroup"?i=l[0]:i={type:"ordgroup",mode:this.mode,body:l},c.length===1&&c[0].type==="ordgroup"?o=c[0]:o={type:"ordgroup",mode:this.mode,body:c};var u;return s==="\\\\abovefrac"?u=this.callFunction(s,[i,t[r],o],[]):u=this.callFunction(s,[i,o],[]),[u]}else return t}handleSupSubscript(t){var r=this.fetch(),s=r.text;this.consume(),this.consumeSpaces();var a;do{var i;a=this.parseGroup(t)}while(((i=a)==null?void 0:i.type)==="internal");if(!a)throw new Ke("Expected group after '"+s+"'",r);return a}formatUnsupportedCmd(t){for(var r=[],s=0;s<t.length;s++)r.push({type:"textord",mode:"text",text:t[s]});var a={type:"text",mode:this.mode,body:r},i={type:"color",mode:this.mode,color:this.settings.errorColor,body:[a]};return i}parseAtom(t){var r=this.parseGroup("atom",t);if((r==null?void 0:r.type)==="internal"||this.mode==="text")return r;for(var s,a;;){this.consumeSpaces();var i=this.fetch();if(i.text==="\\limits"||i.text==="\\nolimits"){if(r&&r.type==="op"){var o=i.text==="\\limits";r.limits=o,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=i.text==="\\limits");else throw new Ke("Limit controls must follow a math operator",i);this.consume()}else if(i.text==="^"){if(s)throw new Ke("Double superscript",i);s=this.handleSupSubscript("superscript")}else if(i.text==="_"){if(a)throw new Ke("Double subscript",i);a=this.handleSupSubscript("subscript")}else if(i.text==="'"){if(s)throw new Ke("Double superscript",i);var l={type:"textord",mode:this.mode,text:"\\prime"},c=[l];for(this.consume();this.fetch().text==="'";)c.push(l),this.consume();this.fetch().text==="^"&&c.push(this.handleSupSubscript("superscript")),s={type:"ordgroup",mode:this.mode,body:c}}else if(Qm[i.text]){var u=EN.test(i.text),d=[];for(d.push(new Qs(Qm[i.text])),this.consume();;){var h=this.fetch().text;if(!Qm[h]||EN.test(h)!==u)break;d.unshift(new Qs(Qm[h])),this.consume()}var m=this.subparse(d);u?a={type:"ordgroup",mode:"math",body:m}:s={type:"ordgroup",mode:"math",body:m}}else break}return s||a?{type:"supsub",mode:this.mode,base:r,sup:s,sub:a}:r}parseFunction(t,r){var s=this.fetch(),a=s.text,i=So[a];if(!i)return null;if(this.consume(),r&&r!=="atom"&&!i.allowedInArgument)throw new Ke("Got function '"+a+"' with no arguments"+(r?" as "+r:""),s);if(this.mode==="text"&&!i.allowedInText)throw new Ke("Can't use function '"+a+"' in text mode",s);if(this.mode==="math"&&i.allowedInMath===!1)throw new Ke("Can't use function '"+a+"' in math mode",s);var{args:o,optArgs:l}=this.parseArguments(a,i);return this.callFunction(a,o,l,s,t)}callFunction(t,r,s,a,i){var o={funcName:t,parser:this,token:a,breakOnTokenText:i},l=So[t];if(l&&l.handler)return l.handler(o,r,s);throw new Ke("No function handler for "+t)}parseArguments(t,r){var s=r.numArgs+r.numOptionalArgs;if(s===0)return{args:[],optArgs:[]};for(var a=[],i=[],o=0;o<s;o++){var l=r.argTypes&&r.argTypes[o],c=o<r.numOptionalArgs;(r.primitive&&l==null||r.type==="sqrt"&&o===1&&i[0]==null)&&(l="primitive");var u=this.parseGroupOfType("argument to '"+t+"'",l,c);if(c)i.push(u);else if(u!=null)a.push(u);else throw new Ke("Null argument, please report this as a bug")}return{args:a,optArgs:i}}parseGroupOfType(t,r,s){switch(r){case"color":return this.parseColorGroup(s);case"size":return this.parseSizeGroup(s);case"url":return this.parseUrlGroup(s);case"math":case"text":return this.parseArgumentGroup(s,r);case"hbox":{var a=this.parseArgumentGroup(s,"text");return a!=null?{type:"styling",mode:a.mode,body:[a],style:"text"}:null}case"raw":{var i=this.parseStringGroup("raw",s);return i!=null?{type:"raw",mode:"text",string:i.text}:null}case"primitive":{if(s)throw new Ke("A primitive argument cannot be optional");var o=this.parseGroup(t);if(o==null)throw new Ke("Expected group as "+t,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(s);default:throw new Ke("Unknown group type as "+t,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(t,r){var s=this.gullet.scanArgument(r);if(s==null)return null;for(var a="",i;(i=this.fetch()).text!=="EOF";)a+=i.text,this.consume();return this.consume(),s.text=a,s}parseRegexGroup(t,r){for(var s=this.fetch(),a=s,i="",o;(o=this.fetch()).text!=="EOF"&&t.test(i+o.text);)a=o,i+=a.text,this.consume();if(i==="")throw new Ke("Invalid "+r+": '"+s.text+"'",s);return s.range(a,i)}parseColorGroup(t){var r=this.parseStringGroup("color",t);if(r==null)return null;var s=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!s)throw new Ke("Invalid color: '"+r.text+"'",r);var a=s[0];return/^[0-9a-f]{6}$/i.test(a)&&(a="#"+a),{type:"color-token",mode:this.mode,color:a}}parseSizeGroup(t){var r,s=!1;if(this.gullet.consumeSpaces(),!t&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",t),!r)return null;!t&&r.text.length===0&&(r.text="0pt",s=!0);var a=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!a)throw new Ke("Invalid size: '"+r.text+"'",r);var i={number:+(a[1]+a[2]),unit:a[3]};if(!x9(i))throw new Ke("Invalid unit: '"+i.unit+"'",r);return{type:"size",mode:this.mode,value:i,isBlank:s}}parseUrlGroup(t){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",t);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var s=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:s}}parseArgumentGroup(t,r){var s=this.gullet.scanArgument(t);if(s==null)return null;var a=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var i=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:s.loc,body:i};return r&&this.switchMode(a),o}parseGroup(t,r){var s=this.fetch(),a=s.text,i;if(a==="{"||a==="\\begingroup"){this.consume();var o=a==="{"?"}":"\\endgroup";this.gullet.beginGroup();var l=this.parseExpression(!1,o),c=this.fetch();this.expect(o),this.gullet.endGroup(),i={type:"ordgroup",mode:this.mode,loc:bs.range(s,c),body:l,semisimple:a==="\\begingroup"||void 0}}else if(i=this.parseFunction(r,t)||this.parseSymbol(),i==null&&a[0]==="\\"&&!iE.hasOwnProperty(a)){if(this.settings.throwOnError)throw new Ke("Undefined control sequence: "+a,s);i=this.formatUnsupportedCmd(a),this.consume()}return i}formLigatures(t){for(var r=t.length-1,s=0;s<r;++s){var a=t[s],i=a.text;i==="-"&&t[s+1].text==="-"&&(s+1<r&&t[s+2].text==="-"?(t.splice(s,3,{type:"textord",mode:"text",loc:bs.range(a,t[s+2]),text:"---"}),r-=2):(t.splice(s,2,{type:"textord",mode:"text",loc:bs.range(a,t[s+1]),text:"--"}),r-=1)),(i==="'"||i==="`")&&t[s+1].text===i&&(t.splice(s,2,{type:"textord",mode:"text",loc:bs.range(a,t[s+1]),text:i+i}),r-=1)}}parseSymbol(){var t=this.fetch(),r=t.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var s=r.slice(5),a=s.charAt(0)==="*";if(a&&(s=s.slice(1)),s.length<2||s.charAt(0)!==s.slice(-1))throw new Ke(`\\verb assertion failed --
                    please report what input caused this bug`);return s=s.slice(1,-1),{type:"verb",mode:"text",body:s,star:a}}TN.hasOwnProperty(r[0])&&!Fr[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',t),r=TN[r[0]]+r.slice(1));var i=zX.exec(r);i&&(r=r.substring(0,i.index),r==="i"?r="":r==="j"&&(r=""));var o;if(Fr[this.mode][r]){this.settings.strict&&this.mode==="math"&&A1.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',t);var l=Fr[this.mode][r].group,c=bs.range(t),u;if(PJ.hasOwnProperty(l)){var d=l;u={type:"atom",mode:this.mode,family:d,loc:c,text:r}}else u={type:l,mode:this.mode,loc:c,text:r};o=u}else if(r.charCodeAt(0)>=128)this.settings.strict&&(f9(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',t):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),t)),o={type:"textord",mode:"text",loc:bs.range(t),text:r};else return null;if(this.consume(),i)for(var h=0;h<i[0].length;h++){var m=i[0][h];if(!bg[m])throw new Ke("Unknown accent ' "+m+"'",t);var f=bg[m][this.mode]||bg[m].text;if(!f)throw new Ke("Accent "+m+" unsupported in "+this.mode+" mode",t);o={type:"accent",mode:this.mode,loc:bs.range(t),label:f,isStretchy:!1,isShifty:!0,base:o}}return o}}Op.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var bw=function(t,r){if(!(typeof t=="string"||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var s=new Op(t,r);delete s.gullet.macros.current["\\df@tag"];var a=s.parse();if(delete s.gullet.macros.current["\\current@color"],delete s.gullet.macros.current["\\color"],s.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new Ke("\\tag works only in display equations");a=[{type:"tag",mode:"text",body:a,tag:s.subparse([new Qs("\\df@tag")])}]}return a},ww=function(t,r,s){r.textContent="";var a=Ip(t,s).toNode();r.appendChild(a)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),ww=function(){throw new Ke("KaTeX doesn't work in quirks mode.")});var oE=function(t,r){var s=Ip(t,r).toMarkup();return s},lE=function(t,r){var s=new rw(r);return bw(t,s)},cE=function(t,r,s){if(s.throwOnError||!(t instanceof Ke))throw t;var a=xe.makeSpan(["katex-error"],[new xa(r)]);return a.setAttribute("title",t.toString()),a.setAttribute("style","color:"+s.errorColor),a},Ip=function(t,r){var s=new rw(r);try{var a=bw(t,s);return eX(a,t,s)}catch(i){return cE(i,t,s)}},uE=function(t,r){var s=new rw(r);try{var a=bw(t,s);return tX(a,t,s)}catch(i){return cE(i,t,s)}},dE="0.16.25",hE={Span:Hh,Anchor:aw,SymbolNode:xa,SvgNode:Vi,PathNode:Uo,LineNode:T1},D1={version:dE,render:ww,renderToString:oE,ParseError:Ke,SETTINGS_SCHEMA:Dd,__parse:lE,__renderToDomTree:Ip,__renderToHTMLTree:uE,__setFontMetrics:p9,__defineSymbol:j,__defineFunction:ft,__defineMacro:D,__domTree:hE};const VX=Object.freeze(Object.defineProperty({__proto__:null,ParseError:Ke,SETTINGS_SCHEMA:Dd,__defineFunction:ft,__defineMacro:D,__defineSymbol:j,__domTree:hE,__parse:lE,__renderToDomTree:Ip,__renderToHTMLTree:uE,__setFontMetrics:p9,default:D1,get render(){return ww},renderToString:oE,version:dE},Symbol.toStringTag,{value:"Module"})),HX={};function Fs(e){const t=this,r=e||HX,s=t.data(),a=s.micromarkExtensions||(s.micromarkExtensions=[]),i=s.fromMarkdownExtensions||(s.fromMarkdownExtensions=[]),o=s.toMarkdownExtensions||(s.toMarkdownExtensions=[]);a.push(KK(r)),i.push(BK()),o.push(UK(r))}const AN=/[#.]/g;function WX(e,t){const r=e||"",s={};let a=0,i,o;for(;a<r.length;){AN.lastIndex=a;const l=AN.exec(r),c=r.slice(a,l?l.index:r.length);c&&(i?i==="#"?s.id=c:Array.isArray(s.className)?s.className.push(c):s.className=[c]:o=c,a+=c.length),l&&(i=l[0],a++)}return{type:"element",tagName:o||t||"div",properties:s,children:[]}}function mE(e,t,r){const s=r?KX(r):void 0;function a(i,o,...l){let c;if(i==null){c={type:"root",children:[]};const u=o;l.unshift(u)}else{c=WX(i,t);const u=c.tagName.toLowerCase(),d=s?s.get(u):void 0;if(c.tagName=d||u,GX(o))l.unshift(o);else for(const[h,m]of Object.entries(o))QX(e,c.properties,h,m)}for(const u of l)F1(c.children,u);return c.type==="element"&&c.tagName==="template"&&(c.content={type:"root",children:c.children},c.children=[]),c}return a}function GX(e){if(e===null||typeof e!="object"||Array.isArray(e))return!0;if(typeof e.type!="string")return!1;const t=e,r=Object.keys(e);for(const s of r){const a=t[s];if(a&&typeof a=="object"){if(!Array.isArray(a))return!0;const i=a;for(const o of i)if(typeof o!="number"&&typeof o!="string")return!0}}return!!("children"in e&&Array.isArray(e.children))}function QX(e,t,r,s){const a=IC(e,r);let i;if(s!=null){if(typeof s=="number"){if(Number.isNaN(s))return;i=s}else typeof s=="boolean"?i=s:typeof s=="string"?a.spaceSeparated?i=u5(s):a.commaSeparated?i=a5(s):a.commaOrSpaceSeparated?i=u5(a5(s).join(" ")):i=PN(a,a.property,s):Array.isArray(s)?i=[...s]:i=a.property==="style"?YX(s):String(s);if(Array.isArray(i)){const o=[];for(const l of i)o.push(PN(a,a.property,l));i=o}a.property==="className"&&Array.isArray(t.className)&&(i=t.className.concat(i)),t[a.property]=i}}function F1(e,t){if(t!=null)if(typeof t=="number"||typeof t=="string")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(const r of t)F1(e,r);else if(typeof t=="object"&&"type"in t)t.type==="root"?F1(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function PN(e,t,r){if(typeof r=="string"){if(e.number&&r&&!Number.isNaN(Number(r)))return Number(r);if((e.boolean||e.overloadedBoolean)&&(r===""||gh(r)===gh(t)))return!0}return r}function YX(e){const t=[];for(const[r,s]of Object.entries(e))t.push([r,s].join(": "));return t.join("; ")}function KX(e){const t=new Map;for(const r of e)t.set(r.toLowerCase(),r);return t}const JX=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],XX=mE(DC,"div"),ZX=mE(jp,"g",JX),wg={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function eZ(e,t){return fE(e,{})||{type:"root",children:[]}}function fE(e,t){const r=tZ(e,t);return r&&t.afterTransform&&t.afterTransform(e,r),r}function tZ(e,t){switch(e.nodeType){case 1:return aZ(e,t);case 3:return nZ(e);case 8:return sZ(e);case 9:return RN(e,t);case 10:return rZ();case 11:return RN(e,t);default:return}}function RN(e,t){return{type:"root",children:pE(e,t)}}function rZ(){return{type:"doctype"}}function nZ(e){return{type:"text",value:e.nodeValue||""}}function sZ(e){return{type:"comment",value:e.nodeValue||""}}function aZ(e,t){const r=e.namespaceURI,s=r===wg.svg?ZX:XX,a=r===wg.html?e.tagName.toLowerCase():e.tagName,i=r===wg.html&&a==="template"?e.content:e,o=e.getAttributeNames(),l={};let c=-1;for(;++c<o.length;)l[o[c]]=e.getAttribute(o[c])||"";return s(a,l,pE(i,t))}function pE(e,t){const r=e.childNodes,s=[];let a=-1;for(;++a<r.length;){const i=fE(r[a],t);i!==void 0&&s.push(i)}return s}new DOMParser;function iZ(e,t){const r=oZ(e);return eZ(r)}function oZ(e){const t=document.createElement("template");return t.innerHTML=e,t.content}const MN=function(e,t,r){const s=Bh(r);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if(typeof t=="number"){if(t<0||t===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(t=e.children.indexOf(t),t<0)throw new Error("Expected child node or index");for(;++t<e.children.length;)if(s(e.children[t],t,e))return e.children[t]},rc=function(e){if(e==null)return uZ;if(typeof e=="string")return cZ(e);if(typeof e=="object")return lZ(e);if(typeof e=="function")return jw(e);throw new Error("Expected function, string, or array as `test`")};function lZ(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=rc(e[r]);return jw(s);function s(...a){let i=-1;for(;++i<t.length;)if(t[i].apply(this,a))return!0;return!1}}function cZ(e){return jw(t);function t(r){return r.tagName===e}}function jw(e){return t;function t(r,s,a){return!!(dZ(r)&&e.call(this,r,typeof s=="number"?s:void 0,a||void 0))}}function uZ(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="element"&&"tagName"in e&&typeof e.tagName=="string")}function dZ(e){return e!==null&&typeof e=="object"&&"type"in e&&"tagName"in e}const ON=/\n/g,IN=/[\t ]+/g,L1=rc("br"),DN=rc(yZ),hZ=rc("p"),FN=rc("tr"),mZ=rc(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",vZ,bZ]),xE=rc(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function fZ(e,t){const r=t||{},s="children"in e?e.children:[],a=xE(e),i=yE(e,{whitespace:r.whitespace||"normal",breakBefore:!1,breakAfter:!1}),o=[];(e.type==="text"||e.type==="comment")&&o.push(...vE(e,{whitespace:i,breakBefore:!0,breakAfter:!0}));let l=-1;for(;++l<s.length;)o.push(...gE(s[l],e,{whitespace:i,breakBefore:l?void 0:a,breakAfter:l<s.length-1?L1(s[l+1]):a}));const c=[];let u;for(l=-1;++l<o.length;){const d=o[l];typeof d=="number"?u!==void 0&&d>u&&(u=d):d&&(u!==void 0&&u>-1&&c.push(`
`.repeat(u)||" "),u=-1,c.push(d))}return c.join("")}function gE(e,t,r){return e.type==="element"?pZ(e,t,r):e.type==="text"?r.whitespace==="normal"?vE(e,r):xZ(e):[]}function pZ(e,t,r){const s=yE(e,r),a=e.children||[];let i=-1,o=[];if(mZ(e))return o;let l,c;for(L1(e)||FN(e)&&MN(t,e,FN)?c=`
`:hZ(e)?(l=2,c=2):xE(e)&&(l=1,c=1);++i<a.length;)o=o.concat(gE(a[i],e,{whitespace:s,breakBefore:i?void 0:l,breakAfter:i<a.length-1?L1(a[i+1]):c}));return DN(e)&&MN(t,e,DN)&&o.push("	"),l&&o.unshift(l),c&&o.push(c),o}function vE(e,t){const r=String(e.value),s=[],a=[];let i=0;for(;i<=r.length;){ON.lastIndex=i;const c=ON.exec(r),u=c&&"index"in c?c.index:r.length;s.push(gZ(r.slice(i,u).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),i===0?t.breakBefore:!0,u===r.length?t.breakAfter:!0)),i=u+1}let o=-1,l;for(;++o<s.length;)s[o].charCodeAt(s[o].length-1)===8203||o<s.length-1&&s[o+1].charCodeAt(0)===8203?(a.push(s[o]),l=void 0):s[o]?(typeof l=="number"&&a.push(l),a.push(s[o]),l=0):(o===0||o===s.length-1)&&a.push(0);return a}function xZ(e){return[String(e.value)]}function gZ(e,t,r){const s=[];let a=0,i;for(;a<e.length;){IN.lastIndex=a;const o=IN.exec(e);i=o?o.index:e.length,!a&&!i&&o&&!t&&s.push(""),a!==i&&s.push(e.slice(a,i)),a=o?i+o[0].length:i}return a!==i&&!r&&s.push(""),s.join(" ")}function yE(e,t){if(e.type==="element"){const r=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return r.wrap?"pre-wrap":"pre";case"td":case"th":return r.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}}return t.whitespace}function vZ(e){return!!(e.properties||{}).hidden}function yZ(e){return e.tagName==="td"||e.tagName==="th"}function bZ(e){return e.tagName==="dialog"&&!(e.properties||{}).open}const wZ={},jZ=[];function Ls(e){const t=e||wZ;return function(r,s){Zb(r,"element",function(a,i){const o=Array.isArray(a.properties.className)?a.properties.className:jZ,l=o.includes("language-math"),c=o.includes("math-display"),u=o.includes("math-inline");let d=c;if(!l&&!c&&!u)return;let h=i[i.length-1],m=a;if(a.tagName==="code"&&l&&h&&h.type==="element"&&h.tagName==="pre"&&(m=h,h=i[i.length-2],d=!0),!h)return;const f=fZ(m,{whitespace:"pre"});let x;try{x=D1.renderToString(f,{...t,displayMode:d,throwOnError:!0})}catch(y){const b=y,v=b.name.toLowerCase();s.message("Could not render math with KaTeX",{ancestors:[...i,a],cause:b,place:a.position,ruleId:v,source:"rehype-katex"});try{x=D1.renderToString(f,{...t,displayMode:d,strict:"ignore",throwOnError:!1})}catch{x=[{type:"element",tagName:"span",properties:{className:["katex-error"],style:"color:"+(t.errorColor||"#cc0000"),title:String(y)},children:[{type:"text",value:f}]}]}}typeof x=="string"&&(x=iZ(x).children);const g=h.children.indexOf(m);return h.children.splice(g,1,...x),c9})}}function LN(e,t){const r=String(e);if(typeof t!="string")throw new TypeError("Expected character");let s=0,a=r.indexOf(t);for(;a!==-1;)s++,a=r.indexOf(t,a+t.length);return s}function NZ(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function SZ(e,t,r){const a=Bh((r||{}).ignore||[]),i=kZ(t);let o=-1;for(;++o<i.length;)Zb(e,"text",l);function l(u,d){let h=-1,m;for(;++h<d.length;){const f=d[h],x=m?m.children:void 0;if(a(f,x?x.indexOf(f):void 0,m))return;m=f}if(m)return c(u,d)}function c(u,d){const h=d[d.length-1],m=i[o][0],f=i[o][1];let x=0;const y=h.children.indexOf(u);let b=!1,v=[];m.lastIndex=0;let w=m.exec(u.value);for(;w;){const S=w.index,k={index:w.index,input:w.input,stack:[...d,u]};let N=f(...w,k);if(typeof N=="string"&&(N=N.length>0?{type:"text",value:N}:void 0),N===!1?m.lastIndex=S+1:(x!==S&&v.push({type:"text",value:u.value.slice(x,S)}),Array.isArray(N)?v.push(...N):N&&v.push(N),x=S+w[0].length,b=!0),!m.global)break;w=m.exec(u.value)}return b?(x<u.value.length&&v.push({type:"text",value:u.value.slice(x)}),h.children.splice(y,1,...v)):v=[u],y+v.length}}function kZ(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const r=!e[0]||Array.isArray(e[0])?e:[e];let s=-1;for(;++s<r.length;){const a=r[s];t.push([_Z(a[0]),CZ(a[1])])}return t}function _Z(e){return typeof e=="string"?new RegExp(NZ(e),"g"):e}function CZ(e){return typeof e=="function"?e:function(){return e}}const jg="phrasing",Ng=["autolink","link","image","label"];function EZ(){return{transforms:[IZ],enter:{literalAutolink:AZ,literalAutolinkEmail:Sg,literalAutolinkHttp:Sg,literalAutolinkWww:Sg},exit:{literalAutolink:OZ,literalAutolinkEmail:MZ,literalAutolinkHttp:PZ,literalAutolinkWww:RZ}}}function TZ(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:jg,notInConstruct:Ng},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:jg,notInConstruct:Ng},{character:":",before:"[ps]",after:"\\/",inConstruct:jg,notInConstruct:Ng}]}}function AZ(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Sg(e){this.config.enter.autolinkProtocol.call(this,e)}function PZ(e){this.config.exit.autolinkProtocol.call(this,e)}function RZ(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function MZ(e){this.config.exit.autolinkEmail.call(this,e)}function OZ(e){this.exit(e)}function IZ(e){SZ(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,DZ],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),FZ]],{ignore:["link","linkReference"]})}function DZ(e,t,r,s,a){let i="";if(!bE(a)||(/^w/i.test(t)&&(r=t+r,t="",i="http://"),!LZ(r)))return!1;const o=zZ(r+s);if(!o[0])return!1;const l={type:"link",title:null,url:i+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function FZ(e,t,r,s){return!bE(s,!0)||/[-\d_]$/.test(r)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+r,children:[{type:"text",value:t+"@"+r}]}}function LZ(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function zZ(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let r=t[0],s=r.indexOf(")");const a=LN(e,"(");let i=LN(e,")");for(;s!==-1&&a>i;)e+=r.slice(0,s+1),r=r.slice(s+1),s=r.indexOf(")"),i++;return[e,r]}function bE(e,t){const r=e.input.charCodeAt(e.index-1);return(e.index===0||Vl(r)||Sp(r))&&(!t||r!==47)}wE.peek=QZ;function $Z(){this.buffer()}function qZ(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function BZ(){this.buffer()}function UZ(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function VZ(e){const t=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=Ia(this.sliceSerialize(e)).toLowerCase(),r.label=t}function HZ(e){this.exit(e)}function WZ(e){const t=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=Ia(this.sliceSerialize(e)).toLowerCase(),r.label=t}function GZ(e){this.exit(e)}function QZ(){return"["}function wE(e,t,r,s){const a=r.createTracker(s);let i=a.move("[^");const o=r.enter("footnoteReference"),l=r.enter("reference");return i+=a.move(r.safe(r.associationId(e),{after:"]",before:i})),l(),o(),i+=a.move("]"),i}function YZ(){return{enter:{gfmFootnoteCallString:$Z,gfmFootnoteCall:qZ,gfmFootnoteDefinitionLabelString:BZ,gfmFootnoteDefinition:UZ},exit:{gfmFootnoteCallString:VZ,gfmFootnoteCall:HZ,gfmFootnoteDefinitionLabelString:WZ,gfmFootnoteDefinition:GZ}}}function KZ(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:r,footnoteReference:wE},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function r(s,a,i,o){const l=i.createTracker(o);let c=l.move("[^");const u=i.enter("footnoteDefinition"),d=i.enter("label");return c+=l.move(i.safe(i.associationId(s),{before:c,after:"]"})),d(),c+=l.move("]:"),s.children&&s.children.length>0&&(l.shift(4),c+=l.move((t?`
`:" ")+i.indentLines(i.containerFlow(s,l.current()),t?jE:JZ))),u(),c}}function JZ(e,t,r){return t===0?e:jE(e,t,r)}function jE(e,t,r){return(r?"":"    ")+e}const XZ=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];NE.peek=nee;function ZZ(){return{canContainEols:["delete"],enter:{strikethrough:tee},exit:{strikethrough:ree}}}function eee(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:XZ}],handlers:{delete:NE}}}function tee(e){this.enter({type:"delete",children:[]},e)}function ree(e){this.exit(e)}function NE(e,t,r,s){const a=r.createTracker(s),i=r.enter("strikethrough");let o=a.move("~~");return o+=r.containerPhrasing(e,{...a.current(),before:o,after:"~"}),o+=a.move("~~"),i(),o}function nee(){return"~"}function see(e){return e.length}function aee(e,t){const r=t||{},s=(r.align||[]).concat(),a=r.stringLength||see,i=[],o=[],l=[],c=[];let u=0,d=-1;for(;++d<e.length;){const g=[],y=[];let b=-1;for(e[d].length>u&&(u=e[d].length);++b<e[d].length;){const v=iee(e[d][b]);if(r.alignDelimiters!==!1){const w=a(v);y[b]=w,(c[b]===void 0||w>c[b])&&(c[b]=w)}g.push(v)}o[d]=g,l[d]=y}let h=-1;if(typeof s=="object"&&"length"in s)for(;++h<u;)i[h]=zN(s[h]);else{const g=zN(s);for(;++h<u;)i[h]=g}h=-1;const m=[],f=[];for(;++h<u;){const g=i[h];let y="",b="";g===99?(y=":",b=":"):g===108?y=":":g===114&&(b=":");let v=r.alignDelimiters===!1?1:Math.max(1,c[h]-y.length-b.length);const w=y+"-".repeat(v)+b;r.alignDelimiters!==!1&&(v=y.length+v+b.length,v>c[h]&&(c[h]=v),f[h]=v),m[h]=w}o.splice(1,0,m),l.splice(1,0,f),d=-1;const x=[];for(;++d<o.length;){const g=o[d],y=l[d];h=-1;const b=[];for(;++h<u;){const v=g[h]||"";let w="",S="";if(r.alignDelimiters!==!1){const k=c[h]-(y[h]||0),N=i[h];N===114?w=" ".repeat(k):N===99?k%2?(w=" ".repeat(k/2+.5),S=" ".repeat(k/2-.5)):(w=" ".repeat(k/2),S=w):S=" ".repeat(k)}r.delimiterStart!==!1&&!h&&b.push("|"),r.padding!==!1&&!(r.alignDelimiters===!1&&v==="")&&(r.delimiterStart!==!1||h)&&b.push(" "),r.alignDelimiters!==!1&&b.push(w),b.push(v),r.alignDelimiters!==!1&&b.push(S),r.padding!==!1&&b.push(" "),(r.delimiterEnd!==!1||h!==u-1)&&b.push("|")}x.push(r.delimiterEnd===!1?b.join("").replace(/ +$/,""):b.join(""))}return x.join(`
`)}function iee(e){return e==null?"":String(e)}function zN(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function oee(e,t,r,s){const a=r.enter("blockquote"),i=r.createTracker(s);i.move("> "),i.shift(2);const o=r.indentLines(r.containerFlow(e,i.current()),lee);return a(),o}function lee(e,t,r){return">"+(r?"":" ")+e}function cee(e,t){return $N(e,t.inConstruct,!0)&&!$N(e,t.notInConstruct,!1)}function $N(e,t,r){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return r;let s=-1;for(;++s<t.length;)if(e.includes(t[s]))return!0;return!1}function qN(e,t,r,s){let a=-1;for(;++a<r.unsafe.length;)if(r.unsafe[a].character===`
`&&cee(r.stack,r.unsafe[a]))return/[ \t]/.test(s.before)?"":" ";return`\\
`}function uee(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function dee(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function hee(e,t,r,s){const a=dee(r),i=e.value||"",o=a==="`"?"GraveAccent":"Tilde";if(uee(e,r)){const h=r.enter("codeIndented"),m=r.indentLines(i,mee);return h(),m}const l=r.createTracker(s),c=a.repeat(Math.max(h9(i,a)+1,3)),u=r.enter("codeFenced");let d=l.move(c);if(e.lang){const h=r.enter(`codeFencedLang${o}`);d+=l.move(r.safe(e.lang,{before:d,after:" ",encode:["`"],...l.current()})),h()}if(e.lang&&e.meta){const h=r.enter(`codeFencedMeta${o}`);d+=l.move(" "),d+=l.move(r.safe(e.meta,{before:d,after:`
`,encode:["`"],...l.current()})),h()}return d+=l.move(`
`),i&&(d+=l.move(i+`
`)),d+=l.move(c),u(),d}function mee(e,t,r){return(r?"":"    ")+e}function Nw(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function fee(e,t,r,s){const a=Nw(r),i=a==='"'?"Quote":"Apostrophe",o=r.enter("definition");let l=r.enter("label");const c=r.createTracker(s);let u=c.move("[");return u+=c.move(r.safe(r.associationId(e),{before:u,after:"]",...c.current()})),u+=c.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=r.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(r.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=r.enter("destinationRaw"),u+=c.move(r.safe(e.url,{before:u,after:e.title?" ":`
`,...c.current()}))),l(),e.title&&(l=r.enter(`title${i}`),u+=c.move(" "+a),u+=c.move(r.safe(e.title,{before:u,after:a,...c.current()})),u+=c.move(a),l()),o(),u}function pee(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function wh(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Nf(e,t,r){const s=Nu(e),a=Nu(t);return s===void 0?a===void 0?r==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:s===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}SE.peek=xee;function SE(e,t,r,s){const a=pee(r),i=r.enter("emphasis"),o=r.createTracker(s),l=o.move(a);let c=o.move(r.containerPhrasing(e,{after:a,before:l,...o.current()}));const u=c.charCodeAt(0),d=Nf(s.before.charCodeAt(s.before.length-1),u,a);d.inside&&(c=wh(u)+c.slice(1));const h=c.charCodeAt(c.length-1),m=Nf(s.after.charCodeAt(0),h,a);m.inside&&(c=c.slice(0,-1)+wh(h));const f=o.move(a);return i(),r.attentionEncodeSurroundingInfo={after:m.outside,before:d.outside},l+c+f}function xee(e,t,r){return r.options.emphasis||"*"}function gee(e,t){let r=!1;return ew(e,function(s){if("value"in s&&/\r?\n|\r/.test(s.value)||s.type==="break")return r=!0,N1}),!!((!e.depth||e.depth<3)&&Wb(e)&&(t.options.setext||r))}function vee(e,t,r,s){const a=Math.max(Math.min(6,e.depth||1),1),i=r.createTracker(s);if(gee(e,r)){const d=r.enter("headingSetext"),h=r.enter("phrasing"),m=r.containerPhrasing(e,{...i.current(),before:`
`,after:`
`});return h(),d(),m+`
`+(a===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const o="#".repeat(a),l=r.enter("headingAtx"),c=r.enter("phrasing");i.move(o+" ");let u=r.containerPhrasing(e,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(u)&&(u=wh(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,r.options.closeAtx&&(u+=" "+o),c(),l(),u}kE.peek=yee;function kE(e){return e.value||""}function yee(){return"<"}_E.peek=bee;function _E(e,t,r,s){const a=Nw(r),i=a==='"'?"Quote":"Apostrophe",o=r.enter("image");let l=r.enter("label");const c=r.createTracker(s);let u=c.move("![");return u+=c.move(r.safe(e.alt,{before:u,after:"]",...c.current()})),u+=c.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=r.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(r.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=r.enter("destinationRaw"),u+=c.move(r.safe(e.url,{before:u,after:e.title?" ":")",...c.current()}))),l(),e.title&&(l=r.enter(`title${i}`),u+=c.move(" "+a),u+=c.move(r.safe(e.title,{before:u,after:a,...c.current()})),u+=c.move(a),l()),u+=c.move(")"),o(),u}function bee(){return"!"}CE.peek=wee;function CE(e,t,r,s){const a=e.referenceType,i=r.enter("imageReference");let o=r.enter("label");const l=r.createTracker(s);let c=l.move("![");const u=r.safe(e.alt,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const d=r.stack;r.stack=[],o=r.enter("reference");const h=r.safe(r.associationId(e),{before:c,after:"]",...l.current()});return o(),r.stack=d,i(),a==="full"||!u||u!==h?c+=l.move(h+"]"):a==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function wee(){return"!"}EE.peek=jee;function EE(e,t,r){let s=e.value||"",a="`",i=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(s);)a+="`";for(/[^ \r\n]/.test(s)&&(/^[ \r\n]/.test(s)&&/[ \r\n]$/.test(s)||/^`|`$/.test(s))&&(s=" "+s+" ");++i<r.unsafe.length;){const o=r.unsafe[i],l=r.compilePattern(o);let c;if(o.atBreak)for(;c=l.exec(s);){let u=c.index;s.charCodeAt(u)===10&&s.charCodeAt(u-1)===13&&u--,s=s.slice(0,u)+" "+s.slice(c.index+1)}}return a+s+a}function jee(){return"`"}function TE(e,t){const r=Wb(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(r===e.url||"mailto:"+r===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}AE.peek=Nee;function AE(e,t,r,s){const a=Nw(r),i=a==='"'?"Quote":"Apostrophe",o=r.createTracker(s);let l,c;if(TE(e,r)){const d=r.stack;r.stack=[],l=r.enter("autolink");let h=o.move("<");return h+=o.move(r.containerPhrasing(e,{before:h,after:">",...o.current()})),h+=o.move(">"),l(),r.stack=d,h}l=r.enter("link"),c=r.enter("label");let u=o.move("[");return u+=o.move(r.containerPhrasing(e,{before:u,after:"](",...o.current()})),u+=o.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=r.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(r.safe(e.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(c=r.enter("destinationRaw"),u+=o.move(r.safe(e.url,{before:u,after:e.title?" ":")",...o.current()}))),c(),e.title&&(c=r.enter(`title${i}`),u+=o.move(" "+a),u+=o.move(r.safe(e.title,{before:u,after:a,...o.current()})),u+=o.move(a),c()),u+=o.move(")"),l(),u}function Nee(e,t,r){return TE(e,r)?"<":"["}PE.peek=See;function PE(e,t,r,s){const a=e.referenceType,i=r.enter("linkReference");let o=r.enter("label");const l=r.createTracker(s);let c=l.move("[");const u=r.containerPhrasing(e,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const d=r.stack;r.stack=[],o=r.enter("reference");const h=r.safe(r.associationId(e),{before:c,after:"]",...l.current()});return o(),r.stack=d,i(),a==="full"||!u||u!==h?c+=l.move(h+"]"):a==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function See(){return"["}function Sw(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function kee(e){const t=Sw(e),r=e.options.bulletOther;if(!r)return t==="*"?"-":"*";if(r!=="*"&&r!=="+"&&r!=="-")throw new Error("Cannot serialize items with `"+r+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(r===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+r+"`) to be different");return r}function _ee(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function RE(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function Cee(e,t,r,s){const a=r.enter("list"),i=r.bulletCurrent;let o=e.ordered?_ee(r):Sw(r);const l=e.ordered?o==="."?")":".":kee(r);let c=t&&r.bulletLastUsed?o===r.bulletLastUsed:!1;if(!e.ordered){const d=e.children?e.children[0]:void 0;if((o==="*"||o==="-")&&d&&(!d.children||!d.children[0])&&r.stack[r.stack.length-1]==="list"&&r.stack[r.stack.length-2]==="listItem"&&r.stack[r.stack.length-3]==="list"&&r.stack[r.stack.length-4]==="listItem"&&r.indexStack[r.indexStack.length-1]===0&&r.indexStack[r.indexStack.length-2]===0&&r.indexStack[r.indexStack.length-3]===0&&(c=!0),RE(r)===o&&d){let h=-1;for(;++h<e.children.length;){const m=e.children[h];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(o=l),r.bulletCurrent=o;const u=r.containerFlow(e,s);return r.bulletLastUsed=o,r.bulletCurrent=i,a(),u}function Eee(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function Tee(e,t,r,s){const a=Eee(r);let i=r.bulletCurrent||Sw(r);t&&t.type==="list"&&t.ordered&&(i=(typeof t.start=="number"&&t.start>-1?t.start:1)+(r.options.incrementListMarker===!1?0:t.children.indexOf(e))+i);let o=i.length+1;(a==="tab"||a==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(o=Math.ceil(o/4)*4);const l=r.createTracker(s);l.move(i+" ".repeat(o-i.length)),l.shift(o);const c=r.enter("listItem"),u=r.indentLines(r.containerFlow(e,l.current()),d);return c(),u;function d(h,m,f){return m?(f?"":" ".repeat(o))+h:(f?i:i+" ".repeat(o-i.length))+h}}function Aee(e,t,r,s){const a=r.enter("paragraph"),i=r.enter("phrasing"),o=r.containerPhrasing(e,s);return i(),a(),o}const Pee=Bh(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Ree(e,t,r,s){return(e.children.some(function(o){return Pee(o)})?r.containerPhrasing:r.containerFlow).call(r,e,s)}function Mee(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}ME.peek=Oee;function ME(e,t,r,s){const a=Mee(r),i=r.enter("strong"),o=r.createTracker(s),l=o.move(a+a);let c=o.move(r.containerPhrasing(e,{after:a,before:l,...o.current()}));const u=c.charCodeAt(0),d=Nf(s.before.charCodeAt(s.before.length-1),u,a);d.inside&&(c=wh(u)+c.slice(1));const h=c.charCodeAt(c.length-1),m=Nf(s.after.charCodeAt(0),h,a);m.inside&&(c=c.slice(0,-1)+wh(h));const f=o.move(a+a);return i(),r.attentionEncodeSurroundingInfo={after:m.outside,before:d.outside},l+c+f}function Oee(e,t,r){return r.options.strong||"*"}function Iee(e,t,r,s){return r.safe(e.value,s)}function Dee(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function Fee(e,t,r){const s=(RE(r)+(r.options.ruleSpaces?" ":"")).repeat(Dee(r));return r.options.ruleSpaces?s.slice(0,-1):s}const OE={blockquote:oee,break:qN,code:hee,definition:fee,emphasis:SE,hardBreak:qN,heading:vee,html:kE,image:_E,imageReference:CE,inlineCode:EE,link:AE,linkReference:PE,list:Cee,listItem:Tee,paragraph:Aee,root:Ree,strong:ME,text:Iee,thematicBreak:Fee};function Lee(){return{enter:{table:zee,tableData:BN,tableHeader:BN,tableRow:qee},exit:{codeText:Bee,table:$ee,tableData:kg,tableHeader:kg,tableRow:kg}}}function zee(e){const t=e._align;this.enter({type:"table",align:t.map(function(r){return r==="none"?null:r}),children:[]},e),this.data.inTable=!0}function $ee(e){this.exit(e),this.data.inTable=void 0}function qee(e){this.enter({type:"tableRow",children:[]},e)}function kg(e){this.exit(e)}function BN(e){this.enter({type:"tableCell",children:[]},e)}function Bee(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,Uee));const r=this.stack[this.stack.length-1];r.type,r.value=t,this.exit(e)}function Uee(e,t){return t==="|"?t:e}function Vee(e){const t=e||{},r=t.tableCellPadding,s=t.tablePipeAlign,a=t.stringLength,i=r?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:o,tableCell:c,tableRow:l}};function o(f,x,g,y){return u(d(f,g,y),f.align)}function l(f,x,g,y){const b=h(f,g,y),v=u([b]);return v.slice(0,v.indexOf(`
`))}function c(f,x,g,y){const b=g.enter("tableCell"),v=g.enter("phrasing"),w=g.containerPhrasing(f,{...y,before:i,after:i});return v(),b(),w}function u(f,x){return aee(f,{align:x,alignDelimiters:s,padding:r,stringLength:a})}function d(f,x,g){const y=f.children;let b=-1;const v=[],w=x.enter("table");for(;++b<y.length;)v[b]=h(y[b],x,g);return w(),v}function h(f,x,g){const y=f.children;let b=-1;const v=[],w=x.enter("tableRow");for(;++b<y.length;)v[b]=c(y[b],f,x,g);return w(),v}function m(f,x,g){let y=OE.inlineCode(f,x,g);return g.stack.includes("tableCell")&&(y=y.replace(/\|/g,"\\$&")),y}}function Hee(){return{exit:{taskListCheckValueChecked:UN,taskListCheckValueUnchecked:UN,paragraph:Gee}}}function Wee(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Qee}}}function UN(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function Gee(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const r=this.stack[this.stack.length-1];r.type;const s=r.children[0];if(s&&s.type==="text"){const a=t.children;let i=-1,o;for(;++i<a.length;){const l=a[i];if(l.type==="paragraph"){o=l;break}}o===r&&(s.value=s.value.slice(1),s.value.length===0?r.children.shift():r.position&&s.position&&typeof s.position.start.offset=="number"&&(s.position.start.column++,s.position.start.offset++,r.position.start=Object.assign({},s.position.start)))}}this.exit(e)}function Qee(e,t,r,s){const a=e.children[0],i=typeof e.checked=="boolean"&&a&&a.type==="paragraph",o="["+(e.checked?"x":" ")+"] ",l=r.createTracker(s);i&&l.move(o);let c=OE.listItem(e,t,r,{...s,...l.current()});return i&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),c;function u(d){return d+o}}function Yee(){return[EZ(),YZ(),ZZ(),Lee(),Hee()]}function Kee(e){return{extensions:[TZ(),KZ(e),eee(),Vee(e),Wee()]}}const Jee={tokenize:nte,partial:!0},IE={tokenize:ste,partial:!0},DE={tokenize:ate,partial:!0},FE={tokenize:ite,partial:!0},Xee={tokenize:ote,partial:!0},LE={name:"wwwAutolink",tokenize:tte,previous:$E},zE={name:"protocolAutolink",tokenize:rte,previous:qE},Yi={name:"emailAutolink",tokenize:ete,previous:BE},mi={};function Zee(){return{text:mi}}let ol=48;for(;ol<123;)mi[ol]=Yi,ol++,ol===58?ol=65:ol===91&&(ol=97);mi[43]=Yi;mi[45]=Yi;mi[46]=Yi;mi[95]=Yi;mi[72]=[Yi,zE];mi[104]=[Yi,zE];mi[87]=[Yi,LE];mi[119]=[Yi,LE];function ete(e,t,r){const s=this;let a,i;return o;function o(h){return!z1(h)||!BE.call(s,s.previous)||kw(s.events)?r(h):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(h))}function l(h){return z1(h)?(e.consume(h),l):h===64?(e.consume(h),c):r(h)}function c(h){return h===46?e.check(Xee,d,u)(h):h===45||h===95||Yn(h)?(i=!0,e.consume(h),c):d(h)}function u(h){return e.consume(h),a=!0,c}function d(h){return i&&a&&is(s.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(h)):r(h)}}function tte(e,t,r){const s=this;return a;function a(o){return o!==87&&o!==119||!$E.call(s,s.previous)||kw(s.events)?r(o):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(Jee,e.attempt(IE,e.attempt(DE,i),r),r)(o))}function i(o){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(o)}}function rte(e,t,r){const s=this;let a="",i=!1;return o;function o(h){return(h===72||h===104)&&qE.call(s,s.previous)&&!kw(s.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),a+=String.fromCodePoint(h),e.consume(h),l):r(h)}function l(h){if(is(h)&&a.length<5)return a+=String.fromCodePoint(h),e.consume(h),l;if(h===58){const m=a.toLowerCase();if(m==="http"||m==="https")return e.consume(h),c}return r(h)}function c(h){return h===47?(e.consume(h),i?u:(i=!0,c)):r(h)}function u(h){return h===null||pf(h)||Pr(h)||Vl(h)||Sp(h)?r(h):e.attempt(IE,e.attempt(DE,d),r)(h)}function d(h){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(h)}}function nte(e,t,r){let s=0;return a;function a(o){return(o===87||o===119)&&s<3?(s++,e.consume(o),a):o===46&&s===3?(e.consume(o),i):r(o)}function i(o){return o===null?r(o):t(o)}}function ste(e,t,r){let s,a,i;return o;function o(u){return u===46||u===95?e.check(FE,c,l)(u):u===null||Pr(u)||Vl(u)||u!==45&&Sp(u)?c(u):(i=!0,e.consume(u),o)}function l(u){return u===95?s=!0:(a=s,s=void 0),e.consume(u),o}function c(u){return a||s||!i?r(u):t(u)}}function ate(e,t){let r=0,s=0;return a;function a(o){return o===40?(r++,e.consume(o),a):o===41&&s<r?i(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(FE,t,i)(o):o===null||Pr(o)||Vl(o)?t(o):(e.consume(o),a)}function i(o){return o===41&&s++,e.consume(o),a}}function ite(e,t,r){return s;function s(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),s):l===38?(e.consume(l),i):l===93?(e.consume(l),a):l===60||l===null||Pr(l)||Vl(l)?t(l):r(l)}function a(l){return l===null||l===40||l===91||Pr(l)||Vl(l)?t(l):s(l)}function i(l){return is(l)?o(l):r(l)}function o(l){return l===59?(e.consume(l),s):is(l)?(e.consume(l),o):r(l)}}function ote(e,t,r){return s;function s(i){return e.consume(i),a}function a(i){return Yn(i)?r(i):t(i)}}function $E(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Pr(e)}function qE(e){return!is(e)}function BE(e){return!(e===47||z1(e))}function z1(e){return e===43||e===45||e===46||e===95||Yn(e)}function kw(e){let t=e.length,r=!1;for(;t--;){const s=e[t][1];if((s.type==="labelLink"||s.type==="labelImage")&&!s._balanced){r=!0;break}if(s._gfmAutolinkLiteralWalkedInto){r=!1;break}}return e.length>0&&!r&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),r}const lte={tokenize:xte,partial:!0};function cte(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:mte,continuation:{tokenize:fte},exit:pte}},text:{91:{name:"gfmFootnoteCall",tokenize:hte},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:ute,resolveTo:dte}}}}function ute(e,t,r){const s=this;let a=s.events.length;const i=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let o;for(;a--;){const c=s.events[a][1];if(c.type==="labelImage"){o=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!o||!o._balanced)return r(c);const u=Ia(s.sliceSerialize({start:o.end,end:s.now()}));return u.codePointAt(0)!==94||!i.includes(u.slice(1))?r(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function dte(e,t){let r=e.length;for(;r--;)if(e[r][1].type==="labelImage"&&e[r][0]==="enter"){e[r][1];break}e[r+1][1].type="data",e[r+3][1].type="gfmFootnoteCallLabelMarker";const s={type:"gfmFootnoteCall",start:Object.assign({},e[r+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[r+3][1].end),end:Object.assign({},e[r+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},l=[e[r+1],e[r+2],["enter",s,t],e[r+3],e[r+4],["enter",a,t],["exit",a,t],["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t],e[e.length-2],e[e.length-1],["exit",s,t]];return e.splice(r,e.length-r+1,...l),e}function hte(e,t,r){const s=this,a=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let i=0,o;return l;function l(h){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(h),e.exit("gfmFootnoteCallLabelMarker"),c}function c(h){return h!==94?r(h):(e.enter("gfmFootnoteCallMarker"),e.consume(h),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(h){if(i>999||h===93&&!o||h===null||h===91||Pr(h))return r(h);if(h===93){e.exit("chunkString");const m=e.exit("gfmFootnoteCallString");return a.includes(Ia(s.sliceSerialize(m)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(h),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):r(h)}return Pr(h)||(o=!0),i++,e.consume(h),h===92?d:u}function d(h){return h===91||h===92||h===93?(e.consume(h),i++,u):u(h)}}function mte(e,t,r){const s=this,a=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let i,o=0,l;return c;function c(x){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(x){return x===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",d):r(x)}function d(x){if(o>999||x===93&&!l||x===null||x===91||Pr(x))return r(x);if(x===93){e.exit("chunkString");const g=e.exit("gfmFootnoteDefinitionLabelString");return i=Ia(s.sliceSerialize(g)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),m}return Pr(x)||(l=!0),o++,e.consume(x),x===92?h:d}function h(x){return x===91||x===92||x===93?(e.consume(x),o++,d):d(x)}function m(x){return x===58?(e.enter("definitionMarker"),e.consume(x),e.exit("definitionMarker"),a.includes(i)||a.push(i),cr(e,f,"gfmFootnoteDefinitionWhitespace")):r(x)}function f(x){return t(x)}}function fte(e,t,r){return e.check(qh,t,e.attempt(lte,t,r))}function pte(e){e.exit("gfmFootnoteDefinition")}function xte(e,t,r){const s=this;return cr(e,a,"gfmFootnoteDefinitionIndent",5);function a(i){const o=s.events[s.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?t(i):r(i)}}function gte(e){let r=(e||{}).singleTilde;const s={name:"strikethrough",tokenize:i,resolveAll:a};return r==null&&(r=!0),{text:{126:s},insideSpan:{null:[s]},attentionMarkers:{null:[126]}};function a(o,l){let c=-1;for(;++c<o.length;)if(o[c][0]==="enter"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._close){let u=c;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[c][1].end.offset-o[c][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[c][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[c][1].end)},h={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[c][1].start)},m=[["enter",d,l],["enter",o[u][1],l],["exit",o[u][1],l],["enter",h,l]],f=l.parser.constructs.insideSpan.null;f&&Gs(m,m.length,0,kp(f,o.slice(u+1,c),l)),Gs(m,m.length,0,[["exit",h,l],["enter",o[c][1],l],["exit",o[c][1],l],["exit",d,l]]),Gs(o,u-1,c-u+3,m),c=u+m.length-2;break}}for(c=-1;++c<o.length;)o[c][1].type==="strikethroughSequenceTemporary"&&(o[c][1].type="data");return o}function i(o,l,c){const u=this.previous,d=this.events;let h=0;return m;function m(x){return u===126&&d[d.length-1][1].type!=="characterEscape"?c(x):(o.enter("strikethroughSequenceTemporary"),f(x))}function f(x){const g=Nu(u);if(x===126)return h>1?c(x):(o.consume(x),h++,f);if(h<2&&!r)return c(x);const y=o.exit("strikethroughSequenceTemporary"),b=Nu(x);return y._open=!b||b===2&&!!g,y._close=!g||g===2&&!!b,l(x)}}}class vte{constructor(){this.map=[]}add(t,r,s){yte(this,t,r,s)}consume(t){if(this.map.sort(function(i,o){return i[0]-o[0]}),this.map.length===0)return;let r=this.map.length;const s=[];for(;r>0;)r-=1,s.push(t.slice(this.map[r][0]+this.map[r][1]),this.map[r][2]),t.length=this.map[r][0];s.push(t.slice()),t.length=0;let a=s.pop();for(;a;){for(const i of a)t.push(i);a=s.pop()}this.map.length=0}}function yte(e,t,r,s){let a=0;if(!(r===0&&s.length===0)){for(;a<e.map.length;){if(e.map[a][0]===t){e.map[a][1]+=r,e.map[a][2].push(...s);return}a+=1}e.map.push([t,r,s])}}function bte(e,t){let r=!1;const s=[];for(;t<e.length;){const a=e[t];if(r){if(a[0]==="enter")a[1].type==="tableContent"&&s.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(a[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const i=s.length-1;s[i]=s[i]==="left"?"center":"right"}}else if(a[1].type==="tableDelimiterRow")break}else a[0]==="enter"&&a[1].type==="tableDelimiterRow"&&(r=!0);t+=1}return s}function wte(){return{flow:{null:{name:"table",tokenize:jte,resolveAll:Nte}}}}function jte(e,t,r){const s=this;let a=0,i=0,o;return l;function l(E){let M=s.events.length-1;for(;M>-1;){const ee=s.events[M][1].type;if(ee==="lineEnding"||ee==="linePrefix")M--;else break}const I=M>-1?s.events[M][1].type:null,se=I==="tableHead"||I==="tableRow"?N:c;return se===N&&s.parser.lazy[s.now().line]?r(E):se(E)}function c(E){return e.enter("tableHead"),e.enter("tableRow"),u(E)}function u(E){return E===124||(o=!0,i+=1),d(E)}function d(E){return E===null?r(E):Mt(E)?i>1?(i=0,s.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(E),e.exit("lineEnding"),f):r(E):mr(E)?cr(e,d,"whitespace")(E):(i+=1,o&&(o=!1,a+=1),E===124?(e.enter("tableCellDivider"),e.consume(E),e.exit("tableCellDivider"),o=!0,d):(e.enter("data"),h(E)))}function h(E){return E===null||E===124||Pr(E)?(e.exit("data"),d(E)):(e.consume(E),E===92?m:h)}function m(E){return E===92||E===124?(e.consume(E),h):h(E)}function f(E){return s.interrupt=!1,s.parser.lazy[s.now().line]?r(E):(e.enter("tableDelimiterRow"),o=!1,mr(E)?cr(e,x,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(E):x(E))}function x(E){return E===45||E===58?y(E):E===124?(o=!0,e.enter("tableCellDivider"),e.consume(E),e.exit("tableCellDivider"),g):k(E)}function g(E){return mr(E)?cr(e,y,"whitespace")(E):y(E)}function y(E){return E===58?(i+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(E),e.exit("tableDelimiterMarker"),b):E===45?(i+=1,b(E)):E===null||Mt(E)?S(E):k(E)}function b(E){return E===45?(e.enter("tableDelimiterFiller"),v(E)):k(E)}function v(E){return E===45?(e.consume(E),v):E===58?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(E),e.exit("tableDelimiterMarker"),w):(e.exit("tableDelimiterFiller"),w(E))}function w(E){return mr(E)?cr(e,S,"whitespace")(E):S(E)}function S(E){return E===124?x(E):E===null||Mt(E)?!o||a!==i?k(E):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(E)):k(E)}function k(E){return r(E)}function N(E){return e.enter("tableRow"),P(E)}function P(E){return E===124?(e.enter("tableCellDivider"),e.consume(E),e.exit("tableCellDivider"),P):E===null||Mt(E)?(e.exit("tableRow"),t(E)):mr(E)?cr(e,P,"whitespace")(E):(e.enter("data"),T(E))}function T(E){return E===null||E===124||Pr(E)?(e.exit("data"),P(E)):(e.consume(E),E===92?A:T)}function A(E){return E===92||E===124?(e.consume(E),T):T(E)}}function Nte(e,t){let r=-1,s=!0,a=0,i=[0,0,0,0],o=[0,0,0,0],l=!1,c=0,u,d,h;const m=new vte;for(;++r<e.length;){const f=e[r],x=f[1];f[0]==="enter"?x.type==="tableHead"?(l=!1,c!==0&&(VN(m,t,c,u,d),d=void 0,c=0),u={type:"table",start:Object.assign({},x.start),end:Object.assign({},x.end)},m.add(r,0,[["enter",u,t]])):x.type==="tableRow"||x.type==="tableDelimiterRow"?(s=!0,h=void 0,i=[0,0,0,0],o=[0,r+1,0,0],l&&(l=!1,d={type:"tableBody",start:Object.assign({},x.start),end:Object.assign({},x.end)},m.add(r,0,[["enter",d,t]])),a=x.type==="tableDelimiterRow"?2:d?3:1):a&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")?(s=!1,o[2]===0&&(i[1]!==0&&(o[0]=o[1],h=Ym(m,t,i,a,void 0,h),i=[0,0,0,0]),o[2]=r)):x.type==="tableCellDivider"&&(s?s=!1:(i[1]!==0&&(o[0]=o[1],h=Ym(m,t,i,a,void 0,h)),i=o,o=[i[1],r,0,0])):x.type==="tableHead"?(l=!0,c=r):x.type==="tableRow"||x.type==="tableDelimiterRow"?(c=r,i[1]!==0?(o[0]=o[1],h=Ym(m,t,i,a,r,h)):o[1]!==0&&(h=Ym(m,t,o,a,r,h)),a=0):a&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")&&(o[3]=r)}for(c!==0&&VN(m,t,c,u,d),m.consume(t.events),r=-1;++r<t.events.length;){const f=t.events[r];f[0]==="enter"&&f[1].type==="table"&&(f[1]._align=bte(t.events,r))}return e}function Ym(e,t,r,s,a,i){const o=s===1?"tableHeader":s===2?"tableDelimiter":"tableData",l="tableContent";r[0]!==0&&(i.end=Object.assign({},wc(t.events,r[0])),e.add(r[0],0,[["exit",i,t]]));const c=wc(t.events,r[1]);if(i={type:o,start:Object.assign({},c),end:Object.assign({},c)},e.add(r[1],0,[["enter",i,t]]),r[2]!==0){const u=wc(t.events,r[2]),d=wc(t.events,r[3]),h={type:l,start:Object.assign({},u),end:Object.assign({},d)};if(e.add(r[2],0,[["enter",h,t]]),s!==2){const m=t.events[r[2]],f=t.events[r[3]];if(m[1].end=Object.assign({},f[1].end),m[1].type="chunkText",m[1].contentType="text",r[3]>r[2]+1){const x=r[2]+1,g=r[3]-r[2]-1;e.add(x,g,[])}}e.add(r[3]+1,0,[["exit",h,t]])}return a!==void 0&&(i.end=Object.assign({},wc(t.events,a)),e.add(a,0,[["exit",i,t]]),i=void 0),i}function VN(e,t,r,s,a){const i=[],o=wc(t.events,r);a&&(a.end=Object.assign({},o),i.push(["exit",a,t])),s.end=Object.assign({},o),i.push(["exit",s,t]),e.add(r+1,0,i)}function wc(e,t){const r=e[t],s=r[0]==="enter"?"start":"end";return r[1][s]}const Ste={name:"tasklistCheck",tokenize:_te};function kte(){return{text:{91:Ste}}}function _te(e,t,r){const s=this;return a;function a(c){return s.previous!==null||!s._gfmTasklistFirstContentOfListItem?r(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),i)}function i(c){return Pr(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),o):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),o):r(c)}function o(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):r(c)}function l(c){return Mt(c)?t(c):mr(c)?e.check({tokenize:Cte},t,r)(c):r(c)}}function Cte(e,t,r){return cr(e,s,"whitespace");function s(a){return a===null?r(a):t(a)}}function Ete(e){return VC([Zee(),cte(),gte(e),wte(),kte()])}const Tte={};function rr(e){const t=this,r=e||Tte,s=t.data(),a=s.micromarkExtensions||(s.micromarkExtensions=[]),i=s.fromMarkdownExtensions||(s.fromMarkdownExtensions=[]),o=s.toMarkdownExtensions||(s.toMarkdownExtensions=[]);a.push(Ete(r)),i.push(Yee()),o.push(Kee(r))}var _w="Radio",[Ate,UE]=On(_w),[Pte,Rte]=Ate(_w),VE=p.forwardRef((e,t)=>{const{__scopeRadio:r,name:s,checked:a=!1,required:i,disabled:o,value:l="on",onCheck:c,form:u,...d}=e,[h,m]=p.useState(null),f=Yt(t,y=>m(y)),x=p.useRef(!1),g=h?u||!!h.closest("form"):!0;return n.jsxs(Pte,{scope:r,checked:a,disabled:o,children:[n.jsx(_t.button,{type:"button",role:"radio","aria-checked":a,"data-state":QE(a),"data-disabled":o?"":void 0,disabled:o,value:l,...d,ref:f,onClick:Ze(e.onClick,y=>{a||c==null||c(),g&&(x.current=y.isPropagationStopped(),x.current||y.stopPropagation())})}),g&&n.jsx(GE,{control:h,bubbles:!x.current,name:s,value:l,checked:a,required:i,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});VE.displayName=_w;var HE="RadioIndicator",WE=p.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:s,...a}=e,i=Rte(HE,r);return n.jsx($n,{present:s||i.checked,children:n.jsx(_t.span,{"data-state":QE(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t})})});WE.displayName=HE;var Mte="RadioBubbleInput",GE=p.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:s=!0,...a},i)=>{const o=p.useRef(null),l=Yt(o,i),c=cp(r),u=Xf(t);return p.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&f){const x=new Event("click",{bubbles:s});f.call(d,r),d.dispatchEvent(x)}},[c,r,s]),n.jsx(_t.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});GE.displayName=Mte;function QE(e){return e?"checked":"unchecked"}var Ote=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Dp="RadioGroup",[Ite,Hse]=On(Dp,[Hu,UE]),YE=Hu(),KE=UE(),[Dte,Fte]=Ite(Dp),JE=p.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:s,defaultValue:a,value:i,required:o=!1,disabled:l=!1,orientation:c,dir:u,loop:d=!0,onValueChange:h,...m}=e,f=YE(r),x=Uu(u),[g,y]=ai({prop:i,defaultProp:a??null,onChange:h,caller:Dp});return n.jsx(Dte,{scope:r,name:s,required:o,disabled:l,value:g,onValueChange:y,children:n.jsx(Tb,{asChild:!0,...f,orientation:c,dir:x,loop:d,children:n.jsx(_t.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:x,...m,ref:t})})})});JE.displayName=Dp;var XE="RadioGroupItem",ZE=p.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:s,...a}=e,i=Fte(XE,r),o=i.disabled||s,l=YE(r),c=KE(r),u=p.useRef(null),d=Yt(t,u),h=i.value===a.value,m=p.useRef(!1);return p.useEffect(()=>{const f=g=>{Ote.includes(g.key)&&(m.current=!0)},x=()=>m.current=!1;return document.addEventListener("keydown",f),document.addEventListener("keyup",x),()=>{document.removeEventListener("keydown",f),document.removeEventListener("keyup",x)}},[]),n.jsx(Ab,{asChild:!0,...l,focusable:!o,active:h,children:n.jsx(VE,{disabled:o,required:i.required,checked:h,...c,...a,name:i.name,ref:d,onCheck:()=>i.onValueChange(a.value),onKeyDown:Ze(f=>{f.key==="Enter"&&f.preventDefault()}),onFocus:Ze(a.onFocus,()=>{var f;m.current&&((f=u.current)==null||f.click())})})})});ZE.displayName=XE;var Lte="RadioGroupIndicator",eT=p.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...s}=e,a=KE(r);return n.jsx(WE,{...a,...s,ref:t})});eT.displayName=Lte;var tT=JE,rT=ZE,zte=eT;const Hl=p.forwardRef(({className:e,...t},r)=>n.jsx(tT,{className:qe("grid gap-2",e),...t,ref:r}));Hl.displayName=tT.displayName;const Wl=p.forwardRef(({className:e,...t},r)=>n.jsx(rT,{ref:r,className:qe("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n.jsx(zte,{className:"flex items-center justify-center",children:n.jsx(ek,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Wl.displayName=rT.displayName;function Sf(e){const t=/^\(([a-z])\)\s+(.+)$/im,r=e.split(`
`),s=[];let a=r.length,i=!1;for(let o=r.length-1;o>=0;o--){const l=r[o].trim(),c=l.match(t);if(c)i=!0,s.unshift({label:c[1].toUpperCase(),text:c[2].trim()}),a=o;else if(i&&l.length>0&&!l.match(/^[-*]/))break}if(s.length>=2){const o=r.slice(0,a).join(`
`).trim(),l=o.match(/^(\d+)\./),c=l?parseInt(l[1]):void 0;return{isMCQ:!0,questionText:l?o.replace(/^\d+\.\s*/,"").trim():o,options:s,questionNumber:c}}return{isMCQ:!1,questionText:e,options:[]}}function nT(e){const t=e.split(`
`);let r=0,s=!1;for(const a of t){const i=a.trim();/^\d+\./.test(i)&&(s&&r++,s=!0),/^\([a-z]\)\s+/.test(i)&&s&&(r++,s=!1)}return r>=2}function sT(e){const t=[],r=e.split(`
`);let s=[];for(let a=0;a<r.length;a++){const i=r[a],l=i.trim().match(/^(\d+)\./);if(l&&s.length>0){const c=Sf(s.join(`
`));c.isMCQ&&t.push(c),s=[i],parseInt(l[1])}else s.push(i)}if(s.length>0){const a=Sf(s.join(`
`));a.isMCQ&&t.push(a)}return t}const $te=()=>{const e=Gt(),{toast:t}=Ut(),[r,s]=p.useState([]),[a,i]=p.useState(!1);p.useEffect(()=>{o()},[]);const o=async()=>{var l,c;try{i(!0),console.log("Fetching all homework sessions...");const u=await pe.homework.getSessions({limit:1e3});console.log("Homework sessions received:",u),s(u||[])}catch(u){console.error("Error fetching homework sessions:",u);const d=((l=u==null?void 0:u.message)==null?void 0:l.includes("Failed to fetch"))||((c=u==null?void 0:u.message)==null?void 0:c.includes("ERR_CONNECTION_REFUSED"))||(u==null?void 0:u.name)==="TypeError";t({variant:"destructive",title:"Connection Error",description:d?"Backend server is not running. Please start the backend server at http://localhost:8000":"Failed to load homework. Please try again later."})}finally{i(!1)}};return n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(yn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Homework"}),n.jsx("p",{className:"text-muted-foreground",children:"View and complete homework assigned by your teachers"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"h-5 w-5"}),"Assigned Homework (",r.length,")"]}),n.jsx(ze,{children:"Your homework sessions and assignments"})]}),n.jsx(ie,{children:a?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(Oe,{className:"h-6 w-6 animate-spin"})}):r.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Jt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{className:"text-lg font-medium mb-2",children:"No homework sessions"}),n.jsx("p",{className:"text-sm",children:"No homework sessions found in the database"})]}):n.jsx("div",{className:"grid grid-cols-1 gap-4",children:r.map(l=>n.jsxs(ae,{className:"cursor-pointer hover:shadow-md transition-shadow border-l-4 border-l-primary",onClick:()=>{e(`/dashboard/student/homework/submit/${l.id}`)},children:[n.jsxs(he,{children:[n.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[n.jsx(je,{variant:"secondary",className:"capitalize shrink-0",children:l.subject}),l.is_complete?n.jsxs(je,{variant:"default",className:"gap-1 shrink-0",children:[n.jsx(Qt,{className:"h-3 w-3"}),"Completed"]}):n.jsxs(je,{variant:"secondary",className:"gap-1 shrink-0",children:[n.jsx(Hs,{className:"h-3 w-3"}),"Pending"]})]}),n.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:(()=>{const c=l.question.length>500?l.question.substring(0,500)+"...":l.question;if(nT(l.question)){const d=sT(l.question);return n.jsxs("div",{className:"space-y-4",children:[d.slice(0,2).map((h,m)=>n.jsxs("div",{className:"border-l-2 border-primary pl-3 py-2",children:[h.questionNumber&&n.jsxs("div",{className:"font-semibold mb-2",children:["Question ",h.questionNumber]}),n.jsx("div",{className:"mb-2",children:n.jsx(tr,{remarkPlugins:[Fs,rr],rehypePlugins:[Ls],children:h.questionText})}),n.jsx(Hl,{disabled:!0,className:"space-y-2",children:h.options.map(f=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Wl,{value:f.label,id:`${l.id}-${m}-${f.label}`}),n.jsxs(be,{htmlFor:`${l.id}-${m}-${f.label}`,className:"font-normal cursor-pointer",children:[n.jsxs("span",{className:"font-semibold",children:["(",f.label,")"]})," ",f.text]})]},f.label))})]},m)),d.length>2&&n.jsxs("p",{className:"text-sm text-muted-foreground italic",children:["+ ",d.length-2," more question",d.length-2>1?"s":"","..."]})]})}const u=Sf(c);return u.isMCQ?n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{children:n.jsx(tr,{remarkPlugins:[Fs,rr],rehypePlugins:[Ls],children:u.questionText})}),n.jsx(Hl,{disabled:!0,className:"space-y-2",children:u.options.map(d=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Wl,{value:d.label,id:`${l.id}-${d.label}`}),n.jsxs(be,{htmlFor:`${l.id}-${d.label}`,className:"font-normal cursor-pointer",children:[n.jsxs("span",{className:"font-semibold",children:["(",d.label,")"]})," ",d.text]})]},d.label))})]}):n.jsx(tr,{remarkPlugins:[Fs,rr],rehypePlugins:[Ls],components:{p:({children:d})=>{const h=String(d);return h.length>300?n.jsxs("p",{className:"mb-2",children:[h.substring(0,300),"..."]}):n.jsx("p",{className:"mb-2",children:d})},h1:({children:d})=>n.jsx("h1",{className:"text-xl font-bold mb-2 mt-4",children:d}),h2:({children:d})=>n.jsx("h2",{className:"text-lg font-semibold mb-2 mt-3",children:d}),h3:({children:d})=>n.jsx("h3",{className:"text-base font-semibold mb-1 mt-2",children:d}),ul:({children:d})=>n.jsx("ul",{className:"list-disc list-inside mb-2 space-y-1",children:d}),ol:({children:d})=>n.jsx("ol",{className:"list-decimal list-inside mb-2 space-y-1",children:d}),code:({children:d,className:h})=>h?n.jsx("code",{className:h,children:d}):n.jsx("code",{className:"bg-muted px-1 py-0.5 rounded text-sm",children:d}),pre:({children:d})=>n.jsx("pre",{className:"bg-muted p-2 rounded overflow-x-auto mb-2",children:d})},children:c})})()})]}),n.jsx(ie,{children:n.jsx("div",{className:"space-y-2 pt-2 border-t",children:n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx("span",{children:new Date(l.created_at).toLocaleDateString()}),l.hints_revealed>0&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsxs("span",{children:["Hints: ",l.hints_revealed,"/3"]})]}),l.attempts&&Array.isArray(l.attempts)&&l.attempts.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsxs("span",{children:["Attempts: ",l.attempts.length]})]})]})})})]},l.id))})})]})}),n.jsx("div",{className:"lg:col-span-1",children:n.jsxs(ae,{children:[n.jsx(he,{children:n.jsx(fe,{children:"Homework Info"})}),n.jsx(ie,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium mb-2",children:"Total Assigned"}),n.jsx("p",{className:"text-2xl font-bold",children:r.length})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium mb-2",children:"Completed"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.filter(l=>l.is_complete).length})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium mb-2",children:"Pending"}),n.jsx("p",{className:"text-2xl font-bold text-orange-600",children:r.filter(l=>!l.is_complete).length})]})]})})]})})]})]})})]})},qte=()=>{const{sessionId:e}=Zl(),{user:t,loading:r}=Wt(),s=Gt(),{toast:a}=Ut(),[i,o]=p.useState(null),[l,c]=p.useState(""),[u,d]=p.useState(1),[h,m]=p.useState(!1),[f,x]=p.useState(!1),[g,y]=p.useState({}),[b,v]=p.useState([]);p.useEffect(()=>{!r&&!t&&s("/login")},[t,r,s]),p.useEffect(()=>{t&&e&&w()},[t,e]);const w=async()=>{if(e)try{m(!0);const T=await pe.homework.getSession(e);o(T),v(T.attempts||[]),d((T.hints_revealed||0)+1);let A=T.metadata;if(typeof A=="string")try{A=JSON.parse(A)}catch{A={}}if(A&&A.hints){const E={};Object.entries(A.hints).forEach(([M,I])=>{E[parseInt(M)]=I}),y(E)}}catch(T){console.error("Error fetching session:",T),a({variant:"destructive",title:"Error",description:"Failed to load homework"}),s("/dashboard/student/homework")}finally{m(!1)}},S=async()=>{if(!(!e||f)){x(!0);try{const T=await pe.homework.hint({session_id:e,hint_level:u}),A=T.hint_text||T.hint||"";A&&y(E=>({...E,[u]:A})),a({title:`Hint Level ${u}`,description:"Hint revealed"}),w()}catch(T){a({variant:"destructive",title:"Error",description:T.message||"Failed to get hint"})}finally{x(!1)}}},k=async()=>{if(!(!l.trim()||!e||f)){x(!0);try{const T=await pe.homework.attempt({session_id:e,answer:l});T.is_correct?a({title:"Correct!",description:"Great job! Your answer is correct."}):a({variant:"default",title:"Try Again",description:T.feedback||"Your answer needs improvement."}),T.solution_revealed&&a({title:"Solution Revealed",description:"Check the solution below."}),await w(),c(""),(T.is_correct||T.solution_revealed)&&setTimeout(()=>{s("/dashboard/student/homework")},2e3)}catch(T){a({variant:"destructive",title:"Error",description:T.message||"Failed to submit answer"})}finally{x(!1)}}};if(r||h)return n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(!i)return n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(yn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsx(ae,{children:n.jsxs(ie,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(Hs,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("p",{className:"text-lg font-medium mb-2",children:"Homework not found"}),n.jsxs(z,{onClick:()=>s("/dashboard/student/homework"),children:[n.jsx(uu,{className:"h-4 w-4 mr-2"}),"Back to Homework"]})]})})})})]});const N=3-(b.length||0),P=!i.is_complete&&N>0&&l.trim().length>0;return n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(yn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs(z,{variant:"ghost",onClick:()=>s("/dashboard/student/homework"),className:"mb-4",children:[n.jsx(uu,{className:"h-4 w-4 mr-2"}),"Back to Homework"]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Submit Homework"}),n.jsx("p",{className:"text-muted-foreground",children:"Complete and submit your homework assignment"})]}),n.jsx(je,{variant:i.is_complete?"default":"secondary",className:"gap-1",children:i.is_complete?n.jsxs(n.Fragment,{children:[n.jsx(Qt,{className:"h-4 w-4"}),"Completed"]}):n.jsxs(n.Fragment,{children:[n.jsx(Ur,{className:"h-4 w-4"}),"In Progress"]})})]})]}),n.jsxs(ae,{className:"mb-6",children:[n.jsx(he,{children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs(fe,{className:"flex items-center gap-2 mb-2",children:[n.jsx(or,{className:"h-5 w-5"}),"Question"]}),n.jsx(je,{variant:"outline",className:"capitalize",children:i.subject})]})})}),n.jsx(ie,{children:n.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:(()=>{if(nT(i.question)){const A=sT(i.question);return n.jsx("div",{className:"space-y-6",children:A.map((E,M)=>n.jsxs("div",{className:"border-l-4 border-primary pl-4 py-3 bg-muted/30 rounded-r",children:[E.questionNumber&&n.jsxs("div",{className:"font-semibold text-lg mb-3",children:["Question ",E.questionNumber]}),n.jsx("div",{className:"mb-4",children:n.jsx(tr,{remarkPlugins:[Fs,rr],rehypePlugins:[Ls],components:{p:({children:I})=>n.jsx("p",{className:"mb-2 text-base leading-relaxed",children:I}),h1:({children:I})=>n.jsx("h1",{className:"text-xl font-bold mb-2 mt-3",children:I}),h2:({children:I})=>n.jsx("h2",{className:"text-lg font-semibold mb-2 mt-2",children:I}),h3:({children:I})=>n.jsx("h3",{className:"text-base font-semibold mb-1 mt-2",children:I})},children:E.questionText})}),n.jsx(Hl,{disabled:!0,className:"space-y-3",children:E.options.map(I=>n.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded hover:bg-muted/50",children:[n.jsx(Wl,{value:I.label,id:`q${M}-${I.label}`,className:"mt-1"}),n.jsxs(be,{htmlFor:`q${M}-${I.label}`,className:"font-normal cursor-pointer flex-1",children:[n.jsxs("span",{className:"font-semibold text-primary",children:["(",I.label,")"]})," ",n.jsx("span",{className:"inline",children:n.jsx(tr,{remarkPlugins:[Fs,rr],rehypePlugins:[Ls],children:I.text})})]})]},I.label))})]},M))})}const T=Sf(i.question);return T.isMCQ?n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{children:n.jsx(tr,{remarkPlugins:[Fs,rr],rehypePlugins:[Ls],components:{p:({children:A})=>n.jsx("p",{className:"mb-3 text-base leading-relaxed",children:A}),h1:({children:A})=>n.jsx("h1",{className:"text-2xl font-bold mb-3 mt-4",children:A}),h2:({children:A})=>n.jsx("h2",{className:"text-xl font-semibold mb-2 mt-3",children:A}),h3:({children:A})=>n.jsx("h3",{className:"text-lg font-semibold mb-2 mt-2",children:A})},children:T.questionText})}),n.jsx(Hl,{disabled:!0,className:"space-y-3",children:T.options.map(A=>n.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded hover:bg-muted/50 border",children:[n.jsx(Wl,{value:A.label,id:`mcq-${A.label}`,className:"mt-1"}),n.jsxs(be,{htmlFor:`mcq-${A.label}`,className:"font-normal cursor-pointer flex-1",children:[n.jsxs("span",{className:"font-semibold text-primary",children:["(",A.label,")"]})," ",n.jsx("span",{className:"inline",children:n.jsx(tr,{remarkPlugins:[Fs,rr],rehypePlugins:[Ls],children:A.text})})]})]},A.label))})]}):n.jsx(tr,{remarkPlugins:[Fs,rr],rehypePlugins:[Ls],components:{p:({children:A})=>n.jsx("p",{className:"mb-3 text-base leading-relaxed",children:A}),h1:({children:A})=>n.jsx("h1",{className:"text-2xl font-bold mb-3 mt-4",children:A}),h2:({children:A})=>n.jsx("h2",{className:"text-xl font-semibold mb-2 mt-3",children:A}),h3:({children:A})=>n.jsx("h3",{className:"text-lg font-semibold mb-2 mt-2",children:A}),ul:({children:A})=>n.jsx("ul",{className:"list-disc list-inside mb-3 space-y-1 ml-4",children:A}),ol:({children:A})=>n.jsx("ol",{className:"list-decimal list-inside mb-3 space-y-1 ml-4",children:A}),li:({children:A})=>n.jsx("li",{className:"mb-1",children:A}),code:({children:A,className:E})=>E?n.jsx("code",{className:E,children:A}):n.jsx("code",{className:"bg-muted px-1.5 py-0.5 rounded text-sm font-mono",children:A}),pre:({children:A})=>n.jsx("pre",{className:"bg-muted p-3 rounded overflow-x-auto mb-3",children:A}),blockquote:({children:A})=>n.jsx("blockquote",{className:"border-l-4 border-primary pl-4 italic my-3",children:A})},children:i.question})})()})})]}),!i.is_complete&&n.jsxs(ae,{className:"mb-6",children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Your Answer"}),n.jsxs(ze,{children:["Attempts remaining: ",N," / 3",b.length>0&&n.jsxs("span",{className:"ml-2",children:[" Previous attempts: ",b.length]})]})]}),n.jsxs(ie,{className:"space-y-4",children:[n.jsx(kr,{placeholder:"Enter your answer here...",value:l,onChange:T=>c(T.target.value),rows:8,className:"text-base",disabled:f}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(z,{onClick:k,disabled:!P||f,className:"flex-1",size:"lg",children:f?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Submitting..."]}):n.jsxs(n.Fragment,{children:[n.jsx($i,{className:"h-4 w-4 mr-2"}),"Submit Answer"]})}),n.jsxs(z,{variant:"outline",onClick:S,disabled:f||i.is_complete||u>3,size:"lg",children:[n.jsx(da,{className:"h-4 w-4 mr-2"}),"Get Hint ",u<=3?`(${u})`:""]})]})]})]}),Object.keys(g).length>0&&n.jsx("div",{className:"mb-6 space-y-4",children:Object.entries(g).sort(([T],[A])=>parseInt(T)-parseInt(A)).map(([T,A])=>n.jsxs(ae,{className:"border-yellow-200 bg-yellow-50 dark:bg-yellow-950/20",children:[n.jsx(he,{children:n.jsxs(fe,{className:"flex items-center gap-2 text-yellow-700 dark:text-yellow-400",children:[n.jsx(da,{className:"h-5 w-5"}),"Hint Level ",T,parseInt(T)===3&&n.jsx(je,{variant:"outline",className:"ml-2",children:"Solution"})]})}),n.jsx(ie,{children:n.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:n.jsx(tr,{remarkPlugins:[Fs,rr],rehypePlugins:[Ls],children:A})})})]},T))}),b.length>0&&n.jsxs(ae,{className:"mb-6",children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Previous Attempts"}),n.jsx(ze,{children:"Your previous answer submissions"})]}),n.jsx(ie,{children:n.jsx("div",{className:"space-y-3",children:b.map((T,A)=>n.jsx(ae,{className:"border-l-4 border-l-muted",children:n.jsxs(ie,{className:"p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("span",{className:"text-sm font-medium",children:["Attempt ",A+1]}),T.is_correct?n.jsxs(je,{variant:"default",className:"gap-1",children:[n.jsx(Qt,{className:"h-3 w-3"}),"Correct"]}):n.jsxs(je,{variant:"secondary",className:"gap-1",children:[n.jsx(Hs,{className:"h-3 w-3"}),"Incorrect"]})]}),n.jsx("p",{className:"text-sm mb-2 whitespace-pre-wrap",children:T.answer}),T.feedback&&n.jsxs("p",{className:"text-xs text-muted-foreground italic",children:["Feedback: ",T.feedback]})]})},A))})})]}),(i.solution_revealed||i.is_complete)&&i.correct_answer&&n.jsxs(ae,{className:"mb-6 border-green-200 bg-green-50 dark:bg-green-950/20",children:[n.jsx(he,{children:n.jsxs(fe,{className:"flex items-center gap-2 text-green-700 dark:text-green-400",children:[n.jsx(Qt,{className:"h-5 w-5"}),"Solution"]})}),n.jsx(ie,{children:n.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:n.jsx(tr,{remarkPlugins:[Fs,rr],rehypePlugins:[Ls],children:i.correct_answer})})})]}),i.is_complete&&n.jsx(ae,{className:"mb-6 border-primary/20 bg-primary/5",children:n.jsx(ie,{className:"p-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Qt,{className:"h-8 w-8 text-green-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-lg",children:"Homework Completed!"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"You have successfully completed this homework assignment."})]})]})})})]})})]})},Bte=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState(null),[o,l]=p.useState(!0),[c,u]=p.useState(!1),[d,h]=p.useState(new Date().toISOString().split("T")[0]);p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{e&&m()},[e,d]);const m=async()=>{if(e){l(!0);try{const g=await pe.microplan.getByDate({plan_date:d,user_id:e.id});i(g)}catch(g){g.status!==404&&console.error("Error fetching microplan:",g),i(null)}finally{l(!1)}}},f=async()=>{if(e){u(!0);try{const g=await pe.microplan.generate({user_id:e.id,plan_date:d});i(g),s({title:"Microplan Generated",description:"Your personalized learning plan is ready!"})}catch(g){s({variant:"destructive",title:"Error",description:g.message||"Failed to generate microplan"})}finally{u(!1)}}},x=async()=>{if(!(!(a!=null&&a.id)||!e))try{await pe.microplan.markComplete({microplan_id:a.id,user_id:e.id}),s({title:"Completed!",description:"Great job completing today's plan!"}),m()}catch(g){s({variant:"destructive",title:"Error",description:g.message||"Failed to mark as complete"})}};return t||o?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx("p",{className:"text-muted-foreground",children:"Loading..."})}):n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(yn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-5xl mx-auto",children:[n.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Daily Microplan"}),n.jsx("p",{className:"text-muted-foreground",children:"Your personalized learning plan for today"})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("input",{type:"date",value:d,onChange:g=>h(g.target.value),className:"rounded-md border border-input bg-background px-3 py-2 text-sm"}),!a&&n.jsx(z,{onClick:f,disabled:c,children:c?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(An,{className:"h-4 w-4 mr-2"}),"Generate Plan"]})})]})]}),a?n.jsxs("div",{className:"space-y-6",children:[n.jsx(ae,{children:n.jsx(he,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(As,{className:"h-5 w-5 text-primary"}),new Date(d).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),n.jsx(ze,{children:a.is_completed?n.jsxs(je,{className:"mt-2",children:[n.jsx(Qt,{className:"h-3 w-3 mr-1"}),"Completed"]}):n.jsx(je,{variant:"secondary",className:"mt-2",children:"In Progress"})})]}),!a.is_completed&&n.jsxs(z,{onClick:x,children:[n.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Mark Complete"]})]})})}),a.concept_summary&&n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"h-5 w-5 text-primary"}),"Concept Summary"]}),n.jsx(ze,{children:"NCERT content to review"})]}),n.jsx(ie,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"font-semibold",children:a.concept_summary.topic_name}),a.concept_summary.summary&&n.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:a.concept_summary.summary}),n.jsxs(z,{variant:"outline",size:"sm",className:"mt-2",children:[n.jsx(Z6,{className:"h-4 w-4 mr-2"}),"Study Concept"]})]})})]}),a.pyqs&&a.pyqs.length>0&&n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(or,{className:"h-5 w-5 text-blue-500"}),"Previous Year Questions (",a.pyqs.length,")"]}),n.jsx(ze,{children:"Practice with real exam questions"})]}),n.jsx(ie,{children:n.jsx("div",{className:"space-y-4",children:a.pyqs.map((g,y)=>n.jsxs("div",{className:"p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs(je,{variant:"outline",children:["PYQ ",g.year||"Previous Year"]}),n.jsx(z,{variant:"ghost",size:"sm",children:"Attempt"})]}),n.jsx("p",{className:"text-sm line-clamp-2",children:g.question})]},y))})})]}),a.hots_question&&n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(da,{className:"h-5 w-5 text-purple-500"}),"HOTS Question"]}),n.jsx(ze,{children:"Higher Order Thinking Skills challenge"})]}),n.jsx(ie,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm whitespace-pre-wrap",children:a.hots_question.question}),n.jsx(z,{variant:"outline",size:"sm",children:"Attempt Question"})]})})]}),a.quiz&&a.quiz.questions&&a.quiz.questions.length>0&&n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(An,{className:"h-5 w-5 text-green-500"}),"Quick Quiz (",a.quiz.questions.length," questions)"]}),n.jsx(ze,{children:"Test your understanding"})]}),n.jsx(ie,{children:n.jsxs("div",{className:"space-y-3",children:[a.quiz.questions.map((g,y)=>n.jsxs("div",{className:"p-3 border rounded-lg",children:[n.jsxs("p",{className:"text-sm font-medium mb-2",children:["Q",y+1,": ",g.question]}),n.jsx(z,{variant:"ghost",size:"sm",children:"View Answer"})]},y)),n.jsx(z,{className:"w-full mt-4",onClick:()=>r(`/dashboard/student/quiz/start/${a.id}`),children:"Start Quiz"})]})})]})]}):n.jsx(ae,{children:n.jsxs(ie,{className:"py-12 text-center",children:[n.jsx(An,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Microplan Found"}),n.jsxs("p",{className:"text-muted-foreground mb-6",children:["Generate a personalized learning plan for ",new Date(d).toLocaleDateString()]}),n.jsx(z,{onClick:f,disabled:c,size:"lg",children:c?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(An,{className:"h-4 w-4 mr-2"}),"Generate Microplan"]})})]})})]})})]})},Ute=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState([]),[o,l]=p.useState([]),[c,u]=p.useState(!0),[d,h]=p.useState(""),[m,f]=p.useState("all"),[x,g]=p.useState("all"),[y,b]=p.useState(null);p.useState(new Set);const[v,w]=p.useState("hierarchy");p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{e&&(k(),S())},[e,m,x,y]);const S=async()=>{if(e)try{const M=await pe.admin.getContentFolders({subject:m!=="all"?m:void 0});l(M||[])}catch(M){console.error("Error fetching folders:",M)}},k=async()=>{if(e){u(!0);try{if(y){const M=o.find(se=>se.id===y),I=await pe.admin.getContentByFolder({folder_path:M==null?void 0:M.folder_path,subject:m!=="all"?m:void 0,limit:50});i(I.content||[])}else{let M=st.from("content").select("*").order("created_at",{ascending:!1}).limit(50);m!=="all"&&(M=M.eq("subject",m)),x!=="all"&&(M=M.eq("type",x));const{data:I,error:se}=await M;if(se)throw se;i(I||[])}}catch(M){console.error("Error fetching content:",M),s({variant:"destructive",title:"Error",description:"Failed to load content"})}finally{u(!1)}}},N=a.filter(M=>{var se,ee,Y;if(!d)return!0;const I=d.toLowerCase();return((se=M.title)==null?void 0:se.toLowerCase().includes(I))||((ee=M.content_text)==null?void 0:ee.toLowerCase().includes(I))||((Y=M.chapter)==null?void 0:Y.toLowerCase().includes(I))}),P=M=>{switch(M){case"ncert":return"bg-blue-500/10 text-blue-500 border-blue-500/20";case"pyq":return"bg-green-500/10 text-green-500 border-green-500/20";case"hots":return"bg-purple-500/10 text-purple-500 border-purple-500/20";default:return"bg-gray-500/10 text-gray-500 border-gray-500/20"}},T=M=>{switch(M){case"ncert":return"NCERT";case"pyq":return"PYQ";case"hots":return"HOTS";default:return(M==null?void 0:M.toUpperCase())||"Content"}},A=M=>new Date(M).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),E=(M,I=150)=>M?M.length<=I?M:M.substring(0,I)+"...":"";return t||c?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(yn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Content Library"}),n.jsx("p",{className:"text-muted-foreground",children:"Browse and access all available learning content"})]}),n.jsxs(ae,{className:"mb-6",children:[n.jsx(he,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(Ih,{className:"h-5 w-5"}),"Filters"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(z,{variant:v==="hierarchy"?"default":"outline",size:"sm",onClick:()=>w("hierarchy"),children:[n.jsx(Cv,{className:"h-4 w-4 mr-2"}),"Hierarchy"]}),n.jsxs(z,{variant:v==="list"?"default":"outline",size:"sm",onClick:()=>w("list"),children:[n.jsx(or,{className:"h-4 w-4 mr-2"}),"List"]})]})]})}),n.jsx(ie,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx("div",{className:"md:col-span-2",children:n.jsxs("div",{className:"relative",children:[n.jsx(zi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(Ve,{placeholder:"Search content...",value:d,onChange:M=>h(M.target.value),className:"pl-10"})]})}),n.jsxs(Nt,{value:m,onValueChange:f,children:[n.jsx(wt,{children:n.jsx(St,{placeholder:"All Subjects"})}),n.jsxs(jt,{children:[n.jsx(re,{value:"all",children:"All Subjects"}),n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]}),n.jsxs(Nt,{value:x,onValueChange:g,children:[n.jsx(wt,{children:n.jsx(St,{placeholder:"All Types"})}),n.jsxs(jt,{children:[n.jsx(re,{value:"all",children:"All Types"}),n.jsx(re,{value:"ncert",children:"NCERT"}),n.jsx(re,{value:"pyq",children:"PYQ"}),n.jsx(re,{value:"hots",children:"HOTS"})]})]})]})})]}),v==="hierarchy"&&o.length>0&&n.jsxs(ae,{className:"mb-6",children:[n.jsx(he,{children:n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(OO,{className:"h-5 w-5"}),"Content Folders"]})}),n.jsx(ie,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs(z,{variant:y===null?"default":"ghost",className:"w-full justify-start",onClick:()=>b(null),children:[n.jsx(Jt,{className:"h-4 w-4 mr-2"}),"All Content"]}),o.map(M=>n.jsx("div",{className:"pl-4",children:n.jsxs(z,{variant:y===M.id?"default":"ghost",className:"w-full justify-start",onClick:()=>b(M.id),children:[n.jsx(Cv,{className:"h-4 w-4 mr-2"}),M.name,M.class_grade&&n.jsxs(je,{variant:"outline",className:"ml-2",children:["Class ",M.class_grade]})]})},M.id))]})})]}),N.length===0?n.jsx(ae,{children:n.jsxs(ie,{className:"py-12 text-center",children:[n.jsx(Jt,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Content Found"}),n.jsx("p",{className:"text-muted-foreground",children:d||m!=="all"||x!=="all"?"Try adjusting your filters":"No content has been uploaded yet"})]})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(M=>n.jsxs(ae,{className:"hover:shadow-lg transition-shadow",children:[n.jsxs(he,{children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx(je,{className:P(M.type),children:T(M.type)}),M.difficulty&&n.jsx(je,{variant:"outline",className:"text-xs",children:M.difficulty})]}),n.jsx(fe,{className:"text-lg line-clamp-2",children:M.title||`${T(M.type)} Content`}),n.jsxs(ze,{className:"flex items-center gap-4 text-xs",children:[n.jsx("span",{className:"capitalize",children:M.subject}),M.chapter&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsx("span",{children:M.chapter})]}),M.class_grade&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsxs("span",{children:["Class ",M.class_grade]})]}),M.folder_path&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsx("span",{className:"text-xs text-muted-foreground truncate max-w-[100px]",children:M.folder_path.split("/").pop()})]})]})]}),n.jsxs(ie,{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-3",children:E(M.content_text)}),n.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground mb-4",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(As,{className:"h-3 w-3"}),n.jsx("span",{children:A(M.created_at)})]}),M.topic_id&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(UO,{className:"h-3 w-3"}),n.jsx("span",{children:"Topic"})]})]}),n.jsxs(z,{variant:"outline",className:"w-full",onClick:()=>r(`/dashboard/student/content/${M.id}`),children:[n.jsx(Kn,{className:"h-4 w-4 mr-2"}),"View Content"]})]})]},M.id))}),n.jsx(ae,{className:"mt-6",children:n.jsx(ie,{className:"py-4",children:n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("span",{className:"text-muted-foreground",children:["Showing ",N.length," of ",a.length," content items"]}),a.length>=50&&n.jsx("span",{className:"text-muted-foreground",children:"Showing first 50 results"})]})})})]})})]})},Vte=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{contentId:s}=Zl(),{toast:a}=Ut(),[i,o]=p.useState(null),[l,c]=p.useState(!0),[u,d]=p.useState(null),[h,m]=p.useState(null),[f,x]=p.useState("pending"),[g,y]=p.useState(null),[b,v]=p.useState([]),[w,S]=p.useState(!1),[k,N]=p.useState([]),[P,T]=p.useState(""),[A,E]=p.useState(!1),[M,I]=p.useState(null),[se,ee]=p.useState(!1);p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{e&&s&&Y()},[e,s]);const Y=async()=>{if(!(!s||!e)){c(!0);try{try{const B=await pe.admin.openContent({content_id:s,user_id:e.id,trigger_processing:!0});m(B),o(B.content),x(B.processing_status||"pending"),y(B.rag_insights),B.processing_status==="processing"&&F()}catch(B){console.log("API openContent failed, falling back to direct fetch:",B);const{data:W,error:K}=await st.from("content").select("*").eq("id",s).single();if(K)throw K;o(W),x(W.processing_status||"pending")}try{const B=await pe.admin.previewContent(s);d(B)}catch(B){console.log("Preview not available:",B)}}catch(B){console.error("Error fetching content:",B),a({variant:"destructive",title:"Error",description:"Failed to load content"}),r("/dashboard/student/content")}finally{c(!1)}}},F=async()=>{const B=setInterval(async()=>{if(!s||!e){clearInterval(B);return}try{const W=await pe.admin.openContent({content_id:s,user_id:e.id,trigger_processing:!1});x(W.processing_status||"pending"),y(W.rag_insights),(W.processing_status==="completed"||W.processing_status==="failed")&&clearInterval(B)}catch(W){console.error("Error polling processing status:",W)}},3e3);setTimeout(()=>clearInterval(B),12e4)},ne=B=>{switch(B){case"ncert":return"bg-blue-500/10 text-blue-500 border-blue-500/20";case"pyq":return"bg-green-500/10 text-green-500 border-green-500/20";case"hots":return"bg-purple-500/10 text-purple-500 border-purple-500/20";default:return"bg-gray-500/10 text-gray-500 border-gray-500/20"}},q=B=>{switch(B){case"ncert":return"NCERT";case"pyq":return"Previous Year Question";case"hots":return"HOTS Question";default:return(B==null?void 0:B.toUpperCase())||"Content"}},V=B=>new Date(B).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),_=async()=>{if(!(!i||w)){S(!0);try{const B=`Generate 5 important questions based on this educational content:

Title: ${i.title||"Content"}
Subject: ${i.subject}
${i.chapter?`Chapter: ${i.chapter}`:""}
Content: ${(i.content_text||"").substring(0,2e3)}

Generate questions that test understanding of key concepts. Format as JSON array with question and explanation fields.`,K=(await pe.rag.query({query:B,subject:i.subject,top_k:3})).generated_text||"",X=U(K);v(X),a({title:"Questions Generated",description:"AI has generated questions based on this content"})}catch{a({variant:"destructive",title:"Error",description:"Failed to generate questions"})}finally{S(!1)}}},U=B=>{const W=[],K=/(?:Q\d+|Question\s+\d+|^\d+[\.\)])\s*[:\-]?\s*(.+?)(?=(?:Q\d+|Question\s+\d+|^\d+[\.\)])|$)/gis;return[...B.matchAll(K)].forEach((de,oe)=>{var Ee;const me=(Ee=de[1])==null?void 0:Ee.trim();me&&me.length>10&&W.push({id:`q${oe+1}`,question:me,explanation:"This question tests understanding of key concepts from the content."})}),W.length===0&&B.split(/\n\n+/).filter(oe=>oe.trim().length>20).slice(0,5).forEach((oe,me)=>{W.push({id:`q${me+1}`,question:oe.trim(),explanation:"Generated question based on content"})}),W.slice(0,5)},H=async()=>{if(!(!i||se)){ee(!0);try{const B=`Provide a comprehensive summary of this educational content:

Title: ${i.title||"Content"}
Subject: ${i.subject}
${i.chapter?`Chapter: ${i.chapter}`:""}
Content: ${(i.content_text||"").substring(0,3e3)}

Create a well-structured summary highlighting:
1. Main topics covered
2. Key concepts
3. Important points
4. Learning objectives`,W=await pe.rag.query({query:B,subject:i.subject,top_k:5});I(W.generated_text||"Summary not available"),a({title:"Summary Generated",description:"AI has generated a summary of this content"})}catch{a({variant:"destructive",title:"Error",description:"Failed to generate summary"})}finally{ee(!1)}}},O=async()=>{if(!P.trim()||!i||A)return;const B=P;N(W=>[...W,{role:"user",content:B}]),T(""),E(!0);try{const W=`You are an AI tutor helping a student understand this content:

Title: ${i.title||"Educational Content"}
Subject: ${i.subject}
${i.chapter?`Chapter: ${i.chapter}`:""}
Content Preview: ${(i.content_text||"").substring(0,2e3)}

Student's question: ${B}

Provide a helpful, clear explanation.`,K=await pe.rag.query({query:W,subject:i.subject,top_k:5});N(X=>[...X,{role:"assistant",content:K.generated_text||"I'm here to help!"}])}catch{N(K=>[...K,{role:"assistant",content:"Sorry, I encountered an error. Please try again."}])}finally{E(!1)}};return t||l?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):i?n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(yn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs(z,{variant:"ghost",onClick:()=>r("/dashboard/student/content"),className:"mb-6",children:[n.jsx(uu,{className:"h-4 w-4 mr-2"}),"Back to Library"]}),n.jsx(ae,{className:"mb-6",children:n.jsxs(he,{children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsx(je,{className:ne(i.type),children:q(i.type)}),i.difficulty&&n.jsx(je,{variant:"outline",children:i.difficulty})]}),n.jsx(fe,{className:"text-2xl mb-2",children:i.title||`${q(i.type)} Content`}),n.jsxs(ze,{className:"flex items-center gap-4",children:[n.jsx("span",{className:"capitalize font-medium",children:i.subject}),i.chapter&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsx("span",{children:i.chapter})]}),n.jsx("span",{children:""}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(As,{className:"h-4 w-4"}),n.jsx("span",{children:V(i.created_at)})]})]})]})}),f&&f!=="completed"&&n.jsx(ae,{className:"mb-6",children:n.jsx(ie,{className:"pt-6",children:n.jsx("div",{className:"flex items-center gap-3",children:f==="processing"?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-5 w-5 animate-spin text-blue-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Processing PDF with AI..."}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Extracting text, generating embeddings, and indexing content for better understanding"})]})]}):f==="failed"?n.jsxs(n.Fragment,{children:[n.jsx(Hs,{className:"h-5 w-5 text-red-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-red-500",children:"Processing Failed"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Unable to process PDF. Please try again later."})]})]}):n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-5 w-5 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Processing Pending"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"PDF will be processed when you open it"})]})]})})})}),g&&f==="completed"&&n.jsxs(ae,{className:"mb-6 border-blue-200 dark:border-blue-800",children:[n.jsxs(he,{children:[n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(vr,{className:"h-5 w-5 text-blue-500"}),"AI-Powered Insights"]}),n.jsx(ze,{children:"Key concepts and important points extracted using AI"})]}),n.jsxs(ie,{children:[n.jsx("div",{className:"prose prose-sm max-w-none dark:prose-invert",children:n.jsx("p",{className:"text-sm leading-relaxed",children:g.summary})}),n.jsxs("div",{className:"mt-4 flex items-center gap-4 text-xs text-muted-foreground",children:[n.jsxs("span",{children:["Confidence: ",(g.confidence*100).toFixed(0),"%"]}),n.jsx("span",{children:""}),n.jsxs("span",{children:[g.sources_count," sources analyzed"]})]})]})]}),h!=null&&h.file_url&&h.file_type==="pdf"?n.jsxs(ae,{className:"mb-6",children:[n.jsx(he,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(fe,{children:"PDF Document"}),n.jsxs("div",{className:"flex items-center gap-2",children:[f==="completed"&&n.jsxs(je,{variant:"outline",className:"text-green-600 border-green-600",children:[n.jsx(Qt,{className:"h-3 w-3 mr-1"}),"Processed"]}),n.jsxs(z,{variant:"outline",size:"sm",onClick:()=>window.open(h.file_url,"_blank"),children:[n.jsx(rh,{className:"h-4 w-4 mr-2"}),"Download"]})]})]})}),n.jsx(ie,{children:n.jsx("div",{className:"w-full h-[600px] border rounded-lg overflow-hidden",children:n.jsx("iframe",{src:h.file_url,className:"w-full h-full",title:"PDF Viewer"})})})]}):n.jsxs(ae,{children:[n.jsx(he,{children:n.jsx(fe,{children:"Content"})}),n.jsx(ie,{children:n.jsx("div",{className:"prose prose-sm max-w-none dark:prose-invert",children:n.jsx("pre",{className:"whitespace-pre-wrap font-sans text-sm bg-muted p-4 rounded-lg",children:i.content_text})})})]}),u&&u.chunks&&u.chunks.length>0&&n.jsxs(ae,{className:"mt-6",children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Content Chunks"}),n.jsx(ze,{children:"How this content is split for AI retrieval"})]}),n.jsx(ie,{children:n.jsx("div",{className:"space-y-4",children:u.chunks.map((B,W)=>{var K;return n.jsxs("div",{className:"p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs(je,{variant:"outline",className:"text-xs",children:["Chunk ",W+1]}),((K=B.metadata)==null?void 0:K.chunk_index)!==void 0&&n.jsxs("span",{className:"text-xs text-muted-foreground",children:["Index: ",B.metadata.chunk_index]})]}),n.jsx("p",{className:"text-sm",children:B.text})]},W)})})})]}),n.jsxs(ae,{className:"mt-6 border-2 border-primary/20 bg-gradient-to-br from-background to-primary/5",children:[n.jsxs(he,{children:[n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(Di,{className:"h-6 w-6 text-primary"}),"AI-Powered Learning Assistant"]}),n.jsx(ze,{children:"Get AI-generated questions, summaries, and ask questions about this content"})]}),n.jsx(ie,{children:n.jsxs(Zs,{defaultValue:"summary",className:"w-full",children:[n.jsxs(Ps,{className:"grid w-full grid-cols-3",children:[n.jsxs(gr,{value:"summary",className:"flex items-center gap-2",children:[n.jsx(or,{className:"h-4 w-4"}),"Summary"]}),n.jsxs(gr,{value:"questions",className:"flex items-center gap-2",children:[n.jsx(da,{className:"h-4 w-4"}),"Questions"]}),n.jsxs(gr,{value:"chat",className:"flex items-center gap-2",children:[n.jsx(Fl,{className:"h-4 w-4"}),"Ask AI"]})]}),n.jsx(Er,{value:"summary",className:"mt-4",children:M?n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"prose prose-sm max-w-none dark:prose-invert bg-muted/50 p-4 rounded-lg",children:n.jsx(tr,{remarkPlugins:[rr],children:M})}),n.jsx(z,{variant:"outline",onClick:H,disabled:se,size:"sm",children:"Regenerate Summary"})]}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(or,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Generate an AI-powered summary of this content"}),n.jsx(z,{onClick:H,disabled:se,className:"bg-gradient-to-r from-primary to-primary/90",children:se?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(vr,{className:"h-4 w-4 mr-2"}),"Generate Summary"]})})]})}),n.jsx(Er,{value:"questions",className:"mt-4",children:b.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(da,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Generate AI-powered questions to test your understanding"}),n.jsx(z,{onClick:_,disabled:w,className:"bg-gradient-to-r from-primary to-primary/90",children:w?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(vr,{className:"h-4 w-4 mr-2"}),"Generate Questions"]})})]}):n.jsxs("div",{className:"space-y-4",children:[b.map((B,W)=>n.jsxs(ae,{children:[n.jsx(he,{children:n.jsxs(fe,{className:"text-base",children:["Question ",W+1]})}),n.jsxs(ie,{children:[n.jsx("p",{className:"text-sm mb-3",children:B.question}),B.explanation&&n.jsx("div",{className:"p-3 bg-muted rounded-lg",children:n.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.jsx("strong",{children:"Note:"})," ",B.explanation]})})]})]},B.id)),n.jsx(z,{variant:"outline",onClick:_,disabled:w,size:"sm",className:"w-full",children:"Generate New Questions"})]})}),n.jsx(Er,{value:"chat",className:"mt-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx(Pn,{className:"h-[300px] border rounded-lg p-4",children:k.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Fl,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"Ask questions about this content"})]}):n.jsxs("div",{className:"space-y-4",children:[k.map((B,W)=>n.jsx("div",{className:`flex ${B.role==="user"?"justify-end":"justify-start"}`,children:n.jsx("div",{className:`max-w-[80%] rounded-lg p-3 ${B.role==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:B.role==="assistant"?n.jsx("div",{className:"text-sm prose prose-sm dark:prose-invert max-w-none",children:n.jsx(tr,{remarkPlugins:[rr],children:B.content})}):n.jsx("p",{className:"text-sm",children:B.content})})},W)),A&&n.jsx("div",{className:"flex justify-start",children:n.jsx("div",{className:"bg-muted rounded-lg p-3",children:n.jsx(Oe,{className:"h-4 w-4 animate-spin"})})})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Ve,{placeholder:"Ask about this content...",value:P,onChange:B=>T(B.target.value),onKeyPress:B=>{B.key==="Enter"&&!B.shiftKey&&(B.preventDefault(),O())},disabled:A}),n.jsx(z,{onClick:O,disabled:!P.trim()||A,className:"bg-gradient-to-r from-primary to-primary/90",children:n.jsx($i,{className:"h-4 w-4"})})]})]})})]})})]}),i.metadata&&Object.keys(i.metadata).length>0&&n.jsxs(ae,{className:"mt-6",children:[n.jsx(he,{children:n.jsx(fe,{children:"Additional Information"})}),n.jsx(ie,{children:n.jsx("div",{className:"space-y-2",children:Object.entries(i.metadata).map(([B,W])=>n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{className:"text-sm font-medium capitalize",children:[B.replace(/_/g," "),":"]}),n.jsx("span",{className:"text-sm text-muted-foreground",children:String(W)})]},B))})})]})]})})]}):n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(or,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Content Not Found"}),n.jsx(z,{onClick:()=>r("/dashboard/student/content"),children:"Back to Library"})]})})};var Fp="Dialog",[aT,iT]=On(Fp),[Hte,$a]=aT(Fp),oT=e=>{const{__scopeDialog:t,children:r,open:s,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=p.useRef(null),c=p.useRef(null),[u,d]=ai({prop:s,defaultProp:a??!1,onChange:i,caller:Fp});return n.jsx(Hte,{scope:t,triggerRef:l,contentRef:c,contentId:ri(),titleId:ri(),descriptionId:ri(),open:u,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),modal:o,children:r})};oT.displayName=Fp;var lT="DialogTrigger",cT=p.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=$a(lT,r),i=Yt(t,a.triggerRef);return n.jsx(_t.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Tw(a.open),...s,ref:i,onClick:Ze(e.onClick,a.onOpenToggle)})});cT.displayName=lT;var Cw="DialogPortal",[Wte,uT]=aT(Cw,{forceMount:void 0}),dT=e=>{const{__scopeDialog:t,forceMount:r,children:s,container:a}=e,i=$a(Cw,t);return n.jsx(Wte,{scope:t,forceMount:r,children:p.Children.map(s,o=>n.jsx($n,{present:r||i.open,children:n.jsx(Rh,{asChild:!0,container:a,children:o})}))})};dT.displayName=Cw;var kf="DialogOverlay",hT=p.forwardRef((e,t)=>{const r=uT(kf,e.__scopeDialog),{forceMount:s=r.forceMount,...a}=e,i=$a(kf,e.__scopeDialog);return i.modal?n.jsx($n,{present:s||i.open,children:n.jsx(Qte,{...a,ref:t})}):null});hT.displayName=kf;var Gte=Dl("DialogOverlay.RemoveScroll"),Qte=p.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=$a(kf,r);return n.jsx(dp,{as:Gte,allowPinchZoom:!0,shards:[a.contentRef],children:n.jsx(_t.div,{"data-state":Tw(a.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Gl="DialogContent",mT=p.forwardRef((e,t)=>{const r=uT(Gl,e.__scopeDialog),{forceMount:s=r.forceMount,...a}=e,i=$a(Gl,e.__scopeDialog);return n.jsx($n,{present:s||i.open,children:i.modal?n.jsx(Yte,{...a,ref:t}):n.jsx(Kte,{...a,ref:t})})});mT.displayName=Gl;var Yte=p.forwardRef((e,t)=>{const r=$a(Gl,e.__scopeDialog),s=p.useRef(null),a=Yt(t,r.contentRef,s);return p.useEffect(()=>{const i=s.current;if(i)return Nb(i)},[]),n.jsx(fT,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ze(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ze(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:Ze(e.onFocusOutside,i=>i.preventDefault())})}),Kte=p.forwardRef((e,t)=>{const r=$a(Gl,e.__scopeDialog),s=p.useRef(!1),a=p.useRef(!1);return n.jsx(fT,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(s.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),fT=p.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=$a(Gl,r),c=p.useRef(null),u=Yt(t,c);return jb(),n.jsxs(n.Fragment,{children:[n.jsx(lp,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:i,children:n.jsx(Ou,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Tw(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(Xte,{titleId:l.titleId}),n.jsx(ere,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Ew="DialogTitle",pT=p.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=$a(Ew,r);return n.jsx(_t.h2,{id:a.titleId,...s,ref:t})});pT.displayName=Ew;var xT="DialogDescription",gT=p.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=$a(xT,r);return n.jsx(_t.p,{id:a.descriptionId,...s,ref:t})});gT.displayName=xT;var vT="DialogClose",yT=p.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=$a(vT,r);return n.jsx(_t.button,{type:"button",...s,ref:t,onClick:Ze(e.onClick,()=>a.onOpenChange(!1))})});yT.displayName=vT;function Tw(e){return e?"open":"closed"}var bT="DialogTitleWarning",[Jte,wT]=PM(bT,{contentName:Gl,titleName:Ew,docsSlug:"dialog"}),Xte=({titleId:e})=>{const t=wT(bT),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},Zte="DialogDescriptionWarning",ere=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${wT(Zte).contentName}}.`;return p.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},Aw=oT,Pw=cT,Rw=dT,Gh=hT,Qh=mT,Yh=pT,Kh=gT,Lp=yT;const un=Aw,ud=Pw,tre=Rw,jT=p.forwardRef(({className:e,...t},r)=>n.jsx(Gh,{ref:r,className:qe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));jT.displayName=Gh.displayName;const tn=p.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(tre,{children:[n.jsx(jT,{}),n.jsxs(Qh,{ref:s,className:qe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,n.jsxs(Lp,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[n.jsx(_s,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));tn.displayName=Qh.displayName;const rn=({className:e,...t})=>n.jsx("div",{className:qe("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});rn.displayName="DialogHeader";const Fn=({className:e,...t})=>n.jsx("div",{className:qe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Fn.displayName="DialogFooter";const nn=p.forwardRef(({className:e,...t},r)=>n.jsx(Yh,{ref:r,className:qe("text-lg font-semibold leading-none tracking-tight",e),...t}));nn.displayName=Yh.displayName;const xn=p.forwardRef(({className:e,...t},r)=>n.jsx(Kh,{ref:r,className:qe("text-sm text-muted-foreground",e),...t}));xn.displayName=Kh.displayName;const rre=({selectedText:e,position:t,onClose:r,onExplain:s,onTranslate:a,onBetterExplain:i,onSave:o})=>{const{toast:l}=Ut(),[c,u]=p.useState(null),[d,h]=p.useState(""),[m,f]=p.useState(!1),[x,g]=p.useState(!1),y=async(v,w)=>{u(v),f(!0),h("");try{const S=await w(e);h(S)}catch(S){h(`Error: ${S.message||"Failed to process request"}`)}finally{f(!1)}},b=async()=>{if(d){f(!0);try{await o(e,d,c||"explain"),g(!0),l({title:"Saved",description:"Explanation saved successfully"})}catch(v){l({variant:"destructive",title:"Error",description:v.message||"Failed to save"})}finally{f(!1)}}};return n.jsxs("div",{className:"fixed z-50 bg-background border rounded-lg shadow-lg p-4 min-w-[400px] max-w-[600px]",style:{left:`${Math.min(t.x,window.innerWidth-420)}px`,top:`${Math.min(t.y,window.innerHeight-300)}px`},children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"font-semibold text-sm",children:"Selected Text"}),n.jsx(z,{variant:"ghost",size:"sm",onClick:r,children:n.jsx(_s,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"mb-3 p-2 bg-muted rounded text-sm max-h-24 overflow-y-auto",children:['"',e.substring(0,100),e.length>100?"...":"",'"']}),n.jsxs("div",{className:"flex gap-2 mb-3",children:[n.jsxs(z,{variant:c==="explain"?"default":"outline",size:"sm",onClick:()=>y("explain",s),disabled:m,children:[n.jsx(Jt,{className:"h-4 w-4 mr-1"}),"Explain"]}),n.jsxs(z,{variant:c==="translate"?"default":"outline",size:"sm",onClick:()=>y("translate",a),disabled:m,children:[n.jsx(nh,{className:"h-4 w-4 mr-1"}),"Translate"]}),n.jsxs(z,{variant:c==="better"?"default":"outline",size:"sm",onClick:()=>y("better",i),disabled:m,children:[n.jsx(vr,{className:"h-4 w-4 mr-1"}),"Better Way"]})]}),m&&n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(Oe,{className:"h-6 w-6 animate-spin text-primary"})}),d&&!m&&n.jsxs(ae,{className:"mt-3",children:[n.jsx(he,{className:"pb-2",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(fe,{className:"text-sm flex items-center gap-2",children:n.jsxs(je,{variant:"secondary",children:[c==="explain"&&"Explanation",c==="translate"&&"Translation",c==="better"&&"Better Explanation"]})}),!x&&n.jsxs(z,{variant:"ghost",size:"sm",onClick:b,disabled:m,children:[n.jsx(ti,{className:"h-4 w-4 mr-1"}),"Save"]})]})}),n.jsx(ie,{children:n.jsx(Pn,{className:"h-[200px]",children:n.jsx("p",{className:"text-sm whitespace-pre-wrap",children:d})})})]})]})},HN=(e,t)=>{var i,o;let r=[],s=0,a=t;if(e.sources&&Array.isArray(e.sources)?(r=e.sources.map(l=>{var c,u,d;return{id:l.id||l.chunk_id||l.content_id,type:l.type||l.source_type||((c=l.metadata)==null?void 0:c.type),subject:l.subject,chapter:l.chapter||((u=l.metadata)==null?void 0:u.chapter),similarity:l.similarity||l.similarity_score,title:l.title||((d=l.metadata)==null?void 0:d.title)}}),s=e.sources.length):e.contexts&&Array.isArray(e.contexts)?(r=e.contexts.map(l=>{var c,u,d;return{id:l.content_id||l.chunk_id,type:l.source_type||((c=l.metadata)==null?void 0:c.type),subject:l.subject,chapter:(u=l.metadata)==null?void 0:u.chapter,similarity:l.similarity_score,title:(d=l.metadata)==null?void 0:d.title}}),s=e.contexts.length):(i=e.metadata)!=null&&i.sources&&Array.isArray(e.metadata.sources)?(r=e.metadata.sources,s=e.metadata.sources.length):(o=e.metadata)!=null&&o.chunks_retrieved&&(s=e.metadata.chunks_retrieved),t){const l=t.match(/Based on (\d+) relevant content section/i);if(l){const d=parseInt(l[1],10);d>s&&(s=d)}const c=[];if(t.split(`
`).forEach(d=>{const h=d.trim(),m=/^\[Source \d+\]\s*\(([^)]+)\)/i,f=/^(\w+)\s*-\s*([^-]+)$/i,x=h.match(m),g=h.match(f);if(x)c.push(x[1]);else if(g){const[,y,b]=g;y.length>=3&&b.trim().length>=3&&c.push(h)}}),c.length>0){const d=new Map;if(c.forEach(h=>{const m=h.split(/\s*-\s*/);if(m.length>=2){const f=m[0].trim().toLowerCase(),x=m.slice(1).join(" - ").trim();if(f.length>2&&x.length>2){const g=`${f}-${x}`;d.has(g)||d.set(g,{type:f,chapter:x})}}}),d.size>0){const h=Array.from(d.values());r=[...r,...h],s||(s=h.length)}}c.length>0&&(a=t.split(`
`).filter(d=>{const h=d.trim(),m=/^\[Source \d+\]\s*\(([^)]+)\)/i.test(h)||/^(\w+)\s*-\s*([^-]+)$/i.test(h),f=/^Sources?:\s*$/i.test(h);return!m&&!f}).join(`
`).trim(),a=a.replace(/^\s*Based on \d+ relevant content sections? from the curriculum\.?\s*$/gmi,"").trim())}return{sources:r,sourcesCount:s,cleanedContent:a}},nre=()=>{var Hw,Ww,Gw;const{user:e,loading:t}=Wt(),r=Gt(),[s]=yz(),{toast:a}=Ut(),[i,o]=p.useState(s.get("subject")||"mathematics"),[l,c]=p.useState(""),[u,d]=p.useState([]),[h,m]=p.useState(null),[f,x]=p.useState(null),[g,y]=p.useState([]),[b,v]=p.useState(!1),[w,S]=p.useState([]),[k,N]=p.useState(!1),[P,T]=p.useState(!1),[A,E]=p.useState("pdf"),[M,I]=p.useState(!1),[se,ee]=p.useState(!0),[Y,F]=p.useState(""),[ne,q]=p.useState({x:0,y:0}),[V,_]=p.useState(!1),[U,H]=p.useState(!1),[O,B]=p.useState(null),[W,K]=p.useState(0),[X,de]=p.useState(0),[oe,me]=p.useState(!1),[Ee,we]=p.useState(50),[Le,_e]=p.useState(!1),[ut,at]=p.useState(0),[Ct,L]=p.useState(0),[ke,ot]=p.useState(null),[ct,$]=p.useState(!1),[Ne,dt]=p.useState([]),[zt,ue]=p.useState("chat"),[G,ye]=p.useState([]),[Me,De]=p.useState(""),[He,ve]=p.useState(!1),[Be,pt]=p.useState(!1),gt=p.useRef(null),[Ft,ge]=p.useState([]),[J,Ae]=p.useState(""),[Fe,Pe]=p.useState(!1),Ie=p.useRef(null),[ht,Ye]=p.useState([]),[lt,xt]=p.useState(!1),[Et,Zt]=p.useState(!1),[dr,pr]=p.useState(""),[nr,Lt]=p.useState(null),[wn,En]=p.useState(!1);p.useState(!1),p.useState(0),p.useRef(null),p.useRef([]),p.useRef(null),p.useState(localStorage.getItem("preferred_language")||"en"),p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{e&&i&&(HA(),WA())},[e,i]),p.useEffect(()=>{l&&GA()},[l]),p.useEffect(()=>{f&&m(f)},[f]),p.useEffect(()=>{(f||h)&&U&&zt==="chat"&&YA()},[f==null?void 0:f.id,h==null?void 0:h.id,U,zt,A]),p.useEffect(()=>{(f||h)&&U&&zt==="wolfram"&&ht.length===0&&JA()},[f==null?void 0:f.id,h==null?void 0:h.id,U,zt,A]),p.useEffect(()=>{var Q;(Q=gt.current)==null||Q.scrollIntoView({behavior:"smooth"})},[G]),p.useEffect(()=>{var Q;(Q=Ie.current)==null||Q.scrollIntoView({behavior:"smooth"})},[Ft]),p.useEffect(()=>{if(!U||!O)return;const Q=setInterval(()=>{const ce=Math.floor((new Date().getTime()-O.getTime())/1e3);K(ce)},1e3);return()=>clearInterval(Q)},[U,O]);const Cr=()=>{H(!0),B(new Date),de(0),at(0),L(0),a({title:"Session Started",description:"Your study session has begun. Progress will be tracked automatically."})};p.useEffect(()=>{const Q=ce=>{ce.preventDefault(),ce.returnValue="",me(!0)};return window.addEventListener("beforeunload",Q),()=>window.removeEventListener("beforeunload",Q)},[]);const es=p.useCallback(()=>{U&&setTimeout(()=>{const Q=window.getSelection();let ce="",Te=null;if(Q&&Q.toString().trim().length>0&&(ce=Q.toString().trim(),ce.length>=3))try{Te=Q.getRangeAt(0).getBoundingClientRect()}catch{}if(A==="pdf")try{const Ce=document.querySelector('iframe[title="Content PDF"]');if(Ce){try{if(Ce.contentWindow&&Ce.contentDocument){const Ue=Ce.contentWindow.getSelection();if(Ue&&Ue.toString().trim().length>0){const Ge=Ue.toString().trim();if(Ge.length>=3){ce=Ge;try{const et=Ue.getRangeAt(0).getBoundingClientRect(),$t=Ce.getBoundingClientRect();Te=new DOMRect($t.left+et.left,$t.top+et.top,et.width,et.height)}catch{const et=Ce.getBoundingClientRect();Te=new DOMRect(et.left+et.width/2,et.top+et.height/2,0,0)}}}}}catch{}if((!ce||ce.length<3)&&Ce.contentWindow)try{const Ue=Ce.contentWindow;if(Ue.getSelection){const Ge=Ue.getSelection();if(Ge&&Ge.toString&&Ge.toString().trim().length>0){const At=Ge.toString().trim();if(At.length>=3){ce=At;const et=Ce.getBoundingClientRect();Te=new DOMRect(et.left+et.width/2,et.top+100,0,0)}}}}catch(Ue){console.debug("Cannot access iframe selection due to CORS:",Ue)}}}catch(Ce){console.debug("Iframe selection access restricted (CORS):",Ce)}if(ce&&ce.length>=3){if(F(ce),Te)q({x:Te.left+Te.width/2,y:Te.top-10});else{const Ce=A==="pdf"?document.querySelector('iframe[title="Content PDF"]'):null;if(Ce){const Ue=Ce.getBoundingClientRect();q({x:Ue.left+Ue.width/2,y:Ue.top+100})}else q({x:window.innerWidth/2,y:window.innerHeight/2})}_(!0),L(Ce=>Ce+1)}else ce||_(!1)},50)},[A,U]);p.useEffect(()=>{if(U&&(f||h)){document.addEventListener("mouseup",es),document.addEventListener("selectionchange",es);const Q=At=>{A==="pdf"&&U&&setTimeout(()=>{es()},50)},ce=At=>{var et,$t;if(A==="pdf"&&U){const hr=((et=window.getSelection())==null?void 0:et.toString().trim())||((($t=At.clipboardData)==null?void 0:$t.getData("text/plain"))||"").trim();if(hr&&hr.length>=3){const It=At;F(hr),q({x:It.clientX||window.innerWidth/2,y:(It.clientY||window.innerHeight/2)-50}),_(!0),L(bt=>bt+1)}}};let Te=null,Ce=null,Ue=0,Ge=null;return A==="pdf"&&(Te=document.querySelector("div.flex-1.overflow-y-auto.overflow-x-hidden.min-h-0.relative"),Te&&(Ge=et=>{Ue=Date.now(),setTimeout(()=>{es()},150)},Te.addEventListener("mouseup",Ge,!0),Ce=setInterval(()=>{A==="pdf"&&U&&Date.now()-Ue<2e3&&es()},300))),document.addEventListener("dblclick",Q),document.addEventListener("copy",ce),()=>{document.removeEventListener("mouseup",es),document.removeEventListener("selectionchange",es),document.removeEventListener("dblclick",Q),document.removeEventListener("copy",ce),Te&&Ge&&Te.removeEventListener("mouseup",Ge,!0),Ce&&clearInterval(Ce)}}},[U,f,h,A,es]),p.useEffect(()=>{if(!U||!f&&!h)return;const Q=Math.min(40,Math.floor(W/60)),ce=Math.min(25,Ne.length*5),Te=Math.min(20,Ct*2),Ce=Math.min(15,ut*3),Ue=Math.min(100,Q+ce+Te+Ce);de(Ue)},[U,W,Ne.length,Ct,ut,f,h]);const mn=async Q=>{const ce=f||h;if(!(ce&&ta(ce)&&A==="pdf"))throw new Error("Please open a PDF content to use this feature.");try{return(await pe.rag.query({query:`Explain this text from the PDF in detail: ${Q}`,subject:i,top_k:5})).generated_text||"Could not generate explanation."}catch(Ce){throw new Error(Ce.message||"Failed to explain text")}},fs=async Q=>{const ce=f||h;if(!(ce&&ta(ce)&&A==="pdf"))throw new Error("Please open a PDF content to use this feature.");try{return(await pe.rag.query({query:`Translate this text from the PDF to Hindi and provide explanation: ${Q}`,subject:i,top_k:5})).generated_text||"Could not translate text."}catch(Ce){throw new Error(Ce.message||"Failed to translate text")}},ps=async Q=>{const ce=f||h;if(!(ce&&ta(ce)&&A==="pdf"))throw new Error("Please open a PDF content to use this feature.");try{return(await pe.rag.query({query:`Explain this text from the PDF in a simpler and better way with examples: ${Q}`,subject:i,top_k:5})).generated_text||"Could not generate better explanation."}catch(Ce){throw new Error(Ce.message||"Failed to generate better explanation")}},ac=async(Q,ce,Te)=>{if(!e)throw new Error("User not logged in");if(!U){a({variant:"destructive",title:"Session Not Started",description:"Please start your study session first"});return}const Ce={id:Date.now().toString(),text:Q,explanation:ce,type:Te,timestamp:new Date};dt(Ue=>[...Ue,Ce]),L(Ue=>Ue+1);try{await st.from("saved_explanations").insert({user_id:e.id,content_id:(f==null?void 0:f.id)||(h==null?void 0:h.id),selected_text:Q,explanation:ce,explanation_type:Te,subject:i,created_at:new Date().toISOString()})}catch(Ue){console.error("Failed to save to database:",Ue)}},Ji=Q=>{const ce=Math.floor(Q/3600),Te=Math.floor(Q%3600/60),Ce=Q%60;return ce>0?`${ce}:${Te.toString().padStart(2,"0")}:${Ce.toString().padStart(2,"0")}`:`${Te}:${Ce.toString().padStart(2,"0")}`},qA=async()=>{if(!U){r("/dashboard/student");return}if(Ee>=80){_e(!0);try{await UA()}catch(Q){a({variant:"destructive",title:"Error",description:Q.message||"Failed to generate quiz"})}finally{_e(!1)}}await VA(),r("/dashboard/student")},BA=Q=>{const ce=[],Te=[/(?:^|\n)(?:Q\d+|Question\s+\d+|^\d+[\.\)])\s*[:\-]?\s*(.+?)(?=(?:Q\d+|Question\s+\d+|^\d+[\.\)])|$)/gis,/(?:^|\n)\*\*(?:Q\d+|Question\s+\d+)\*\*\s*(.+?)(?=\*\*(?:Q\d+|Question\s+\d+)\*\*|$)/gis];let Ce=!1;for(const Ue of Te){const Ge=[...Q.matchAll(Ue)];if(Ge.length>0){Ge.forEach((At,et)=>{var hr,It;const $t=((hr=At[1])==null?void 0:hr.trim())||((It=At[0])==null?void 0:It.trim());if($t&&$t.length>10){const bt=/([A-Da-d])[\.\)]\s*(.+?)(?=[A-Da-d][\.\)]|$)/g,jn=[];[...$t.matchAll(bt)].forEach(xs=>{xs[2]&&jn.push(xs[2].trim())});let Mr;const qn=/(?:correct|answer|right)[:\s]+([A-Da-d])/i,qr=$t.match(qn);qr&&(Mr=qr[1].toUpperCase()),ce.push({question:$t,options:jn.length>0?jn:void 0,correct_answer:Mr})}}),Ce=!0;break}}return!Ce&&ce.length===0&&Q.split(/\n\n+/).filter(Ge=>Ge.trim().length>20).slice(0,5).forEach((Ge,At)=>{ce.push({question:Ge.trim()})}),{title:`Quiz: ${i.charAt(0).toUpperCase()+i.slice(1)}`,questions:ce.length>0?ce:[{question:Q.substring(0,500)}]}},UA=async()=>{if(!e||!f)return;const Q=f||h,ce=Q.content_text||"";try{const Te=`Generate a quiz with 5 multiple choice questions based on this educational content. Format each question as:

Q1: [Question text]
A. [Option A]
B. [Option B]
C. [Option C]
D. [Option D]
Correct Answer: [Letter]

Content: ${ce.substring(0,2e3)}`,Ue=(await pe.rag.query({query:Te,subject:i,top_k:3})).generated_text||"",Ge=BA(Ue);ot(Ge),$(!0);try{const At=st,{data:et,error:$t}=await At.from("quiz_sessions").insert({user_id:e.id,quiz_data:Ge,subject:i,start_time:new Date().toISOString(),end_time:new Date().toISOString(),is_completed:!0,metadata:{content_id:Q.id}});$t&&console.debug("Quiz session not saved (table may not exist):",$t.message||$t)}catch(At){console.warn("Error saving quiz session:",At)}a({title:"Quiz Generated",description:"A quiz has been created based on your study session"})}catch(Te){throw new Error(Te.message||"Failed to generate quiz")}},VA=async()=>{if(!(!e||!U))try{const Q=st,{error:ce}=await Q.from("classroom_sessions").insert({user_id:e.id,content_id:(f==null?void 0:f.id)||(h==null?void 0:h.id)||null,subject:i,duration_seconds:W,completion_percentage:Ee,saved_explanations_count:Ne.length,interactions_count:Ct,pages_viewed:ut,started_at:(O==null?void 0:O.toISOString())||new Date().toISOString(),ended_at:new Date().toISOString()});ce&&console.warn("Failed to save session data (table may not exist):",ce)}catch(Q){console.warn("Error saving session data:",Q)}},ta=Q=>{if(!Q)return null;const ce=Q.metadata;return(ce==null?void 0:ce.pdf_url)||(ce==null?void 0:ce.file_url)||null},HA=async()=>{try{const{data:Q,error:ce}=await st.from("topics").select("*").eq("subject",i).order("order_index",{ascending:!0});if(ce)throw ce;d(Q||[]),Q&&Q.length>0&&!l&&c(Q[0].id)}catch(Q){console.error("Error fetching chapters:",Q),a({variant:"destructive",title:"Error",description:"Failed to load chapters"})}},WA=async()=>{v(!0);try{const{data:Q,error:ce}=await st.from("content").select("*").eq("subject",i).order("created_at",{ascending:!1}).limit(100);if(ce)throw ce;y(Q||[]),Q&&Q.length>0&&!f&&x(Q[0])}catch(Q){console.error("Error fetching all content:",Q),a({variant:"destructive",title:"Error",description:"Failed to load content"})}finally{v(!1)}},GA=async()=>{if(l)try{const{data:Q,error:ce}=await st.from("content").select("*").eq("type","ncert").eq("subject",i).eq("topic_id",l).limit(1).single();if(ce&&ce.code!=="PGRST116")throw ce;if(Q){const Te=Q.metadata;let Ce=(Te==null?void 0:Te.pdf_url)||(Te==null?void 0:Te.file_url);if(!Ce&&Q.id)try{const Ue=`content/${Q.id}.pdf`,{data:Ge,error:At}=await st.storage.from("content").list(`content/${Q.id}`,{limit:1,search:".pdf"});if(!At&&Ge&&Ge.length>0){const{data:et}=st.storage.from("content").getPublicUrl(Ue);et!=null&&et.publicUrl&&(Ce=et.publicUrl)}}catch(Ue){console.warn("Storage bucket access failed:",(Ue==null?void 0:Ue.message)||Ue)}Ce&&!(Te!=null&&Te.pdf_url)&&(Q.metadata={...Q.metadata||{},pdf_url:Ce}),E(Ce?"pdf":"text")}m(Q||null),x(Q||null)}catch(Q){console.error("Error fetching NCERT content:",Q)}},QA=async Q=>{x(Q),m(Q),ee(!0),I(!1);const ce=Q.metadata;let Te=(ce==null?void 0:ce.pdf_url)||(ce==null?void 0:ce.file_url);if(!Te&&Q.id)try{const Ce=`content/${Q.id}.pdf`,{data:Ue}=st.storage.from("content").getPublicUrl(Ce);Ue!=null&&Ue.publicUrl&&(Te=Ue.publicUrl)}catch(Ce){console.error("Error getting PDF URL:",Ce)}Te&&!(ce!=null&&ce.pdf_url)&&(Q.metadata={...Q.metadata||{},pdf_url:Te}),Te?(E("pdf"),setTimeout(()=>{},100)):(E("text"),ee(!1)),KA(Q)},YA=async()=>{const Q=f||h;if(Q){pt(!0);try{let ce="";try{const Ue=Q.content_text||"",Ge=Ue.length>3e3?Ue.substring(0,3e3)+"...":Ue;let At=`Analyze this educational content and extract:
1. Main topic and title: ${Q.title||"Content"}
2. Key concepts and topics covered
3. Important keywords for YouTube search
4. Subject: ${i}
5. Chapter: ${Q.chapter||"N/A"}`;Ge&&(At+=`

Full Content Text:
${Ge}

6. Mathematical formulas and equations present in the text`),At+=`

Provide a brief analysis and suggest the best YouTube search terms to find related educational videos.${Ge?" Also identify any formulas or equations in the text.":""}`;const et=await pe.rag.query({query:At,subject:i,top_k:5});ce=(et==null?void 0:et.generated_text)||(et==null?void 0:et.answer)||(et==null?void 0:et.text)||(et==null?void 0:et.content)||"",(!ce||ce.trim().length===0)&&console.warn("Empty analysis response, full response:",et)}catch(Ue){console.error("RAG analysis failed:",Ue),ce=`This content covers ${Q.title||"educational material"} in ${i.charAt(0).toUpperCase()+i.slice(1)}.${Q.chapter?` The chapter focuses on ${Q.chapter}.`:""} Key topics include concepts related to ${Q.title||"the subject matter"}.`}const Te=` **Content Overview**

**Title:** ${Q.title||"Educational Content"}
**Subject:** ${i.charAt(0).toUpperCase()+i.slice(1)}
${Q.chapter?`**Chapter:** ${Q.chapter}
`:""}${Q.chapter_number?`**Chapter Number:** ${Q.chapter_number}
`:""}
**Summary:**
${ce||"This content covers important concepts in "+i+". I can help you understand it better!"}

 **I can help you:**
 Understand key concepts
 Answer questions about the content
 Find related learning resources
 Explain difficult topics

Ask me anything about this content!`,Ce={id:Date.now().toString(),role:"assistant",content:Te,timestamp:new Date};ye([Ce]),Vp(Q,ce).catch(Ue=>{console.debug("YouTube search failed (non-critical):",Ue.message)})}catch(ce){console.error("Error analyzing content:",ce);const Te=f||h,Ce={id:Date.now().toString(),role:"assistant",content:` **Welcome!**

**Content:** ${Te.title||"Educational Material"}
**Subject:** ${i.charAt(0).toUpperCase()+i.slice(1)}
${Te.chapter?`**Chapter:** ${Te.chapter}
`:""}
I'm here to help you understand this content. Ask me any questions!`,timestamp:new Date};ye([Ce]),await Vp(Te,"")}finally{pt(!1)}}},Vp=async(Q,ce)=>{var Te,Ce;N(!0);try{const Ue=[];Q.title&&Ue.push(Q.title),Q.chapter&&Ue.push(Q.chapter);const Ge=Q.chapter_number||((Te=Q.metadata)==null?void 0:Te.chapter_number);Ge&&Ue.push(`Chapter ${Ge}`),Ue.push(i.charAt(0).toUpperCase()+i.slice(1));const At=Q.class_grade||((Ce=Q.metadata)==null?void 0:Ce.class_grade);if(At&&Ue.push(`Class ${At}`),ce){const It=ce.split(`
`).filter(bt=>bt.trim().length>0).filter(bt=>bt.toLowerCase().includes("keyword")||bt.toLowerCase().includes("topic")||bt.toLowerCase().includes("concept"));It.length>0&&It.slice(0,3).forEach(bt=>{const jn=bt.split(/[:,-]/);if(jn.length>1){const sr=jn[1].trim().split(/\s+/).slice(0,2);Ue.push(...sr.filter(Mr=>Mr.length>3))}})}const et=Ue.slice(0,5).join(" "),$t=await pe.videos.searchYouTube({query:et,max_results:15});$t&&$t.length>0&&T(!1),S($t||[])}catch(Ue){const Ge=Ue.message||"",et=(Ue.data||{}).code||Ue.status||"",$t=Ge.includes("quota")||Ge.includes("quotaExceeded")||Ge.includes("QUOTA_EXCEEDED")||et==="YOUTUBE_QUOTA_EXCEEDED"||Ue.status===503&&Ge.toLowerCase().includes("quota"),hr=Ge.includes("API key expired")||Ge.includes("YOUTUBE_API_KEY")||Ge.includes("API key has expired")||et==="YOUTUBE_API_KEY_ERROR";$t?(T(!0),console.warn("YouTube API quota exceeded. Videos feature temporarily unavailable.")):hr?(console.debug("YouTube API key expired. Videos feature temporarily unavailable."),T(!1)):(console.warn("Error fetching related videos:",Ge),T(!1)),S([])}finally{N(!1)}},KA=async Q=>{await Vp(Q,"")},Bw=async()=>{var Ce;if(!Me.trim()||!U||He)return;const Q=f||h;if(!Q){a({variant:"destructive",title:"Content Required",description:"Please open content to chat with AI."});return}const ce={id:Date.now().toString(),role:"user",content:Me,timestamp:new Date};ye(Ue=>[...Ue,ce]);const Te=Me;De(""),ve(!0);try{const Ue=Q.content_text||"",Ge=Ue.length>5e3?Ue.substring(0,5e3)+"...":Ue;let At=`You are an AI tutor helping a student understand ${i}.

Student's question: ${Te}

Provide a helpful, clear explanation appropriate for Class 12 students.`;(Q.title||Q.chapter||Ge)&&(At=`You are an AI tutor helping a student understand this educational content:

Title: ${Q.title||"Educational Content"}
Subject: ${i}
${Q.chapter?`Chapter: ${Q.chapter}`:""}
${Q.chapter_number?`Chapter Number: ${Q.chapter_number}`:""}
${Ge?`
Content Text:
${Ge}`:""}

Student's question: ${Te}

Provide a helpful, clear explanation appropriate for Class 12 students based on the content above. Extract and explain any relevant formulas, equations, or concepts mentioned. If the question is about finding videos, suggest YouTube search terms.`);let et="",$t=[],hr=0;try{console.log("Sending RAG query:",{query:Te.substring(0,100),subject:i});const It=Te,bt=await pe.rag.query({query:It,subject:i,top_k:5});if(console.log("RAG response received:",{hasGeneratedText:!!(bt!=null&&bt.generated_text),generatedTextLength:((Ce=bt==null?void 0:bt.generated_text)==null?void 0:Ce.length)||0,responseKeys:bt?Object.keys(bt):[],fullResponse:bt}),bt){et=bt.generated_text||bt.answer||bt.text||bt.content||"";const jn=HN(bt,et);if($t=jn.sources,hr=jn.sourcesCount,et=jn.cleanedContent||et,console.log("Extracted response text length:",(et==null?void 0:et.length)||0),console.log("Extracted sources:",{count:hr,sources:$t}),!et||et.trim().length===0){if(console.warn("Empty response from RAG, response structure:",bt),bt.contexts&&bt.contexts.length>0){const sr=bt.contexts.map(Mr=>Mr.content||Mr.text||Mr.excerpt||Mr.text||"").filter(Boolean).join(`

`).substring(0,500);sr&&(et=`Based on the content: ${sr}

I can help explain this. Could you please rephrase your question or ask for more specific information?`)}(!et||et.trim().length===0)&&(et=`I understand you're asking about "${Te}" from ${Q.title||"this content"}. Let me help you understand this better. Could you provide more details about what specifically you'd like to know?`)}}else throw console.error("RAG API returned null/undefined response"),new Error("Empty response from RAG API")}catch(It){console.error("RAG query failed:",It);const bt=It.message||It.detail||"Failed to get response";et=`I encountered an issue processing your question: "${Te}". ${bt}. Please try rephrasing your question or try again in a moment.`}if(et&&et.trim().length>10){const It={id:(Date.now()+1).toString(),role:"assistant",content:et,timestamp:new Date,sources:$t.length>0?$t:void 0,sourcesCount:hr>0?hr:void 0};ye(bt=>[...bt,It]),L(bt=>bt+1)}else{console.log("Got short/empty response, trying simpler query...");try{const It=Te.length>100?Te.substring(0,100)+"...":Te,bt=await pe.rag.query({query:`Answer this question about ${i}: ${It}`,subject:i,top_k:3}),jn=(bt==null?void 0:bt.generated_text)||(bt==null?void 0:bt.answer)||(bt==null?void 0:bt.text)||"",sr=HN(bt,jn),Mr=sr.cleanedContent||jn;if(Mr&&Mr.trim().length>10){const qn={id:(Date.now()+1).toString(),role:"assistant",content:Mr,timestamp:new Date,sources:sr.sources.length>0?sr.sources:void 0,sourcesCount:sr.sourcesCount>0?sr.sourcesCount:void 0};ye(qr=>[...qr,qn]),L(qr=>qr+1)}else{const qn={id:(Date.now()+1).toString(),role:"assistant",content:`I understand you're asking about "${Te}" from ${Q.title||"this content"}. I'm having trouble generating a detailed response right now. Could you try:

1. Rephrasing your question more specifically
2. Asking about a particular concept or topic
3. Trying again in a moment

I'm here to help explain the content from the PDF!`,timestamp:new Date};ye(qr=>[...qr,qn])}}catch(It){console.error("Fallback query also failed:",It);const bt={id:(Date.now()+1).toString(),role:"assistant",content:`I'm having trouble processing your question: "${Te}". This might be due to a temporary service issue. Please try rephrasing your question or try again in a moment.`,timestamp:new Date};ye(jn=>[...jn,bt])}}}catch(Ue){console.error("Error sending chat message:",Ue);const Ge={id:(Date.now()+1).toString(),role:"assistant",content:`Sorry, I encountered an error: ${Ue.message||Ue.detail||"Unknown error"}. Please try rephrasing your question or try again later.`,timestamp:new Date};ye(At=>[...At,Ge])}finally{ve(!1)}},JA=async()=>{const Q=f||h;if(Q){xt(!0);try{const ce=Q.content_text||"",Te=ce.length>8e3?ce.substring(0,8e3)+"...":ce;let Ce=`You are a specialized mathematical content extractor. Extract ALL important mathematical formulas, equations, problems, and scientific content from this educational content and format them EXACTLY as they should be used with Wolfram Alpha.

Content:
Title: ${Q.title||"Educational Content"}
Subject: ${i}
${Q.chapter?`Chapter: ${Q.chapter}`:""}`;Te&&(Ce+=`

Full Content Text:
${Te}`),Ce+=`

CRITICAL: Format ALL formulas and equations EXACTLY as Wolfram Alpha expects them. Use proper Wolfram Alpha syntax.

Extract and format EVERYTHING that can be used with Wolfram Alpha:

1. FORMULAS - Format as: "formula_name: equation" (e.g., "kinetic_energy: E = (1/2)*m*v^2")
2. EQUATIONS TO SOLVE - Format as: "solve equation" or "equation = 0" (e.g., "solve x^2 + 5*x + 6 = 0")
3. CALCULATIONS - Format as: "compute expression" (e.g., "integrate x^2, x from 0 to 5")
4. DERIVATIVES - Format as: "d/dx(expression)" or "derivative of expression" (e.g., "d/dx(sin(x))")
5. INTEGRALS - Format as: "integrate expression, variable" or " expression dx" (e.g., "integrate x^2, x")
6. PLOTS/GRAPHS - Format as: "plot expression" (e.g., "plot sin(x) from -2*pi to 2*pi")
7. TRIGONOMETRIC - Format using proper function names: sin, cos, tan, etc.
8. CONSTANTS - Format as: "constant_name = value" (e.g., "pi = 3.14159")
9. MATRICES - Format as: "{{a,b},{c,d}}"
10. SUMMATIONS - Format as: "sum(expression, variable from start to end)"

WOLFRAM ALPHA FORMATTING RULES:
- Use * for multiplication (e.g., 2*x not 2x)
- Use ^ for exponentiation (e.g., x^2 not x)
- Use proper function names: sin, cos, tan, log, ln, exp, sqrt
- Use parentheses for clarity: (2*x + 3) not 2x + 3
- For integrals: "integrate x^2, x" or " x^2 dx"
- For derivatives: "d/dx(x^2)" or "derivative of x^2"
- For solving: "solve x^2 + 5*x + 6 = 0"
- For plots: "plot sin(x), x from -pi to pi"
- Use proper variable names (single letters or descriptive)

For each extracted item, provide this EXACT JSON structure:
{
  "problem": "Wolfram-formatted query (ready to paste into Wolfram Alpha)",
  "formula": "Mathematical formula in standard notation (e.g., E = mc)",
  "wolfram_query": "Exact query formatted for Wolfram Alpha (e.g., E = m*c^2 or solve x^2 + 5*x + 6 = 0)",
  "type": "formula|equation|calculation|derivative|integral|plot|constant|matrix",
  "description": "Brief description of what this is",
  "context": "Relevant context from the content",
  "variables": ["list of variables used", "if applicable"],
  "example_values": {"variable": "example value"} if applicable,
  "category": "physics|mathematics|chemistry|biology"
}

IMPORTANT: The "wolfram_query" field MUST be formatted exactly as it should be entered into Wolfram Alpha. It should be copy-paste ready.

Return ONLY a valid JSON array of these objects. No markdown, no explanations, just the JSON array.`;const Ge=(await pe.rag.query({query:Ce,subject:i,top_k:5})).generated_text||"";try{const At=Ge.match(/```(?:json)?\s*(\[[\s\S]*?\])\s*```/)||Ge.match(/(\[[\s\S]*?\])/),et=At?At[1]:Ge,$t=JSON.parse(et);if(Array.isArray($t)&&$t.length>0){const hr=$t.map((It,bt)=>({id:`problem-${Date.now()}-${bt}`,problem:It.wolfram_query||It.problem||It.equation||It.query||It.formula||String(It),formula:It.formula||It.problem||"",wolframQuery:It.wolfram_query||It.problem||It.equation||"",type:It.type||"calculation",description:It.description||It.explanation||"",context:It.context||"",variables:It.variables||[],exampleValues:It.example_values||{},category:It.category||i||"mathematics"}));Ye(hr)}else Uw(Ge)}catch{Uw(Ge)}}catch(ce){console.error("Error extracting problems:",ce)}finally{xt(!1)}}},Uw=Q=>{const ce=[];[{regex:/(?:solve|find|calculate|evaluate|compute)\s+([^.!?\n]+(?:=|\?|equation|integral|derivative)[^.!?\n]*)/gi,type:"equation"},{regex:/([a-zA-Z]+\s*[=]\s*[^.!?\n]+)/g,type:"formula"},{regex:/(?:integrate|differentiate|derive)\s+([^.!?\n]+)/gi,type:"calculus"}].forEach(({regex:Ce,type:Ue})=>{[...Q.matchAll(Ce)].slice(0,5).forEach((At,et)=>{At[1]&&At[1].trim().length>5&&ce.push({id:`extracted-${Date.now()}-${et}`,problem:At[1].trim(),type:Ue})})}),ce.length>0&&Ye(ce.slice(0,10))},XA=async()=>{try{const Q=ht.filter(Ge=>Ge.formula||Ge.wolframQuery);if(Q.length===0){a({title:"No Formulas Found",description:"No formulas were extracted from this content.",variant:"default"});return}const ce=Q.map((Ge,At)=>{var $t;let et=`
${"=".repeat(60)}
`;if(et+=`${At+1}. ${(($t=Ge.type)==null?void 0:$t.toUpperCase())||"FORMULA"}`,Ge.category&&(et+=` (${Ge.category})`),et+=`
${"=".repeat(60)}
`,Ge.formula&&(et+=`
Formula: ${Ge.formula}`),Ge.wolframQuery?et+=`

Wolfram Alpha Query:
${Ge.wolframQuery}`:Ge.problem&&(et+=`

Query: ${Ge.problem}`),Ge.description&&(et+=`

Description: ${Ge.description}`),Ge.variables&&Ge.variables.length>0&&(et+=`

Variables: ${Ge.variables.join(", ")}`,Ge.exampleValues&&Object.keys(Ge.exampleValues).length>0)){const hr=Object.entries(Ge.exampleValues).map(([It,bt])=>`${It} = ${bt}`).join(", ");et+=`
Example Values: ${hr}`}return Ge.context&&(et+=`

Context: ${Ge.context}`),et}).join(`

`),Te=f||h,Ue=`FORMULAS EXTRACTED FROM: ${(Te==null?void 0:Te.title)||"Educational Content"}
Subject: ${i}
${Te!=null&&Te.chapter?`Chapter: ${Te.chapter}
`:""}${"=".repeat(60)}`+ce;await navigator.clipboard.writeText(Ue),a({title:"Formulas Copied!",description:`${Q.length} formula(s) copied to clipboard with Wolfram Alpha queries.`,variant:"default"})}catch(Q){a({title:"Error",description:Q.message||"Failed to copy formulas",variant:"destructive"})}},ZA=async(Q,ce,Te,Ce)=>{var Ge;pr(Ce||Q),Zt(!0),En(!0),Lt(null);try{const At=Ce||ce||Q;let et=At;Te&&(et=`${At} ${Te}`);let $t;try{$t=await pe.doubt.wolframChat({query:et,include_steps:!0})}catch(hr){throw console.error("Wolfram API error:",hr),new Error(hr.message||"Failed to connect to Wolfram Alpha service")}if($t&&$t.success&&$t.result){const hr=$t.result,It=hr.solution||hr.answer||hr.value||"Solution computed",bt=hr.steps||[],jn=hr.plots||[],sr=hr.input_interpretation||"",Mr=f||h;let qn="",qr=hr.explanation||"";try{const xs=`Provide a detailed explanation and visualization description for this Wolfram Alpha result:

Problem: ${Q}
${ce?`Formula: ${ce}`:""}
${Te?`Context: ${Te}`:""}
Solution: ${It}
${sr?`Input Interpretation: ${sr}`:""}
${bt.length>0?`Steps: ${JSON.stringify(bt)}`:""}

Subject: ${i}
Content: ${Mr.title||"Educational Content"}
${Mr.chapter?`Chapter: ${Mr.chapter}`:""}

Provide:
1. A detailed explanation of what this formula/problem means
2. When and how to use it
3. Description of what the visualization/graph would show (if applicable)
4. Real-world applications or examples
5. Related concepts from the PDF content

Format as JSON with "explanation" and "visualization" fields.`,Yw=(await pe.rag.query({query:xs,subject:i,top_k:5})).generated_text||"";try{const Kw=JSON.parse(Yw);qr=Kw.explanation||qr,qn=Kw.visualization||""}catch{qr=Yw||qr}}catch(xs){console.debug("RAG explanation failed:",xs),qr||(qr=`This ${ce?"formula":"problem"} from ${Mr.title||"the content"} can be solved using mathematical principles. ${It?`The solution is: ${It}`:""}`)}Lt({solution:It,steps:bt.map(xs=>({description:xs.content||xs.description||xs.step||String(xs),title:xs.title||""})),explanation:qr,visualization:qn,plots:jn,additionalInfo:{...hr,input_interpretation:sr}})}else{const hr=((Ge=$t==null?void 0:$t.result)==null?void 0:Ge.error)||"Wolfram Alpha could not process this query";Lt({solution:"Could not solve",explanation:`${hr}. Please try rephrasing the query or check if the formula is correctly formatted.`})}}catch(At){console.error("Error solving problem:",At);const et=At.message||At.detail||"Failed to solve this problem";Lt({solution:"Error",explanation:`${et}. Please ensure Wolfram Alpha service is available and try again.`})}finally{En(!1)}},eP=async Q=>{var Ue,Ge,At,et;const ce=J.trim();if(!ce||!U||Fe)return;if(!(f||h)){a({variant:"destructive",title:"Content Required",description:"Please open content to use Wolfram Alpha."});return}const Ce={id:Date.now().toString(),role:"user",content:ce,timestamp:new Date};ge($t=>[...$t,Ce]),Ae(""),Pe(!0);try{const $t=f||h;let hr=ce;try{const sr=await pe.rag.query({query:ce,subject:i,top_k:3}),Mr=((Ue=sr.generated_text)==null?void 0:Ue.trim())||((Ge=sr.answer)==null?void 0:Ge.trim())||((At=sr.text)==null?void 0:At.trim())||"";if(Mr&&Mr.length>0&&Mr.length<500){const qr=Mr.split(`
`)[0].trim();qr&&qr.length<200&&!qr.toLowerCase().includes("here is")&&!qr.toLowerCase().includes("query:")&&(hr=qr)}}catch(sr){console.debug("Query enhancement failed, using original:",sr)}let It;try{It=await pe.doubt.wolframChat({query:hr,include_steps:!0})}catch(sr){throw console.error("Wolfram API error:",sr),new Error(sr.message||sr.detail||"Failed to connect to Wolfram Alpha service")}let bt="";if(It&&It.success&&It.result){const sr=It.result,Mr=sr.solution||sr.answer||sr.value||"";Mr&&(bt=`**Solution:**
${Mr}

`),sr.input_interpretation&&(bt+=`**Input Interpretation:**
${sr.input_interpretation}

`),sr.steps&&sr.steps.length>0&&(bt+=`**Step-by-step solution:**

`,sr.steps.forEach((qn,qr)=>{const xs=qn.content||qn.description||qn.step||String(qn),Qw=qn.title?`${qn.title}: `:"";bt+=`${qr+1}. ${Qw}${xs}
`})),sr.explanation&&(bt+=`
**Explanation:**
${sr.explanation}`),bt||(bt="I processed your query, but couldn't generate a detailed response. Please try rephrasing your question.")}else bt=`I couldn't process your query: ${((et=It==null?void 0:It.result)==null?void 0:et.error)||"Could not process query"}. Please try rephrasing your mathematical or scientific question.`;const jn={id:(Date.now()+1).toString(),role:"assistant",content:bt,timestamp:new Date};ge(sr=>[...sr,jn]),L(sr=>sr+1)}catch($t){console.error("Error sending Wolfram message:",$t);const hr={id:(Date.now()+1).toString(),role:"assistant",content:`Sorry, I encountered an error with Wolfram Alpha: ${$t.message||$t.detail||"Unknown error"}. Please try rephrasing your question or check if the service is available.`,timestamp:new Date};ge(It=>[...It,hr])}finally{Pe(!1)}},Vw=async()=>{await eP()};return t?n.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-background via-background to-muted/20",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Oe,{className:"h-10 w-10 animate-spin text-primary mx-auto mb-4"}),n.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Loading classroom..."})]})}):n.jsxs("div",{className:"flex min-h-screen w-full bg-gradient-to-br from-background via-background to-muted/20",children:[n.jsx(yn,{}),n.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden",children:[n.jsx("div",{className:"border-b bg-gradient-to-r from-background via-background/95 to-background backdrop-blur-md supports-[backdrop-filter]:bg-background/80 shadow-sm",children:n.jsx("div",{className:"p-4 md:p-6",children:n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight bg-gradient-to-r from-foreground to-foreground/80 bg-clip-text text-transparent",children:"Classroom"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Study, learn, and ask questions"})]}),U&&n.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-primary/15 to-primary/10 rounded-lg border border-primary/20 shadow-sm",children:[n.jsx(Ur,{className:"h-4 w-4 text-primary animate-pulse"}),n.jsx("span",{className:"text-sm font-semibold text-primary",children:Ji(W)})]}),n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-500/15 to-emerald-500/10 rounded-lg border border-green-500/20 shadow-sm",children:[n.jsx(Qt,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),n.jsxs("span",{className:"text-sm font-semibold text-green-700 dark:text-green-400",children:[X,"% Complete"]})]})]})]})}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[U?n.jsxs(z,{variant:"outline",size:"sm",onClick:()=>me(!0),className:"border-destructive/20 hover:bg-destructive/10 hover:border-destructive/40 transition-all",children:[n.jsx(_s,{className:"h-4 w-4 mr-2"}),"Exit Classroom"]}):n.jsxs(z,{onClick:Cr,size:"lg",className:"bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary/80 text-white shadow-lg hover:shadow-xl transition-all duration-200",children:[n.jsx(qc,{className:"h-5 w-5 mr-2"}),"Start Study Session"]}),n.jsxs(Nt,{value:i,onValueChange:o,children:[n.jsx(wt,{className:"w-full sm:w-48 border-2",children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]}),i&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"hidden sm:flex items-center gap-2 shrink-0 px-3 py-1.5 rounded-lg bg-primary/5 border border-primary/10",children:[n.jsx("div",{className:"p-1.5 rounded-md bg-primary/10",children:n.jsx(Jt,{className:"h-4 w-4 text-primary"})}),n.jsx("span",{className:"text-sm font-semibold text-foreground whitespace-nowrap",children:"Content Library"})]}),n.jsxs(Nt,{value:(f==null?void 0:f.id)||void 0,onValueChange:Q=>{const ce=g.find(Te=>Te.id===Q);ce&&QA(ce)},children:[n.jsx(wt,{className:"w-full sm:w-64 border-2",children:n.jsx(St,{placeholder:"Select content to view"})}),n.jsx(jt,{className:"max-h-[300px]",children:b?n.jsx("div",{className:"flex items-center justify-center p-4",children:n.jsx(Oe,{className:"h-4 w-4 animate-spin text-muted-foreground"})}):g.length===0?n.jsx("div",{className:"p-4 text-sm text-muted-foreground text-center",children:"No content available"}):n.jsx(n.Fragment,{children:g.filter(Q=>Q.id&&Q.id.trim()!=="").map(Q=>{var Ge;const ce=Q.chapter||"",Te=Q.chapter_number||((Ge=Q.metadata)==null?void 0:Ge.chapter_number),Ce=Q.title||`${Q.type||"Content"} Content`;let Ue=Ce;if(ce||Te){const At=[];Te&&At.push(`Ch. ${Te}`),ce&&At.push(ce),Ue=`${Ce}${At.length>0?` - ${At.join(": ")}`:""}`}return n.jsx(re,{value:Q.id,children:Ue},Q.id)})})})]})]})]})]}),i&&n.jsxs("div",{className:"sm:hidden flex items-center gap-2 pt-2 border-t",children:[n.jsx("div",{className:"p-1.5 rounded-md bg-primary/10",children:n.jsx(Jt,{className:"h-4 w-4 text-primary"})}),n.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Content Library"})]})]})})}),n.jsx("div",{className:"flex-1 flex overflow-hidden",children:n.jsx("div",{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:n.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden p-4 md:p-6 min-h-0 relative",children:[!U&&(f||h)&&n.jsx("div",{className:"absolute inset-0 bg-background/95 backdrop-blur-md z-50 flex items-center justify-center p-4",children:n.jsxs(ae,{className:"max-w-md w-full mx-4 shadow-2xl border-2 bg-gradient-to-br from-background to-muted/30",children:[n.jsxs(he,{className:"text-center space-y-3",children:[n.jsx("div",{className:"mx-auto w-20 h-20 bg-gradient-to-br from-primary/20 to-primary/10 rounded-full flex items-center justify-center mb-2 shadow-lg border-2 border-primary/20",children:n.jsx(Jt,{className:"h-10 w-10 text-primary"})}),n.jsx(fe,{className:"text-3xl font-bold bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent",children:"Ready to Start?"}),n.jsx(ze,{className:"text-base mt-2",children:"Click the button below to begin your study session. Your progress will be tracked automatically."})]}),n.jsxs(ie,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg bg-primary/5 border border-primary/10",children:[n.jsx(Qt,{className:"h-5 w-5 text-primary shrink-0"}),n.jsx("span",{className:"text-foreground",children:"Time tracking"})]}),n.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg bg-primary/5 border border-primary/10",children:[n.jsx(Qt,{className:"h-5 w-5 text-primary shrink-0"}),n.jsx("span",{className:"text-foreground",children:"Progress monitoring"})]}),n.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg bg-primary/5 border border-primary/10",children:[n.jsx(Qt,{className:"h-5 w-5 text-primary shrink-0"}),n.jsx("span",{className:"text-foreground",children:"Text selection & explanations"})]}),n.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg bg-primary/5 border border-primary/10",children:[n.jsx(Qt,{className:"h-5 w-5 text-primary shrink-0"}),n.jsx("span",{className:"text-foreground",children:"Quiz generation on completion"})]})]}),n.jsxs(z,{onClick:Cr,size:"lg",className:"w-full bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary/80 text-white shadow-lg hover:shadow-xl transition-all duration-200 text-base font-semibold",children:[n.jsx(qc,{className:"h-5 w-5 mr-2"}),"Start Study Session"]})]})]})}),f||h?n.jsxs("div",{className:"flex-1 flex flex-col gap-4 min-h-0",children:[n.jsx(ae,{className:"shrink-0 shadow-lg border-2 bg-gradient-to-r from-background to-muted/20",children:n.jsx(he,{className:"pb-4",children:n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx(fe,{className:"text-xl md:text-2xl mb-3 break-words font-bold bg-gradient-to-r from-foreground to-foreground/80 bg-clip-text text-transparent",children:(f||h).title||`${((Hw=(f||h).type)==null?void 0:Hw.toUpperCase())||"Content"}`}),n.jsxs(ze,{className:"flex flex-wrap items-center gap-2",children:[n.jsx(je,{variant:"secondary",className:"text-xs px-2.5 py-1 font-semibold shadow-sm",children:i.charAt(0).toUpperCase()+i.slice(1)}),n.jsx(je,{variant:"outline",className:"text-xs px-2.5 py-1 font-semibold border-2",children:((Ww=(f||h).type)==null?void 0:Ww.toUpperCase())||"CONTENT"}),(f||h).chapter&&n.jsx(je,{variant:"outline",className:"text-xs px-2.5 py-1 font-semibold border-2",children:(f||h).chapter})]})]}),ta(f||h)&&n.jsxs("div",{className:"flex gap-2 shrink-0",children:[n.jsxs(z,{variant:A==="pdf"?"default":"outline",size:"sm",onClick:()=>{E("pdf"),I(!1),ee(!0)},className:A==="pdf"?"shadow-md":"",title:"View PDF and Text together",children:[n.jsx(or,{className:"h-4 w-4 mr-2"}),"PDF + Text"]}),n.jsxs(z,{variant:A==="text"?"default":"outline",size:"sm",onClick:()=>{E("text")},className:A==="text"?"shadow-md":"",title:"View Text only",children:[n.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Text Only"]})]})]})})}),n.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-4 min-h-0 overflow-hidden",children:[n.jsx(ae,{className:"flex-1 flex flex-col overflow-hidden min-h-0 shadow-lg border-2",children:n.jsx(ie,{className:"flex-1 flex flex-col overflow-hidden p-0 min-h-0",children:A==="pdf"&&ta(f||h)&&!M?n.jsxs("div",{className:"flex flex-col bg-gradient-to-br from-muted/40 to-muted/20 flex-1 min-h-0 rounded-lg overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gradient-to-r from-background to-muted/30 border-b shadow-sm shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[n.jsx("div",{className:"p-1.5 rounded-md bg-primary/10",children:n.jsx(or,{className:"h-4 w-4 text-primary shrink-0"})}),n.jsx("span",{className:"text-sm font-semibold",children:"PDF Viewer"}),!1]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(z,{variant:"ghost",size:"sm",onClick:()=>{const ce=ta(f||h);ce&&window.open(ce,"_blank")},className:"h-8 hover:bg-primary/10 transition-colors",children:[n.jsx(FO,{className:"h-4 w-4 mr-1.5"}),"Fullscreen"]}),n.jsxs(z,{variant:"ghost",size:"sm",onClick:()=>{const Q=f||h,ce=ta(Q);if(ce){const Te=document.createElement("a");Te.href=ce,Te.download=`${Q.title||"content"}.pdf`,Te.click()}},className:"h-8 hover:bg-primary/10 transition-colors",children:[n.jsx(or,{className:"h-4 w-4 mr-1.5"}),"Download"]})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden min-h-0 relative bg-muted/20",style:{pointerEvents:U?"auto":"none",opacity:U?1:.6,filter:U?"none":"blur(2px)"},children:[se&&!M&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted/50 z-10",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Oe,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading PDF..."})]})}),(()=>{const ce=ta(f||h);return ce?n.jsx("iframe",{src:`${ce}#toolbar=1&navpanes=1&scrollbar=1&zoom=page-width`,className:"w-full h-full border-0",title:"Content PDF",allow:"fullscreen",style:{display:se?"none":"block"},onError:()=>{I(!0),ee(!1),console.error("PDF iframe failed to load:",ce)},onLoad:()=>{I(!1),ee(!1)}},ce):n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsxs("div",{className:"text-center p-8",children:[n.jsx(or,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground opacity-50"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"No PDF URL available"})]})})})()]})]}):A==="pdf"&&(M||!ta(f||h))?n.jsx("div",{className:"flex items-center justify-center border-t bg-gradient-to-br from-muted/40 to-muted/20",children:n.jsxs("div",{className:"text-center p-8 max-w-md",children:[n.jsx("div",{className:"mx-auto w-20 h-20 bg-muted rounded-full flex items-center justify-center mb-6",children:n.jsx(or,{className:"h-10 w-10 text-muted-foreground opacity-50"})}),n.jsx("h3",{className:"text-xl font-bold mb-3 bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent",children:M?"PDF Failed to Load":"PDF Not Available"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:M?"There was an error loading the PDF. You can try opening it in a new tab or view the text content instead.":"PDF file is not available for this content. Showing text view instead."}),n.jsx("div",{className:"flex gap-2 justify-center",children:ta(f||h)?n.jsxs(n.Fragment,{children:[n.jsx(z,{variant:"outline",onClick:()=>{const ce=ta(f||h);ce&&window.open(ce,"_blank")},className:"border-2",children:"Open in New Tab"}),n.jsx(z,{onClick:()=>{I(!1),E("text")},className:"bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary/80 shadow-md",children:"View as Text"})]}):n.jsx(z,{onClick:()=>E("text"),className:"bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary/80 shadow-md",children:"View as Text"})})]})}):n.jsx("div",{className:"flex-1 overflow-y-auto border-t bg-gradient-to-br from-muted/40 to-muted/20",children:n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"prose prose-sm max-w-none dark:prose-invert",children:n.jsx("div",{className:"bg-background rounded-xl border-2 p-6 shadow-lg",children:n.jsx("pre",{className:"whitespace-pre-wrap font-sans text-sm leading-relaxed text-foreground overflow-x-auto",children:(f||h).content_text||"No content text available"})})})})})})}),n.jsx(ae,{className:"flex-1 flex flex-col overflow-hidden min-h-0 shadow-lg border-2",children:n.jsxs(Zs,{value:zt,onValueChange:Q=>ue(Q),className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[n.jsx(he,{className:"shrink-0 pb-2 bg-gradient-to-r from-background to-muted/20 border-b",children:n.jsxs(Ps,{className:"grid w-full grid-cols-3 bg-muted/50",children:[n.jsxs(gr,{value:"chat",className:"flex items-center gap-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground transition-all",children:[n.jsx(Fl,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Chat with AI"}),n.jsx("span",{className:"sm:hidden",children:"Chat"})]}),n.jsxs(gr,{value:"videos",className:"flex items-center gap-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground transition-all",children:[n.jsx(Pv,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Related Videos"}),n.jsx("span",{className:"sm:hidden",children:"Videos"})]}),n.jsxs(gr,{value:"wolfram",className:"flex items-center gap-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground transition-all",children:[n.jsx(vr,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Wolfram Alpha"}),n.jsx("span",{className:"sm:hidden",children:"Wolfram"})]})]})}),n.jsx(Er,{value:"chat",className:"flex-1 flex flex-col overflow-hidden m-0 p-0 min-h-0",children:n.jsx(ie,{className:"flex-1 flex flex-col overflow-hidden p-0 min-h-0 bg-gradient-to-b from-background to-muted/10",children:Be?n.jsx("div",{className:"flex items-center justify-center h-full py-12",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Oe,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Analyzing content with AI..."})]})}):n.jsxs(n.Fragment,{children:[n.jsx(Pn,{className:"flex-1 px-4 py-4",children:n.jsxs("div",{className:"space-y-6 max-w-3xl mx-auto",children:[G.length===0?(()=>{const ce=!!(f||h);return n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[n.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(vr,{className:"h-6 w-6 text-primary"})}),n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"How can I help you today?"}),ce?n.jsx("p",{className:"text-sm text-muted-foreground",children:"Ask questions or request explanations about this content using RAG pipeline"}):n.jsx("p",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"Please open content to chat with AI"})]})]})})():G.map(Q=>n.jsxs("div",{className:qe("flex gap-4",Q.role==="user"?"justify-end":"justify-start"),children:[Q.role==="assistant"&&n.jsxs(an,{className:"h-8 w-8 flex-shrink-0",children:[n.jsx(os,{src:""}),n.jsx(on,{className:"bg-primary text-primary-foreground",children:n.jsx(Qn,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:qe("flex flex-col gap-2 max-w-[85%]",Q.role==="user"?"items-end":"items-start"),children:[n.jsx("div",{className:qe("rounded-2xl px-4 py-3",Q.role==="user"?"bg-primary text-primary-foreground":"bg-muted"),children:Q.role==="assistant"?n.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none prose-p:my-2 prose-ul:my-2 prose-ol:my-2",children:n.jsx(tr,{remarkPlugins:[rr],components:{p:({children:ce})=>n.jsx("p",{className:"mb-2 last:mb-0",children:ce}),ul:({children:ce})=>n.jsx("ul",{className:"list-disc list-inside mb-2 space-y-1",children:ce}),ol:({children:ce})=>n.jsx("ol",{className:"list-decimal list-inside mb-2 space-y-1",children:ce}),li:({children:ce})=>n.jsx("li",{className:"text-sm",children:ce}),strong:({children:ce})=>n.jsx("strong",{className:"font-semibold",children:ce}),code:({children:ce})=>n.jsx("code",{className:"bg-muted px-1 py-0.5 rounded text-xs font-mono",children:ce})},children:Q.content})}):n.jsx("p",{className:"text-sm whitespace-pre-wrap",children:Q.content})}),n.jsx("p",{className:qe("text-xs",(Q.role==="user","text-muted-foreground")),children:Q.timestamp.toLocaleTimeString()}),Q.role==="assistant"&&Q.sources&&Q.sources.length>0&&n.jsxs("div",{className:"mt-4 pt-3 border-t border-border/50 w-full",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"p-1.5 rounded-lg bg-primary/10",children:n.jsx(du,{className:"h-3.5 w-3.5 text-primary"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-foreground",children:"Sources"}),Q.sourcesCount&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:[Q.sourcesCount," section",Q.sourcesCount!==1?"s":""]})]})]})}),n.jsx("div",{className:"grid gap-2",children:(()=>{const ce=new Map;return Q.sources.forEach(Te=>{const Ce=`${Te.type||"content"}-${Te.chapter||"unknown"}`;ce.has(Ce)?ce.get(Ce).count+=1:ce.set(Ce,{count:1,source:Te})}),Array.from(ce.values()).map((Te,Ce)=>{const{source:Ue,count:Ge}=Te,At=Ue.type?Ue.type.toUpperCase():"CONTENT",et=Ue.chapter||"General",$t=Ue.type==="ncert"?"bg-blue-500/10 text-blue-700 dark:text-blue-400 border-blue-200 dark:border-blue-800":Ue.type==="pyq"?"bg-purple-500/10 text-purple-700 dark:text-purple-400 border-purple-200 dark:border-purple-800":Ue.type==="hots"?"bg-orange-500/10 text-orange-700 dark:text-orange-400 border-orange-200 dark:border-orange-800":"bg-muted border-border";return n.jsxs("div",{className:"group relative flex items-start gap-2.5 p-2.5 rounded-lg bg-gradient-to-r from-background to-muted/30 border border-border/50 hover:border-primary/30 hover:shadow-sm transition-all duration-200",children:[n.jsx("div",{className:`p-1.5 rounded-md ${$t} flex-shrink-0`,children:n.jsx(Jt,{className:"h-3.5 w-3.5"})}),n.jsx("div",{className:"flex-1 min-w-0 flex items-center justify-between gap-2",children:n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-1.5 mb-1 flex-wrap",children:[n.jsx(je,{variant:"outline",className:`text-xs font-semibold h-5 ${$t}`,children:At}),Ge>1&&n.jsxs(je,{variant:"secondary",className:"text-xs h-5 font-medium",children:[Ge,"x"]})]}),n.jsx("p",{className:"text-xs font-medium text-foreground truncate",title:et,children:et})]})})]},Ce)})})()})]}),Q.role==="assistant"&&(!Q.sources||Q.sources.length===0)&&Q.sourcesCount&&Q.sourcesCount>0&&n.jsx("div",{className:"mt-4 pt-3 border-t border-border/50 w-full",children:n.jsxs("div",{className:"flex items-center gap-2.5 p-2.5 rounded-lg bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20",children:[n.jsx("div",{className:"p-1.5 rounded-lg bg-primary/10",children:n.jsx(du,{className:"h-3.5 w-3.5 text-primary"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-foreground",children:"Content References"}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:["Based on ",Q.sourcesCount," relevant content section",Q.sourcesCount!==1?"s":""," from the curriculum"]})]})]})})]}),Q.role==="user"&&n.jsxs(an,{className:"h-8 w-8 flex-shrink-0",children:[n.jsx(os,{src:""}),n.jsx(on,{className:"bg-secondary",children:n.jsx(ii,{className:"h-4 w-4"})})]})]},Q.id)),He&&n.jsxs("div",{className:"flex gap-4 justify-start",children:[n.jsx(an,{className:"h-8 w-8 flex-shrink-0",children:n.jsx(on,{className:"bg-primary text-primary-foreground",children:n.jsx(Qn,{className:"h-4 w-4"})})}),n.jsx("div",{className:"bg-muted rounded-2xl px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Oe,{className:"h-4 w-4 animate-spin text-primary"}),n.jsx("span",{className:"text-sm",children:"Thinking..."})]})})]}),n.jsx("div",{ref:gt})]})}),n.jsx("div",{className:"border-t bg-card p-4 shrink-0",children:n.jsx("div",{className:"max-w-3xl mx-auto",children:(()=>{const ce=!!(f||h),Te=!U||!ce||He;return n.jsxs(n.Fragment,{children:[!ce&&n.jsx("div",{className:"mb-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:n.jsx("p",{className:"text-xs text-yellow-800 dark:text-yellow-200 font-medium",children:" Please open content to chat with AI using RAG pipeline"})}),n.jsx("div",{className:"relative flex gap-2",children:n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Ve,{placeholder:ce?"Ask about this content...":"Open content to chat...",value:Me,onChange:Ce=>De(Ce.target.value),onKeyDown:Ce=>{Ce.key==="Enter"&&!Ce.shiftKey&&(Ce.preventDefault(),Bw())},disabled:Te,className:"min-h-[52px] rounded-2xl pr-12 border-2 focus:border-primary"}),n.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:n.jsx(z,{onClick:Bw,disabled:!Me.trim()||Te,size:"icon",className:"h-9 w-9 rounded-full",children:He?n.jsx(Oe,{className:"h-4 w-4 animate-spin"}):n.jsx($i,{className:"h-4 w-4"})})})]})}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"AI can make mistakes. Check important info."})]})})()})})]})})}),n.jsx(Er,{value:"videos",className:"flex-1 flex flex-col overflow-hidden m-0 p-0 min-h-0",children:n.jsx(ie,{className:"flex-1 flex flex-col overflow-hidden p-0 min-h-0 bg-gradient-to-b from-background to-muted/10",children:k?n.jsx("div",{className:"flex items-center justify-center h-full py-12",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Oe,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Searching YouTube..."})]})}):w.length===0?n.jsx("div",{className:"flex items-center justify-center h-full py-12",children:n.jsxs("div",{className:"text-center p-6 max-w-md",children:[n.jsx("div",{className:"mx-auto w-16 h-16 bg-muted rounded-full flex items-center justify-center mb-4",children:n.jsx(Pv,{className:"h-8 w-8 text-muted-foreground opacity-50"})}),P?n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-sm font-medium text-foreground mb-1",children:"YouTube API Quota Exceeded"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1 mb-3",children:"The YouTube API quota has been exceeded for today. Videos will be available again after the quota resets (typically at midnight PST)."}),n.jsx("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:n.jsxs("p",{className:"text-xs text-yellow-800 dark:text-yellow-200 font-medium",children:[" ",n.jsx("strong",{children:"Tip:"})," You can still ask questions in the chat tab to get learning resources and video suggestions!"]})})]}):n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-sm font-medium text-foreground mb-1",children:"Related videos unavailable"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Videos are temporarily unavailable. Try asking in chat for learning resources and suggestions."})]})]})}):n.jsx(Pn,{className:"h-full",children:n.jsx("div",{className:"p-4 space-y-3",children:w.slice(0,3).map((Q,ce)=>n.jsx("div",{onClick:()=>{window.open(`https://www.youtube.com/watch?v=${Q.youtube_id}`,"_blank")},className:"p-3 border-2 rounded-xl cursor-pointer transition-all hover:bg-accent hover:border-primary/50 hover:shadow-md group",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("div",{className:"relative w-40 h-24 bg-muted rounded-lg flex-shrink-0 overflow-hidden shadow-sm group-hover:shadow-md transition-shadow",children:[n.jsx("img",{src:Q.thumbnail_url||`https://img.youtube.com/vi/${Q.youtube_id}/mqdefault.jpg`,alt:Q.title,className:"w-full h-full object-cover"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 group-hover:bg-black/30 transition-colors",children:n.jsx("div",{className:"w-10 h-10 bg-red-600 rounded-full flex items-center justify-center shadow-lg",children:n.jsx(qc,{className:"h-5 w-5 text-white ml-0.5"})})}),Q.duration_seconds&&n.jsxs("div",{className:"absolute bottom-1 right-1 bg-black/90 text-white text-xs px-1.5 py-0.5 rounded font-semibold",children:[Math.floor(Q.duration_seconds/60),":",(Q.duration_seconds%60).toString().padStart(2,"0")]})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-semibold line-clamp-2 mb-1.5 text-foreground group-hover:text-primary transition-colors",children:Q.title}),n.jsx("p",{className:"text-xs text-muted-foreground mb-1.5 font-medium",children:Q.channel_name}),Q.description&&n.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:Q.description})]})]})},Q.youtube_id||ce))})})})}),n.jsx(Er,{value:"wolfram",className:"flex-1 flex flex-col overflow-hidden m-0 p-0 min-h-0",children:n.jsx(ie,{className:"flex-1 flex flex-col overflow-hidden p-0 min-h-0 bg-gradient-to-b from-background to-muted/10",children:n.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[n.jsx(Pn,{className:"flex-1 px-4 py-4",children:n.jsxs("div",{className:"space-y-4",children:[(()=>{const Q=f||h,ce=Q&&ta(Q)&&A==="pdf";if(lt)return n.jsx("div",{className:"mb-4 p-4 bg-muted/50 rounded-lg border-2",children:n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Oe,{className:"h-4 w-4 animate-spin text-primary"}),n.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Extracting problems from PDF..."})]})});if(ce&&ht.length>0&&Ft.length===0){const Te=ht.filter(Ce=>Ce.formula).length;return n.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-br from-primary/10 to-primary/5 rounded-lg border-2 border-primary/20",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(vr,{className:"h-5 w-5 text-primary"}),n.jsx("p",{className:"text-sm font-bold text-foreground",children:"Problems Found in PDF"})]}),Te>0&&n.jsxs(z,{onClick:XA,size:"sm",variant:"outline",className:"h-8 text-xs",children:[" Take All Formula (",Te,")"]})]}),n.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Click on any problem below to solve it using Wolfram Alpha:"}),n.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:ht.map(Ce=>n.jsx("div",{onClick:()=>ZA(Ce.problem,Ce.formula,Ce.context,Ce.wolframQuery),className:"p-3 bg-background rounded-lg border-2 border-primary/20 hover:border-primary/50 hover:bg-primary/5 cursor-pointer transition-all group",children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[n.jsx(je,{variant:"outline",className:"text-xs border-primary/30",children:Ce.type}),Ce.category&&n.jsx(je,{variant:"secondary",className:"text-xs",children:Ce.category}),Ce.formula&&n.jsx(je,{variant:"secondary",className:"text-xs",children:"Formula"})]}),Ce.formula&&n.jsxs("div",{className:"mb-1.5",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-0.5",children:"Formula:"}),n.jsx("p",{className:"text-sm font-mono font-bold text-primary",children:Ce.formula})]}),n.jsx("div",{className:"mb-1.5",children:Ce.wolframQuery?n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-0.5",children:"Wolfram Query:"}),n.jsx("p",{className:"text-sm font-mono text-foreground bg-muted/50 px-2 py-1 rounded border border-primary/20 break-words",children:Ce.wolframQuery})]}):n.jsx("p",{className:"text-sm font-medium text-foreground group-hover:text-primary transition-colors line-clamp-2",children:Ce.problem})}),Ce.description&&n.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:Ce.description}),Ce.variables&&Ce.variables.length>0&&n.jsx("div",{className:"mt-1.5 flex flex-wrap gap-1",children:Ce.variables.map((Ue,Ge)=>{var At;return n.jsxs(je,{variant:"outline",className:"text-xs",children:[Ue,((At=Ce.exampleValues)==null?void 0:At[Ue])&&` = ${Ce.exampleValues[Ue]}`]},Ge)})}),Ce.context&&n.jsx("p",{className:"text-xs text-muted-foreground mt-1 italic line-clamp-1",children:Ce.context})]}),n.jsx(vr,{className:"h-4 w-4 text-primary opacity-0 group-hover:opacity-100 transition-opacity shrink-0 mt-1"})]})},Ce.id))})]})}return Ft.length===0?n.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[n.jsx("div",{className:"mx-auto w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-4",children:n.jsx(vr,{className:"h-8 w-8 text-primary opacity-70"})}),n.jsx("p",{className:"font-medium text-foreground",children:"Ask Wolfram Alpha"}),!!(f||h)?n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-sm mt-2",children:"Ask mathematical or scientific questions"}),n.jsx("p",{className:"text-xs mt-1 text-muted-foreground",children:"Formulas will be extracted from the content automatically"})]}):n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-sm mt-2",children:"Ask mathematical or scientific questions"}),n.jsx("p",{className:"text-xs mt-1 text-yellow-600 dark:text-yellow-400",children:"Please open content to use Wolfram Alpha"})]})]}):null})(),Ft.length>0&&Ft.map(Q=>n.jsx("div",{className:`flex ${Q.role==="user"?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`max-w-[85%] rounded-xl p-4 shadow-md ${Q.role==="user"?"bg-gradient-to-r from-primary to-primary/90 text-primary-foreground":"bg-card border-2 shadow-sm"}`,children:[Q.role==="assistant"?n.jsx("div",{className:"text-sm prose prose-sm dark:prose-invert max-w-none prose-headings:text-foreground prose-p:text-foreground prose-strong:text-foreground prose-ul:text-foreground prose-li:text-foreground prose-code:text-foreground",children:n.jsx(tr,{remarkPlugins:[rr],components:{p:({children:ce})=>n.jsx("p",{className:"mb-2 last:mb-0",children:ce}),ul:({children:ce})=>n.jsx("ul",{className:"list-disc list-inside mb-2 space-y-1",children:ce}),ol:({children:ce})=>n.jsx("ol",{className:"list-decimal list-inside mb-2 space-y-1",children:ce}),li:({children:ce})=>n.jsx("li",{className:"text-sm",children:ce}),strong:({children:ce})=>n.jsx("strong",{className:"font-semibold",children:ce}),code:({children:ce})=>n.jsx("code",{className:"bg-muted px-1 py-0.5 rounded text-xs font-mono",children:ce})},children:Q.content})}):n.jsx("p",{className:"text-sm whitespace-pre-wrap",children:Q.content}),n.jsx("p",{className:`text-xs mt-2 ${Q.role==="user"?"opacity-80":"text-muted-foreground"}`,children:Q.timestamp.toLocaleTimeString()})]})},Q.id)),Fe&&n.jsx("div",{className:"flex justify-start",children:n.jsx("div",{className:"bg-card border-2 rounded-xl p-3 shadow-sm",children:n.jsx(Oe,{className:"h-4 w-4 animate-spin text-primary"})})}),n.jsx("div",{ref:Ie})]})}),n.jsx("div",{className:"border-t bg-background/50 backdrop-blur-sm p-3 shrink-0",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Ve,{placeholder:"Ask Wolfram Alpha (e.g., solve x^2 + 5x + 6 = 0)...",value:J,onChange:Q=>Ae(Q.target.value),onKeyPress:Q=>{Q.key==="Enter"&&!Q.shiftKey&&(Q.preventDefault(),Vw())},disabled:!U||Fe,className:"border-2 focus:border-primary"}),n.jsx(z,{onClick:Vw,disabled:!J.trim()||!U||Fe,className:"bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary/80 shadow-md",children:n.jsx($i,{className:"h-4 w-4"})})]})})]})})})]})})]})]}):n.jsx(ae,{className:"flex-1 shadow-lg border-2 bg-gradient-to-br from-background to-muted/20",children:n.jsx(ie,{className:"flex items-center justify-center h-full py-12",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx("div",{className:"mx-auto w-20 h-20 bg-muted rounded-full flex items-center justify-center mb-6",children:n.jsx(Jt,{className:"h-10 w-10 text-muted-foreground opacity-50"})}),n.jsx("h3",{className:"text-2xl font-bold mb-3 bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent",children:"No Content Available"}),n.jsx("p",{className:"text-muted-foreground text-base",children:"Select content from the dropdown above to view it here"})]})})})]})})})]}),V&&Y&&n.jsx(rre,{selectedText:Y,position:ne,onClose:()=>{var Q,ce;if(_(!1),F(""),(Q=window.getSelection())==null||Q.removeAllRanges(),A==="pdf")try{const Te=document.querySelector('iframe[title="Content PDF"]');Te&&Te.contentWindow&&((ce=Te.contentWindow.getSelection())==null||ce.removeAllRanges())}catch{}},onExplain:mn,onTranslate:fs,onBetterExplain:ps,onSave:ac}),n.jsx(un,{open:oe,onOpenChange:me,children:n.jsxs(tn,{className:"sm:max-w-md",children:[n.jsxs(rn,{children:[n.jsx(nn,{className:"text-2xl font-bold",children:"Exit Classroom"}),n.jsx(xn,{className:"text-base",children:"How much of this content have you completed?"})]}),n.jsxs("div",{className:"py-4 space-y-4",children:[n.jsxs("div",{children:[n.jsx(be,{htmlFor:"completion",className:"text-base font-semibold mb-3 block",children:"Completion Percentage"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(Ve,{id:"completion",type:"number",min:"0",max:"100",value:Ee,onChange:Q=>we(Number(Q.target.value)),className:"w-24 border-2 text-center font-semibold"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("input",{type:"range",min:"0",max:"100",value:Ee,onChange:Q=>we(Number(Q.target.value)),className:"w-full h-2 bg-muted rounded-lg appearance-none cursor-pointer accent-primary"}),n.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1 font-medium",children:[n.jsx("span",{children:"0%"}),n.jsx("span",{children:"50%"}),n.jsx("span",{children:"100%"})]})]})]})]}),Ee>=80&&n.jsx("div",{className:"mt-4 p-4 bg-gradient-to-r from-primary/15 to-primary/10 rounded-lg border-2 border-primary/20",children:n.jsxs("p",{className:"text-sm text-primary font-semibold flex items-center gap-2",children:[n.jsx(Qt,{className:"h-4 w-4"}),"Great progress! A quiz will be generated to test your knowledge."]})})]}),n.jsxs(Fn,{className:"gap-2",children:[n.jsx(z,{variant:"outline",onClick:()=>me(!1),className:"border-2",children:"Cancel"}),n.jsx(z,{onClick:qA,disabled:Le,className:"bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary/80 shadow-md",children:Le?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating Quiz..."]}):"Exit & Save"})]})]})}),n.jsx(un,{open:ct,onOpenChange:$,children:n.jsxs(tn,{className:"max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs(rn,{children:[n.jsx(nn,{className:"text-2xl font-bold bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent",children:(ke==null?void 0:ke.title)||"Generated Quiz"}),n.jsx(xn,{className:"text-base",children:"Test your knowledge with these questions based on your study session"})]}),n.jsx(Pn,{className:"flex-1 pr-4",children:n.jsx("div",{className:"space-y-6 py-4",children:ke==null?void 0:ke.questions.map((Q,ce)=>n.jsx(ae,{className:"p-5 shadow-md border-2 bg-gradient-to-br from-background to-muted/20",children:n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsxs(je,{variant:"outline",className:"shrink-0 mt-1 px-3 py-1 font-bold text-base border-2",children:["Q",ce+1]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none mb-4",children:n.jsx(tr,{remarkPlugins:[rr],children:Q.question})}),Q.options&&Q.options.length>0?n.jsx(Hl,{disabled:!0,className:"space-y-2",children:Q.options.map((Te,Ce)=>{const Ue=String.fromCharCode(65+Ce),Ge=Q.correct_answer===Ue;return n.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-lg border-2 transition-all ${Ge?"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border-green-300 dark:border-green-700 shadow-sm":"bg-muted/50 border-transparent"}`,children:[n.jsx(Wl,{value:Ue,id:`q${ce}-opt${Ce}`,checked:Ge}),n.jsxs(be,{htmlFor:`q${ce}-opt${Ce}`,className:`flex-1 cursor-pointer flex items-center ${Ge?"font-semibold text-green-700 dark:text-green-400":""}`,children:[n.jsxs("span",{className:"font-bold mr-2 text-base",children:[Ue,"."]}),n.jsx("span",{children:Te}),Ge&&n.jsx(Qt,{className:"inline-block h-5 w-5 ml-2 text-green-600 dark:text-green-400 shrink-0"})]})]},Ce)})}):n.jsx("div",{className:"p-4 bg-muted rounded-lg border-2",children:n.jsx("p",{className:"text-sm text-foreground font-medium",children:Q.correct_answer?n.jsxs("span",{children:[n.jsx("strong",{className:"text-primary",children:"Answer:"})," ",Q.correct_answer]}):"Short answer question"})}),Q.explanation&&n.jsx("div",{className:"mt-3 p-4 bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-lg border-2 border-blue-200 dark:border-blue-800 shadow-sm",children:n.jsxs("p",{className:"text-sm",children:[n.jsx("strong",{className:"text-blue-700 dark:text-blue-400 font-semibold",children:"Explanation:"})," ",n.jsx("span",{className:"text-blue-600 dark:text-blue-300",children:Q.explanation})]})})]})]})})},ce))})}),n.jsxs(Fn,{className:"mt-4 gap-2",children:[n.jsx(z,{variant:"outline",onClick:()=>$(!1),className:"border-2",children:"Close"}),n.jsx(z,{onClick:()=>{$(!1),r("/dashboard/student")},className:"bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary/80 shadow-md",children:"Go to Dashboard"})]})]})}),n.jsx(un,{open:Et,onOpenChange:Zt,children:n.jsxs(tn,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs(rn,{children:[n.jsxs(nn,{className:"text-2xl font-bold bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent flex items-center gap-2",children:[n.jsx(vr,{className:"h-6 w-6 text-primary"}),"Wolfram Alpha Solution"]}),n.jsx(xn,{className:"text-base",children:dr&&n.jsx("div",{className:"mt-2 p-3 bg-muted/50 rounded-lg border-2",children:n.jsx("p",{className:"text-sm font-mono font-semibold text-foreground break-all",children:dr})})})]}),n.jsx(Pn,{className:"flex-1 pr-4",children:n.jsx("div",{className:"space-y-6 py-4",children:wn?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Oe,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Solving with Wolfram Alpha..."})]})}):nr?n.jsxs(n.Fragment,{children:[nr.solution&&n.jsxs(ae,{className:"p-5 shadow-md border-2 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border-green-200 dark:border-green-800",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Qt,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),n.jsx("h3",{className:"text-lg font-bold text-green-700 dark:text-green-400",children:"Solution"})]}),n.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:n.jsx(tr,{remarkPlugins:[rr],children:nr.solution})})]}),(nr.visualization||((Gw=nr.plots)==null?void 0:Gw.length)>0)&&n.jsxs(ae,{className:"p-5 shadow-md border-2 bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 border-blue-200 dark:border-blue-800",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(vr,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),n.jsx("h3",{className:"text-lg font-bold text-blue-700 dark:text-blue-400",children:"Visualization"})]}),nr.visualization&&n.jsx("div",{className:"mb-4",children:n.jsx("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:nr.visualization})}),nr.plots&&nr.plots.length>0&&n.jsx("div",{className:"space-y-3",children:nr.plots.map((Q,ce)=>n.jsxs("div",{className:"p-3 bg-background rounded-lg border-2",children:[Q.url&&n.jsx("img",{src:Q.url,alt:`Plot ${ce+1}`,className:"w-full rounded-lg mb-2"}),Q.description&&n.jsx("p",{className:"text-xs text-muted-foreground",children:Q.description})]},ce))})]}),nr.steps&&nr.steps.length>0&&n.jsxs(ae,{className:"p-5 shadow-md border-2 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border-purple-200 dark:border-purple-800",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(or,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"}),n.jsx("h3",{className:"text-lg font-bold text-purple-700 dark:text-purple-400",children:"Step-by-Step Solution"})]}),n.jsx("div",{className:"space-y-3",children:nr.steps.map((Q,ce)=>n.jsxs("div",{className:"flex gap-3 p-3 bg-background rounded-lg border-2",children:[n.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx("span",{className:"text-sm font-bold text-primary",children:ce+1})}),n.jsx("div",{className:"flex-1",children:n.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:n.jsx(tr,{remarkPlugins:[rr],children:Q.description||Q.step||String(Q)})})})]},ce))})]}),nr.explanation&&n.jsxs(ae,{className:"p-5 shadow-md border-2 bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border-amber-200 dark:border-amber-800",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Jt,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"}),n.jsx("h3",{className:"text-lg font-bold text-amber-700 dark:text-amber-400",children:"Detailed Explanation"})]}),n.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:n.jsx(tr,{remarkPlugins:[rr],children:nr.explanation})})]}),nr.additionalInfo&&n.jsxs(ae,{className:"p-5 shadow-md border-2",children:[n.jsx("h3",{className:"text-lg font-bold mb-3",children:"Additional Information"}),n.jsx("div",{className:"space-y-2 text-sm",children:Object.entries(nr.additionalInfo).map(([Q,ce])=>Q==="solution"||Q==="steps"||Q==="explanation"||Q==="plots"?null:n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("span",{className:"font-semibold capitalize",children:[Q.replace(/_/g," "),":"]}),n.jsx("span",{className:"text-muted-foreground",children:String(ce)})]},Q))})]})]}):n.jsx("div",{className:"text-center py-12 text-muted-foreground",children:n.jsx("p",{children:"No solution available"})})})}),n.jsxs(Fn,{className:"mt-4 gap-2",children:[n.jsx(z,{variant:"outline",onClick:()=>Zt(!1),className:"border-2",children:"Close"}),n.jsx(z,{onClick:()=>{dr&&(Ae(dr),Zt(!1))},className:"bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary/80 shadow-md",children:"Use in Chat"})]})]})})]})},sre=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState({total_students:0,active_students:0,pending_homework:0,recent_quizzes:0}),[o,l]=p.useState(!0);p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{e&&c()},[e]);const c=async()=>{try{l(!0);const h=await pe.teacher.getDashboard((e==null?void 0:e.id)||"");i(h||{total_students:0,active_students:0,pending_homework:0,recent_quizzes:0})}catch(h){console.error("Error fetching dashboard data:",h),s({variant:"destructive",title:"Error",description:"Failed to load dashboard data"})}finally{l(!1)}};if(t||o)return n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-muted-foreground"})});const u=[{title:"Total Students",value:a.total_students,icon:vn,color:"text-blue-500",bgColor:"bg-blue-500/10",link:"/dashboard/teacher/students"},{title:"Active Students",value:a.active_students,icon:Mn,color:"text-green-500",bgColor:"bg-green-500/10",link:"/dashboard/teacher/students"},{title:"Pending Homework",value:a.pending_homework,icon:Ei,color:"text-orange-500",bgColor:"bg-orange-500/10",link:"/dashboard/teacher/homework/create"},{title:"Recent Quizzes",value:a.recent_quizzes,icon:or,color:"text-purple-500",bgColor:"bg-purple-500/10",link:"/dashboard/teacher/quizzes"}],d=[{title:"View Students",description:"Manage and view all your students",icon:vn,link:"/dashboard/teacher/students",color:"text-blue-500"},{title:"Student Performance",description:"Track student progress and analytics",icon:Fi,link:"/dashboard/teacher/performance",color:"text-green-500"},{title:"Create Exam",description:"Create a new exam for your students",icon:or,link:"/dashboard/teacher/exams/create",color:"text-purple-500"},{title:"Create Homework",description:"Assign homework to students",icon:Ei,link:"/dashboard/teacher/homework/create",color:"text-orange-500"},{title:"View Content",description:"Browse and view learning content",icon:Jt,link:"/dashboard/teacher/content",color:"text-cyan-500"},{title:"Manage Quizzes",description:"Create and manage quizzes",icon:Ii,link:"/dashboard/teacher/quizzes",color:"text-pink-500"}];return n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(Xn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[n.jsx(pa,{className:"h-8 w-8"}),"Teacher Dashboard"]}),n.jsx("p",{className:"text-muted-foreground",children:"Manage your students, track progress, and create assignments"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:u.map((h,m)=>{const f=h.icon;return n.jsxs(ae,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r(h.link),children:[n.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(fe,{className:"text-sm font-medium",children:h.title}),n.jsx("div",{className:`${h.bgColor} p-2 rounded-lg`,children:n.jsx(f,{className:`h-4 w-4 ${h.color}`})})]}),n.jsxs(ie,{children:[n.jsx("div",{className:"text-2xl font-bold",children:h.value}),n.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mt-1",children:[n.jsx(ji,{className:"h-3 w-3 mr-1"}),n.jsx("span",{children:"View details"})]})]})]},m)})}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Quick Actions"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map((h,m)=>{const f=h.icon;return n.jsx(ae,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r(h.link),children:n.jsx(he,{children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`${h.color} bg-opacity-10 p-3 rounded-lg`,children:n.jsx(f,{className:`h-6 w-6 ${h.color}`})}),n.jsxs("div",{children:[n.jsx(fe,{className:"text-lg",children:h.title}),n.jsx(ze,{children:h.description})]})]})})},m)})})]}),n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Welcome Back!"}),n.jsx(ze,{children:"Get started by exploring the features below"})]}),n.jsx(ie,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(vn,{className:"h-8 w-8 text-blue-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Manage Your Students"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"View student profiles, track progress, and communicate with students"})]})]}),n.jsx(z,{onClick:()=>r("/dashboard/teacher/students"),children:"View Students"})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Fi,{className:"h-8 w-8 text-green-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Track Performance"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Analyze student performance, identify struggling students, and view detailed analytics"})]})]}),n.jsx(z,{onClick:()=>r("/dashboard/teacher/performance"),children:"View Analytics"})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(or,{className:"h-8 w-8 text-purple-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Create Assignments"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Create exams, homework, and quizzes for your students"})]})]}),n.jsx(z,{onClick:()=>r("/dashboard/teacher/exams/create"),children:"Create Exam"})]})]})})]})]})})]})},are=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState({totalUsers:0,totalStudents:0,totalTeachers:0,totalAdmins:0,activeUsers:0,completedProfiles:0,totalLessons:0,recentSignups:0,averageMastery:0,completionRate:0}),[o,l]=p.useState(!0);if(p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{e&&(async()=>{if(e){l(!0);try{try{const x=await pe.admin.getDashboard();x&&i(g=>({...g,totalStudents:x.total_students||0,activeUsers:x.active_students||0,averageMastery:x.average_mastery_score||0,completionRate:x.completion_rate||0}))}catch(x){console.error("Error fetching dashboard metrics:",x)}const{data:d}=await st.from("user_roles").select("role");if(d){const x=d.filter(b=>b.role==="student").length,g=d.filter(b=>b.role==="teacher").length,y=d.filter(b=>b.role==="admin").length;i(b=>({...b,totalUsers:d.length,totalStudents:x,totalTeachers:g,totalAdmins:y}))}const{data:h}=await st.from("profiles").select("profile_completed");if(h){const x=h.filter(g=>g.profile_completed).length;i(g=>({...g,completedProfiles:x,activeUsers:g.activeUsers||x}))}const m=new Date;m.setDate(m.getDate()-7);const{data:f}=await st.from("profiles").select("created_at").gte("created_at",m.toISOString());f&&i(x=>({...x,recentSignups:f.length}))}catch(d){console.error("Error fetching stats:",d),s({variant:"destructive",title:"Error",description:"Failed to load dashboard data"})}finally{l(!1)}}})()},[e,s]),t||o)return n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx("p",{className:"text-muted-foreground",children:"Loading..."})});const c=[{title:"Total Users",value:a.totalUsers,change:"+12%",trend:"up",icon:vn,color:"text-blue-500",bgColor:"bg-blue-500/10"},{title:"Students",value:a.totalStudents,change:"+8%",trend:"up",icon:pa,color:"text-primary",bgColor:"bg-primary/10"},{title:"Teachers",value:a.totalTeachers,change:"+3%",trend:"up",icon:Av,color:"text-green-500",bgColor:"bg-green-500/10"},{title:"Active Users",value:a.activeUsers,change:"+15%",trend:"up",icon:Ad,color:"text-purple-500",bgColor:"bg-purple-500/10"},{title:"Completed Profiles",value:a.completedProfiles,change:"+22%",trend:"up",icon:Mn,color:"text-orange-500",bgColor:"bg-orange-500/10"},{title:"Recent Signups",value:a.recentSignups,change:"+5",trend:"up",icon:Ur,color:"text-cyan-500",bgColor:"bg-cyan-500/10"},{title:"Avg Mastery",value:`${Math.round(a.averageMastery)}%`,change:"+2%",trend:"up",icon:Mn,color:"text-green-500",bgColor:"bg-green-500/10"},{title:"Completion Rate",value:`${Math.round(a.completionRate)}%`,change:"+5%",trend:"up",icon:Ad,color:"text-purple-500",bgColor:"bg-purple-500/10"}];return n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(el,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Admin Dashboard"}),n.jsx("p",{className:"text-muted-foreground",children:"Overview of platform activity and user management"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:c.map((u,d)=>{const h=u.icon;return n.jsxs(ae,{children:[n.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(fe,{className:"text-sm font-medium",children:u.title}),n.jsx("div",{className:`${u.bgColor} p-2 rounded-lg`,children:n.jsx(h,{className:`h-4 w-4 ${u.color}`})})]}),n.jsxs(ie,{children:[n.jsx("div",{className:"text-2xl font-bold",children:u.value}),n.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mt-1",children:[u.trend==="up"?n.jsx(kO,{className:"h-3 w-3 text-green-500 mr-1"}):n.jsx(SO,{className:"h-3 w-3 text-red-500 mr-1"}),n.jsx("span",{className:u.trend==="up"?"text-green-500":"text-red-500",children:u.change}),n.jsx("span",{className:"ml-1",children:"from last month"})]})]})]},d)})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"User Distribution"}),n.jsx(ze,{children:"Breakdown of users by role"})]}),n.jsx(ie,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"bg-primary/10 p-2 rounded-lg",children:n.jsx(pa,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Students"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.totalUsers>0?Math.round(a.totalStudents/a.totalUsers*100):0,"% of total users"]})]})]}),n.jsx("div",{className:"text-2xl font-bold",children:a.totalStudents})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"bg-green-500/10 p-2 rounded-lg",children:n.jsx(Av,{className:"h-5 w-5 text-green-500"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Teachers"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.totalUsers>0?Math.round(a.totalTeachers/a.totalUsers*100):0,"% of total users"]})]})]}),n.jsx("div",{className:"text-2xl font-bold",children:a.totalTeachers})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"bg-blue-500/10 p-2 rounded-lg",children:n.jsx(vn,{className:"h-5 w-5 text-blue-500"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Admins"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.totalUsers>0?Math.round(a.totalAdmins/a.totalUsers*100):0,"% of total users"]})]})]}),n.jsx("div",{className:"text-2xl font-bold",children:a.totalAdmins})]})]})})]}),n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Platform Activity"}),n.jsx(ze,{children:"Recent platform metrics"})]}),n.jsx(ie,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Profile Completion Rate"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.totalUsers>0?Math.round(a.completedProfiles/a.totalUsers*100):0,"% of users have completed profiles"]})]}),n.jsx(Mn,{className:"h-8 w-8 text-green-500"})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"New Signups (7 days)"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.recentSignups," new users joined this week"]})]}),n.jsx(Ur,{className:"h-8 w-8 text-blue-500"})]})]})})]})]}),n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Quick Actions"}),n.jsx(ze,{children:"Common administrative tasks"})]}),n.jsx(ie,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("button",{onClick:()=>r("/dashboard/admin/users"),className:"p-4 border rounded-lg hover:bg-accent transition-colors text-left",children:[n.jsx(vn,{className:"h-6 w-6 text-primary mb-2"}),n.jsx("p",{className:"font-semibold",children:"Manage Users"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"View and edit user accounts"})]}),n.jsxs("button",{onClick:()=>r("/dashboard/admin/analytics"),className:"p-4 border rounded-lg hover:bg-accent transition-colors text-left",children:[n.jsx(Jt,{className:"h-6 w-6 text-primary mb-2"}),n.jsx("p",{className:"font-semibold",children:"View Analytics"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Platform insights and reports"})]}),n.jsxs("button",{onClick:()=>r("/dashboard/admin/settings"),className:"p-4 border rounded-lg hover:bg-accent transition-colors text-left",children:[n.jsx(Ad,{className:"h-6 w-6 text-primary mb-2"}),n.jsx("p",{className:"font-semibold",children:"System Settings"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure platform settings"})]})]})})]})]})})]})},Cs=p.forwardRef(({className:e,...t},r)=>n.jsx("div",{className:"relative w-full overflow-auto",children:n.jsx("table",{ref:r,className:qe("w-full caption-bottom text-sm",e),...t})}));Cs.displayName="Table";const Es=p.forwardRef(({className:e,...t},r)=>n.jsx("thead",{ref:r,className:qe("[&_tr]:border-b",e),...t}));Es.displayName="TableHeader";const Ts=p.forwardRef(({className:e,...t},r)=>n.jsx("tbody",{ref:r,className:qe("[&_tr:last-child]:border-0",e),...t}));Ts.displayName="TableBody";const ire=p.forwardRef(({className:e,...t},r)=>n.jsx("tfoot",{ref:r,className:qe("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));ire.displayName="TableFooter";const Nr=p.forwardRef(({className:e,...t},r)=>n.jsx("tr",{ref:r,className:qe("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...t}));Nr.displayName="TableRow";const mt=p.forwardRef(({className:e,...t},r)=>n.jsx("th",{ref:r,className:qe("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));mt.displayName="TableHead";const it=p.forwardRef(({className:e,...t},r)=>n.jsx("td",{ref:r,className:qe("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));it.displayName="TableCell";const ore=p.forwardRef(({className:e,...t},r)=>n.jsx("caption",{ref:r,className:qe("mt-4 text-sm text-muted-foreground",e),...t}));ore.displayName="TableCaption";var $1=["Enter"," "],lre=["ArrowDown","PageUp","Home"],NT=["ArrowUp","PageDown","End"],cre=[...lre,...NT],ure={ltr:[...$1,"ArrowRight"],rtl:[...$1,"ArrowLeft"]},dre={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Jh="Menu",[jh,hre,mre]=Wf(Jh),[nc,ST]=On(Jh,[mre,zu,Hu]),zp=zu(),kT=Hu(),[fre,sc]=nc(Jh),[pre,Xh]=nc(Jh),_T=e=>{const{__scopeMenu:t,open:r=!1,children:s,dir:a,onOpenChange:i,modal:o=!0}=e,l=zp(t),[c,u]=p.useState(null),d=p.useRef(!1),h=sn(i),m=Uu(a);return p.useEffect(()=>{const f=()=>{d.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>d.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),n.jsx(Lk,{...l,children:n.jsx(fre,{scope:t,open:r,onOpenChange:h,content:c,onContentChange:u,children:n.jsx(pre,{scope:t,onClose:p.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:m,modal:o,children:s})})})};_T.displayName=Jh;var xre="MenuAnchor",Mw=p.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e,a=zp(r);return n.jsx(sb,{...a,...s,ref:t})});Mw.displayName=xre;var Ow="MenuPortal",[gre,CT]=nc(Ow,{forceMount:void 0}),ET=e=>{const{__scopeMenu:t,forceMount:r,children:s,container:a}=e,i=sc(Ow,t);return n.jsx(gre,{scope:t,forceMount:r,children:n.jsx($n,{present:r||i.open,children:n.jsx(Rh,{asChild:!0,container:a,children:s})})})};ET.displayName=Ow;var ha="MenuContent",[vre,Iw]=nc(ha),TT=p.forwardRef((e,t)=>{const r=CT(ha,e.__scopeMenu),{forceMount:s=r.forceMount,...a}=e,i=sc(ha,e.__scopeMenu),o=Xh(ha,e.__scopeMenu);return n.jsx(jh.Provider,{scope:e.__scopeMenu,children:n.jsx($n,{present:s||i.open,children:n.jsx(jh.Slot,{scope:e.__scopeMenu,children:o.modal?n.jsx(yre,{...a,ref:t}):n.jsx(bre,{...a,ref:t})})})})}),yre=p.forwardRef((e,t)=>{const r=sc(ha,e.__scopeMenu),s=p.useRef(null),a=Yt(t,s);return p.useEffect(()=>{const i=s.current;if(i)return Nb(i)},[]),n.jsx(Dw,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Ze(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),bre=p.forwardRef((e,t)=>{const r=sc(ha,e.__scopeMenu);return n.jsx(Dw,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),wre=Dl("MenuContent.ScrollLock"),Dw=p.forwardRef((e,t)=>{const{__scopeMenu:r,loop:s=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:f,disableOutsideScroll:x,...g}=e,y=sc(ha,r),b=Xh(ha,r),v=zp(r),w=kT(r),S=hre(r),[k,N]=p.useState(null),P=p.useRef(null),T=Yt(t,P,y.onContentChange),A=p.useRef(0),E=p.useRef(""),M=p.useRef(0),I=p.useRef(null),se=p.useRef("right"),ee=p.useRef(0),Y=x?dp:p.Fragment,F=x?{as:wre,allowPinchZoom:!0}:void 0,ne=V=>{var X,de;const _=E.current+V,U=S().filter(oe=>!oe.disabled),H=document.activeElement,O=(X=U.find(oe=>oe.ref.current===H))==null?void 0:X.textValue,B=U.map(oe=>oe.textValue),W=Mre(B,_,O),K=(de=U.find(oe=>oe.textValue===W))==null?void 0:de.ref.current;(function oe(me){E.current=me,window.clearTimeout(A.current),me!==""&&(A.current=window.setTimeout(()=>oe(""),1e3))})(_),K&&setTimeout(()=>K.focus())};p.useEffect(()=>()=>window.clearTimeout(A.current),[]),jb();const q=p.useCallback(V=>{var U,H;return se.current===((U=I.current)==null?void 0:U.side)&&Ire(V,(H=I.current)==null?void 0:H.area)},[]);return n.jsx(vre,{scope:r,searchRef:E,onItemEnter:p.useCallback(V=>{q(V)&&V.preventDefault()},[q]),onItemLeave:p.useCallback(V=>{var _;q(V)||((_=P.current)==null||_.focus(),N(null))},[q]),onTriggerLeave:p.useCallback(V=>{q(V)&&V.preventDefault()},[q]),pointerGraceTimerRef:M,onPointerGraceIntentChange:p.useCallback(V=>{I.current=V},[]),children:n.jsx(Y,{...F,children:n.jsx(lp,{asChild:!0,trapped:a,onMountAutoFocus:Ze(i,V=>{var _;V.preventDefault(),(_=P.current)==null||_.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:n.jsx(Ou,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:f,children:n.jsx(Tb,{asChild:!0,...w,dir:b.dir,orientation:"vertical",loop:s,currentTabStopId:k,onCurrentTabStopIdChange:N,onEntryFocus:Ze(c,V=>{b.isUsingKeyboardRef.current||V.preventDefault()}),preventScrollOnEntryFocus:!0,children:n.jsx(ab,{role:"menu","aria-orientation":"vertical","data-state":HT(y.open),"data-radix-menu-content":"",dir:b.dir,...v,...g,ref:T,style:{outline:"none",...g.style},onKeyDown:Ze(g.onKeyDown,V=>{const U=V.target.closest("[data-radix-menu-content]")===V.currentTarget,H=V.ctrlKey||V.altKey||V.metaKey,O=V.key.length===1;U&&(V.key==="Tab"&&V.preventDefault(),!H&&O&&ne(V.key));const B=P.current;if(V.target!==B||!cre.includes(V.key))return;V.preventDefault();const K=S().filter(X=>!X.disabled).map(X=>X.ref.current);NT.includes(V.key)&&K.reverse(),Pre(K)}),onBlur:Ze(e.onBlur,V=>{V.currentTarget.contains(V.target)||(window.clearTimeout(A.current),E.current="")}),onPointerMove:Ze(e.onPointerMove,Nh(V=>{const _=V.target,U=ee.current!==V.clientX;if(V.currentTarget.contains(_)&&U){const H=V.clientX>ee.current?"right":"left";se.current=H,ee.current=V.clientX}}))})})})})})})});TT.displayName=ha;var jre="MenuGroup",Fw=p.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e;return n.jsx(_t.div,{role:"group",...s,ref:t})});Fw.displayName=jre;var Nre="MenuLabel",AT=p.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e;return n.jsx(_t.div,{...s,ref:t})});AT.displayName=Nre;var _f="MenuItem",WN="menu.itemSelect",$p=p.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:s,...a}=e,i=p.useRef(null),o=Xh(_f,e.__scopeMenu),l=Iw(_f,e.__scopeMenu),c=Yt(t,i),u=p.useRef(!1),d=()=>{const h=i.current;if(!r&&h){const m=new CustomEvent(WN,{bubbles:!0,cancelable:!0});h.addEventListener(WN,f=>s==null?void 0:s(f),{once:!0}),Ly(h,m),m.defaultPrevented?u.current=!1:o.onClose()}};return n.jsx(PT,{...a,ref:c,disabled:r,onClick:Ze(e.onClick,d),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),u.current=!0},onPointerUp:Ze(e.onPointerUp,h=>{var m;u.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:Ze(e.onKeyDown,h=>{const m=l.searchRef.current!=="";r||m&&h.key===" "||$1.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});$p.displayName=_f;var PT=p.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:s=!1,textValue:a,...i}=e,o=Iw(_f,r),l=kT(r),c=p.useRef(null),u=Yt(t,c),[d,h]=p.useState(!1),[m,f]=p.useState("");return p.useEffect(()=>{const x=c.current;x&&f((x.textContent??"").trim())},[i.children]),n.jsx(jh.ItemSlot,{scope:r,disabled:s,textValue:a??m,children:n.jsx(Ab,{asChild:!0,...l,focusable:!s,children:n.jsx(_t.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...i,ref:u,onPointerMove:Ze(e.onPointerMove,Nh(x=>{s?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ze(e.onPointerLeave,Nh(x=>o.onItemLeave(x))),onFocus:Ze(e.onFocus,()=>h(!0)),onBlur:Ze(e.onBlur,()=>h(!1))})})})}),Sre="MenuCheckboxItem",RT=p.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:s,...a}=e;return n.jsx(FT,{scope:e.__scopeMenu,checked:r,children:n.jsx($p,{role:"menuitemcheckbox","aria-checked":Cf(r)?"mixed":r,...a,ref:t,"data-state":zw(r),onSelect:Ze(a.onSelect,()=>s==null?void 0:s(Cf(r)?!0:!r),{checkForDefaultPrevented:!1})})})});RT.displayName=Sre;var MT="MenuRadioGroup",[kre,_re]=nc(MT,{value:void 0,onValueChange:()=>{}}),OT=p.forwardRef((e,t)=>{const{value:r,onValueChange:s,...a}=e,i=sn(s);return n.jsx(kre,{scope:e.__scopeMenu,value:r,onValueChange:i,children:n.jsx(Fw,{...a,ref:t})})});OT.displayName=MT;var IT="MenuRadioItem",DT=p.forwardRef((e,t)=>{const{value:r,...s}=e,a=_re(IT,e.__scopeMenu),i=r===a.value;return n.jsx(FT,{scope:e.__scopeMenu,checked:i,children:n.jsx($p,{role:"menuitemradio","aria-checked":i,...s,ref:t,"data-state":zw(i),onSelect:Ze(s.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,r)},{checkForDefaultPrevented:!1})})})});DT.displayName=IT;var Lw="MenuItemIndicator",[FT,Cre]=nc(Lw,{checked:!1}),LT=p.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:s,...a}=e,i=Cre(Lw,r);return n.jsx($n,{present:s||Cf(i.checked)||i.checked===!0,children:n.jsx(_t.span,{...a,ref:t,"data-state":zw(i.checked)})})});LT.displayName=Lw;var Ere="MenuSeparator",zT=p.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e;return n.jsx(_t.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});zT.displayName=Ere;var Tre="MenuArrow",$T=p.forwardRef((e,t)=>{const{__scopeMenu:r,...s}=e,a=zp(r);return n.jsx(ib,{...a,...s,ref:t})});$T.displayName=Tre;var Are="MenuSub",[Wse,qT]=nc(Are),yd="MenuSubTrigger",BT=p.forwardRef((e,t)=>{const r=sc(yd,e.__scopeMenu),s=Xh(yd,e.__scopeMenu),a=qT(yd,e.__scopeMenu),i=Iw(yd,e.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>d,[d]),p.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),n.jsx(Mw,{asChild:!0,...u,children:n.jsx(PT,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":HT(r.open),...e,ref:Hf(t,a.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Ze(e.onPointerMove,Nh(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:Ze(e.onPointerLeave,Nh(h=>{var f,x;d();const m=(f=r.content)==null?void 0:f.getBoundingClientRect();if(m){const g=(x=r.content)==null?void 0:x.dataset.side,y=g==="right",b=y?-5:5,v=m[y?"left":"right"],w=m[y?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+b,y:h.clientY},{x:v,y:m.top},{x:w,y:m.top},{x:w,y:m.bottom},{x:v,y:m.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Ze(e.onKeyDown,h=>{var f;const m=i.searchRef.current!=="";e.disabled||m&&h.key===" "||ure[s.dir].includes(h.key)&&(r.onOpenChange(!0),(f=r.content)==null||f.focus(),h.preventDefault())})})})});BT.displayName=yd;var UT="MenuSubContent",VT=p.forwardRef((e,t)=>{const r=CT(ha,e.__scopeMenu),{forceMount:s=r.forceMount,...a}=e,i=sc(ha,e.__scopeMenu),o=Xh(ha,e.__scopeMenu),l=qT(UT,e.__scopeMenu),c=p.useRef(null),u=Yt(t,c);return n.jsx(jh.Provider,{scope:e.__scopeMenu,children:n.jsx($n,{present:s||i.open,children:n.jsx(jh.Slot,{scope:e.__scopeMenu,children:n.jsx(Dw,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Ze(e.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Ze(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:Ze(e.onKeyDown,d=>{var f;const h=d.currentTarget.contains(d.target),m=dre[o.dir].includes(d.key);h&&m&&(i.onOpenChange(!1),(f=l.trigger)==null||f.focus(),d.preventDefault())})})})})})});VT.displayName=UT;function HT(e){return e?"open":"closed"}function Cf(e){return e==="indeterminate"}function zw(e){return Cf(e)?"indeterminate":e?"checked":"unchecked"}function Pre(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function Rre(e,t){return e.map((r,s)=>e[(t+s)%e.length])}function Mre(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=Rre(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function Ore(e,t){const{x:r,y:s}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,h=c.x,m=c.y;d>s!=m>s&&r<(h-u)*(s-d)/(m-d)+u&&(a=!a)}return a}function Ire(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return Ore(r,t)}function Nh(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Dre=_T,Fre=Mw,Lre=ET,zre=TT,$re=Fw,qre=AT,Bre=$p,Ure=RT,Vre=OT,Hre=DT,Wre=LT,Gre=zT,Qre=$T,Yre=BT,Kre=VT,qp="DropdownMenu",[Jre,Gse]=On(qp,[ST]),ms=ST(),[Xre,WT]=Jre(qp),GT=e=>{const{__scopeDropdownMenu:t,children:r,dir:s,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=ms(t),u=p.useRef(null),[d,h]=ai({prop:a,defaultProp:i??!1,onChange:o,caller:qp});return n.jsx(Xre,{scope:t,triggerId:ri(),triggerRef:u,contentId:ri(),open:d,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(m=>!m),[h]),modal:l,children:n.jsx(Dre,{...c,open:d,onOpenChange:h,dir:s,modal:l,children:r})})};GT.displayName=qp;var QT="DropdownMenuTrigger",YT=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:s=!1,...a}=e,i=WT(QT,r),o=ms(r);return n.jsx(Fre,{asChild:!0,...o,children:n.jsx(_t.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...a,ref:Hf(t,i.triggerRef),onPointerDown:Ze(e.onPointerDown,l=>{!s&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:Ze(e.onKeyDown,l=>{s||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});YT.displayName=QT;var Zre="DropdownMenuPortal",KT=e=>{const{__scopeDropdownMenu:t,...r}=e,s=ms(t);return n.jsx(Lre,{...s,...r})};KT.displayName=Zre;var JT="DropdownMenuContent",XT=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=WT(JT,r),i=ms(r),o=p.useRef(!1);return n.jsx(zre,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...s,ref:t,onCloseAutoFocus:Ze(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Ze(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!a.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});XT.displayName=JT;var ene="DropdownMenuGroup",tne=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=ms(r);return n.jsx($re,{...a,...s,ref:t})});tne.displayName=ene;var rne="DropdownMenuLabel",ZT=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=ms(r);return n.jsx(qre,{...a,...s,ref:t})});ZT.displayName=rne;var nne="DropdownMenuItem",eA=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=ms(r);return n.jsx(Bre,{...a,...s,ref:t})});eA.displayName=nne;var sne="DropdownMenuCheckboxItem",tA=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=ms(r);return n.jsx(Ure,{...a,...s,ref:t})});tA.displayName=sne;var ane="DropdownMenuRadioGroup",ine=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=ms(r);return n.jsx(Vre,{...a,...s,ref:t})});ine.displayName=ane;var one="DropdownMenuRadioItem",rA=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=ms(r);return n.jsx(Hre,{...a,...s,ref:t})});rA.displayName=one;var lne="DropdownMenuItemIndicator",nA=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=ms(r);return n.jsx(Wre,{...a,...s,ref:t})});nA.displayName=lne;var cne="DropdownMenuSeparator",sA=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=ms(r);return n.jsx(Gre,{...a,...s,ref:t})});sA.displayName=cne;var une="DropdownMenuArrow",dne=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=ms(r);return n.jsx(Qre,{...a,...s,ref:t})});dne.displayName=une;var hne="DropdownMenuSubTrigger",aA=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=ms(r);return n.jsx(Yre,{...a,...s,ref:t})});aA.displayName=hne;var mne="DropdownMenuSubContent",iA=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...s}=e,a=ms(r);return n.jsx(Kre,{...a,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});iA.displayName=mne;var fne=GT,pne=YT,xne=KT,oA=XT,lA=ZT,cA=eA,uA=tA,dA=rA,hA=nA,mA=sA,fA=aA,pA=iA;const $w=fne,qw=pne,gne=p.forwardRef(({className:e,inset:t,children:r,...s},a)=>n.jsxs(fA,{ref:a,className:qe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...s,children:[r,n.jsx(J6,{className:"ml-auto h-4 w-4"})]}));gne.displayName=fA.displayName;const vne=p.forwardRef(({className:e,...t},r)=>n.jsx(pA,{ref:r,className:qe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));vne.displayName=pA.displayName;const Bp=p.forwardRef(({className:e,sideOffset:t=4,...r},s)=>n.jsx(xne,{children:n.jsx(oA,{ref:s,sideOffset:t,className:qe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Bp.displayName=oA.displayName;const Ya=p.forwardRef(({className:e,inset:t,...r},s)=>n.jsx(cA,{ref:s,className:qe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...r}));Ya.displayName=cA.displayName;const yne=p.forwardRef(({className:e,children:t,checked:r,...s},a)=>n.jsxs(uA,{ref:a,className:qe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:r,...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(hA,{children:n.jsx($c,{className:"h-4 w-4"})})}),t]}));yne.displayName=uA.displayName;const bne=p.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(dA,{ref:s,className:qe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(hA,{children:n.jsx(ek,{className:"h-2 w-2 fill-current"})})}),t]}));bne.displayName=dA.displayName;const wne=p.forwardRef(({className:e,inset:t,...r},s)=>n.jsx(lA,{ref:s,className:qe("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));wne.displayName=lA.displayName;const jne=p.forwardRef(({className:e,...t},r)=>n.jsx(mA,{ref:r,className:qe("-mx-1 my-1 h-px bg-muted",e),...t}));jne.displayName=mA.displayName;const Nne=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState([]),[o,l]=p.useState([]),[c,u]=p.useState(""),[d,h]=p.useState("all"),[m,f]=p.useState(null),[x,g]=p.useState(!1),[y,b]=p.useState("");p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{v()},[]),p.useEffect(()=>{w()},[c,d,a]);const v=async()=>{try{const{data:T,error:A}=await st.from("profiles").select("*");if(A)throw A;const{data:E,error:M}=await st.from("user_roles").select("*");if(M)throw M;const{data:I}=await st.from("student_profiles").select("user_id, class_grade, school_name"),se=T.map(ee=>{const Y=E.find(ne=>ne.user_id===ee.user_id),F=I==null?void 0:I.find(ne=>ne.user_id===ee.user_id);return{id:ee.user_id,email:"",full_name:ee.full_name,role:(Y==null?void 0:Y.role)||"student",profile_completed:ee.profile_completed,created_at:ee.created_at,avatar_url:ee.avatar_url||void 0,student_profile:F?{class_grade:F.class_grade,school_name:F.school_name||""}:void 0}});i(se),l(se)}catch(T){s({variant:"destructive",title:"Error",description:T.message||"Failed to fetch users"})}},w=()=>{let T=a;d!=="all"&&(T=T.filter(A=>A.role===d)),c&&(T=T.filter(A=>A.full_name.toLowerCase().includes(c.toLowerCase())||A.id.toLowerCase().includes(c.toLowerCase()))),l(T)},S=async()=>{if(!(!m||!y))try{const{error:T}=await st.from("user_roles").upsert({user_id:m.id,role:y},{onConflict:"user_id,role"});if(T)throw T;s({title:"Success",description:`User role updated to ${y}`}),g(!1),v()}catch(T){s({variant:"destructive",title:"Error",description:T.message||"Failed to update user role"})}},k=async T=>{if(confirm("Are you sure you want to delete this user?"))try{await st.from("user_roles").delete().eq("user_id",T),await st.from("profiles").delete().eq("user_id",T),s({title:"Success",description:"User deleted successfully"}),v()}catch(A){s({variant:"destructive",title:"Error",description:A.message||"Failed to delete user"})}},N=T=>{switch(T){case"admin":return"bg-red-500/10 text-red-500";case"teacher":return"bg-green-500/10 text-green-500";case"student":return"bg-blue-500/10 text-blue-500";default:return"bg-gray-500/10 text-gray-500"}},P=T=>T.split(" ").map(A=>A[0]).join("").toUpperCase();return t?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx("p",{className:"text-muted-foreground",children:"Loading..."})}):n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(el,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"User Management"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage all users, roles, and permissions"})]}),n.jsx(ae,{className:"mb-6",children:n.jsx(ie,{className:"pt-6",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(zi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(Ve,{placeholder:"Search users by name or ID...",value:c,onChange:T=>u(T.target.value),className:"pl-9"})]}),n.jsxs(Nt,{value:d,onValueChange:h,children:[n.jsxs(wt,{className:"w-full md:w-[180px]",children:[n.jsx(Ih,{className:"h-4 w-4 mr-2"}),n.jsx(St,{placeholder:"Filter by role"})]}),n.jsxs(jt,{children:[n.jsx(re,{value:"all",children:"All Roles"}),n.jsx(re,{value:"student",children:"Students"}),n.jsx(re,{value:"teacher",children:"Teachers"}),n.jsx(re,{value:"admin",children:"Admins"})]})]})]})})}),n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsxs(fe,{children:["All Users (",o.length,")"]}),n.jsx(ze,{children:"View and manage user accounts"})]}),n.jsx(ie,{children:n.jsxs(Cs,{children:[n.jsx(Es,{children:n.jsxs(Nr,{children:[n.jsx(mt,{children:"User"}),n.jsx(mt,{children:"Role"}),n.jsx(mt,{children:"Profile Status"}),n.jsx(mt,{children:"Grade/School"}),n.jsx(mt,{children:"Joined"}),n.jsx(mt,{className:"text-right",children:"Actions"})]})}),n.jsx(Ts,{children:o.length===0?n.jsx(Nr,{children:n.jsx(it,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No users found"})}):o.map(T=>n.jsxs(Nr,{children:[n.jsx(it,{children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(an,{className:"h-10 w-10",children:[n.jsx(os,{src:T.avatar_url}),n.jsx(on,{children:P(T.full_name)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:T.full_name}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[T.id.slice(0,8),"..."]})]})]})}),n.jsx(it,{children:n.jsx(je,{className:N(T.role),children:T.role.charAt(0).toUpperCase()+T.role.slice(1)})}),n.jsx(it,{children:T.profile_completed?n.jsxs("div",{className:"flex items-center gap-2 text-green-500",children:[n.jsx(Qt,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:"Completed"})]}):n.jsxs("div",{className:"flex items-center gap-2 text-orange-500",children:[n.jsx(Li,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:"Incomplete"})]})}),n.jsx(it,{children:T.student_profile?n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium",children:["Grade ",T.student_profile.class_grade]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:T.student_profile.school_name})]}):n.jsx("span",{className:"text-sm text-muted-foreground",children:"-"})}),n.jsx(it,{children:n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(As,{className:"h-4 w-4"}),new Date(T.created_at).toLocaleDateString()]})}),n.jsx(it,{className:"text-right",children:n.jsxs($w,{children:[n.jsx(qw,{asChild:!0,children:n.jsx(z,{variant:"ghost",size:"icon",children:n.jsx(Uy,{className:"h-4 w-4"})})}),n.jsxs(Bp,{align:"end",children:[n.jsxs(Ya,{onClick:()=>{f(T),b(T.role),g(!0)},children:[n.jsx(Ll,{className:"h-4 w-4 mr-2"}),"Edit Role"]}),n.jsxs(Ya,{onClick:()=>k(T.id),className:"text-destructive",children:[n.jsx(Jl,{className:"h-4 w-4 mr-2"}),"Delete User"]})]})]})})]},T.id))})]})})]})]})}),n.jsx(un,{open:x,onOpenChange:g,children:n.jsxs(tn,{children:[n.jsxs(rn,{children:[n.jsx(nn,{children:"Edit User Role"}),n.jsxs(xn,{children:["Change the role for ",m==null?void 0:m.full_name]})]}),n.jsx("div",{className:"space-y-4 py-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Select Role"}),n.jsxs(Nt,{value:y,onValueChange:b,children:[n.jsx(wt,{children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"student",children:"Student"}),n.jsx(re,{value:"teacher",children:"Teacher"}),n.jsx(re,{value:"admin",children:"Admin"})]})]})]})}),n.jsxs(Fn,{children:[n.jsx(z,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),n.jsx(z,{onClick:S,children:"Save Changes"})]})]})})]})},Sne=()=>{const{user:e,loading:t}=Wt(),r=Gt(),[s,a]=p.useState({totalUsers:0,newUsersThisMonth:0,activeUsers:0,profileCompletionRate:0,studentsByGrade:{},signupsOverTime:[]});p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{i()},[]);const i=async()=>{try{const{data:o}=await st.from("profiles").select("*"),{data:l}=await st.from("user_roles").select("*"),{data:c}=await st.from("student_profiles").select("class_grade, created_at");if(o&&l&&c){const u=o.length,d=o.filter(b=>b.profile_completed).length,h=u>0?Math.round(d/u*100):0,m=new Date,f=new Date(m.getFullYear(),m.getMonth(),1),x=o.filter(b=>new Date(b.created_at)>=f).length,g={};c.forEach(b=>{g[b.class_grade]=(g[b.class_grade]||0)+1});const y=[];for(let b=6;b>=0;b--){const v=new Date;v.setDate(v.getDate()-b);const w=v.toISOString().split("T")[0],S=o.filter(k=>k.created_at.startsWith(w)).length;y.push({date:w,count:S})}a({totalUsers:u,newUsersThisMonth:x,activeUsers:d,profileCompletionRate:h,studentsByGrade:g,signupsOverTime:y})}}catch(o){console.error("Error fetching analytics:",o)}};return t?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx("p",{className:"text-muted-foreground",children:"Loading..."})}):n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(el,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Analytics"}),n.jsx("p",{className:"text-muted-foreground",children:"Platform insights and performance metrics"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsxs(ae,{children:[n.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(fe,{className:"text-sm font-medium",children:"Total Users"}),n.jsx(vn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ie,{children:[n.jsx("div",{className:"text-2xl font-bold",children:s.totalUsers}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.newUsersThisMonth," new this month"]})]})]}),n.jsxs(ae,{children:[n.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(fe,{className:"text-sm font-medium",children:"Active Users"}),n.jsx(Ad,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ie,{children:[n.jsx("div",{className:"text-2xl font-bold",children:s.activeUsers}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.profileCompletionRate,"% completion rate"]})]})]}),n.jsxs(ae,{children:[n.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(fe,{className:"text-sm font-medium",children:"Profile Completion"}),n.jsx(Mn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ie,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[s.profileCompletionRate,"%"]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.totalUsers-s.activeUsers," incomplete"]})]})]}),n.jsxs(ae,{children:[n.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(fe,{className:"text-sm font-medium",children:"New Signups"}),n.jsx(As,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ie,{children:[n.jsx("div",{className:"text-2xl font-bold",children:s.newUsersThisMonth}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Students by Grade"}),n.jsx(ze,{children:"Distribution of students across grades"})]}),n.jsx(ie,{children:n.jsxs("div",{className:"space-y-4",children:[Object.entries(s.studentsByGrade).sort(([o],[l])=>Number(o)-Number(l)).map(([o,l])=>{const c=Math.max(...Object.values(s.studentsByGrade)),u=c>0?l/c*100:0;return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("span",{className:"font-medium",children:["Grade ",o]}),n.jsxs("span",{className:"text-muted-foreground",children:[l," students"]})]}),n.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:n.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${u}%`}})})]},o)}),Object.keys(s.studentsByGrade).length===0&&n.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No student data available"})]})})]}),n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Signups Over Time"}),n.jsx(ze,{children:"New user registrations (last 7 days)"})]}),n.jsx(ie,{children:n.jsx("div",{className:"space-y-4",children:s.signupsOverTime.map((o,l)=>{const c=Math.max(...s.signupsOverTime.map(m=>m.count),1),u=o.count/c*100,h=new Date(o.date).toLocaleDateString("en-US",{weekday:"short"});return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"font-medium",children:h}),n.jsxs("span",{className:"text-muted-foreground",children:[o.count," signups"]})]}),n.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:n.jsx("div",{className:"bg-chart-1 h-2 rounded-full transition-all",style:{width:`${u}%`}})})]},l)})})})]})]}),n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Platform Overview"}),n.jsx(ze,{children:"Summary of platform activity"})]}),n.jsx(ie,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"text-center p-6 bg-muted/50 rounded-lg",children:[n.jsx(pa,{className:"h-8 w-8 text-primary mx-auto mb-2"}),n.jsx("p",{className:"text-2xl font-bold",children:s.totalUsers}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Users"})]}),n.jsxs("div",{className:"text-center p-6 bg-muted/50 rounded-lg",children:[n.jsx(Jt,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),n.jsx("p",{className:"text-2xl font-bold",children:s.activeUsers}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Users"})]}),n.jsxs("div",{className:"text-center p-6 bg-muted/50 rounded-lg",children:[n.jsx(Fi,{className:"h-8 w-8 text-blue-500 mx-auto mb-2"}),n.jsxs("p",{className:"text-2xl font-bold",children:[s.profileCompletionRate,"%"]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Completion Rate"})]})]})})]})]})})]})},kne=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState("upload"),[o,l]=p.useState(!1),[c,u]=p.useState({}),[d,h]=p.useState({}),[m,f]=p.useState("ncert"),[x,g]=p.useState(""),[y,b]=p.useState(""),[v,w]=p.useState(void 0),[S,k]=p.useState(""),[N,P]=p.useState(""),[T,A]=p.useState([]),[E,M]=p.useState(""),[I,se]=p.useState(void 0),[ee,Y]=p.useState(null),[F,ne]=p.useState("");p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]);const q=async(U,H=60)=>{let O=0;const B=2e3,W=async()=>{try{const K=await pe.admin.getContentStatus(U);if(u(X=>({...X,[U]:K.indexing_progress})),h(X=>({...X,[U]:K.processing_status})),K.processing_status==="completed"||K.processing_status==="failed")return;O++,O<H&&setTimeout(W,B)}catch(K){console.error("Error polling content status:",K),O++,O<H&&setTimeout(W,B)}};setTimeout(W,1e3)},V=async()=>{var U,H,O;if(!ee&&!E.trim()){s({variant:"destructive",title:"Error",description:"Please provide either a file or content text (or both)"});return}if(!x){s({variant:"destructive",title:"Error",description:"Please select a subject"});return}l(!0);try{let B={};if(F.trim())try{B=JSON.parse(F)}catch{B={notes:F}}if(v&&(B.chapter_number=v),I&&(B.class_grade=I),S&&(B.title=S),ee&&E.trim()){const K=(await pe.admin.uploadContentFile({file:ee,subject:x,chapter:y||void 0,topic_ids:T.length>0?T:void 0,class_grade:I,difficulty:N&&N!=="none"?N:void 0})).id;K&&(u(oe=>({...oe,[K]:0})),h(oe=>({...oe,[K]:"pending"})),q(K));let X="";try{const oe=await fetch(`http://localhost:8000/api/content/${K}`);oe.ok&&(X=(await oe.json()).content_text||"")}catch(oe){console.warn("Could not fetch extracted text:",oe)}const de=X?`${X}

--- Additional Content ---

${E}`:E;await pe.admin.updateContent({content_id:K,title:S||void 0,chapter:y||void 0,difficulty:N&&N!=="none"?N:void 0,class_grade:I,chapter_number:v,metadata:B});try{const{error:oe}=await st.from("content").update({content_text:de}).eq("id",K);oe&&console.warn("Failed to update content_text:",oe)}catch(oe){console.warn("Failed to update content text:",oe)}s({title:"Success",description:"File and content uploaded successfully!"})}else if(ee){const W=await pe.admin.uploadContentFile({file:ee,subject:x,chapter:y||void 0,topic_ids:T.length>0?T:void 0,class_grade:I,difficulty:N&&N!=="none"?N:void 0});(Object.keys(B).length>0||S||y||N)&&await pe.admin.updateContent({content_id:W.id,title:S||void 0,chapter:y||void 0,difficulty:N&&N!=="none"?N:void 0,class_grade:I,chapter_number:v,metadata:B}),W.id&&(u(K=>({...K,[W.id]:0})),h(K=>({...K,[W.id]:"pending"})),q(W.id)),s({title:"Success",description:W.message||"File uploaded successfully! Indexing in progress..."})}else{const W={type:m,subject:x,content_text:E,metadata:B};y&&(W.chapter=y),S&&(W.title=S),N&&N!=="none"&&(W.difficulty=N),T.length>0&&(W.topic_ids=T),I&&(W.metadata={...B,class_grade:I}),v&&(W.metadata={...W.metadata,chapter_number:v});const K=await fetch("http://localhost:8000/api/content/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)}).then(async X=>{if(!X.ok){const de=await X.json().catch(()=>({detail:"Failed to upload content"}));throw new Error(de.detail||de.message||"Failed to upload content")}return X.json()});K.id&&(u(X=>({...X,[K.id]:0})),h(X=>({...X,[K.id]:"pending"})),q(K.id)),s({title:"Success",description:"Content uploaded successfully! Indexing in progress..."})}M(""),ne(""),k(""),b(""),w(void 0),P(""),A([]),Y(null),se(void 0),g("")}catch(B){console.error("Upload error:",B);const W=((H=(U=B.data)==null?void 0:U.error)==null?void 0:H.message)||((O=B.data)==null?void 0:O.detail)||B.message||"Failed to upload content";s({variant:"destructive",title:"Error",description:W})}finally{l(!1)}},_=async()=>{l(!0);try{await pe.admin.reindexContent(),s({title:"Success",description:"Content reindexing started!"})}catch(U){s({variant:"destructive",title:"Error",description:U.message||"Failed to reindex content"})}finally{l(!1)}};return t?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx("p",{className:"text-muted-foreground",children:"Loading..."})}):n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(el,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-5xl mx-auto",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Content Management"}),n.jsx("p",{className:"text-muted-foreground",children:"Upload and manage educational content"})]}),n.jsx(z,{asChild:!0,variant:"outline",children:n.jsxs(Ni,{to:"/dashboard/admin/content/manage",children:[n.jsx(or,{className:"h-4 w-4 mr-2"}),"Manage All Content"]})})]})}),n.jsxs(Zs,{value:a,onValueChange:i,className:"space-y-6",children:[n.jsxs(Ps,{children:[n.jsx(gr,{value:"upload",children:"Upload Content"}),n.jsx(gr,{value:"manage",onClick:()=>r("/dashboard/admin/content/manage"),children:"Manage All Content"}),n.jsx(gr,{value:"reindex",children:"Reindex Content"})]}),n.jsx(Er,{value:"upload",className:"space-y-6",children:n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(Tv,{className:"h-5 w-5"}),"Upload Content"]}),n.jsx(ze,{children:"Upload a file, write content text, or do both together. At least one is required."})]}),n.jsxs(ie,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Content Type *"}),n.jsxs(Nt,{value:m,onValueChange:f,children:[n.jsx(wt,{children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"ncert",children:"NCERT"}),n.jsx(re,{value:"pyq",children:"Previous Year Question"}),n.jsx(re,{value:"hots",children:"HOTS Question"}),n.jsx(re,{value:"text",children:"Text"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Subject *"}),n.jsxs(Nt,{value:x,onValueChange:g,children:[n.jsx(wt,{children:n.jsx(St,{placeholder:"Select subject"})}),n.jsxs(jt,{children:[n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Title (Optional)"}),n.jsx(Ve,{value:S,onChange:U=>k(U.target.value),placeholder:"Content title"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Chapter Name (Optional)"}),n.jsx(Ve,{value:y,onChange:U=>b(U.target.value),placeholder:"Chapter name"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Chapter Number (Optional)"}),n.jsx(Ve,{type:"number",value:v||"",onChange:U=>{const H=U.target.value?parseInt(U.target.value):void 0;w(H)},placeholder:"Chapter number",min:"1"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Class/Grade (Optional)"}),n.jsx(Ve,{type:"number",placeholder:"e.g., 8, 9, 10, 11, 12",value:I||"",onChange:U=>{const H=U.target.value?parseInt(U.target.value):void 0;se(H)},min:"1",max:"12"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Difficulty (Optional)"}),n.jsxs(Nt,{value:N||void 0,onValueChange:P,children:[n.jsx(wt,{children:n.jsx(St,{placeholder:"Select difficulty"})}),n.jsxs(jt,{children:[n.jsx(re,{value:"none",children:"None"}),n.jsx(re,{value:"easy",children:"Easy"}),n.jsx(re,{value:"medium",children:"Medium"}),n.jsx(re,{value:"hard",children:"Hard"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Topic IDs (Optional)"}),n.jsx(Ve,{placeholder:"topic-id-1, topic-id-2",value:T.join(", "),onChange:U=>{const H=U.target.value.split(",").map(O=>O.trim()).filter(Boolean);A(H)}})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"File Upload (Optional)"}),n.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:[n.jsx(Ve,{type:"file",onChange:U=>{var H;return Y(((H=U.target.files)==null?void 0:H[0])||null)},className:"hidden",id:"file-upload",accept:".pdf,.doc,.docx,.txt"}),n.jsx("label",{htmlFor:"file-upload",children:n.jsx(z,{variant:"outline",asChild:!0,children:n.jsx("span",{children:"Choose File"})})}),ee&&n.jsxs("div",{className:"mt-2",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:ee.name}),n.jsx(z,{variant:"ghost",size:"sm",onClick:()=>Y(null),className:"mt-1",children:"Remove File"})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Upload PDF, DOCX, or TXT file. Text will be extracted automatically."})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Content Text (Optional - Required if no file is uploaded)"}),n.jsx(kr,{placeholder:"Enter content here... (or upload a file, or do both)",value:E,onChange:U=>M(U.target.value),rows:10}),n.jsx("p",{className:"text-xs text-muted-foreground",children:ee?"You can add additional text content here. It will be combined with the file content.":"Enter your content text here, or upload a file above, or do both together."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Metadata (JSON, Optional)"}),n.jsx(kr,{placeholder:'{"author": "Name", "source": "Source"}',value:F,onChange:U=>ne(U.target.value),rows:3})]}),n.jsx(z,{onClick:V,disabled:o||!ee&&!E.trim()||!x,className:"w-full",children:o?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Tv,{className:"h-4 w-4 mr-2"}),ee&&E.trim()?"Upload File & Content":ee?"Upload File":"Upload Content"]})}),n.jsx("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:n.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:[n.jsx("strong",{children:"Tip:"})," You can upload a file, write text content, or do both together. If both are provided, the file will be uploaded first and then updated with your additional text content."]})}),Object.keys(c).length>0&&n.jsxs("div",{className:"mt-4 space-y-3",children:[n.jsx("h3",{className:"text-sm font-medium",children:"Indexing Progress"}),Object.entries(c).map(([U,H])=>{const O=d[U]||"pending";return n.jsxs("div",{className:"space-y-2 p-3 bg-muted rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("span",{className:"font-medium",children:["Content ID: ",U.substring(0,8),"..."]}),n.jsxs("span",{className:"text-muted-foreground",children:[O==="completed"&&n.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[n.jsx(Qt,{className:"h-4 w-4"}),"Complete"]}),O==="failed"&&n.jsxs("span",{className:"flex items-center gap-1 text-red-600",children:[n.jsx(Li,{className:"h-4 w-4"}),"Failed"]}),O==="processing"&&n.jsxs("span",{className:"flex items-center gap-1 text-blue-600",children:[n.jsx(Oe,{className:"h-4 w-4 animate-spin"}),"Processing"]}),O==="pending"&&n.jsx("span",{className:"text-yellow-600",children:"Pending"})]})]}),n.jsx(_i,{value:H,className:"h-2"}),n.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[n.jsxs("span",{children:["Status: ",O]}),n.jsxs("span",{children:[H,"% indexed"]})]})]},U)})]})]})]})}),n.jsx(Er,{value:"reindex",children:n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(U0,{className:"h-5 w-5"}),"Reindex Content"]}),n.jsx(ze,{children:"Reindex all content in the vector database for better search results"})]}),n.jsx(ie,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:n.jsxs("p",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:[n.jsx("strong",{children:"Warning:"})," Reindexing may take some time and will update all content embeddings. This operation should be performed during low-traffic periods."]})}),n.jsx(z,{onClick:_,disabled:o,className:"w-full",children:o?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Reindexing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(U0,{className:"h-4 w-4 mr-2"}),"Start Reindexing"]})})]})})]})})]})]})})]})};var xA="AlertDialog",[_ne,Qse]=On(xA,[iT]),Ki=iT(),gA=e=>{const{__scopeAlertDialog:t,...r}=e,s=Ki(t);return n.jsx(Aw,{...s,...r,modal:!0})};gA.displayName=xA;var Cne="AlertDialogTrigger",Ene=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=Ki(r);return n.jsx(Pw,{...a,...s,ref:t})});Ene.displayName=Cne;var Tne="AlertDialogPortal",vA=e=>{const{__scopeAlertDialog:t,...r}=e,s=Ki(t);return n.jsx(Rw,{...s,...r})};vA.displayName=Tne;var Ane="AlertDialogOverlay",yA=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=Ki(r);return n.jsx(Gh,{...a,...s,ref:t})});yA.displayName=Ane;var Qc="AlertDialogContent",[Pne,Rne]=_ne(Qc),Mne=N6("AlertDialogContent"),bA=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:s,...a}=e,i=Ki(r),o=p.useRef(null),l=Yt(t,o),c=p.useRef(null);return n.jsx(Jte,{contentName:Qc,titleName:wA,docsSlug:"alert-dialog",children:n.jsx(Pne,{scope:r,cancelRef:c,children:n.jsxs(Qh,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:Ze(a.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[n.jsx(Mne,{children:s}),n.jsx(Ine,{contentRef:o})]})})})});bA.displayName=Qc;var wA="AlertDialogTitle",jA=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=Ki(r);return n.jsx(Yh,{...a,...s,ref:t})});jA.displayName=wA;var NA="AlertDialogDescription",SA=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=Ki(r);return n.jsx(Kh,{...a,...s,ref:t})});SA.displayName=NA;var One="AlertDialogAction",kA=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=Ki(r);return n.jsx(Lp,{...a,...s,ref:t})});kA.displayName=One;var _A="AlertDialogCancel",CA=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,{cancelRef:a}=Rne(_A,r),i=Ki(r),o=Yt(t,a);return n.jsx(Lp,{...i,...s,ref:o})});CA.displayName=_A;var Ine=({contentRef:e})=>{const t=`\`${Qc}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Qc}\` by passing a \`${NA}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Qc}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},Dne=gA,Fne=vA,EA=yA,TA=bA,AA=kA,PA=CA,RA=jA,MA=SA;const Sh=Dne,Lne=Fne,OA=p.forwardRef(({className:e,...t},r)=>n.jsx(EA,{className:qe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));OA.displayName=EA.displayName;const ku=p.forwardRef(({className:e,...t},r)=>n.jsxs(Lne,{children:[n.jsx(OA,{}),n.jsx(TA,{ref:r,className:qe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));ku.displayName=TA.displayName;const _u=({className:e,...t})=>n.jsx("div",{className:qe("flex flex-col space-y-2 text-center sm:text-left",e),...t});_u.displayName="AlertDialogHeader";const Cu=({className:e,...t})=>n.jsx("div",{className:qe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Cu.displayName="AlertDialogFooter";const Eu=p.forwardRef(({className:e,...t},r)=>n.jsx(RA,{ref:r,className:qe("text-lg font-semibold",e),...t}));Eu.displayName=RA.displayName;const Tu=p.forwardRef(({className:e,...t},r)=>n.jsx(MA,{ref:r,className:qe("text-sm text-muted-foreground",e),...t}));Tu.displayName=MA.displayName;const Au=p.forwardRef(({className:e,...t},r)=>n.jsx(AA,{ref:r,className:qe(bb(),e),...t}));Au.displayName=AA.displayName;const Up=p.forwardRef(({className:e,...t},r)=>n.jsx(PA,{ref:r,className:qe(bb({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Up.displayName=PA.displayName;const zne=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState([]),[o,l]=p.useState(!0),[c,u]=p.useState(""),[d,h]=p.useState("all"),[m,f]=p.useState("all"),[x,g]=p.useState("all"),[y,b]=p.useState(null),[v,w]=p.useState(!1),[S,k]=p.useState(!1),[N,P]=p.useState(""),[T,A]=p.useState(""),[E,M]=p.useState(""),[I,se]=p.useState(void 0),[ee,Y]=p.useState(void 0),[F,ne]=p.useState(!1),[q,V]=p.useState(!1),[_,U]=p.useState("ncert"),[H,O]=p.useState(""),[B,W]=p.useState(""),[K,X]=p.useState(""),[de,oe]=p.useState(void 0),[me,Ee]=p.useState(""),[we,Le]=p.useState(""),[_e,ut]=p.useState(void 0),[at,Ct]=p.useState(null),[L,ke]=p.useState(""),[ot,ct]=p.useState(!1);p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{e&&$()},[e,d,m,x]);const $=async()=>{if(e){l(!0);try{const J=(await pe.admin.listAllContent({subject:d!=="all"?d:void 0,content_type:m!=="all"?m:void 0,processing_status:x!=="all"?x:void 0,limit:100})||[]).map(Ae=>({...Ae,metadata:typeof Ae.metadata=="string"?JSON.parse(Ae.metadata):Ae.metadata||{}}));i(J)}catch(ge){console.error("Error fetching content:",ge);try{let J=st.from("content").select("*").order("created_at",{ascending:!1}).limit(100);d!=="all"&&(J=J.eq("subject",d)),m!=="all"&&(J=J.eq("type",m)),x!=="all"&&(J=J.eq("processing_status",x));const{data:Ae,error:Fe}=await J;if(Fe)throw Fe;const Pe=(Ae||[]).map(Ie=>({...Ie,metadata:typeof Ie.metadata=="string"?JSON.parse(Ie.metadata):Ie.metadata||{}}));i(Pe)}catch{s({variant:"destructive",title:"Error",description:"Failed to load content"})}}finally{l(!1)}}},Ne=a.filter(ge=>{var Ae,Fe,Pe,Ie;if(!c)return!0;const J=c.toLowerCase();return((Ae=ge.title)==null?void 0:Ae.toLowerCase().includes(J))||((Fe=ge.content_text)==null?void 0:Fe.toLowerCase().includes(J))||((Pe=ge.chapter)==null?void 0:Pe.toLowerCase().includes(J))||((Ie=ge.folder_path)==null?void 0:Ie.toLowerCase().includes(J))}),dt=ge=>{var J,Ae;b(ge),P(ge.title||""),A(ge.chapter||""),M(ge.difficulty||""),se(ge.class_grade||((J=ge.metadata)==null?void 0:J.class_grade)||void 0),Y(ge.chapter_number||((Ae=ge.metadata)==null?void 0:Ae.chapter_number)||void 0),w(!0)},zt=async()=>{if(y){ne(!0);try{const J={...y.metadata||{},class_grade:I||void 0,chapter_number:ee||void 0};"title"in J&&delete J.title,await pe.admin.updateContent({content_id:y.id,title:N||void 0,chapter:T||void 0,difficulty:E&&E!=="none"?E:void 0,class_grade:I,chapter_number:ee,metadata:J}),s({title:"Success",description:"Content updated successfully"}),w(!1),$()}catch(ge){s({variant:"destructive",title:"Error",description:ge.message||"Failed to update content"})}finally{ne(!1)}}},ue=(ge,J,Ae)=>{Ct({rowId:ge,field:J}),ke(Ae||"")},G=()=>{Ct(null),ke("")},ye=async(ge,J)=>{ct(!0);try{const Ae={};if(J==="title"){Ae.title=L||void 0;const Fe=a.find(ht=>ht.id===ge),Ie={...(Fe==null?void 0:Fe.metadata)||{}};"title"in Ie&&delete Ie.title,Ae.metadata=Ie}else if(J==="chapter")Ae.chapter=L||void 0;else if(J==="difficulty")Ae.difficulty=L&&L!=="none"?L:void 0;else if(J==="class"){const Fe=a.find(ht=>ht.id===ge),Pe=(Fe==null?void 0:Fe.metadata)||{},Ie=L?parseInt(L):void 0;Ae.metadata={...Pe,class_grade:Ie||void 0},Ae.class_grade=Ie}else if(J==="chapter_number"){const Fe=a.find(ht=>ht.id===ge),Pe=(Fe==null?void 0:Fe.metadata)||{},Ie=L?parseInt(L):void 0;Ae.metadata={...Pe,chapter_number:Ie||void 0},Ae.chapter_number=Ie}else J==="subject"&&(Ae.metadata={subject:L});await pe.admin.updateContent({content_id:ge,...Ae}),s({title:"Success",description:`${J==="class"?"Class":J==="chapter_number"?"Chapter Number":J.charAt(0).toUpperCase()+J.slice(1)} updated successfully`}),Ct(null),ke(""),$()}catch(Ae){s({variant:"destructive",title:"Error",description:Ae.message||"Failed to update content"})}finally{ct(!1)}},Me=async()=>{if(y){ne(!0);try{await pe.admin.deleteContent(y.id),s({title:"Success",description:"Content deleted successfully"}),k(!1),b(null),$()}catch(ge){s({variant:"destructive",title:"Error",description:ge.message||"Failed to delete content"})}finally{ne(!1)}}},De=async ge=>{try{s({title:"Reindexing",description:"Reindexing content..."});const{data:J}=await st.from("content").select("*").eq("id",ge).single();if(!J)throw new Error("Content not found");await pe.admin.reindexContent(),s({title:"Success",description:"Content reindexing started"}),$()}catch(J){s({variant:"destructive",title:"Error",description:J.message||"Failed to reindex content"})}},He=async()=>{if(!me.trim()||!H){s({variant:"destructive",title:"Error",description:"Please fill in all required fields (Subject and Content)"});return}ne(!0);try{const ge={};_e&&(ge.class_grade=_e),de&&(ge.chapter_number=de);const J=await fetch("http://localhost:8000/api/content/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:_,subject:H,chapter:K||void 0,title:B||void 0,difficulty:we&&we!=="none"?we:void 0,content_text:me,metadata:Object.keys(ge).length>0?ge:{}})});if(!J.ok){const Fe=await J.json().catch(()=>({detail:"Failed to create content"}));throw new Error(Fe.detail||Fe.message||"Failed to create content")}const Ae=await J.json();s({title:"Success",description:"Content created successfully!"}),V(!1),W(""),X(""),oe(void 0),Ee(""),Le(""),ut(void 0),O(""),U("ncert"),$()}catch(ge){s({variant:"destructive",title:"Error",description:ge.message||"Failed to create content"})}finally{ne(!1)}},ve=ge=>{switch(ge){case"ncert":return"bg-blue-500/10 text-blue-500 border-blue-500/20";case"pyq":return"bg-green-500/10 text-green-500 border-green-500/20";case"hots":return"bg-purple-500/10 text-purple-500 border-purple-500/20";default:return"bg-gray-500/10 text-gray-500 border-gray-500/20"}},Be=ge=>{switch(ge){case"ncert":return"NCERT";case"pyq":return"PYQ";case"hots":return"HOTS";default:return(ge==null?void 0:ge.toUpperCase())||"Content"}},pt=ge=>{switch(ge){case"completed":return n.jsxs(je,{className:"bg-green-500/10 text-green-500 border-green-500/20",children:[n.jsx(Qt,{className:"h-3 w-3 mr-1"}),"Completed"]});case"processing":return n.jsxs(je,{className:"bg-blue-500/10 text-blue-500 border-blue-500/20",children:[n.jsx(Oe,{className:"h-3 w-3 mr-1 animate-spin"}),"Processing"]});case"failed":return n.jsxs(je,{className:"bg-red-500/10 text-red-500 border-red-500/20",children:[n.jsx(Li,{className:"h-3 w-3 mr-1"}),"Failed"]});case"pending":return n.jsxs(je,{className:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20",children:[n.jsx(Hs,{className:"h-3 w-3 mr-1"}),"Pending"]});default:return n.jsx(je,{variant:"outline",children:"Unknown"})}},gt=ge=>new Date(ge).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),Ft=(ge,J=100)=>ge?ge.length<=J?ge:ge.substring(0,J)+"...":"";return t||o?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(el,{}),n.jsxs("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:[n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Manage Content"}),n.jsx("p",{className:"text-muted-foreground",children:"View, edit, and manage all uploaded content"})]}),n.jsxs(ae,{className:"mb-6",children:[n.jsx(he,{children:n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(Ih,{className:"h-5 w-5"}),"Filters & Search"]})}),n.jsx(ie,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[n.jsx("div",{className:"md:col-span-2",children:n.jsxs("div",{className:"relative",children:[n.jsx(zi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(Ve,{placeholder:"Search content...",value:c,onChange:ge=>u(ge.target.value),className:"pl-10"})]})}),n.jsxs(Nt,{value:d,onValueChange:h,children:[n.jsx(wt,{children:n.jsx(St,{placeholder:"All Subjects"})}),n.jsxs(jt,{children:[n.jsx(re,{value:"all",children:"All Subjects"}),n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]}),n.jsxs(Nt,{value:m,onValueChange:f,children:[n.jsx(wt,{children:n.jsx(St,{placeholder:"All Types"})}),n.jsxs(jt,{children:[n.jsx(re,{value:"all",children:"All Types"}),n.jsx(re,{value:"ncert",children:"NCERT"}),n.jsx(re,{value:"pyq",children:"PYQ"}),n.jsx(re,{value:"hots",children:"HOTS"})]})]}),n.jsxs(Nt,{value:x,onValueChange:g,children:[n.jsx(wt,{children:n.jsx(St,{placeholder:"All Status"})}),n.jsxs(jt,{children:[n.jsx(re,{value:"all",children:"All Status"}),n.jsx(re,{value:"completed",children:"Completed"}),n.jsx(re,{value:"processing",children:"Processing"}),n.jsx(re,{value:"pending",children:"Pending"}),n.jsx(re,{value:"failed",children:"Failed"})]})]})]})})]}),n.jsxs(ae,{children:[n.jsx(he,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(fe,{children:"All Content"}),n.jsxs(ze,{children:[Ne.length," of ",a.length," content items. Click on Title, Class, Chapter Name, Chapter Number, or Difficulty to edit inline."]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(z,{onClick:()=>V(!0),size:"sm",children:[n.jsx(_n,{className:"h-4 w-4 mr-2"}),"Create New"]}),n.jsxs(z,{onClick:()=>r("/dashboard/admin/content"),variant:"outline",size:"sm",children:[n.jsx(Tv,{className:"h-4 w-4 mr-2"}),"Upload File"]}),n.jsxs(z,{onClick:$,variant:"outline",size:"sm",children:[n.jsx(U0,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]})}),n.jsx(ie,{children:Ne.length===0?n.jsxs("div",{className:"py-12 text-center",children:[n.jsx(Jt,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Content Found"}),n.jsx("p",{className:"text-muted-foreground",children:c||d!=="all"||m!=="all"||x!=="all"?"Try adjusting your filters":"No content has been uploaded yet"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(Cs,{children:[n.jsx(Es,{children:n.jsxs(Nr,{children:[n.jsx(mt,{children:"Title"}),n.jsx(mt,{children:"Type"}),n.jsx(mt,{children:"Subject"}),n.jsx(mt,{children:"Class"}),n.jsx(mt,{children:"Chapter Name"}),n.jsx(mt,{children:"Chapter Number"}),n.jsx(mt,{children:"Difficulty"}),n.jsx(mt,{children:"Status"}),n.jsx(mt,{children:"Folder"}),n.jsx(mt,{children:"Created"}),n.jsx(mt,{className:"text-right",children:"Actions"})]})}),n.jsx(Ts,{children:Ne.map(ge=>{var J,Ae,Fe,Pe;return n.jsxs(Nr,{children:[n.jsxs(it,{children:[(at==null?void 0:at.rowId)===ge.id&&(at==null?void 0:at.field)==="title"?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ve,{value:L,onChange:Ie=>ke(Ie.target.value),onKeyDown:Ie=>{Ie.key==="Enter"?ye(ge.id,"title"):Ie.key==="Escape"&&G()},className:"h-8",autoFocus:!0}),n.jsx(z,{size:"sm",variant:"ghost",onClick:()=>ye(ge.id,"title"),disabled:ot,children:ot?n.jsx(Oe,{className:"h-3 w-3 animate-spin"}):""}),n.jsx(z,{size:"sm",variant:"ghost",onClick:G,disabled:ot,children:""})]}):n.jsx("div",{className:"font-medium cursor-pointer hover:bg-muted/50 p-1 rounded -m-1",onClick:()=>ue(ge.id,"title",ge.title),title:"Click to edit",children:ge.title||`${Be(ge.type)} Content`}),n.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:Ft(ge.content_text,80)})]}),n.jsx(it,{children:n.jsx(je,{className:ve(ge.type),children:Be(ge.type)})}),n.jsx(it,{className:"capitalize",children:ge.subject}),n.jsx(it,{children:(at==null?void 0:at.rowId)===ge.id&&(at==null?void 0:at.field)==="class"?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ve,{type:"number",value:L,onChange:Ie=>ke(Ie.target.value),onKeyDown:Ie=>{Ie.key==="Enter"?ye(ge.id,"class"):Ie.key==="Escape"&&G()},className:"h-8 w-20",min:"1",max:"12",autoFocus:!0}),n.jsx(z,{size:"sm",variant:"ghost",onClick:()=>ye(ge.id,"class"),disabled:ot,children:ot?n.jsx(Oe,{className:"h-3 w-3 animate-spin"}):""}),n.jsx(z,{size:"sm",variant:"ghost",onClick:G,disabled:ot,children:""})]}):n.jsx("span",{className:"cursor-pointer hover:bg-muted/50 p-1 rounded -m-1 block",onClick:()=>{var Ie;return ue(ge.id,"class",ge.class_grade||((Ie=ge.metadata)==null?void 0:Ie.class_grade)||"")},title:"Click to edit",children:ge.class_grade||(J=ge.metadata)!=null&&J.class_grade?`Class ${ge.class_grade||((Ae=ge.metadata)==null?void 0:Ae.class_grade)}`:"-"})}),n.jsx(it,{children:(at==null?void 0:at.rowId)===ge.id&&(at==null?void 0:at.field)==="chapter"?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ve,{value:L,onChange:Ie=>ke(Ie.target.value),onKeyDown:Ie=>{Ie.key==="Enter"?ye(ge.id,"chapter"):Ie.key==="Escape"&&G()},className:"h-8",autoFocus:!0}),n.jsx(z,{size:"sm",variant:"ghost",onClick:()=>ye(ge.id,"chapter"),disabled:ot,children:ot?n.jsx(Oe,{className:"h-3 w-3 animate-spin"}):""}),n.jsx(z,{size:"sm",variant:"ghost",onClick:G,disabled:ot,children:""})]}):n.jsx("span",{className:"cursor-pointer hover:bg-muted/50 p-1 rounded -m-1 block",onClick:()=>ue(ge.id,"chapter",ge.chapter),title:"Click to edit",children:ge.chapter||"-"})}),n.jsx(it,{children:(at==null?void 0:at.rowId)===ge.id&&(at==null?void 0:at.field)==="chapter_number"?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ve,{type:"number",value:L,onChange:Ie=>ke(Ie.target.value),onKeyDown:Ie=>{Ie.key==="Enter"?ye(ge.id,"chapter_number"):Ie.key==="Escape"&&G()},className:"h-8 w-20",min:"1",autoFocus:!0}),n.jsx(z,{size:"sm",variant:"ghost",onClick:()=>ye(ge.id,"chapter_number"),disabled:ot,children:ot?n.jsx(Oe,{className:"h-3 w-3 animate-spin"}):""}),n.jsx(z,{size:"sm",variant:"ghost",onClick:G,disabled:ot,children:""})]}):n.jsx("span",{className:"cursor-pointer hover:bg-muted/50 p-1 rounded -m-1 block",onClick:()=>{var Ie;return ue(ge.id,"chapter_number",ge.chapter_number||((Ie=ge.metadata)==null?void 0:Ie.chapter_number)||"")},title:"Click to edit",children:ge.chapter_number||(Fe=ge.metadata)!=null&&Fe.chapter_number?`Ch. ${ge.chapter_number||((Pe=ge.metadata)==null?void 0:Pe.chapter_number)}`:"-"})}),n.jsx(it,{children:(at==null?void 0:at.rowId)===ge.id&&(at==null?void 0:at.field)==="difficulty"?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Nt,{value:L||void 0,onValueChange:ke,children:[n.jsx(wt,{className:"h-8 w-[120px]",children:n.jsx(St,{placeholder:"Select difficulty"})}),n.jsxs(jt,{children:[n.jsx(re,{value:"none",children:"None"}),n.jsx(re,{value:"easy",children:"Easy"}),n.jsx(re,{value:"medium",children:"Medium"}),n.jsx(re,{value:"hard",children:"Hard"})]})]}),n.jsx(z,{size:"sm",variant:"ghost",onClick:()=>ye(ge.id,"difficulty"),disabled:ot,children:ot?n.jsx(Oe,{className:"h-3 w-3 animate-spin"}):""}),n.jsx(z,{size:"sm",variant:"ghost",onClick:G,disabled:ot,children:""})]}):n.jsx("span",{className:"cursor-pointer hover:bg-muted/50 p-1 rounded -m-1 block capitalize",onClick:()=>ue(ge.id,"difficulty",ge.difficulty||"none"),title:"Click to edit",children:ge.difficulty?n.jsx(je,{variant:"outline",className:"capitalize",children:ge.difficulty}):"-"})}),n.jsx(it,{children:pt(ge.processing_status||"pending")}),n.jsx(it,{children:ge.folder_path?n.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[n.jsx(Cv,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate max-w-[150px]",children:ge.folder_path})]}):"-"}),n.jsx(it,{className:"text-sm text-muted-foreground",children:gt(ge.created_at)}),n.jsx(it,{className:"text-right",children:n.jsxs($w,{children:[n.jsx(qw,{asChild:!0,children:n.jsx(z,{variant:"ghost",size:"sm",children:n.jsx(Uy,{className:"h-4 w-4"})})}),n.jsxs(Bp,{align:"end",children:[n.jsxs(Ya,{onClick:()=>r(`/dashboard/student/content/${ge.id}`),children:[n.jsx(Kn,{className:"h-4 w-4 mr-2"}),"View"]}),n.jsxs(Ya,{onClick:()=>dt(ge),children:[n.jsx(Ll,{className:"h-4 w-4 mr-2"}),"Edit All Fields"]}),ge.file_url&&n.jsxs(Ya,{onClick:()=>window.open(ge.file_url,"_blank"),children:[n.jsx(rh,{className:"h-4 w-4 mr-2"}),"Download"]}),n.jsxs(Ya,{onClick:()=>De(ge.id),children:[n.jsx(U0,{className:"h-4 w-4 mr-2"}),"Reindex"]}),n.jsxs(Ya,{onClick:()=>{b(ge),k(!0)},className:"text-red-600",children:[n.jsx(Jl,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},ge.id)})})]})})})]})]}),n.jsx(un,{open:v,onOpenChange:w,children:n.jsxs(tn,{children:[n.jsxs(rn,{children:[n.jsx(nn,{children:"Edit Content"}),n.jsx(xn,{children:"Update content metadata. Changes will be saved immediately."})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Title"}),n.jsx(Ve,{value:N,onChange:ge=>P(ge.target.value),placeholder:"Content title"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Chapter Name"}),n.jsx(Ve,{value:T,onChange:ge=>A(ge.target.value),placeholder:"Chapter name"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Chapter Number"}),n.jsx(Ve,{type:"number",value:ee||"",onChange:ge=>{const J=ge.target.value?parseInt(ge.target.value):void 0;Y(J)},placeholder:"Chapter number",min:"1"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Class/Grade"}),n.jsx(Ve,{type:"number",value:I||"",onChange:ge=>{const J=ge.target.value?parseInt(ge.target.value):void 0;se(J)},placeholder:"Class grade (1-12)",min:"1",max:"12"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Difficulty"}),n.jsxs(Nt,{value:E||void 0,onValueChange:M,children:[n.jsx(wt,{children:n.jsx(St,{placeholder:"Select difficulty"})}),n.jsxs(jt,{children:[n.jsx(re,{value:"none",children:"None"}),n.jsx(re,{value:"easy",children:"Easy"}),n.jsx(re,{value:"medium",children:"Medium"}),n.jsx(re,{value:"hard",children:"Hard"})]})]})]})]})]}),n.jsxs(Fn,{children:[n.jsx(z,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),n.jsx(z,{onClick:zt,disabled:F,children:F?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})}),n.jsx(un,{open:q,onOpenChange:V,children:n.jsxs(tn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(rn,{children:[n.jsx(nn,{children:"Create New Content"}),n.jsx(xn,{children:"Add new educational content. All fields marked with * are required."})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Content Type *"}),n.jsxs(Nt,{value:_,onValueChange:U,children:[n.jsx(wt,{children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"ncert",children:"NCERT"}),n.jsx(re,{value:"pyq",children:"Previous Year Question"}),n.jsx(re,{value:"hots",children:"HOTS Question"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Subject *"}),n.jsxs(Nt,{value:H,onValueChange:O,children:[n.jsx(wt,{children:n.jsx(St,{placeholder:"Select subject"})}),n.jsxs(jt,{children:[n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Title"}),n.jsx(Ve,{value:B,onChange:ge=>W(ge.target.value),placeholder:"Content title (optional)"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Chapter Name"}),n.jsx(Ve,{value:K,onChange:ge=>X(ge.target.value),placeholder:"Chapter name (optional)"})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Chapter Number"}),n.jsx(Ve,{type:"number",value:de||"",onChange:ge=>{const J=ge.target.value?parseInt(ge.target.value):void 0;oe(J)},placeholder:"Chapter number",min:"1"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Class/Grade"}),n.jsx(Ve,{type:"number",value:_e||"",onChange:ge=>{const J=ge.target.value?parseInt(ge.target.value):void 0;ut(J)},placeholder:"e.g., 8, 9, 10, 11, 12",min:"1",max:"12"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Difficulty"}),n.jsxs(Nt,{value:we||void 0,onValueChange:Le,children:[n.jsx(wt,{children:n.jsx(St,{placeholder:"Select difficulty"})}),n.jsxs(jt,{children:[n.jsx(re,{value:"none",children:"None"}),n.jsx(re,{value:"easy",children:"Easy"}),n.jsx(re,{value:"medium",children:"Medium"}),n.jsx(re,{value:"hard",children:"Hard"})]})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Content Text *"}),n.jsx(kr,{value:me,onChange:ge=>Ee(ge.target.value),placeholder:"Enter content here...",rows:10,className:"resize-none"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[me.length," characters"]})]})]}),n.jsxs(Fn,{children:[n.jsx(z,{variant:"outline",onClick:()=>V(!1),children:"Cancel"}),n.jsx(z,{onClick:He,disabled:F||!me.trim()||!H,children:F?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(_n,{className:"h-4 w-4 mr-2"}),"Create Content"]})})]})]})}),n.jsx(Sh,{open:S,onOpenChange:k,children:n.jsxs(ku,{children:[n.jsxs(_u,{children:[n.jsx(Eu,{children:"Are you sure?"}),n.jsxs(Tu,{children:['This action cannot be undone. This will permanently delete the content "',(y==null?void 0:y.title)||"this item",'" and remove it from the database.']})]}),n.jsxs(Cu,{children:[n.jsx(Up,{children:"Cancel"}),n.jsx(Au,{onClick:Me,className:"bg-red-600 hover:bg-red-700",disabled:F,children:F?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]})]})},$ne=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState([]),[o,l]=p.useState(!0),[c,u]=p.useState("all"),[d,h]=p.useState("all");p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{m()},[c,d]);const m=async()=>{try{l(!0);const y={};c!=="all"&&(y.subject=c),d!=="all"&&(y.year=d);const b=await pe.exam.getSets(y);i(b)}catch(y){s({title:"Error",description:y.message||"Failed to fetch exam sets",variant:"destructive"})}finally{l(!1)}},f=y=>{r(`/dashboard/student/exam/start/${y.id}`)},x=y=>({mathematics:"bg-blue-500",physics:"bg-purple-500",chemistry:"bg-green-500",biology:"bg-orange-500"})[y]||"bg-gray-500",g=y=>y.charAt(0).toUpperCase()+y.slice(1);return t||o?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-primary"})}):n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(yn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Practice Exams"}),n.jsx("p",{className:"text-muted-foreground",children:"Test your knowledge with previous year questions organized by subject and year"})]}),n.jsxs("div",{className:"flex flex-wrap gap-4 mb-8",children:[n.jsxs(Nt,{value:c,onValueChange:y=>u(y),children:[n.jsx(wt,{className:"w-[200px]",children:n.jsx(St,{placeholder:"Select subject"})}),n.jsxs(jt,{children:[n.jsx(re,{value:"all",children:"All Subjects"}),n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]}),n.jsxs(Nt,{value:d.toString(),onValueChange:y=>h(y==="all"?"all":parseInt(y)),children:[n.jsx(wt,{className:"w-[200px]",children:n.jsx(St,{placeholder:"Select year"})}),n.jsxs(jt,{children:[n.jsx(re,{value:"all",children:"All Years"}),Array.from({length:10},(y,b)=>2024-b).map(y=>n.jsx(re,{value:y.toString(),children:y},y))]})]})]}),a.length===0?n.jsx(ae,{children:n.jsxs(ie,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(or,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("p",{className:"text-lg font-medium mb-2",children:"No exam sets found"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Try adjusting your filters or check back later"})]})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(y=>n.jsxs(ae,{className:"hover:shadow-lg transition-shadow",children:[n.jsxs(he,{children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx(je,{className:`${x(y.subject)} text-white`,children:g(y.subject)}),n.jsxs(je,{variant:"outline",className:"flex items-center gap-1",children:[n.jsx(As,{className:"h-3 w-3"}),y.year]})]}),n.jsxs(fe,{className:"text-xl",children:[g(y.subject)," ",y.year]}),n.jsx(ze,{children:"Previous Year Question Paper"})]}),n.jsxs(ie,{children:[n.jsxs("div",{className:"space-y-3 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(or,{className:"h-4 w-4"}),n.jsxs("span",{children:[y.questions.length," Questions"]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(Ur,{className:"h-4 w-4"}),n.jsxs("span",{children:[y.duration_minutes," minutes"]})]}),n.jsx("div",{className:"flex items-center gap-2 text-sm font-medium",children:n.jsxs("span",{children:["Total Marks: ",y.total_marks]})})]}),n.jsxs(z,{className:"w-full gap-2",onClick:()=>f(y),children:[n.jsx("span",{children:"Start Exam"}),n.jsx(ji,{className:"h-4 w-4"})]})]})]},y.id))})]})})]})},IA=(e,t=!0)=>{const{toast:r}=Ut(),[s,a]=p.useState([]),[i,o]=p.useState(!1),l=p.useRef(new Map),c=p.useRef(!1),u=p.useRef(!1);return p.useEffect(()=>{if(!t)return;const d=v=>{v.preventDefault();const w=(l.current.get("copy")||0)+1;l.current.set("copy",w);const S={type:"copy",timestamp:new Date,count:w};return a(k=>[...k,S]),e==null||e(S),r({variant:"destructive",title:"Security Warning",description:`Copying is disabled during the exam. Violation #${w}`}),!1},h=v=>{v.preventDefault();const w=(l.current.get("paste")||0)+1;l.current.set("paste",w);const S={type:"paste",timestamp:new Date,count:w};return a(k=>[...k,S]),e==null||e(S),r({variant:"destructive",title:"Security Warning",description:`Pasting is disabled during the exam. Violation #${w}`}),!1},m=v=>{v.preventDefault();const w=(l.current.get("rightclick")||0)+1;l.current.set("rightclick",w);const S={type:"rightclick",timestamp:new Date,count:w};return a(k=>[...k,S]),e==null||e(S),r({variant:"destructive",title:"Security Warning",description:`Right-click is disabled during the exam. Violation #${w}`}),!1},f=v=>{if((v.ctrlKey||v.metaKey)&&(v.key==="c"||v.key==="v"||v.key==="a"||v.key==="x"||v.key==="s")){v.preventDefault();const w=v.key.toUpperCase(),S=(l.current.get(`shortcut-${w}`)||0)+1;return l.current.set(`shortcut-${w}`,S),r({variant:"destructive",title:"Security Warning",description:`Keyboard shortcut (Ctrl+${w}) is disabled during the exam.`}),!1}if(v.key==="F12"){v.preventDefault();const w=(l.current.get("devtools")||0)+1;return l.current.set("devtools",w),r({variant:"destructive",title:"Security Warning",description:"Developer tools are disabled during the exam."}),!1}if((v.ctrlKey||v.metaKey)&&v.shiftKey&&(v.key==="I"||v.key==="J"||v.key==="C")){v.preventDefault();const w=(l.current.get("devtools")||0)+1;return l.current.set("devtools",w),r({variant:"destructive",title:"Security Warning",description:"Developer tools are disabled during the exam."}),!1}},x=()=>{const v=!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement);if(o(v),c.current&&!v){const w=(l.current.get("fullscreen")||0)+1;l.current.set("fullscreen",w);const S={type:"fullscreen",timestamp:new Date,count:w};a(k=>[...k,S]),e==null||e(S),r({variant:"destructive",title:"Security Warning",description:`Fullscreen mode was exited. Violation #${w}. Please stay in fullscreen mode.`})}c.current=v},g=()=>{if(document.hidden){u.current=!0;const v=(l.current.get("tabswitch")||0)+1;l.current.set("tabswitch",v);const w={type:"tabswitch",timestamp:new Date,count:v};a(S=>[...S,w]),e==null||e(w),r({variant:"destructive",title:"Security Warning",description:`Tab/window switch detected. Violation #${v}. Please stay on the exam page.`})}else u.current&&r({variant:"destructive",title:"Security Warning",description:"Returning to the exam page. All violations are being tracked."})},y=()=>{const v=(l.current.get("tabswitch")||0)+1;l.current.set("tabswitch",v);const w={type:"tabswitch",timestamp:new Date,count:v};a(S=>[...S,w]),e==null||e(w)};return(async()=>{if(t)try{const v=document.documentElement;v.requestFullscreen?await v.requestFullscreen():v.webkitRequestFullscreen?await v.webkitRequestFullscreen():v.mozRequestFullScreen?await v.mozRequestFullScreen():v.msRequestFullscreen&&await v.msRequestFullscreen(),c.current=!0}catch(v){console.error("Failed to enter fullscreen:",v),r({variant:"destructive",title:"Fullscreen Required",description:"Please enable fullscreen mode to continue with the exam."})}})(),document.addEventListener("copy",d),document.addEventListener("paste",h),document.addEventListener("contextmenu",m),document.addEventListener("keydown",f),document.addEventListener("fullscreenchange",x),document.addEventListener("webkitfullscreenchange",x),document.addEventListener("mozfullscreenchange",x),document.addEventListener("MSFullscreenChange",x),document.addEventListener("visibilitychange",g),window.addEventListener("blur",y),document.body.style.userSelect="none",document.body.style.webkitUserSelect="none",document.body.style.mozUserSelect="none",document.body.style.msUserSelect="none",()=>{document.removeEventListener("copy",d),document.removeEventListener("paste",h),document.removeEventListener("contextmenu",m),document.removeEventListener("keydown",f),document.removeEventListener("fullscreenchange",x),document.removeEventListener("webkitfullscreenchange",x),document.removeEventListener("mozfullscreenchange",x),document.removeEventListener("MSFullscreenChange",x),document.removeEventListener("visibilitychange",g),window.removeEventListener("blur",y),document.body.style.userSelect="",document.body.style.webkitUserSelect="",document.body.style.mozUserSelect="",document.body.style.msUserSelect=""}},[r,e,t]),{violations:s,violationCounts:l.current,totalViolations:s.length,isFullscreen:i}},qne=()=>{var B,W;const{examSetId:e}=Zl(),{user:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState(null),[o,l]=p.useState(null),[c,u]=p.useState(!0),[d,h]=p.useState(!1),[m,f]=p.useState(0),[x,g]=p.useState({}),[y,b]=p.useState(0),[v,w]=p.useState(!1),[S,k]=p.useState(!1),[N,P]=p.useState(!1),[T,A]=p.useState(null),[E,M]=p.useState(!1),{violations:I,totalViolations:se,isFullscreen:ee}=IA(K=>{console.warn("Security violation detected:",K),K.type==="fullscreen"&&(M(!0),A(10))},!(o!=null&&o.is_completed));p.useEffect(()=>{if(T===null)return;if(ee&&T>0){A(null),M(!1),s({title:"Fullscreen Restored",description:"You have returned to fullscreen mode. You can continue the exam."});return}if(T===0){A(null),q(!0);return}const K=setTimeout(()=>{A(X=>X!==null?X-1:null)},1e3);return()=>clearTimeout(K)},[T,ee]),p.useEffect(()=>{if(!t||!e){r("/login");return}Y()},[t,e]),p.useEffect(()=>{if(!o||o.is_completed)return;const K=setInterval(()=>{const X=new Date(o.start_time).getTime(),de=Date.now(),oe=Math.floor((de-X)/1e3),me=(o.duration_minutes||0)*60,Ee=Math.max(0,me-oe);b(Ee),Ee===0&&!N&&(P(!0),q(!0))},1e3);return()=>clearInterval(K)},[o,N]);const Y=async()=>{var K,X;try{u(!0);const de=await pe.exam.getSet(e);i(de);const oe=await pe.exam.startSession({user_id:t.id,exam_set_id:e,subject:de.subject});l(oe);const me=oe.duration_minutes*60;b(me)}catch(de){let oe=de.message||"Failed to start exam",me="Error";de.status===403||((K=de.data)==null?void 0:K.code)==="EXAM_ALREADY_COMPLETED"?(me="Exam Already Completed",oe="You have already completed this exam. You cannot attempt it again."):(de.status===409||((X=de.data)==null?void 0:X.code)==="EXAM_IN_PROGRESS")&&(me="Exam In Progress",oe="You have an incomplete exam session. Please complete or submit your current attempt before starting a new one."),s({title:me,description:oe,variant:"destructive"}),r("/dashboard/student/exams")}finally{u(!1)}},F=(K,X)=>{g(de=>({...de,[K]:X}))},ne=async K=>{if(!(!o||!t))try{await pe.exam.saveAnswer({session_id:o.id,user_id:t.id,answer:{question_id:K,answer:x[K]||"",timestamp:new Date().toISOString()}}),s({title:"Answer saved",description:"Your answer has been saved successfully"})}catch(X){s({title:"Error",description:X.message||"Failed to save answer",variant:"destructive"})}},q=async(K=!1)=>{if(!(!o||!t))try{h(!0);for(const[de,oe]of Object.entries(x))oe.trim()&&await pe.exam.saveAnswer({session_id:o.id,user_id:t.id,answer:{question_id:de,answer:oe,timestamp:new Date().toISOString()}});const X=await pe.exam.submitTest({session_id:o.id,user_id:t.id});l({...o,...X,is_completed:!0});try{document.exitFullscreen?await document.exitFullscreen():document.webkitExitFullscreen?await document.webkitExitFullscreen():document.mozCancelFullScreen?await document.mozCancelFullScreen():document.msExitFullscreen&&await document.msExitFullscreen()}catch(de){console.warn("Failed to exit fullscreen:",de)}k(!0),w(!1)}catch(X){s({title:"Error",description:X.message||"Failed to submit exam",variant:"destructive"}),k(!1)}finally{h(!1),w(!1)}},V=K=>{const X=Math.floor(K/3600),de=Math.floor(K%3600/60),oe=K%60;return X>0?`${X}:${de.toString().padStart(2,"0")}:${oe.toString().padStart(2,"0")}`:`${de}:${oe.toString().padStart(2,"0")}`},_=()=>{if(!o)return"text-foreground";const K=(o.duration_minutes||0)*60,X=y/K*100;return X<=10?"text-red-500":X<=25?"text-orange-500":"text-foreground"};if(c)return n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-primary"})});if(!a||!o)return null;const U=a.questions[m],H=(m+1)/a.questions.length*100,O=Object.keys(x).filter(K=>{var X;return(X=x[K])==null?void 0:X.trim()}).length;return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-10 bg-card border-b",children:n.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl font-bold",children:[a.subject.charAt(0).toUpperCase()+a.subject.slice(1)," ",a.year]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Question ",m+1," of ",a.questions.length]})]}),n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"h-5 w-5 text-green-500"}),n.jsxs("span",{className:"text-sm font-medium",children:[O,"/",a.questions.length," Answered"]})]}),se>0&&n.jsxs("div",{className:"flex items-center gap-2 text-red-500",children:[n.jsx(Hs,{className:"h-5 w-5"}),n.jsxs("span",{className:"text-sm font-medium",children:["Violations: ",se]})]}),n.jsxs("div",{className:`flex items-center gap-2 ${_()}`,children:[n.jsx(Ur,{className:"h-5 w-5"}),n.jsx("span",{className:"text-lg font-bold font-mono",children:V(y)})]}),n.jsx(z,{variant:"destructive",onClick:()=>w(!0),disabled:d,children:d?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Submitting..."]}):"Submit Exam"})]})]}),n.jsx(_i,{value:H,className:"mt-4"})]})}),E&&T!==null&&n.jsx("div",{className:"fixed inset-0 z-50 bg-background flex items-center justify-center",children:n.jsxs(ae,{className:"max-w-md mx-4",children:[n.jsx(he,{children:n.jsxs(fe,{className:"flex items-center gap-2 text-red-500",children:[n.jsx(Hs,{className:"h-6 w-6"}),"Fullscreen Mode Required"]})}),n.jsxs(ie,{className:"space-y-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"You have exited fullscreen mode. Please return to fullscreen immediately to continue the exam."}),n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(Ur,{className:"h-8 w-8 text-red-500 animate-pulse"}),n.jsx("span",{className:"text-4xl font-bold text-red-500 font-mono",children:T}),n.jsx("span",{className:"text-lg text-muted-foreground",children:"seconds"})]}),n.jsx("p",{className:"text-sm text-center text-muted-foreground",children:T>0?`Exam will be automatically submitted in ${T} second${T!==1?"s":""} if you don't return to fullscreen.`:"Submitting exam..."})]})]})}),!E&&n.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-8",children:[n.jsxs(ae,{children:[n.jsx(he,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs(fe,{className:"text-lg",children:["Question ",m+1]}),n.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[U.marks," marks"]})]})}),n.jsxs(ie,{className:"space-y-6",children:[n.jsx("div",{className:"prose prose-sm max-w-none",children:n.jsx("p",{className:"text-base whitespace-pre-wrap",children:U.question})}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Your Answer"}),n.jsx(kr,{value:x[U.id]||"",onChange:K=>F(U.id,K.target.value),onCopy:K=>{K.preventDefault(),s({variant:"destructive",title:"Security Warning",description:"Copying is disabled during the exam."})},onPaste:K=>{K.preventDefault(),s({variant:"destructive",title:"Security Warning",description:"Pasting is disabled during the exam."})},placeholder:"Type your answer here...",className:"min-h-[200px] resize-none"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(z,{variant:"outline",onClick:()=>ne(U.id),disabled:!((B=x[U.id])!=null&&B.trim()),children:"Save Answer"}),((W=x[U.id])==null?void 0:W.trim())&&n.jsxs("span",{className:"text-sm text-green-600 flex items-center gap-1",children:[n.jsx(Qt,{className:"h-4 w-4"}),"Saved"]})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between mt-6",children:[n.jsx(z,{variant:"outline",onClick:()=>f(K=>Math.max(0,K-1)),disabled:m===0,children:"Previous"}),n.jsx("div",{className:"flex gap-2 flex-wrap justify-center",children:a.questions.map((K,X)=>{var de;return n.jsx(z,{variant:X===m?"default":"outline",size:"sm",className:`w-10 h-10 ${(de=x[a.questions[X].id])!=null&&de.trim()?"border-green-500":""}`,onClick:()=>f(X),children:X+1},X)})}),n.jsx(z,{onClick:()=>f(K=>Math.min(a.questions.length-1,K+1)),disabled:m===a.questions.length-1,children:"Next"})]})]}),n.jsx(Sh,{open:S,onOpenChange:()=>{},children:n.jsxs(ku,{className:"sm:max-w-md",children:[n.jsxs(_u,{children:[n.jsxs(Eu,{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"h-5 w-5 text-green-500"}),N?"Time's Up!":"Exam Submitted Successfully"]}),n.jsx(Tu,{className:"pt-2",children:N?"Your exam has been automatically submitted. Your answers have been saved and will be evaluated.":"Your exam has been submitted successfully. Your answers have been saved and will be evaluated. You can view your results now."})]}),n.jsx(Cu,{children:n.jsx(Au,{onClick:()=>{k(!1),r(`/dashboard/student/exam/results/${o.id}`)},className:"w-full",children:"View Results"})})]})}),n.jsx(Sh,{open:v,onOpenChange:w,children:n.jsxs(ku,{children:[n.jsxs(_u,{children:[n.jsx(Eu,{children:"Submit Exam?"}),n.jsx(Tu,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{children:"Are you sure you want to submit your exam?"}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Hs,{className:"h-4 w-4"}),n.jsxs("span",{children:["You have answered ",O," out of ",a.questions.length," questions"]})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Once submitted, you cannot change your answers."})]})})]}),n.jsxs(Cu,{children:[n.jsx(Up,{children:"Cancel"}),n.jsx(Au,{onClick:()=>q(!1),children:"Submit"})]})]})})]})},Bne=()=>{const{sessionId:e}=Zl(),{user:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState(null),[o,l]=p.useState(!0);p.useEffect(()=>{if(!t||!e){r("/login");return}c()},[t,e]);const c=async()=>{try{l(!0);const m=await pe.exam.getResults(e,t.id);i(m)}catch(m){s({title:"Error",description:m.message||"Failed to fetch results",variant:"destructive"}),r("/dashboard/student/exams")}finally{l(!1)}},u=m=>m>=90?{grade:"A+",color:"text-green-600"}:m>=80?{grade:"A",color:"text-green-500"}:m>=70?{grade:"B+",color:"text-blue-500"}:m>=60?{grade:"B",color:"text-blue-400"}:m>=50?{grade:"C",color:"text-yellow-500"}:{grade:"D",color:"text-red-500"};if(o)return n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-primary"})});if(!a)return null;const{grade:d,color:h}=u(a.percentage);return n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(yn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs(z,{variant:"ghost",onClick:()=>r("/dashboard/student/exams"),className:"mb-4",children:[n.jsx(tk,{className:"h-4 w-4 mr-2"}),"Back to Exams"]}),n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Exam Results"}),n.jsx("p",{className:"text-muted-foreground",children:"Detailed breakdown of your performance"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[n.jsxs(ae,{className:"md:col-span-2",children:[n.jsx(he,{children:n.jsx(fe,{children:"Overall Score"})}),n.jsxs(ie,{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-4xl font-bold",children:[a.score.toFixed(1),"/",a.total_marks]}),n.jsx("p",{className:"text-muted-foreground",children:"Total Marks"})]}),n.jsx("div",{className:`text-5xl font-bold ${h}`,children:d})]}),n.jsx(_i,{value:a.percentage,className:"h-3"}),n.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[a.percentage.toFixed(1),"% Score"]})]})]}),n.jsxs(ae,{children:[n.jsx(he,{children:n.jsx(fe,{className:"text-base",children:"Accuracy"})}),n.jsxs(ie,{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Qt,{className:"h-5 w-5 text-green-500"}),n.jsxs("span",{className:"text-2xl font-bold",children:[a.correct_answers,"/",a.total_questions]})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Correct Answers"})]})]}),n.jsxs(ae,{children:[n.jsx(he,{children:n.jsx(fe,{className:"text-base",children:"Time Taken"})}),n.jsxs(ie,{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Ur,{className:"h-5 w-5 text-blue-500"}),n.jsx("span",{className:"text-2xl font-bold",children:a.time_taken_minutes})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Minutes"})]})]})]}),n.jsxs(ae,{className:"mb-8",children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Performance Breakdown"}),n.jsx(ze,{children:"Analysis of your answers"})]}),n.jsxs(ie,{children:[n.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[n.jsx(Qt,{className:"h-5 w-5 text-green-500"}),n.jsx("span",{className:"text-2xl font-bold text-green-500",children:a.marking_rubric.correct_answers})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Correct"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[n.jsx(Mn,{className:"h-5 w-5 text-yellow-500"}),n.jsx("span",{className:"text-2xl font-bold text-yellow-500",children:a.marking_rubric.partially_correct})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Partial"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[n.jsx(Li,{className:"h-5 w-5 text-red-500"}),n.jsx("span",{className:"text-2xl font-bold text-red-500",children:a.marking_rubric.incorrect})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Incorrect"})]})]}),n.jsx(zb,{className:"my-4"}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(Ii,{className:"h-4 w-4"}),n.jsx("span",{children:a.marking_rubric.evaluation_method})]})]})]}),n.jsxs(Zs,{defaultValue:"answers",className:"w-full",children:[n.jsxs(Ps,{className:"grid w-full grid-cols-2",children:[n.jsx(gr,{value:"answers",children:"Your Answers"}),n.jsx(gr,{value:"solutions",children:"Model Solutions"})]}),n.jsx(Er,{value:"answers",className:"space-y-4 mt-6",children:a.question_results.map((m,f)=>n.jsxs(ae,{children:[n.jsx(he,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsxs("span",{className:"font-semibold",children:["Question ",f+1]}),n.jsxs(je,{variant:m.is_correct?"default":"destructive",children:[m.marks_awarded.toFixed(1),"/",m.max_marks," marks"]})]}),n.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:m.question})]}),m.is_correct?n.jsx(Qt,{className:"h-6 w-6 text-green-500 flex-shrink-0"}):n.jsx(Li,{className:"h-6 w-6 text-red-500 flex-shrink-0"})]})}),n.jsx(ie,{children:n.jsx("div",{className:"space-y-3",children:n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium mb-1",children:"Your Answer:"}),n.jsx("div",{className:"bg-muted p-3 rounded-md",children:n.jsx("p",{className:"text-sm whitespace-pre-wrap",children:m.student_answer||n.jsx("span",{className:"text-muted-foreground italic",children:"No answer provided"})})})]})})})]},m.question_id))}),n.jsx(Er,{value:"solutions",className:"space-y-4 mt-6",children:a.model_answers.map((m,f)=>n.jsxs(ae,{children:[n.jsx(he,{children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsxs("span",{className:"font-semibold",children:["Question ",f+1]}),n.jsxs(je,{variant:"outline",children:[m.marks," marks"]})]}),n.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:m.question})]})})}),n.jsx(ie,{children:n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium mb-1",children:"Model Answer:"}),n.jsx("div",{className:"bg-green-50 dark:bg-green-950 p-3 rounded-md border border-green-200 dark:border-green-800",children:n.jsx("p",{className:"text-sm whitespace-pre-wrap",children:m.model_answer})})]})})]},m.question_id))})]}),n.jsxs("div",{className:"flex gap-4 mt-8",children:[n.jsx(z,{onClick:()=>r("/dashboard/student/exams"),children:"Take Another Exam"}),n.jsx(z,{variant:"outline",onClick:()=>r("/dashboard/student/exam/history"),children:"View History"})]})]})})]})},Une=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState(null),[o,l]=p.useState(!0),[c,u]=p.useState("all");p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{e&&d()},[e,c]);const d=async()=>{try{l(!0);const x={user_id:e.id};c!=="all"&&(x.subject=c);const g=await pe.exam.getHistory(x);i(g)}catch(x){s({title:"Error",description:x.message||"Failed to fetch exam history",variant:"destructive"})}finally{l(!1)}},h=x=>({mathematics:"bg-blue-500",physics:"bg-purple-500",chemistry:"bg-green-500",biology:"bg-orange-500"})[x]||"bg-gray-500",m=x=>x.charAt(0).toUpperCase()+x.slice(1),f=x=>x>=80?"text-green-600":x>=60?"text-blue-600":x>=40?"text-yellow-600":"text-red-600";return t||o?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-primary"})}):n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(yn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Exam History"}),n.jsx("p",{className:"text-muted-foreground",children:"Track your performance and progress over time"})]}),n.jsxs(z,{variant:"outline",onClick:()=>r("/dashboard/student/exam/attempts"),children:[n.jsx(or,{className:"h-4 w-4 mr-2"}),"View All Attempts Table"]})]})}),n.jsx("div",{className:"mb-8",children:n.jsxs(Nt,{value:c,onValueChange:x=>u(x),children:[n.jsx(wt,{className:"w-[200px]",children:n.jsx(St,{placeholder:"Select subject"})}),n.jsxs(jt,{children:[n.jsx(re,{value:"all",children:"All Subjects"}),n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]})}),a&&a.test_sessions.length>0?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsxs(ae,{children:[n.jsx(he,{children:n.jsx(fe,{className:"text-base",children:"Average Score"})}),n.jsx(ie,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(An,{className:"h-5 w-5 text-primary"}),n.jsxs("span",{className:"text-3xl font-bold",children:[a.average_score.toFixed(1),"%"]})]})})]}),n.jsxs(ae,{children:[n.jsx(he,{children:n.jsx(fe,{className:"text-base",children:"Improvement Rate"})}),n.jsx(ie,{children:n.jsx("div",{className:"flex items-center gap-2",children:a.improvement_rate>=0?n.jsxs(n.Fragment,{children:[n.jsx(Mn,{className:"h-5 w-5 text-green-500"}),n.jsxs("span",{className:"text-3xl font-bold text-green-500",children:["+",a.improvement_rate.toFixed(1),"%"]})]}):n.jsxs(n.Fragment,{children:[n.jsx(v2,{className:"h-5 w-5 text-red-500"}),n.jsxs("span",{className:"text-3xl font-bold text-red-500",children:[a.improvement_rate.toFixed(1),"%"]})]})})})]}),n.jsxs(ae,{children:[n.jsx(he,{children:n.jsx(fe,{className:"text-base",children:"Tests Taken"})}),n.jsx(ie,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ii,{className:"h-5 w-5 text-primary"}),n.jsx("span",{className:"text-3xl font-bold",children:a.test_sessions.length})]})})]})]}),(a.strengths.length>0||a.weaknesses.length>0)&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[a.strengths.length>0&&n.jsxs(ae,{children:[n.jsx(he,{children:n.jsxs(fe,{className:"text-base flex items-center gap-2",children:[n.jsx(Mn,{className:"h-5 w-5 text-green-500"}),"Strengths"]})}),n.jsx(ie,{children:n.jsx("ul",{className:"space-y-2",children:a.strengths.map((x,g)=>n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-green-500 mt-1",children:""}),n.jsx("span",{className:"text-sm",children:x})]},g))})})]}),a.weaknesses.length>0&&n.jsxs(ae,{children:[n.jsx(he,{children:n.jsxs(fe,{className:"text-base flex items-center gap-2",children:[n.jsx(v2,{className:"h-5 w-5 text-red-500"}),"Areas for Improvement"]})}),n.jsx(ie,{children:n.jsx("ul",{className:"space-y-2",children:a.weaknesses.map((x,g)=>n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-red-500 mt-1",children:""}),n.jsx("span",{className:"text-sm",children:x})]},g))})})]})]}),n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Test History"}),n.jsx(ze,{children:"Your recent exam attempts"})]}),n.jsx(ie,{children:n.jsx("div",{className:"space-y-4",children:a.test_sessions.map(x=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[n.jsx(je,{className:`${h(x.subject)} text-white`,children:m(x.subject)}),n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(As,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:Db(new Date(x.date),"MMM dd, yyyy 'at' hh:mm a")})]})}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:`text-2xl font-bold ${f(x.percentage)}`,children:[x.percentage.toFixed(1),"%"]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[x.score.toFixed(1),"/",x.total_marks]})]})]}),n.jsxs(z,{variant:"ghost",size:"sm",onClick:()=>r(`/dashboard/student/exam/results/${x.session_id}`),className:"ml-4",children:[n.jsx(Kn,{className:"h-4 w-4 mr-2"}),"View"]})]},x.session_id))})})]})]}):n.jsx(ae,{children:n.jsxs(ie,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(Ii,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("p",{className:"text-lg font-medium mb-2",children:"No exam history yet"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Start taking exams to track your progress"}),n.jsx(z,{onClick:()=>r("/dashboard/student/exams"),children:"Browse Exams"})]})})]})})]})},Vne=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState([]),[o,l]=p.useState(!0),[c,u]=p.useState("all"),[d,h]=p.useState(null),[m,f]=p.useState("cards");p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{e&&x()},[e,c]);const x=async()=>{try{l(!0);const k={user_id:e.id};c!=="all"&&(k.subject=c);const N=await pe.exam.getHistory(k),T=(await Promise.all(N.test_sessions.map(async A=>{try{return{...await pe.exam.getResults(A.session_id,e.id),examSetId:A.session_id,subject:A.subject,date:A.date}}catch(E){return console.error(`Failed to fetch details for session ${A.session_id}:`,E),null}}))).filter(A=>A!==null).sort((A,E)=>!A.date||!E.date?0:new Date(E.date).getTime()-new Date(A.date).getTime());i(T)}catch(k){s({title:"Error",description:k.message||"Failed to fetch exam attempts",variant:"destructive"})}finally{l(!1)}},g=k=>({mathematics:"bg-blue-500",physics:"bg-purple-500",chemistry:"bg-green-500",biology:"bg-orange-500"})[k]||"bg-gray-500",y=k=>k.charAt(0).toUpperCase()+k.slice(1),b=k=>k>=80?"text-green-600":k>=60?"text-blue-600":k>=40?"text-yellow-600":"text-red-600",v=()=>{const k=new Set;return a.forEach(N=>{N.question_results.forEach(P=>{k.add(P.question_id)})}),Array.from(k)},w=(k,N)=>k.question_results.find(P=>P.question_id===N);if(t||o)return n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-primary"})});const S=a.length>0?v():[];return n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(yn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs(z,{variant:"ghost",onClick:()=>r("/dashboard/student/exams"),className:"mb-4",children:[n.jsx(tk,{className:"h-4 w-4 mr-2"}),"Back to Exams"]}),n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"All Exam Attempts"}),n.jsx("p",{className:"text-muted-foreground",children:"Detailed table view of all your exam attempts with question-wise marks"})]}),n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsxs(Nt,{value:c,onValueChange:k=>u(k),children:[n.jsx(wt,{className:"w-[200px]",children:n.jsx(St,{placeholder:"Select subject"})}),n.jsxs(jt,{children:[n.jsx(re,{value:"all",children:"All Subjects"}),n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(z,{variant:m==="cards"?"default":"outline",size:"sm",onClick:()=>f("cards"),children:"Card View"}),n.jsx(z,{variant:m==="table"?"default":"outline",size:"sm",onClick:()=>f("table"),children:"Table View"})]})]}),a.length===0?n.jsx(ae,{children:n.jsxs(ie,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(or,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("p",{className:"text-lg font-medium mb-2",children:"No exam attempts found"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Start taking exams to see your attempts here"}),n.jsx(z,{onClick:()=>r("/dashboard/student/exams"),children:"Browse Exams"})]})}):m==="table"?n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"All Attempts - Question-wise Marks"}),n.jsx(ze,{children:"Comprehensive table showing all attempts with question marks"})]}),n.jsx(ie,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(Cs,{children:[n.jsx(Es,{children:n.jsxs(Nr,{children:[n.jsx(mt,{className:"sticky left-0 bg-background z-10",children:"Question"}),a.map((k,N)=>n.jsx(mt,{className:"text-center min-w-[150px]",children:n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx(je,{className:`${g(k.subject)} text-white mb-1`,children:y(k.subject)}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:["#",a.length-N]}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:[k.percentage.toFixed(1),"%"]})]})},k.session_id))]})}),n.jsxs(Ts,{children:[S.map((k,N)=>{const P=a.flatMap(T=>T.question_results).find(T=>T.question_id===k);return n.jsxs(Nr,{children:[n.jsx(it,{className:"sticky left-0 bg-background z-10 font-medium",children:n.jsxs("div",{className:"max-w-[300px]",children:[n.jsxs("p",{className:"text-sm font-semibold mb-1",children:["Q",N+1]}),n.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:(P==null?void 0:P.question)||"Question"})]})}),a.map(T=>{const A=w(T,k);return A?n.jsx(it,{className:"text-center",children:n.jsxs("div",{className:"flex flex-col items-center gap-1",children:[n.jsxs(je,{variant:A.is_correct?"default":A.marks_awarded>0?"secondary":"destructive",className:"text-xs",children:[A.marks_awarded.toFixed(1),"/",A.max_marks]}),A.is_correct?n.jsx(Qt,{className:"h-4 w-4 text-green-500"}):A.marks_awarded>0?n.jsx("div",{className:"h-4 w-4 rounded-full bg-yellow-500"}):n.jsx(Li,{className:"h-4 w-4 text-red-500"})]})},T.session_id):n.jsx(it,{className:"text-center",children:n.jsx("span",{className:"text-muted-foreground text-xs",children:"-"})},T.session_id)})]},k)}),n.jsxs(Nr,{className:"bg-muted/50 font-semibold",children:[n.jsx(it,{className:"sticky left-0 bg-muted/50 z-10",children:"Total Score"}),a.map(k=>n.jsx(it,{className:"text-center",children:n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsxs("span",{className:`text-lg font-bold ${b(k.percentage)}`,children:[k.score.toFixed(1),"/",k.total_marks]}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:[k.percentage.toFixed(1),"%"]})]})},k.session_id))]})]})]})})})]}):n.jsx("div",{className:"space-y-6",children:a.map((k,N)=>n.jsxs(ae,{children:[n.jsx(he,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(je,{className:`${g(k.subject)} text-white`,children:y(k.subject)}),n.jsxs("div",{children:[n.jsxs(fe,{className:"text-lg",children:["Attempt #",a.length-N]}),n.jsx(ze,{children:k.date&&Db(new Date(k.date),"MMM dd, yyyy 'at' hh:mm a")})]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:`text-2xl font-bold ${b(k.percentage)}`,children:[k.percentage.toFixed(1),"%"]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[k.score.toFixed(1),"/",k.total_marks," marks"]})]}),n.jsx(z,{variant:"ghost",size:"sm",onClick:()=>h(d===k.session_id?null:k.session_id),children:d===k.session_id?"Collapse":"Expand"})]})]})}),d===k.session_id&&n.jsx(ie,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-4 gap-4 pb-4 border-b",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-green-600",children:k.correct_answers}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Correct"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:k.marking_rubric.partially_correct||0}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Partial"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-red-600",children:k.marking_rubric.incorrect||0}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Incorrect"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[n.jsx(Ur,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("p",{className:"text-2xl font-bold",children:k.time_taken_minutes})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Minutes"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(Cs,{children:[n.jsx(Es,{children:n.jsxs(Nr,{children:[n.jsx(mt,{className:"w-[50px]",children:"#"}),n.jsx(mt,{className:"min-w-[300px]",children:"Question"}),n.jsx(mt,{className:"w-[150px]",children:"Your Answer"}),n.jsx(mt,{className:"w-[100px] text-center",children:"Marks"}),n.jsx(mt,{className:"w-[100px] text-center",children:"Status"})]})}),n.jsx(Ts,{children:k.question_results.map((P,T)=>n.jsxs(Nr,{children:[n.jsx(it,{className:"font-medium",children:T+1}),n.jsx(it,{children:n.jsx("div",{className:"max-w-[400px]",children:n.jsx("p",{className:"text-sm line-clamp-2",children:P.question})})}),n.jsx(it,{children:n.jsx("div",{className:"max-w-[200px]",children:n.jsx("p",{className:"text-sm line-clamp-2 text-muted-foreground",children:P.student_answer||n.jsx("span",{className:"italic text-muted-foreground",children:"No answer"})})})}),n.jsx(it,{className:"text-center",children:n.jsxs(je,{variant:P.is_correct?"default":"destructive",className:"font-semibold",children:[P.marks_awarded.toFixed(1),"/",P.max_marks]})}),n.jsx(it,{className:"text-center",children:P.is_correct?n.jsx(Qt,{className:"h-5 w-5 text-green-500 mx-auto"}):P.marks_awarded>0?n.jsx("div",{className:"flex items-center justify-center",children:n.jsx("div",{className:"h-5 w-5 rounded-full bg-yellow-500 mx-auto"})}):n.jsx(Li,{className:"h-5 w-5 text-red-500 mx-auto"})})]},P.question_id))})]})}),n.jsx("div",{className:"flex justify-end pt-4 border-t",children:n.jsx(z,{variant:"outline",onClick:()=>r(`/dashboard/student/exam/results/${k.session_id}`),children:"View Full Details"})})]})})]},k.session_id))})]})})]})},GN=()=>{var K,X,de;const{microplanId:e}=Zl(),{user:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState(null),[o,l]=p.useState(!0),[c,u]=p.useState(!1),[d,h]=p.useState(0),[m,f]=p.useState({}),[x,g]=p.useState(0),[y,b]=p.useState(!1),[v,w]=p.useState(!1),[S,k]=p.useState(!1),[N,P]=p.useState(new Set),[T,A]=p.useState(null),[E,M]=p.useState(!1),{violations:I,totalViolations:se,isFullscreen:ee}=IA(oe=>{console.warn("Security violation detected:",oe),oe.type==="fullscreen"&&(M(!0),A(10))},!(a!=null&&a.is_completed));p.useEffect(()=>{if(T===null)return;if(ee&&T>0){A(null),M(!1),s({title:"Fullscreen Restored",description:"You have returned to fullscreen mode. You can continue the quiz."});return}if(T===0){A(null),q(!0);return}const oe=setTimeout(()=>{A(me=>me!==null?me-1:null)},1e3);return()=>clearTimeout(oe)},[T,ee]),p.useEffect(()=>{if(!t||!e){r("/login");return}Y()},[t,e]),p.useEffect(()=>{if(!a||a.is_completed)return;const oe=setInterval(()=>{const me=new Date(a.start_time).getTime(),Ee=Date.now(),we=Math.floor((Ee-me)/1e3),Le=(a.duration_minutes||0)*60,_e=Math.max(0,Le-we);g(_e),_e===0&&!S&&(k(!0),q(!0))},1e3);return()=>clearInterval(oe)},[a,S]);const Y=async()=>{try{l(!0);const oe=await pe.microplan.getMicroplan(e);if(!oe.quiz_data||!oe.quiz_data.questions||oe.quiz_data.questions.length===0){s({title:"Error",description:"No quiz found in this microplan",variant:"destructive"}),r("/dashboard/student/microplan");return}const me=await pe.quiz.startSession({user_id:t.id,microplan_id:e,quiz_data:oe.quiz_data,subject:oe.subject});i(me);const Ee=me.duration_minutes||oe.quiz_data.questions.length*2;if(g(Ee*60),me.answers){const we={};Object.keys(me.answers).forEach(Le=>{we[Le]=me.answers[Le].answer||""}),f(we)}}catch(oe){s({title:"Error",description:oe.message||"Failed to start quiz",variant:"destructive"}),r("/dashboard/student/microplan")}finally{l(!1)}},F=(oe,me)=>{f(Ee=>({...Ee,[oe]:me})),P(Ee=>{const we=new Set(Ee);return we.delete(oe),we})},ne=async oe=>{if(!(!a||!t))try{await pe.quiz.saveAnswer({session_id:a.id,user_id:t.id,answer:{question_id:oe,answer:m[oe]||"",timestamp:new Date().toISOString()}}),P(me=>new Set(me).add(oe)),s({title:"Answer saved",description:"Your answer has been saved successfully"})}catch(me){s({title:"Error",description:me.message||"Failed to save answer",variant:"destructive"})}},q=async(oe=!1)=>{if(!(!a||!t))try{u(!0);for(const[Ee,we]of Object.entries(m))we.trim()&&await pe.quiz.saveAnswer({session_id:a.id,user_id:t.id,answer:{question_id:Ee,answer:we,timestamp:new Date().toISOString()}});const me=await pe.quiz.submitQuiz({session_id:a.id,user_id:t.id});i({...a,...me,is_completed:!0});try{document.exitFullscreen?await document.exitFullscreen():document.webkitExitFullscreen?await document.webkitExitFullscreen():document.mozCancelFullScreen?await document.mozCancelFullScreen():document.msExitFullscreen&&await document.msExitFullscreen()}catch(Ee){console.warn("Failed to exit fullscreen:",Ee)}w(!0),b(!1)}catch(me){s({title:"Error",description:me.message||"Failed to submit quiz",variant:"destructive"}),w(!1)}finally{u(!1),b(!1)}},V=oe=>{const me=Math.floor(oe/3600),Ee=Math.floor(oe%3600/60),we=oe%60;return me>0?`${me}:${Ee.toString().padStart(2,"0")}:${we.toString().padStart(2,"0")}`:`${Ee}:${we.toString().padStart(2,"0")}`},_=()=>{if(!a)return"text-foreground";const oe=(a.duration_minutes||0)*60,me=x/oe*100;return me<=10?"text-red-500":me<=25?"text-orange-500":"text-foreground"};if(o)return n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-primary"})});if(!a)return null;const U=((K=a.quiz_data)==null?void 0:K.questions)||[],H=U[d],O=(d+1)/U.length*100,B=Object.keys(m).filter(oe=>{var me;return(me=m[oe])==null?void 0:me.trim()}).length,W=H.id||`q${d}`;return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-10 bg-card border-b",children:n.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-bold",children:((X=a.quiz_data)==null?void 0:X.title)||"Quick Quiz"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Question ",d+1," of ",U.length]})]}),n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"h-5 w-5 text-green-500"}),n.jsxs("span",{className:"text-sm font-medium",children:[B,"/",U.length," Answered"]})]}),se>0&&n.jsxs("div",{className:"flex items-center gap-2 text-red-500",children:[n.jsx(Hs,{className:"h-5 w-5"}),n.jsxs("span",{className:"text-sm font-medium",children:["Violations: ",se]})]}),n.jsxs("div",{className:`flex items-center gap-2 ${_()}`,children:[n.jsx(Ur,{className:"h-5 w-5"}),n.jsx("span",{className:"text-lg font-bold font-mono",children:V(x)})]}),n.jsx(z,{variant:"destructive",onClick:()=>b(!0),disabled:c,children:c?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Submitting..."]}):"Submit Quiz"})]})]}),n.jsx(_i,{value:O,className:"mt-4"})]})}),E&&T!==null&&n.jsx("div",{className:"fixed inset-0 z-50 bg-background flex items-center justify-center",children:n.jsxs(ae,{className:"max-w-md mx-4",children:[n.jsx(he,{children:n.jsxs(fe,{className:"flex items-center gap-2 text-red-500",children:[n.jsx(Hs,{className:"h-6 w-6"}),"Fullscreen Mode Required"]})}),n.jsxs(ie,{className:"space-y-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"You have exited fullscreen mode. Please return to fullscreen immediately to continue the quiz."}),n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(Ur,{className:"h-8 w-8 text-red-500 animate-pulse"}),n.jsx("span",{className:"text-4xl font-bold text-red-500 font-mono",children:T}),n.jsx("span",{className:"text-lg text-muted-foreground",children:"seconds"})]}),n.jsx("p",{className:"text-sm text-center text-muted-foreground",children:T>0?`Quiz will be automatically submitted in ${T} second${T!==1?"s":""} if you don't return to fullscreen.`:"Submitting quiz..."})]})]})}),!E&&n.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-8",children:[n.jsxs(ae,{children:[n.jsx(he,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs(fe,{className:"text-lg",children:["Question ",d+1]}),H.marks&&n.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[H.marks," marks"]})]})}),n.jsxs(ie,{className:"space-y-6",children:[n.jsx("div",{className:"prose prose-sm max-w-none",children:n.jsx("p",{className:"text-base whitespace-pre-wrap",children:H.question})}),H.options&&H.options.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select Answer"}),H.options.map((oe,me)=>n.jsxs(z,{variant:m[W]===oe?"default":"outline",className:"w-full justify-start",onClick:()=>F(W,oe),children:[String.fromCharCode(65+me),") ",oe]},me))]}),(!H.options||H.options.length===0)&&n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Your Answer"}),n.jsx(kr,{value:m[W]||"",onChange:oe=>F(W,oe.target.value),onCopy:oe=>{oe.preventDefault(),s({variant:"destructive",title:"Security Warning",description:"Copying is disabled during the quiz."})},onPaste:oe=>{oe.preventDefault(),s({variant:"destructive",title:"Security Warning",description:"Pasting is disabled during the quiz."})},placeholder:"Type your answer here...",className:"min-h-[200px] resize-none"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(z,{variant:"outline",onClick:()=>ne(W),disabled:!((de=m[W])!=null&&de.trim()),className:"gap-2",children:[n.jsx(ti,{className:"h-4 w-4"}),"Save Answer"]}),N.has(W)&&n.jsxs("span",{className:"text-sm text-green-600 flex items-center gap-1",children:[n.jsx(Qt,{className:"h-4 w-4"}),"Saved"]})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between mt-6",children:[n.jsx(z,{variant:"outline",onClick:()=>h(oe=>Math.max(0,oe-1)),disabled:d===0,children:"Previous"}),n.jsx("div",{className:"flex gap-2 flex-wrap justify-center",children:U.map((oe,me)=>{var we;const Ee=U[me].id||`q${me}`;return n.jsx(z,{variant:me===d?"default":"outline",size:"sm",className:`w-10 h-10 ${(we=m[Ee])!=null&&we.trim()?"border-green-500":""}`,onClick:()=>h(me),children:me+1},me)})}),n.jsx(z,{onClick:()=>h(oe=>Math.min(U.length-1,oe+1)),disabled:d===U.length-1,children:"Next"})]})]}),n.jsx(Sh,{open:v,onOpenChange:()=>{},children:n.jsxs(ku,{className:"sm:max-w-md",children:[n.jsxs(_u,{children:[n.jsxs(Eu,{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"h-5 w-5 text-green-500"}),S?"Time's Up!":"Quiz Submitted Successfully"]}),n.jsx(Tu,{className:"pt-2",children:S?"Your quiz has been automatically submitted. Your answers have been saved and will be evaluated.":"Your quiz has been submitted successfully. Your answers have been saved and will be evaluated. You can view your results now."})]}),n.jsx(Cu,{children:n.jsx(Au,{onClick:()=>{w(!1),r(`/dashboard/student/quiz/results/${a.id}`)},className:"w-full",children:"View Results"})})]})}),n.jsx(Sh,{open:y,onOpenChange:b,children:n.jsxs(ku,{children:[n.jsxs(_u,{children:[n.jsx(Eu,{children:"Submit Quiz?"}),n.jsx(Tu,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{children:"Are you sure you want to submit your quiz?"}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Hs,{className:"h-4 w-4"}),n.jsxs("span",{children:["You have answered ",B," out of ",U.length," questions"]})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Once submitted, you cannot change your answers."})]})})]}),n.jsxs(Cu,{children:[n.jsx(Up,{children:"Cancel"}),n.jsx(Au,{onClick:()=>q(!1),children:"Submit"})]})]})})]})};function Hne({userId:e}){const[t,r]=p.useState(!1),[s,a]=p.useState(25),[i,o]=p.useState(25*60),[l,c]=p.useState(null),[u,d]=p.useState(""),[h,m]=p.useState(""),[f,x]=p.useState(0),g=p.useRef(null),{toast:y}=Ut();p.useEffect(()=>(t&&i>0?g.current=setInterval(()=>{o(P=>P<=1?(k(!0),0):P-1)},1e3):g.current&&clearInterval(g.current),()=>{g.current&&clearInterval(g.current)}),[t,i]);const b=P=>{const T=Math.floor(P/60),A=P%60;return`${T.toString().padStart(2,"0")}:${A.toString().padStart(2,"0")}`},v=async()=>{try{const P=await pe.wellbeing.startFocusSession({user_id:e,duration_minutes:s,subject:u||void 0,goal:h||void 0});c(P.session_id),o(s*60),r(!0),y({title:"Focus session started!",description:`Stay focused for ${s} minutes`})}catch(P){y({title:"Error",description:P.message||"Failed to start focus session",variant:"destructive"})}},w=()=>{r(!1)},S=()=>{r(!0)},k=async(P=!1)=>{var T;if(l)try{r(!1);const A=await pe.wellbeing.endFocusSession({session_id:l,user_id:e,distractions_count:f,completed:P});y({title:P?"Session completed!":"Session ended",description:((T=A.motivation)==null?void 0:T.message)||"Great work!"}),c(null),o(s*60),x(0)}catch(A){y({title:"Error",description:A.message||"Failed to end session",variant:"destructive"})}},N=()=>{x(P=>P+1),y({title:"Distraction blocked!",description:"Stay focused!"})};return n.jsxs(ae,{className:"w-full max-w-2xl mx-auto",children:[n.jsxs(he,{children:[n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(Ur,{className:"h-5 w-5"}),"Focus Timer"]}),n.jsx(ze,{children:"Time-box your study sessions and stay focused"})]}),n.jsx(ie,{className:"space-y-6",children:l?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-center space-y-4",children:[n.jsx("div",{className:"text-6xl font-bold font-mono",children:b(i)}),n.jsxs("div",{className:"flex items-center justify-center gap-2 text-muted-foreground",children:[n.jsx(An,{className:"h-4 w-4"}),n.jsx("span",{children:h||"Stay focused!"})]}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Distractions blocked: ",f]})]}),n.jsxs("div",{className:"flex gap-2 justify-center",children:[t?n.jsxs(z,{onClick:w,variant:"outline",children:[n.jsx(nk,{className:"h-4 w-4 mr-2"}),"Pause"]}):n.jsxs(z,{onClick:S,children:[n.jsx(qc,{className:"h-4 w-4 mr-2"}),"Resume"]}),n.jsxs(z,{onClick:()=>k(!1),variant:"destructive",children:[n.jsx(ak,{className:"h-4 w-4 mr-2"}),"End Session"]}),n.jsx(z,{onClick:N,variant:"secondary",children:"Block Distraction"})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(be,{htmlFor:"duration",children:"Duration (minutes)"}),n.jsx(Ve,{id:"duration",type:"number",min:"5",max:"180",value:s,onChange:P=>a(parseInt(P.target.value)||25),disabled:t})]}),n.jsxs("div",{children:[n.jsx(be,{htmlFor:"subject",children:"Subject (optional)"}),n.jsxs(Nt,{value:u,onValueChange:d,children:[n.jsx(wt,{children:n.jsx(St,{placeholder:"Select subject"})}),n.jsxs(jt,{children:[n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]})]}),n.jsxs("div",{children:[n.jsx(be,{htmlFor:"goal",children:"Learning Goal (optional)"}),n.jsx(kr,{id:"goal",placeholder:"What do you want to achieve in this session?",value:h,onChange:P=>m(P.target.value)})]})]}),n.jsxs(z,{onClick:v,className:"w-full",size:"lg",children:[n.jsx(qc,{className:"h-4 w-4 mr-2"}),"Start Focus Session"]})]})})]})}function Wne(){const{user:e}=Wt(),[t,r]=p.useState(null),[s,a]=p.useState(null);p.useEffect(()=>{e!=null&&e.id&&(i(),o())},[e]);const i=async()=>{try{const l=await pe.wellbeing.getMotivation((e==null?void 0:e.id)||"","daily_checkin");r(l.motivation)}catch(l){console.error("Failed to load motivation:",l)}},o=async()=>{a({total_sessions:0,total_minutes:0,streak_days:0})};return n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Focus & Well-being"}),n.jsx("p",{className:"text-muted-foreground mt-2",children:"Time-box your study sessions and stay focused"})]})}),t&&n.jsxs(ae,{children:[n.jsx(he,{children:n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(vr,{className:"h-5 w-5"}),"Daily Motivation"]})}),n.jsxs(ie,{children:[n.jsx("p",{className:"text-lg",children:t.message}),t.study_tip&&n.jsxs("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:[n.jsx("p",{className:"font-semibold mb-2",children:" Study Tip:"}),n.jsx("p",{children:t.study_tip})]})]})]}),n.jsx(Hne,{userId:(e==null?void 0:e.id)||""}),s&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs(ae,{children:[n.jsx(he,{className:"pb-2",children:n.jsx(fe,{className:"text-sm font-medium text-muted-foreground",children:"Total Sessions"})}),n.jsx(ie,{children:n.jsxs("div",{className:"text-2xl font-bold flex items-center gap-2",children:[n.jsx(Mn,{className:"h-5 w-5"}),s.total_sessions]})})]}),n.jsxs(ae,{children:[n.jsx(he,{className:"pb-2",children:n.jsx(fe,{className:"text-sm font-medium text-muted-foreground",children:"Total Minutes"})}),n.jsx(ie,{children:n.jsxs("div",{className:"text-2xl font-bold flex items-center gap-2",children:[n.jsx(Ii,{className:"h-5 w-5"}),s.total_minutes]})})]}),n.jsxs(ae,{children:[n.jsx(he,{className:"pb-2",children:n.jsx(fe,{className:"text-sm font-medium text-muted-foreground",children:"Streak Days"})}),n.jsx(ie,{children:n.jsxs("div",{className:"text-2xl font-bold flex items-center gap-2",children:[n.jsx(vr,{className:"h-5 w-5"}),s.streak_days]})})]})]})]})}function Gne(){var M,I,se,ee,Y;const{user:e}=Wt(),{toast:t}=Ut(),[r,s]=p.useState(!1),[a,i]=p.useState(null),[o,l]=p.useState(null),[c,u]=p.useState(null),[d,h]=p.useState(""),[m,f]=p.useState("mathematics"),[x,g]=p.useState("mathematics"),[y,b]=p.useState(7),[v,w]=p.useState(2),[S,k]=p.useState(""),[N,P]=p.useState("mathematics"),T=async()=>{if(!d.trim()){t({title:"Error",description:"Please enter content to get feedback on",variant:"destructive"});return}s(!0);try{const F=await pe.aiTutoring.getFeedback({user_id:(e==null?void 0:e.id)||"",content:d,subject:m});i(F),t({title:"Feedback generated!",description:"Your personalized feedback is ready"})}catch(F){t({title:"Error",description:F.message||"Failed to generate feedback",variant:"destructive"})}finally{s(!1)}},A=async()=>{s(!0);try{const F=await pe.aiTutoring.generateStudyPlan({user_id:(e==null?void 0:e.id)||"",subject:x,days:y,hours_per_day:v});l(F),t({title:"Study plan generated!",description:"Your personalized study plan is ready"})}catch(F){t({title:"Error",description:F.message||"Failed to generate study plan",variant:"destructive"})}finally{s(!1)}},E=async()=>{if(!S.trim()){t({title:"Error",description:"Please enter a question",variant:"destructive"});return}s(!0);try{const F=await pe.aiTutoring.answerQuestion({user_id:(e==null?void 0:e.id)||"",question:S,subject:N});u(F),t({title:"Answer generated!",description:"Your question has been answered"})}catch(F){t({title:"Error",description:F.message||"Failed to answer question",variant:"destructive"})}finally{s(!1)}};return n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[n.jsx(Qn,{className:"h-8 w-8"}),"AI Tutoring"]}),n.jsx("p",{className:"text-muted-foreground mt-2",children:"Get personalized feedback, study plans, and answers to your questions"})]}),n.jsxs(Zs,{defaultValue:"feedback",className:"space-y-4",children:[n.jsxs(Ps,{children:[n.jsxs(gr,{value:"feedback",children:[n.jsx(Fl,{className:"h-4 w-4 mr-2"}),"Feedback"]}),n.jsxs(gr,{value:"study-plan",children:[n.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Study Plan"]}),n.jsxs(gr,{value:"questions",children:[n.jsx(Qn,{className:"h-4 w-4 mr-2"}),"Ask Question"]})]}),n.jsxs(Er,{value:"feedback",className:"space-y-4",children:[n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Get Personalized Feedback"}),n.jsx(ze,{children:"Submit your work to get AI-powered feedback and suggestions"})]}),n.jsxs(ie,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(be,{htmlFor:"feedback-subject",children:"Subject"}),n.jsxs(Nt,{value:m,onValueChange:f,children:[n.jsx(wt,{children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]})]}),n.jsxs("div",{children:[n.jsx(be,{htmlFor:"feedback-content",children:"Your Work"}),n.jsx(kr,{id:"feedback-content",placeholder:"Paste your answer, essay, or work here...",value:d,onChange:F=>h(F.target.value),rows:8})]}),n.jsx(z,{onClick:T,disabled:r,children:r?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):"Get Feedback"})]})]}),a&&n.jsxs(ae,{children:[n.jsx(he,{children:n.jsx(fe,{children:"Your Feedback"})}),n.jsxs(ie,{className:"space-y-4",children:[((M=a.feedback)==null?void 0:M.feedback)&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Feedback"}),n.jsx("p",{className:"text-sm",children:a.feedback.feedback})]}),((I=a.feedback)==null?void 0:I.strengths)&&a.feedback.strengths.length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Strengths"}),n.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm",children:a.feedback.strengths.map((F,ne)=>n.jsx("li",{children:F},ne))})]}),((se=a.feedback)==null?void 0:se.improvements)&&a.feedback.improvements.length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Areas for Improvement"}),n.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm",children:a.feedback.improvements.map((F,ne)=>n.jsx("li",{children:F},ne))})]})]})]})]}),n.jsxs(Er,{value:"study-plan",className:"space-y-4",children:[n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Generate Study Plan"}),n.jsx(ze,{children:"Create a personalized study plan based on your goals"})]}),n.jsxs(ie,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(be,{htmlFor:"plan-subject",children:"Subject"}),n.jsxs(Nt,{value:x,onValueChange:g,children:[n.jsx(wt,{children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]})]}),n.jsxs("div",{children:[n.jsx(be,{htmlFor:"plan-days",children:"Days"}),n.jsx(Ve,{id:"plan-days",type:"number",min:"1",max:"30",value:y,onChange:F=>b(parseInt(F.target.value)||7)})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx(be,{htmlFor:"plan-hours",children:"Hours per Day"}),n.jsx(Ve,{id:"plan-hours",type:"number",min:"0.5",max:"8",step:"0.5",value:v,onChange:F=>w(parseFloat(F.target.value)||2)})]})]}),n.jsx(z,{onClick:A,disabled:r,children:r?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):"Generate Study Plan"})]})]}),o&&n.jsxs(ae,{children:[n.jsx(he,{children:n.jsx(fe,{children:"Your Study Plan"})}),n.jsx(ie,{children:n.jsx("pre",{className:"whitespace-pre-wrap text-sm bg-muted p-4 rounded-lg",children:JSON.stringify(o.plan,null,2)})})]})]}),n.jsxs(Er,{value:"questions",className:"space-y-4",children:[n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Ask a Question"}),n.jsx(ze,{children:"Get AI-powered answers with explanations"})]}),n.jsxs(ie,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(be,{htmlFor:"question-subject",children:"Subject"}),n.jsxs(Nt,{value:N,onValueChange:P,children:[n.jsx(wt,{children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]})]}),n.jsxs("div",{children:[n.jsx(be,{htmlFor:"question",children:"Your Question"}),n.jsx(kr,{id:"question",placeholder:"Ask your question here...",value:S,onChange:F=>k(F.target.value),rows:4})]}),n.jsx(z,{onClick:E,disabled:r,children:r?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Thinking..."]}):"Ask Question"})]})]}),c&&n.jsxs(ae,{children:[n.jsx(he,{children:n.jsx(fe,{children:"Answer"})}),n.jsxs(ie,{className:"space-y-4",children:[((ee=c.answer)==null?void 0:ee.answer)&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Answer"}),n.jsx("p",{className:"text-sm",children:c.answer.answer})]}),((Y=c.answer)==null?void 0:Y.explanation)&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Explanation"}),n.jsx("p",{className:"text-sm",children:c.answer.explanation})]})]})]})]})]})]})}const QN=[{code:"en",name:"English"},{code:"hi",name:"Hindi"},{code:"es",name:"Spanish"},{code:"fr",name:"French"},{code:"de",name:"German"},{code:"zh",name:"Chinese"},{code:"ja",name:"Japanese"},{code:"ar",name:"Arabic"}],_g=(e,t)=>{var i,o;let r=[],s=0,a=t;if(e.sources&&Array.isArray(e.sources)?(r=e.sources,s=e.sources.length):(i=e.metadata)!=null&&i.sources&&Array.isArray(e.metadata.sources)?(r=e.metadata.sources,s=e.metadata.sources.length):(o=e.metadata)!=null&&o.chunks_retrieved&&(s=e.metadata.chunks_retrieved),t){const l=t.match(/Based on (\d+) relevant content section/i);if(l){const d=parseInt(l[1],10);d>s&&(s=d)}const c=[];if(t.split(`
`).forEach(d=>{const h=d.trim(),m=/^(\w+)\s*-\s*([^-]+)$/i,f=h.match(m);if(f){const[,x,g]=f;x.length>=3&&g.trim().length>=3&&c.push(h)}}),c.length>0){const d=new Map;c.forEach(h=>{const m=h.split(/\s*-\s*/);if(m.length>=2){const f=m[0].trim().toLowerCase(),x=m.slice(1).join(" - ").trim();if(f.length>2&&x.length>2){const g=`${f}-${x}`;d.has(g)||d.set(g,{type:f,chapter:x})}}}),d.size>0&&(r=Array.from(d.values()),s||(s=r.length))}c.length>0&&(a=t.split(`
`).filter(d=>{const h=d.trim(),m=/^(\w+)\s*-\s*([^-]+)$/i.test(h),f=/^Sources?:\s*$/i.test(h);return!m&&!f}).join(`
`).trim(),a=a.replace(/^\s*Based on \d+ relevant content sections? from the curriculum\.?\s*$/gmi,"").trim())}return{sources:r,sourcesCount:s,cleanedContent:a}};function Qne(){const{user:e}=Wt(),{toast:t}=Ut(),[r,s]=p.useState([]),[a,i]=p.useState(null),[o,l]=p.useState([]),[c,u]=p.useState(""),[d,h]=p.useState(!1),[m,f]=p.useState("mathematics"),[x,g]=p.useState(!0),[y,b]=p.useState(null),[v,w]=p.useState(""),[S,k]=p.useState("en"),[N,P]=p.useState("en"),[T,A]=p.useState(!1),[E,M]=p.useState(0),[I,se]=p.useState(null),[ee,Y]=p.useState(null),[F,ne]=p.useState(!1),[q,V]=p.useState(!0),[_,U]=p.useState(!1),[H,O]=p.useState(null),[B,W]=p.useState({}),[K,X]=p.useState({}),[de,oe]=p.useState({}),[me,Ee]=p.useState({});p.useRef(null);const we=p.useRef(null),Le=p.useRef(null),_e=p.useRef(null),ut=p.useRef([]),at=p.useRef(null),Ct=p.useRef(null),L=p.useRef(null);p.useEffect(()=>(e!=null&&e.id&&ke(),L.current=window.speechSynthesis,()=>{at.current&&clearInterval(at.current),_e.current&&_e.current.state!=="inactive"&&_e.current.stop()}),[e]),p.useEffect(()=>{a?ot(a.id):l([])},[a]),p.useEffect(()=>{Le.current&&Le.current.scrollIntoView({behavior:"smooth"})},[o]);const ke=async()=>{if(e!=null&&e.id)try{const Ae=((await pe.aiTutoring.getSessions({user_id:e.id,limit:50})).sessions||[]).sort((Fe,Pe)=>new Date(Pe.last_message_at||Pe.created_at).getTime()-new Date(Fe.last_message_at||Fe.created_at).getTime());if(s(Ae),!a){const Fe=Ae.find(Pe=>Pe.is_active);Fe?i(Fe):Ae.length>0&&i(Ae[0])}}catch(J){console.error("Error fetching sessions:",J)}},ot=async J=>{try{const Ae=await pe.aiTutoring.getSessionMessages(J,100);l(Ae.messages||[])}catch(Ae){console.error("Error fetching messages:",Ae),t({title:"Error",description:"Failed to load messages",variant:"destructive"})}},ct=async()=>{if(e!=null&&e.id)try{h(!0);const Ae=(await pe.aiTutoring.createSession({user_id:e.id,session_name:`New Chat ${new Date().toLocaleDateString()}`,subject:m})).session;s(Fe=>[Ae,...Fe]),i(Ae),l([]),t({title:"New Chat Created",description:"Start chatting with your AI tutor!"})}catch(J){t({title:"Error",description:J.message||"Failed to create session",variant:"destructive"})}finally{h(!1)}},$=async()=>{try{const J=await navigator.mediaDevices.getUserMedia({audio:!0}),Ae=new MediaRecorder(J,{mimeType:"audio/webm"});_e.current=Ae,ut.current=[],Ae.ondataavailable=Fe=>{Fe.data.size>0&&ut.current.push(Fe.data)},Ae.onstop=async()=>{const Fe=new Blob(ut.current,{type:"audio/webm"});await dt(Fe),J.getTracks().forEach(Pe=>Pe.stop())},Ae.start(),A(!0),M(0),at.current=setInterval(()=>{M(Fe=>Fe+1)},1e3)}catch{t({title:"Microphone Access Denied",description:"Please allow microphone access to record voice messages",variant:"destructive"})}},Ne=()=>{_e.current&&_e.current.state!=="inactive"&&(_e.current.stop(),A(!1),at.current&&(clearInterval(at.current),at.current=null))},dt=async J=>{var Ae,Fe,Pe,Ie,ht,Ye,lt,xt;if(!(!a||!(e!=null&&e.id))){h(!0);try{const Et=new File([J],"recording.webm",{type:"audio/webm"}),Zt=await pe.doubt.voice({user_id:e.id,audio:Et,subject:m}),dr=Zt.query_text||Zt.extracted_text||((Ae=Zt.answer)==null?void 0:Ae.summary)||"";if(!dr)throw new Error("Could not extract text from audio");let pr=dr;if(S!=="en")try{pr=(await pe.translation.translate({text:dr,source_language:S,target_language:"en"})).translated_text||dr}catch(mn){console.error("Translation error:",mn)}const nr={id:Date.now().toString(),role:"student",content:pr,message_type:"voice",subject:m,created_at:new Date().toISOString(),metadata:{original_text:dr,language:S}};l(mn=>[...mn,nr]);const Lt=Be(pr);let wn=null;if(Lt&&q)try{U(!0),wn=await gt(pr)}catch(mn){console.error("Wolfram error:",mn)}finally{U(!1)}let En=await pe.aiTutoring.sendMessage({session_id:a.id,user_id:e.id,content:pr,subject:m,message_type:"voice"});const Cr=((Fe=En.ai_message)==null?void 0:Fe.content)||"";if(Cr.includes("couldn't find relevant information")||Cr.includes("I couldn't find relevant information")||((Ie=(Pe=En.ai_message)==null?void 0:Pe.metadata)==null?void 0:Ie.reason)==="no_content_found"||((Ye=(ht=En.ai_message)==null?void 0:ht.metadata)==null?void 0:Ye.rag_used)===!1&&((xt=(lt=En.ai_message)==null?void 0:lt.metadata)==null?void 0:xt.confidence)===0)try{const mn=await pe.rag.queryDirect({query:pr,subject:m});mn.generated_text&&(En={...En,ai_message:{...En.ai_message,content:mn.generated_text,metadata:{...En.ai_message.metadata,rag_used:!1,fallback_to_direct:!0,note:"Note: This answer is based on general knowledge as the specific topic wasn't found in the curriculum materials."}}})}catch(mn){console.error("Direct query fallback failed:",mn)}if(En.ai_message){const{sources:mn,sourcesCount:fs,cleanedContent:ps}=_g(En,En.ai_message.content||""),ac={...En.ai_message,content:ps||En.ai_message.content,wolframResult:wn||void 0,sources:mn.length>0?mn:void 0,sourcesCount:fs>0?fs:void 0};l(Ji=>[...Ji,ac]),F&&L.current&&G(ac.content,N)}ke()}catch(Et){t({title:"Error",description:Et.message||"Failed to process voice message",variant:"destructive"})}finally{h(!1)}}},zt=async J=>{if(!a||!(e!=null&&e.id))return;if(!J.type.startsWith("image/")){t({title:"Invalid File",description:"Please upload an image file",variant:"destructive"});return}if(J.size>10*1024*1024){t({title:"File Too Large",description:"Image must be less than 10MB",variant:"destructive"});return}Y(J);const Ae=new FileReader;Ae.onloadend=()=>{se(Ae.result)},Ae.readAsDataURL(J)},ue=async()=>{var J,Ae,Fe,Pe,Ie,ht,Ye,lt;if(!(!ee||!a||!(e!=null&&e.id))){h(!0);try{const xt=await pe.doubt.image({user_id:e.id,image:ee,subject:m}),Et=xt.query_text||xt.extracted_text||((J=xt.answer)==null?void 0:J.summary)||"";if(!Et)throw new Error("Could not extract text from image");let Zt=Et;if(S!=="en")try{Zt=(await pe.translation.translate({text:Et,source_language:S,target_language:"en"})).translated_text||Et}catch(Cr){console.error("Translation error:",Cr)}const dr={id:Date.now().toString(),role:"student",content:Zt,message_type:"image",subject:m,created_at:new Date().toISOString(),imageUrl:I||void 0,metadata:{original_text:Et,language:S}};l(Cr=>[...Cr,dr]);const pr=Be(Zt);let nr=null;if(pr&&q)try{U(!0),nr=await gt(Zt)}catch(Cr){console.error("Wolfram error:",Cr)}finally{U(!1)}let Lt=await pe.aiTutoring.sendMessage({session_id:a.id,user_id:e.id,content:Zt,subject:m,message_type:"image"});const wn=((Ae=Lt.ai_message)==null?void 0:Ae.content)||"";if(wn.includes("couldn't find relevant information")||wn.includes("I couldn't find relevant information")||((Pe=(Fe=Lt.ai_message)==null?void 0:Fe.metadata)==null?void 0:Pe.reason)==="no_content_found"||((ht=(Ie=Lt.ai_message)==null?void 0:Ie.metadata)==null?void 0:ht.rag_used)===!1&&((lt=(Ye=Lt.ai_message)==null?void 0:Ye.metadata)==null?void 0:lt.confidence)===0)try{const Cr=await pe.rag.queryDirect({query:Zt,subject:m});Cr.generated_text&&(Lt={...Lt,ai_message:{...Lt.ai_message,content:Cr.generated_text,metadata:{...Lt.ai_message.metadata,rag_used:!1,fallback_to_direct:!0,note:"Note: This answer is based on general knowledge as the specific topic wasn't found in the curriculum materials."}}})}catch(Cr){console.error("Direct query fallback failed:",Cr)}if(Lt.ai_message){const{sources:Cr,sourcesCount:es,cleanedContent:mn}=_g(Lt,Lt.ai_message.content||""),fs={...Lt.ai_message,content:mn||Lt.ai_message.content,wolframResult:nr||void 0,sources:Cr.length>0?Cr:void 0,sourcesCount:es>0?es:void 0};l(ps=>[...ps,fs]),F&&L.current&&G(fs.content,N)}se(null),Y(null),Ct.current&&(Ct.current.value=""),ke()}catch(xt){t({title:"Error",description:xt.message||"Failed to process image",variant:"destructive"})}finally{h(!1)}}},G=(J,Ae)=>{if(!L.current)return;L.current.cancel();const Fe=J.replace(/[#*`_\[\]()]/g,"").substring(0,500),Pe=new SpeechSynthesisUtterance(Fe);Pe.lang=Ae==="en"?"en-US":Ae,Pe.rate=.9,Pe.pitch=1,Pe.volume=.8,L.current.speak(Pe)},ye=async()=>{var Pe,Ie,ht,Ye,lt,xt,Et,Zt,dr;if(!c.trim()||!a||!(e!=null&&e.id)||d)return;let J=c;if(S!=="en")try{J=(await pe.translation.translate({text:c,source_language:S,target_language:"en"})).translated_text||c}catch(pr){console.error("Translation error:",pr)}const Ae={id:Date.now().toString(),role:"student",content:c,message_type:"text",subject:m,created_at:new Date().toISOString(),metadata:{translated_text:J,language:S}};l(pr=>[...pr,Ae]);const Fe=J;u(""),h(!0);try{const pr=Be(Fe);let nr=null;if(pr&&q)try{U(!0),nr=await gt(Fe)}catch(Cr){console.error("Wolfram error:",Cr)}finally{U(!1)}let Lt=await pe.aiTutoring.sendMessage({session_id:a.id,user_id:e.id,content:Fe,subject:m,message_type:"text"});const wn=((Pe=Lt.ai_message)==null?void 0:Pe.content)||"";if(wn.includes("couldn't find relevant information")||wn.includes("I couldn't find relevant information")||((ht=(Ie=Lt.ai_message)==null?void 0:Ie.metadata)==null?void 0:ht.reason)==="no_content_found"||((lt=(Ye=Lt.ai_message)==null?void 0:Ye.metadata)==null?void 0:lt.rag_used)===!1&&((Et=(xt=Lt.ai_message)==null?void 0:xt.metadata)==null?void 0:Et.confidence)===0)try{const Cr=await pe.rag.queryDirect({query:Fe,subject:m});Cr.generated_text&&(Lt={...Lt,ai_message:{...Lt.ai_message,content:Cr.generated_text,metadata:{...Lt.ai_message.metadata,rag_used:!1,fallback_to_direct:!0,note:"Note: This answer is based on general knowledge as the specific topic wasn't found in the curriculum materials."}}})}catch(Cr){console.error("Direct query fallback failed:",Cr),Lt={...Lt,ai_message:{...Lt.ai_message,content:`I couldn't find specific information about "${Fe}" in the uploaded curriculum materials. However, I can still help you!

**Here's what I can do:**

1. **Answer based on general knowledge** - I can provide explanations based on standard Class 12 curriculum
2. **Help rephrase your question** - Sometimes asking differently helps find relevant content
3. **Suggest related topics** - I can guide you to topics that are covered in the materials

Would you like me to:
- Provide a general explanation of this topic?
- Help you rephrase your question?
- Suggest related topics from the curriculum?

Just let me know how you'd like to proceed!`}}}if(Lt.ai_message){const{sources:Cr,sourcesCount:es,cleanedContent:mn}=_g(Lt,Lt.ai_message.content||""),fs={...Lt.ai_message,content:mn||Lt.ai_message.content,wolframResult:nr||void 0,sources:Cr.length>0?Cr:void 0,sourcesCount:es>0?es:void 0};if(l(ps=>[...ps,fs]),N!=="en")try{const ps=await pe.translation.translate({text:fs.content,source_language:"en",target_language:N});ps.translated_text&&l(ac=>ac.map(Ji=>Ji.id===fs.id?{...Ji,content:ps.translated_text,metadata:{...Ji.metadata,translated:!0}}:Ji))}catch(ps){console.error("Translation error:",ps)}if(F&&L.current){const ps=(N!=="en"&&((Zt=fs.metadata)!=null&&Zt.translated),fs.content);G(ps,N)}}ke()}catch(pr){t({title:"Error",description:pr.message||"Failed to send message",variant:"destructive"}),l(nr=>nr.filter(Lt=>Lt.id!==Ae.id))}finally{h(!1),(dr=we.current)==null||dr.focus()}},Me=J=>{J.key==="Enter"&&!J.shiftKey&&(J.preventDefault(),I?ue():ye())},De=J=>{const Ae=new Date(J),Pe=Math.abs(new Date().getTime()-Ae.getTime()),Ie=Math.floor(Pe/(1e3*60*60*24));return Ie===0?"Today":Ie===1?"Yesterday":Ie<7?`${Ie} days ago`:Ae.toLocaleDateString()},He=J=>J.session_name,ve=J=>{const Ae=Math.floor(J/60),Fe=J%60;return`${Ae}:${Fe.toString().padStart(2,"0")}`},Be=J=>{const Ae=[/\d+\s*[\+\-\*/\^]\s*\d+/,/solve|calculate|compute|evaluate|find\s+the\s+value/i,/equation|integral|derivative|limit|summation/i,/=\s*\?|\?\s*=/,/\d+\s*x\s*\d+/,/sin|cos|tan|log|ln|exp|sqrt/i,/d\/dx||||lim/i,/matrix|determinant|eigenvalue/i,/differentiate|integrate/i,/plot|graph|visualize|draw/i,/x\^2|x\^3|y\s*=/i,/quadratic|polynomial|factorial/i,/percent|percentage|\%/i],Fe=J.toLowerCase();return Ae.some(Pe=>Pe.test(Fe))},pt=async J=>{try{if(/[=<>]/.test(J)||/\d+\s*[\+\-\*/\^]\s*\d+/.test(J)||/(integral|derivative|integrate|differentiate|solve|calculate|evaluate)\s+(of|for|the)?\s*[a-z]/i.test(J)||/[a-z]\(x\)|[a-z]\^[0-9]|sin|cos|tan|log|ln|exp|sqrt/i.test(J))return J;const Fe=`Extract the ACTUAL mathematical formula or expression from this question. DO NOT use hardcoded formulas - extract what's really there.

Question: "${J}"

CRITICAL INSTRUCTIONS:
1. Look for ACTUAL formulas/equations in the question itself
2. If the question mentions a specific formula, extract it exactly as stated
3. If asking about a concept, find the REAL formula representation from mathematical literature
4. Format for Wolfram Alpha: use * for multiplication, ^ for exponentiation
5. Return ONLY the formula/expression - no descriptions, no explanations
6. If you cannot find a real formula, return "NONE"

DO NOT return hardcoded examples. Extract or construct the real mathematical formula.
If asking "Definite Integral Definition", return the actual integral notation like "[a to b] f(x) dx"

Formula:`;try{const Pe=await pe.rag.queryDirect({query:Fe,subject:m});if(Pe.generated_text){let Ie=Pe.generated_text.trim();if(Ie=Ie.split(`
`)[0].trim(),Ie=Ie.replace(/^["']|["']$/g,""),Ie=Ie.replace(/^```[\w]*\n?|\n?```$/g,""),Ie.toUpperCase()==="NONE"||Ie.length===0)return J;if(Ie.length>0&&Ie.length<200&&/[=<>\d\+\-\*/\^\(\)xysin|cos|tan|log|ln|exp|sqrt]/i.test(Ie))return Ie}}catch(Pe){console.error("Formula extraction error:",Pe)}return J}catch(Ae){return console.error("Error extracting formula:",Ae),J}},gt=async(J,Ae)=>{try{let Fe=J;Fe===J&&(Fe=await pt(J));const Pe=await pe.doubt.wolframChat({query:Fe,include_steps:!0});return Pe.success&&Pe.result?Pe.result:null}catch(Fe){return console.error("Wolfram Alpha error:",Fe),null}},Ft=async(J,Ae)=>{if(!(me[J]||de[J])){Ee(Fe=>({...Fe,[J]:!0}));try{const Fe=`You are a specialized mathematical content extractor. Extract ALL important mathematical formulas, equations, problems, and scientific content from this text and format them EXACTLY as they should be used with Wolfram Alpha.

Text:
${Ae}

CRITICAL: Format ALL formulas and equations EXACTLY as Wolfram Alpha expects them. Use proper Wolfram Alpha syntax.

WOLFRAM ALPHA FORMATTING RULES:
- Use * for multiplication (e.g., 2*x not 2x)
- Use ^ for exponentiation (e.g., x^2)
- Use proper function names: sin, cos, tan, log, ln, exp, sqrt
- Use parentheses for clarity: (2*x + 3)
- For integrals: "integrate x^2, x"
- For derivatives: "d/dx(x^2)" or "derivative of x^2"
- For solving: "solve x^2 + 5*x + 6 = 0"
- For plots: "plot sin(x), x from -pi to pi"

Return ONLY a valid JSON array with this EXACT format (no markdown, just JSON):
[
  {
    "name": "Formula name or description",
    "formula": "Mathematical formula in standard notation (e.g., E = mc)",
    "wolfram_query": "Exact query formatted for Wolfram Alpha (e.g., E = m*c^2)",
    "type": "formula|equation|calculation|derivative|integral|plot",
    "description": "Brief description"
  }
]

IMPORTANT: The "wolfram_query" field MUST be formatted exactly as it should be entered into Wolfram Alpha - copy-paste ready. Return ONLY the JSON array, no other text.`,Ie=(await pe.rag.queryDirect({query:Fe,subject:m})).generated_text||"";let ht=[];try{const Ye=Ie.match(/```(?:json)?\s*(\[[\s\S]*?\])\s*```/)||Ie.match(/(\[[\s\S]*?\])/),lt=Ye?Ye[1]:Ie,xt=JSON.parse(lt);Array.isArray(xt)&&xt.length>0&&(ht=xt.map(Et=>({name:Et.name||"Formula",formula:Et.formula||Et.equation||"",wolfram_query:Et.wolfram_query||Et.problem||Et.formula||"",type:Et.type||"formula",description:Et.description||""})))}catch(Ye){console.error("Failed to parse formulas:",Ye),t({title:"Error",description:"Failed to extract formulas. Please try again.",variant:"destructive"})}ht.length>0?(oe(Ye=>({...Ye,[J]:ht})),t({title:"Formulas Extracted",description:`Found ${ht.length} formula(s) ready for Wolfram Alpha`})):t({title:"No Formulas Found",description:"No formulas were found in this response.",variant:"default"})}catch(Fe){console.error("Error fetching formulas:",Fe),t({title:"Error",description:Fe.message||"Failed to extract formulas",variant:"destructive"})}finally{Ee(Fe=>({...Fe,[J]:!1}))}}},ge=async J=>{const Ae=J.wolfram_query||J.formula;if(Ae){U(!0);try{const Fe=await gt(Ae);if(Fe){const Pe={id:`wolfram-${Date.now()}`,role:"assistant",content:`Wolfram Alpha solution for: **${J.name||J.formula}**`,subject:m,created_at:new Date().toISOString(),wolframResult:Fe};l(Ie=>[...Ie,Pe]),t({title:"Wolfram Alpha Result",description:"Solution computed successfully!"})}}catch(Fe){t({title:"Error",description:Fe.message||"Failed to compute with Wolfram Alpha",variant:"destructive"})}finally{U(!1)}}};return n.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[n.jsx("div",{className:qe("flex flex-col bg-card border-r transition-all duration-300 ease-in-out",x?"w-64":"w-0"),children:x&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"p-3 border-b",children:n.jsxs(z,{onClick:ct,className:"w-full justify-start gap-2",disabled:d,children:[n.jsx(_n,{className:"h-4 w-4"}),"New Chat"]})}),n.jsx(Pn,{className:"flex-1",children:n.jsx("div",{className:"p-2 space-y-1",children:r.length===0?n.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"No chats yet. Start a new conversation!"}):r.map(J=>n.jsx("div",{className:qe("group relative rounded-lg p-3 cursor-pointer transition-colors",(a==null?void 0:a.id)===J.id?"bg-primary/10 text-primary":"hover:bg-accent"),onClick:()=>i(J),children:y===J.id?n.jsx("div",{className:"flex items-center gap-2",children:n.jsx(Ve,{value:v,onChange:Ae=>w(Ae.target.value),onBlur:()=>b(null),onKeyDown:Ae=>{Ae.key==="Enter"&&b(null)},className:"h-8 text-sm",autoFocus:!0,onClick:Ae=>Ae.stopPropagation()})}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Fl,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium truncate",children:He(J)}),n.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:De(J.last_message_at||J.created_at)})]})]}),n.jsxs($w,{children:[n.jsx(qw,{asChild:!0,children:n.jsx(z,{variant:"ghost",size:"icon",className:"absolute right-1 top-1 h-6 w-6 opacity-0 group-hover:opacity-100",onClick:Ae=>Ae.stopPropagation(),children:n.jsx(Uy,{className:"h-3 w-3"})})}),n.jsxs(Bp,{align:"end",children:[n.jsxs(Ya,{onClick:Ae=>{Ae.stopPropagation(),b(J.id),w(J.session_name)},children:[n.jsx(Ll,{className:"h-4 w-4 mr-2"}),"Rename"]}),n.jsxs(Ya,{className:"text-destructive",onClick:Ae=>{Ae.stopPropagation(),t({title:"Delete Session",description:"Session deletion will be implemented"})},children:[n.jsx(Jl,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})},J.id))})}),n.jsx("div",{className:"p-3 border-t space-y-2",children:n.jsxs(Nt,{value:m,onValueChange:f,children:[n.jsx(wt,{className:"h-8 text-xs",children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]})})]})}),n.jsxs("div",{className:"flex-1 flex flex-col",children:[n.jsxs("div",{className:"border-b bg-card px-4 py-3 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(z,{variant:"ghost",size:"icon",onClick:()=>g(!x),children:x?n.jsx(_s,{className:"h-5 w-5"}):n.jsx(LO,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(vr,{className:"h-4 w-4 text-primary"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-sm font-semibold",children:"AI Tutor"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:a?a.session_name:"Select or create a chat"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Nt,{value:S,onValueChange:k,children:[n.jsxs(wt,{className:"h-8 w-32",children:[n.jsx(nh,{className:"h-4 w-4 mr-2"}),n.jsx(St,{})]}),n.jsx(jt,{children:QN.map(J=>n.jsx(re,{value:J.code,children:J.name},J.code))})]}),n.jsx(z,{variant:"ghost",size:"icon",onClick:()=>ne(!F),title:F?"Disable text-to-speech":"Enable text-to-speech",children:F?n.jsx(HO,{className:"h-4 w-4"}):n.jsx(WO,{className:"h-4 w-4"})}),n.jsx(z,{variant:q?"default":"ghost",size:"icon",onClick:()=>V(!q),title:q?"Disable Wolfram Alpha":"Enable Wolfram Alpha for math",children:n.jsx(Wn,{className:"h-4 w-4"})})]})]}),n.jsx("div",{className:"flex-1 overflow-hidden",children:a?n.jsx(Pn,{className:"h-full",children:n.jsxs("div",{className:"max-w-3xl mx-auto p-4 space-y-6",children:[o.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[n.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(Qn,{className:"h-6 w-6 text-primary"})}),n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"How can I help you today?"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Ask me anything about ",m," or any other subject!"]})]})]}):o.map(J=>{var Ae,Fe;return n.jsxs("div",{className:qe("flex gap-4",J.role==="student"?"justify-end":"justify-start"),children:[J.role==="assistant"&&n.jsxs(an,{className:"h-8 w-8 flex-shrink-0",children:[n.jsx(os,{src:""}),n.jsx(on,{className:"bg-primary text-primary-foreground",children:n.jsx(Qn,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:qe("flex flex-col gap-2 max-w-[85%]",J.role==="student"?"items-end":"items-start"),children:[J.imageUrl&&n.jsx("div",{className:"rounded-lg overflow-hidden border",children:n.jsx("img",{src:J.imageUrl,alt:"Uploaded",className:"max-w-full h-auto max-h-64 object-contain"})}),n.jsxs("div",{className:qe("rounded-2xl px-4 py-3",J.role==="student"?"bg-primary text-primary-foreground":"bg-muted"),children:[J.role==="assistant"&&((Ae=J.metadata)==null?void 0:Ae.fallback_to_direct)&&n.jsx("div",{className:"mb-2 p-2 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:n.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300 flex items-center gap-1.5",children:[n.jsx(vr,{className:"h-3 w-3"}),n.jsx("span",{className:"font-medium",children:"General Knowledge Response:"})," This answer is based on general knowledge as the specific topic wasn't found in the uploaded curriculum materials."]})}),n.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none prose-p:my-2 prose-ul:my-2 prose-ol:my-2",children:n.jsx(tr,{remarkPlugins:[rr],children:J.content})})]}),J.role==="assistant"&&!de[J.id]&&n.jsx("div",{className:"flex gap-2 mt-2",children:n.jsx(z,{variant:"outline",size:"sm",onClick:()=>Ft(J.id,J.content),disabled:me[J.id],className:"text-xs h-7",children:me[J.id]?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-3 w-3 mr-1 animate-spin"}),"Extracting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Wn,{className:"h-3 w-3 mr-1"}),"Fetch Formulas"]})})}),J.role==="assistant"&&de[J.id]&&de[J.id].length>0&&n.jsxs("div",{className:"mt-3 space-y-2 p-3 bg-gradient-to-br from-primary/5 to-primary/10 rounded-lg border-2 border-primary/20",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Wn,{className:"h-4 w-4 text-primary"}),n.jsxs("span",{className:"text-sm font-semibold text-foreground",children:["Extracted Formulas (",de[J.id].length,")"]})]}),n.jsx(z,{variant:"ghost",size:"sm",onClick:()=>{const Pe={...de};delete Pe[J.id],oe(Pe)},className:"h-6 w-6 p-0",children:n.jsx(_s,{className:"h-3 w-3"})})]}),n.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:de[J.id].map((Pe,Ie)=>n.jsx("div",{className:"p-2.5 bg-background rounded-lg border border-primary/20 hover:border-primary/50 hover:bg-primary/5 cursor-pointer transition-all group",onClick:()=>ge(Pe),children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[Pe.name&&n.jsx(je,{variant:"outline",className:"text-xs border-primary/30",children:Pe.name}),Pe.type&&n.jsx(je,{variant:"secondary",className:"text-xs",children:Pe.type})]}),Pe.formula&&n.jsxs("div",{className:"mb-1.5",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-0.5",children:"Formula:"}),n.jsx("p",{className:"text-sm font-mono font-bold text-primary",children:Pe.formula})]}),Pe.wolfram_query&&n.jsxs("div",{className:"mb-1.5",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-0.5",children:"Wolfram Query:"}),n.jsx("p",{className:"text-sm font-mono text-foreground bg-muted/50 px-2 py-1 rounded border border-primary/20 break-words",children:Pe.wolfram_query})]}),Pe.description&&n.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:Pe.description}),n.jsx("p",{className:"text-xs text-primary mt-1.5 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to solve with Wolfram Alpha "})]}),n.jsx(vr,{className:"h-4 w-4 text-primary opacity-0 group-hover:opacity-100 transition-opacity shrink-0 mt-1"})]})},Ie))})]}),J.wolframResult&&n.jsx("div",{className:"mt-2 space-y-3",children:n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Wn,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),n.jsx("span",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100",children:"Wolfram Alpha Solution"})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx(z,{variant:B[J.id]==="embedded"?"default":"outline",size:"sm",className:"h-7 text-xs",onClick:()=>{var Ie,ht;const Pe=B[J.id]||"extracted";if(W(Ye=>({...Ye,[J.id]:Pe==="embedded"?"extracted":"embedded"})),Pe==="extracted"&&!K[J.id]){const Ye=((Ie=J.wolframResult)==null?void 0:Ie.input_interpretation)||((ht=J.metadata)==null?void 0:ht.translated_text)||J.content.split(`
`)[0].substring(0,200),lt=encodeURIComponent(Ye);X(xt=>({...xt,[J.id]:`https://www.wolframalpha.com/input/?i=${lt}`}))}},children:B[J.id]==="embedded"?n.jsxs(n.Fragment,{children:[n.jsx(Kn,{className:"h-3 w-3 mr-1"}),"Full Page View"]}):n.jsxs(n.Fragment,{children:[n.jsx(g2,{className:"h-3 w-3 mr-1"}),"Full Page View"]})})})]}),B[J.id]==="embedded"&&K[J.id]&&n.jsx("div",{className:"mb-3 rounded-lg overflow-hidden border-2 border-blue-300 dark:border-blue-700 bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-950/30 dark:to-purple-950/30",children:n.jsxs("div",{className:"p-6 text-center space-y-4",children:[n.jsx("div",{className:"flex justify-center",children:n.jsx("div",{className:"h-16 w-16 rounded-full bg-blue-600 dark:bg-blue-700 flex items-center justify-center",children:n.jsx(Wn,{className:"h-8 w-8 text-white"})})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"View Full Wolfram Alpha Result"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Wolfram Alpha cannot be embedded directly due to security restrictions, but you can view the complete result page with all interactive features."})]}),n.jsxs("div",{className:"flex gap-3 justify-center",children:[n.jsxs(z,{variant:"default",size:"lg",className:"bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-600",onClick:()=>window.open(K[J.id],"_blank","noopener,noreferrer"),children:[n.jsx(g2,{className:"h-4 w-4 mr-2"}),"Open Full Result in New Tab"]}),n.jsx(z,{variant:"outline",size:"lg",onClick:()=>W(Pe=>({...Pe,[J.id]:"extracted"})),children:"View Extracted Data"})]}),n.jsx("div",{className:"pt-2",children:n.jsx("p",{className:"text-xs text-muted-foreground",children:"The full page includes interactive visualizations, step-by-step solutions, and all Wolfram Alpha features."})})]})}),B[J.id]!=="embedded"&&n.jsxs(n.Fragment,{children:[J.wolframResult.input_interpretation&&n.jsxs("div",{className:"mb-3 text-xs text-muted-foreground",children:[n.jsx("span",{className:"font-medium",children:"Interpreted as:"})," ",J.wolframResult.input_interpretation]}),J.wolframResult.answer&&n.jsxs("div",{className:"mb-3",children:[n.jsx("div",{className:"text-sm font-semibold mb-1",children:"Answer:"}),n.jsx("div",{className:"text-base font-mono bg-white dark:bg-gray-900 p-2 rounded border",children:J.wolframResult.answer})]}),J.wolframResult.steps&&J.wolframResult.steps.length>0&&n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"text-sm font-semibold mb-2 flex items-center gap-1",children:[n.jsx(Mn,{className:"h-3 w-3"}),"Step-by-Step Solution:"]}),n.jsx("div",{className:"space-y-2",children:J.wolframResult.steps.map((Pe,Ie)=>n.jsxs("div",{className:"bg-white dark:bg-gray-900 p-2 rounded border text-sm",children:[n.jsxs("div",{className:"font-medium text-xs mb-1",children:[Pe.title,":"]}),n.jsx("div",{className:"font-mono text-xs whitespace-pre-wrap",children:Pe.content})]},Ie))})]}),J.wolframResult.plots&&J.wolframResult.plots.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[n.jsx(vr,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),"Visualizations & Graphs (",J.wolframResult.plots.length,")"]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:J.wolframResult.plots.map((Pe,Ie)=>n.jsxs("div",{className:"group relative bg-white dark:bg-gray-900 rounded-lg border-2 border-blue-200 dark:border-blue-800 hover:border-blue-400 dark:hover:border-blue-600 overflow-hidden transition-all cursor-pointer",onClick:()=>O({url:Pe.url,title:Pe.title,description:Pe.description||Pe.title}),children:[n.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20 border-b border-blue-200 dark:border-blue-800",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-1.5 flex-1 min-w-0",children:[Pe.type&&n.jsx(je,{variant:"outline",className:"text-xs border-blue-300 dark:border-blue-700",children:Pe.type.replace("_"," ")}),n.jsx("span",{className:"text-xs font-semibold text-blue-900 dark:text-blue-100 truncate",title:Pe.title,children:Pe.title})]}),n.jsx(bl,{className:"h-3 w-3 text-blue-600 dark:text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),n.jsxs("div",{className:"p-3 bg-white dark:bg-gray-900",children:[n.jsx("img",{src:Pe.url,alt:Pe.title||`Visualization ${Ie+1}`,className:"w-full h-auto rounded-lg shadow-sm max-h-64 object-contain mx-auto transition-transform group-hover:scale-105",onError:ht=>{const Ye=ht.target;Ye.style.display="none";const lt=Ye.parentElement;lt&&(lt.innerHTML='<div class="p-8 text-center text-muted-foreground text-sm">Failed to load image</div>')},loading:"lazy"}),Pe.description&&Pe.description!==Pe.title&&n.jsx("p",{className:"text-xs text-muted-foreground mt-2 line-clamp-2",children:Pe.description})]}),n.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 dark:group-hover:bg-white/5 transition-colors rounded-lg pointer-events-none"})]},Ie))}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-2 flex items-center gap-1",children:[n.jsx(bl,{className:"h-3 w-3"}),"Click on any visualization to view in full size"]})]})]})]})}),((Fe=J.metadata)==null?void 0:Fe.answer_data)&&n.jsxs("div",{className:"mt-2 space-y-2 text-sm",children:[J.metadata.answer_data.examples&&n.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[n.jsx("p",{className:"font-semibold mb-2",children:"Examples:"}),n.jsx("ul",{className:"space-y-1 list-disc list-inside",children:J.metadata.answer_data.examples.slice(0,3).map((Pe,Ie)=>n.jsx("li",{className:"text-muted-foreground",children:typeof Pe=="string"?Pe:JSON.stringify(Pe)},Ie))})]}),J.metadata.answer_data.practice_suggestions&&n.jsxs("div",{className:"bg-muted/50 rounded-lg p-3",children:[n.jsx("p",{className:"font-semibold mb-2",children:"Practice Suggestions:"}),n.jsx("ul",{className:"space-y-1 list-disc list-inside",children:J.metadata.answer_data.practice_suggestions.slice(0,3).map((Pe,Ie)=>n.jsx("li",{className:"text-muted-foreground",children:typeof Pe=="string"?Pe:JSON.stringify(Pe)},Ie))})]})]}),J.role==="assistant"&&J.sources&&J.sources.length>0&&n.jsxs("div",{className:"mt-4 pt-3 border-t border-border/50",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"p-1.5 rounded-lg bg-primary/10",children:n.jsx(du,{className:"h-3.5 w-3.5 text-primary"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-foreground",children:"Sources"}),J.sourcesCount&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:[J.sourcesCount," section",J.sourcesCount!==1?"s":""]})]})]})}),n.jsx("div",{className:"grid gap-2",children:(()=>{const Pe=new Map;return J.sources.forEach(Ie=>{const ht=`${Ie.type||"content"}-${Ie.chapter||"unknown"}`;Pe.has(ht)?Pe.get(ht).count+=1:Pe.set(ht,{count:1,source:Ie})}),Array.from(Pe.values()).map((Ie,ht)=>{const{source:Ye,count:lt}=Ie,xt=Ye.type?Ye.type.toUpperCase():"CONTENT",Et=Ye.chapter||"General",Zt=Ye.type==="ncert"?"bg-blue-500/10 text-blue-700 dark:text-blue-400 border-blue-200 dark:border-blue-800":Ye.type==="pyq"?"bg-purple-500/10 text-purple-700 dark:text-purple-400 border-purple-200 dark:border-purple-800":Ye.type==="hots"?"bg-orange-500/10 text-orange-700 dark:text-orange-400 border-orange-200 dark:border-orange-800":"bg-muted border-border";return n.jsxs("div",{className:"group relative flex items-start gap-2.5 p-2.5 rounded-lg bg-gradient-to-r from-background to-muted/30 border border-border/50 hover:border-primary/30 hover:shadow-sm transition-all duration-200",children:[n.jsx("div",{className:`p-1.5 rounded-md ${Zt} flex-shrink-0`,children:n.jsx(Jt,{className:"h-3.5 w-3.5"})}),n.jsx("div",{className:"flex-1 min-w-0 flex items-center justify-between gap-2",children:n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-1.5 mb-1 flex-wrap",children:[n.jsx(je,{variant:"outline",className:`text-xs font-semibold h-5 ${Zt}`,children:xt}),lt>1&&n.jsxs(je,{variant:"secondary",className:"text-xs h-5 font-medium",children:[lt,"x"]})]}),n.jsx("p",{className:"text-xs font-medium text-foreground truncate",title:Et,children:Et})]})})]},ht)})})()})]}),J.role==="assistant"&&(!J.sources||J.sources.length===0)&&J.sourcesCount&&J.sourcesCount>0&&n.jsx("div",{className:"mt-4 pt-3 border-t border-border/50",children:n.jsxs("div",{className:"flex items-center gap-2.5 p-2.5 rounded-lg bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20",children:[n.jsx("div",{className:"p-1.5 rounded-lg bg-primary/10",children:n.jsx(du,{className:"h-3.5 w-3.5 text-primary"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-semibold text-foreground",children:"Content References"}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:["Based on ",J.sourcesCount," relevant content section",J.sourcesCount!==1?"s":""," from the curriculum"]})]})]})})]}),J.role==="student"&&n.jsxs(an,{className:"h-8 w-8 flex-shrink-0",children:[n.jsx(os,{src:""}),n.jsx(on,{className:"bg-secondary",children:n.jsx(ii,{className:"h-4 w-4"})})]})]},J.id)}),d&&n.jsxs("div",{className:"flex gap-4 justify-start",children:[n.jsx(an,{className:"h-8 w-8 flex-shrink-0",children:n.jsx(on,{className:"bg-primary text-primary-foreground",children:n.jsx(Qn,{className:"h-4 w-4"})})}),n.jsx("div",{className:"bg-muted rounded-2xl px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Oe,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{className:"text-sm",children:"Thinking..."}),_&&n.jsxs(je,{variant:"outline",className:"ml-2 text-xs",children:[n.jsx(Wn,{className:"h-3 w-3 mr-1"}),"Computing with Wolfram"]})]})})]}),n.jsx("div",{ref:Le})]})}):n.jsx("div",{className:"h-full flex items-center justify-center p-8",children:n.jsxs("div",{className:"text-center space-y-4 max-w-md",children:[n.jsx("div",{className:"h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center mx-auto",children:n.jsx(Qn,{className:"h-8 w-8 text-primary"})}),n.jsx("h2",{className:"text-2xl font-semibold",children:"Start a new conversation"}),n.jsx("p",{className:"text-muted-foreground",children:"Create a new chat to begin learning with your AI tutor. Ask questions, get help with homework, or request explanations on any topic."}),n.jsxs(z,{onClick:ct,disabled:d,size:"lg",children:[n.jsx(_n,{className:"h-4 w-4 mr-2"}),"New Chat"]})]})})}),a&&n.jsx("div",{className:"border-t bg-card p-4",children:n.jsxs("div",{className:"max-w-3xl mx-auto",children:[I&&n.jsxs("div",{className:"mb-2 relative inline-block",children:[n.jsx("img",{src:I,alt:"Preview",className:"max-w-xs h-auto rounded-lg border"}),n.jsx(z,{variant:"ghost",size:"icon",className:"absolute top-1 right-1 h-6 w-6",onClick:()=>{se(null),Y(null),Ct.current&&(Ct.current.value="")},children:n.jsx(_s,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"relative flex gap-2",children:n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Ve,{ref:we,value:c,onChange:J=>u(J.target.value),onKeyDown:Me,placeholder:I?"Add a message about this image...":"Message AI Tutor...",disabled:d||T,className:"min-h-[52px] rounded-2xl pr-32"}),n.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:[n.jsx("input",{ref:Ct,type:"file",accept:"image/*",className:"hidden",onChange:J=>{var Fe;const Ae=(Fe=J.target.files)==null?void 0:Fe[0];Ae&&zt(Ae)}}),n.jsx(z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{var J;return(J=Ct.current)==null?void 0:J.click()},disabled:d||T,title:"Upload image",children:n.jsx(bl,{className:"h-4 w-4"})}),T?n.jsx(z,{variant:"destructive",size:"icon",className:"h-8 w-8",onClick:Ne,title:"Stop recording",children:n.jsx(ak,{className:"h-4 w-4"})}):n.jsx(z,{variant:"ghost",size:"icon",className:qe("h-8 w-8",T&&"bg-destructive text-destructive-foreground animate-pulse"),onClick:$,disabled:d,title:"Record voice message",children:n.jsx(rk,{className:"h-4 w-4"})}),n.jsx(z,{onClick:I?ue:ye,disabled:!c.trim()&&!I||d||T,size:"icon",className:"h-9 w-9 rounded-full",children:d?n.jsx(Oe,{className:"h-4 w-4 animate-spin"}):n.jsx($i,{className:"h-4 w-4"})})]})]})}),T&&n.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm text-destructive",children:[n.jsx("div",{className:"h-2 w-2 rounded-full bg-destructive animate-pulse"}),"Recording: ",ve(E)]}),n.jsxs("div",{className:"flex items-center justify-between mt-2",children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"AI can make mistakes. Check important info."}),n.jsxs(Nt,{value:N,onValueChange:P,children:[n.jsx(wt,{className:"h-7 w-28 text-xs",children:n.jsx(St,{})}),n.jsx(jt,{children:QN.map(J=>n.jsx(re,{value:J.code,children:J.name},J.code))})]})]})]})})]}),n.jsx(un,{open:!!H,onOpenChange:J=>!J&&O(null),children:n.jsxs(tn,{className:"max-w-5xl max-h-[90vh] overflow-auto",children:[n.jsx(rn,{children:n.jsxs(nn,{className:"flex items-center gap-2",children:[n.jsx(Wn,{className:"h-5 w-5 text-primary"}),(H==null?void 0:H.title)||"Wolfram Alpha Visualization"]})}),H&&n.jsxs("div",{className:"space-y-4",children:[H.description&&H.description!==H.title&&n.jsx("p",{className:"text-sm text-muted-foreground",children:H.description}),n.jsx("div",{className:"relative bg-white dark:bg-gray-900 rounded-lg border-2 border-primary/20 p-4 overflow-auto",children:n.jsx("img",{src:H.url,alt:H.title||"Visualization",className:"w-full h-auto max-w-full rounded-lg shadow-lg mx-auto",onError:J=>{const Ae=J.target;Ae.style.display="none";const Fe=Ae.parentElement;Fe&&(Fe.innerHTML='<div class="p-12 text-center text-muted-foreground">Failed to load visualization</div>')}})}),n.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[n.jsxs(z,{variant:"outline",size:"sm",onClick:()=>{H!=null&&H.url&&window.open(H.url,"_blank")},children:[n.jsx(bl,{className:"h-4 w-4 mr-2"}),"Open in New Tab"]}),n.jsx(z,{variant:"outline",size:"sm",onClick:()=>{H!=null&&H.url&&(navigator.clipboard.writeText(H.url),t({title:"Copied!",description:"Image URL copied to clipboard"}))},children:"Copy URL"})]})]})]})})]})}function Yne(){var O,B;const{user:e}=Wt(),{toast:t}=Ut(),[r,s]=p.useState(!1),[a,i]=p.useState(null),[o,l]=p.useState(null),[c,u]=p.useState(null),[d,h]=p.useState("mathematics"),[m,f]=p.useState(""),[x,g]=p.useState(45),[y,b]=p.useState(12),[v,w]=p.useState("mathematics"),[S,k]=p.useState(""),[N,P]=p.useState(5),[T,A]=p.useState(""),[E,M]=p.useState("progress_update"),[I,se]=p.useState(""),[ee,Y]=p.useState(""),[F,ne]=p.useState([]),[q,V]=p.useState(!1),_=async()=>{if(!m.trim()){t({title:"Error",description:"Please enter a topic",variant:"destructive"});return}s(!0);try{const W=await pe.teacher.generateLessonPlan({teacher_id:(e==null?void 0:e.id)||"",subject:d,topic:m,duration_minutes:x,class_grade:y});i(W),t({title:"Lesson plan generated!",description:"Your lesson plan is ready"})}catch(W){t({title:"Error",description:W.message||"Failed to generate lesson plan",variant:"destructive"})}finally{s(!1)}},U=async()=>{if(!S.trim()){t({title:"Error",description:"Please enter a topic",variant:"destructive"});return}s(!0);try{const W=await pe.teacher.createAssessment({teacher_id:(e==null?void 0:e.id)||"",subject:v,topic:S,question_count:N});l(W),t({title:"Assessment created!",description:"Your formative assessment is ready"})}catch(W){t({title:"Error",description:W.message||"Failed to create assessment",variant:"destructive"})}finally{s(!1)}};p.useEffect(()=>{(async()=>{if(e!=null&&e.id){V(!0);try{const K=await pe.teacher.getStudents(e.id);ne(K||[])}catch(K){t({title:"Error",description:K.message||"Failed to fetch students",variant:"destructive"})}finally{V(!1)}}})()},[e==null?void 0:e.id]);const H=async()=>{if(!T.trim()){t({title:"Error",description:"Please select a student",variant:"destructive"});return}s(!0);try{const W=await pe.teacher.generateParentMessage({teacher_id:(e==null?void 0:e.id)||"",student_id:T,message_type:E,subject:I&&I!=="none"?I:void 0,custom_content:ee||void 0});u(W),t({title:"Message generated!",description:"Your parent message is ready"})}catch(W){t({title:"Error",description:W.message||"Failed to generate message",variant:"destructive"})}finally{s(!1)}};return n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(Xn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Teacher Time-Savers"}),n.jsx("p",{className:"text-muted-foreground mt-2",children:"AI-powered tools to save time on lesson planning, assessments, and parent communication"})]}),n.jsxs(Zs,{defaultValue:"lesson-plan",className:"space-y-4",children:[n.jsxs(Ps,{children:[n.jsxs(gr,{value:"lesson-plan",children:[n.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Lesson Plan"]}),n.jsxs(gr,{value:"assessment",children:[n.jsx(or,{className:"h-4 w-4 mr-2"}),"Assessment"]}),n.jsxs(gr,{value:"parent-message",children:[n.jsx(Wy,{className:"h-4 w-4 mr-2"}),"Parent Message"]})]}),n.jsxs(Er,{value:"lesson-plan",className:"space-y-4",children:[n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Generate Lesson Plan"}),n.jsx(ze,{children:"Create a comprehensive lesson plan for any topic"})]}),n.jsxs(ie,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(be,{htmlFor:"lp-subject",children:"Subject"}),n.jsxs(Nt,{value:d,onValueChange:h,children:[n.jsx(wt,{children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]})]}),n.jsxs("div",{children:[n.jsx(be,{htmlFor:"lp-grade",children:"Class Grade"}),n.jsx(Ve,{id:"lp-grade",type:"number",min:"6",max:"12",value:y,onChange:W=>b(parseInt(W.target.value)||12)})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx(be,{htmlFor:"lp-topic",children:"Topic"}),n.jsx(Ve,{id:"lp-topic",placeholder:"e.g., Quadratic Equations, Newton's Laws",value:m,onChange:W=>f(W.target.value)})]}),n.jsxs("div",{children:[n.jsx(be,{htmlFor:"lp-duration",children:"Duration (minutes)"}),n.jsx(Ve,{id:"lp-duration",type:"number",min:"15",max:"120",value:x,onChange:W=>g(parseInt(W.target.value)||45)})]})]}),n.jsx(z,{onClick:_,disabled:r,children:r?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):"Generate Lesson Plan"})]})]}),a&&n.jsxs(ae,{children:[n.jsx(he,{children:n.jsx(fe,{children:"Your Lesson Plan"})}),n.jsx(ie,{children:n.jsx("pre",{className:"whitespace-pre-wrap text-sm bg-muted p-4 rounded-lg overflow-auto max-h-96",children:JSON.stringify(a.lesson_plan,null,2)})})]})]}),n.jsxs(Er,{value:"assessment",className:"space-y-4",children:[n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Create Formative Assessment"}),n.jsx(ze,{children:"Generate assessment questions with rubrics"})]}),n.jsxs(ie,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(be,{htmlFor:"assess-subject",children:"Subject"}),n.jsxs(Nt,{value:v,onValueChange:w,children:[n.jsx(wt,{children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]})]}),n.jsxs("div",{children:[n.jsx(be,{htmlFor:"assess-count",children:"Question Count"}),n.jsx(Ve,{id:"assess-count",type:"number",min:"1",max:"20",value:N,onChange:W=>P(parseInt(W.target.value)||5)})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx(be,{htmlFor:"assess-topic",children:"Topic"}),n.jsx(Ve,{id:"assess-topic",placeholder:"e.g., Integration, Organic Chemistry",value:S,onChange:W=>k(W.target.value)})]})]}),n.jsx(z,{onClick:U,disabled:r,children:r?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):"Create Assessment"})]})]}),o&&n.jsxs(ae,{children:[n.jsx(he,{children:n.jsx(fe,{children:"Your Assessment"})}),n.jsx(ie,{children:n.jsx("pre",{className:"whitespace-pre-wrap text-sm bg-muted p-4 rounded-lg overflow-auto max-h-96",children:JSON.stringify(o.assessment,null,2)})})]})]}),n.jsxs(Er,{value:"parent-message",className:"space-y-4",children:[n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Generate Parent Message"}),n.jsx(ze,{children:"Create professional parent communication messages"})]}),n.jsxs(ie,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(be,{htmlFor:"pm-student-id",children:"Student"}),n.jsxs(Nt,{value:T||void 0,onValueChange:W=>A(W||""),disabled:q,children:[n.jsx(wt,{children:n.jsx(St,{placeholder:q?"Loading students...":"Select a student"})}),n.jsx(jt,{children:q?n.jsx("div",{className:"px-2 py-1.5 text-sm text-muted-foreground",children:"Loading..."}):F.length===0?n.jsx("div",{className:"px-2 py-1.5 text-sm text-muted-foreground",children:"No students found"}):F.map(W=>{var K;return n.jsxs(re,{value:W.user_id,children:[((K=W.profile)==null?void 0:K.full_name)||`Student ${W.user_id.slice(0,8)}`,W.class_grade&&` (Grade ${W.class_grade})`]},W.user_id)})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(be,{htmlFor:"pm-type",children:"Message Type"}),n.jsxs(Nt,{value:E,onValueChange:M,children:[n.jsx(wt,{children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"progress_update",children:"Progress Update"}),n.jsx(re,{value:"concern",children:"Concern"}),n.jsx(re,{value:"achievement",children:"Achievement"}),n.jsx(re,{value:"general",children:"General"})]})]})]}),n.jsxs("div",{children:[n.jsx(be,{htmlFor:"pm-subject",children:"Subject (optional)"}),n.jsxs(Nt,{value:I||void 0,onValueChange:se,children:[n.jsx(wt,{children:n.jsx(St,{placeholder:"Select subject"})}),n.jsxs(jt,{children:[n.jsx(re,{value:"none",children:"None"}),n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]})]})]}),n.jsxs("div",{children:[n.jsx(be,{htmlFor:"pm-content",children:"Custom Content (optional)"}),n.jsx(kr,{id:"pm-content",placeholder:"Any specific points to include...",value:ee,onChange:W=>Y(W.target.value),rows:4})]}),n.jsx(z,{onClick:H,disabled:r,children:r?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):"Generate Message"})]})]}),c&&n.jsxs(ae,{children:[n.jsx(he,{children:n.jsx(fe,{children:"Your Message"})}),n.jsxs(ie,{className:"space-y-4",children:[((O=c.message)==null?void 0:O.subject)&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Subject"}),n.jsx("p",{className:"text-sm",children:c.message.subject})]}),((B=c.message)==null?void 0:B.body)&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Message"}),n.jsxs("div",{className:"text-sm whitespace-pre-wrap bg-muted p-4 rounded-lg",children:[c.message.greeting&&n.jsx("p",{className:"mb-2",children:c.message.greeting}),n.jsx("p",{children:c.message.body}),c.message.closing&&n.jsx("p",{className:"mt-4",children:c.message.closing})]})]})]})]})]})]})]})})]})}const Kne=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState([]),[o,l]=p.useState([]),[c,u]=p.useState(""),[d,h]=p.useState(!1);p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{e&&m()},[e]),p.useEffect(()=>{f()},[c,a]);const m=async()=>{try{h(!0);const g=await pe.teacher.getStudents((e==null?void 0:e.id)||"");i(g||[]),l(g||[])}catch(g){console.error("Error fetching students:",g),s({variant:"destructive",title:"Error",description:g.message||"Failed to fetch students"})}finally{h(!1)}},f=()=>{if(!c.trim()){l(a);return}const g=a.filter(y=>{var b,v;return((v=(b=y.profile)==null?void 0:b.full_name)==null?void 0:v.toLowerCase().includes(c.toLowerCase()))||y.user_id.toLowerCase().includes(c.toLowerCase())});l(g)},x=g=>g.split(" ").map(y=>y[0]).join("").toUpperCase();return t?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(Xn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[n.jsx(vn,{className:"h-8 w-8"}),"My Students"]}),n.jsx("p",{className:"text-muted-foreground",children:"Manage and view all your students"})]}),n.jsx(ae,{className:"mb-6",children:n.jsx(ie,{className:"pt-6",children:n.jsxs("div",{className:"relative",children:[n.jsx(zi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(Ve,{placeholder:"Search students by name...",value:c,onChange:g=>u(g.target.value),className:"pl-9"})]})})}),n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsxs(fe,{children:["All Students (",o.length,")"]}),n.jsx(ze,{children:"View and manage your students"})]}),n.jsx(ie,{children:d?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(Oe,{className:"h-6 w-6 animate-spin"})}):n.jsxs(Cs,{children:[n.jsx(Es,{children:n.jsxs(Nr,{children:[n.jsx(mt,{children:"Student"}),n.jsx(mt,{children:"Grade"}),n.jsx(mt,{children:"School"}),n.jsx(mt,{className:"text-right",children:"Actions"})]})}),n.jsx(Ts,{children:o.length===0?n.jsx(Nr,{children:n.jsx(it,{colSpan:4,className:"text-center py-8 text-muted-foreground",children:c?"No students found matching your search":"No students assigned yet"})}):o.map(g=>{var y,b,v;return n.jsxs(Nr,{children:[n.jsx(it,{children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(an,{className:"h-10 w-10",children:[n.jsx(os,{src:(y=g.profile)==null?void 0:y.avatar_url}),n.jsx(on,{children:x(((b=g.profile)==null?void 0:b.full_name)||"S")})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:((v=g.profile)==null?void 0:v.full_name)||"Unknown"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[g.user_id.slice(0,8),"..."]})]})]})}),n.jsx(it,{children:n.jsxs(je,{variant:"outline",children:["Grade ",g.class_grade]})}),n.jsx(it,{children:g.school_name||"-"}),n.jsx(it,{className:"text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsxs(z,{variant:"ghost",size:"sm",onClick:()=>r(`/dashboard/teacher/students/${g.user_id}/performance`),children:[n.jsx(Fi,{className:"h-4 w-4 mr-1"}),"Performance"]}),n.jsxs(z,{variant:"ghost",size:"sm",onClick:()=>r(`/dashboard/teacher/students/${g.user_id}`),children:[n.jsx(Kn,{className:"h-4 w-4 mr-1"}),"View"]})]})})]},g.user_id)})})]})})]})]})})]})},Jne=()=>{var h,m,f,x,g;const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState("all"),[o,l]=p.useState(null),[c,u]=p.useState(!1);p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{e&&d()},[e,a]);const d=async()=>{try{u(!0);const y=await pe.teacher.getStudents((e==null?void 0:e.id)||"");if(!y||y.length===0){l({total_students:0,average_mastery:0,top_performers:[],struggling_students:[],subject_breakdown:{}});return}const b=y.map(I=>I.user_id);let v=0,w=0;const S={mathematics:{total:0,count:0},physics:{total:0,count:0},chemistry:{total:0,count:0},biology:{total:0,count:0}},k=b.map(async I=>{try{const se=await pe.progress.getUserProgress({user_id:I});return{studentId:I,progress:se||[]}}catch{return{studentId:I,progress:[]}}}),N=await Promise.all(k),P=[];N.forEach(({studentId:I,progress:se})=>{var ee;if(se.length>0){w++;let Y=0,F=0;se.forEach(V=>{const _=V.mastery_score||0;Y+=_,F++;const U=V.subject;S[U]&&(S[U].total+=_,S[U].count++)});const ne=F>0?Y/F:0;v+=ne;const q=y.find(V=>V.user_id===I);P.push({student_id:I,student_name:((ee=q==null?void 0:q.profile)==null?void 0:ee.full_name)||"Unknown",average_mastery:ne,progress_count:se.length})}});const T=w>0?v/w:0,A=[...P].sort((I,se)=>se.average_mastery-I.average_mastery),E=A.slice(0,5),M=A.filter(I=>I.average_mastery<50).slice(0,5);Object.keys(S).forEach(I=>{const se=S[I];S[I]=se.count>0?se.total/se.count:0}),l({total_students:y.length,students_with_progress:w,average_mastery:T,top_performers:E,struggling_students:M,subject_breakdown:S})}catch(y){console.error("Error fetching performance data:",y),s({variant:"destructive",title:"Error",description:"Failed to load performance data"})}finally{u(!1)}};return t||c?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(Xn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[n.jsx(Fi,{className:"h-8 w-8"}),"Student Performance"]}),n.jsx("p",{className:"text-muted-foreground",children:"Track and analyze student performance across all subjects"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsxs(ae,{children:[n.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(fe,{className:"text-sm font-medium",children:"Total Students"}),n.jsx(vn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ie,{children:[n.jsx("div",{className:"text-2xl font-bold",children:(o==null?void 0:o.total_students)||0}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[(o==null?void 0:o.students_with_progress)||0," with progress data"]})]})]}),n.jsxs(ae,{children:[n.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(fe,{className:"text-sm font-medium",children:"Average Mastery"}),n.jsx(Mn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ie,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[o?Math.round(o.average_mastery):0,"%"]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all subjects"})]})]}),n.jsxs(ae,{children:[n.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(fe,{className:"text-sm font-medium",children:"Struggling Students"}),n.jsx(An,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ie,{children:[n.jsx("div",{className:"text-2xl font-bold",children:((h=o==null?void 0:o.struggling_students)==null?void 0:h.length)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Below 50% mastery"})]})]})]}),n.jsxs(ae,{className:"mb-8",children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Performance by Subject"}),n.jsx(ze,{children:"Average mastery scores across subjects"})]}),n.jsx(ie,{children:n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:["mathematics","physics","chemistry","biology"].map(y=>{var b;return n.jsxs("div",{className:"p-4 border rounded-lg",children:[n.jsx("p",{className:"text-sm font-medium mb-2 capitalize",children:y}),n.jsxs("div",{className:"text-2xl font-bold",children:[(b=o==null?void 0:o.subject_breakdown)!=null&&b[y]?Math.round(o.subject_breakdown[y]):0,"%"]})]},y)})})})]}),n.jsxs(ae,{className:"mb-8",children:[n.jsxs(he,{children:[n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(Ii,{className:"h-5 w-5 text-yellow-500"}),"Top Performers"]}),n.jsx(ze,{children:"Students with highest mastery scores"})]}),n.jsx(ie,{children:((m=o==null?void 0:o.top_performers)==null?void 0:m.length)===0?n.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"No performance data available"}):n.jsx("div",{className:"space-y-3",children:(f=o==null?void 0:o.top_performers)==null?void 0:f.map((y,b)=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary font-bold",children:b+1}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:y.student_name}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[y.progress_count," topics completed"]})]})]}),n.jsxs(je,{variant:"default",className:"text-lg px-3 py-1",children:[Math.round(y.average_mastery),"%"]})]},y.student_id))})})]}),n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(An,{className:"h-5 w-5 text-orange-500"}),"Students Needing Attention"]}),n.jsx(ze,{children:"Students with mastery below 50%"})]}),n.jsx(ie,{children:((x=o==null?void 0:o.struggling_students)==null?void 0:x.length)===0?n.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"Great! No students are struggling currently."}):n.jsx("div",{className:"space-y-3",children:(g=o==null?void 0:o.struggling_students)==null?void 0:g.map(y=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg border-orange-200 bg-orange-50 dark:bg-orange-950/20",children:[n.jsx("div",{className:"flex items-center gap-3",children:n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:y.student_name}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[y.progress_count," topics completed"]})]})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(je,{variant:"destructive",className:"text-lg px-3 py-1",children:[Math.round(y.average_mastery),"%"]}),n.jsx(Button,{size:"sm",variant:"outline",onClick:()=>r(`/dashboard/teacher/students/${y.student_id}/performance`),children:"View Details"})]})]},y.student_id))})})]})]})})]})},Xne=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState([]),[o,l]=p.useState([]),[c,u]=p.useState(""),[d,h]=p.useState("all"),[m,f]=p.useState("all"),[x,g]=p.useState(!1);p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{e&&y()},[e,d,m]),p.useEffect(()=>{b()},[c,a]);const y=async()=>{try{g(!0);const S={limit:100,offset:0};d!=="all"&&(S.subject=d),m!=="all"&&(S.content_type=m);const k=await pe.admin.listAllContent(S);i(k||[]),l(k||[])}catch(S){console.error("Error fetching content:",S),s({variant:"destructive",title:"Error",description:"Failed to fetch content"})}finally{g(!1)}},b=()=>{if(!c.trim()){l(a);return}const S=a.filter(k=>{var N,P,T;return((N=k.title)==null?void 0:N.toLowerCase().includes(c.toLowerCase()))||((P=k.content_text)==null?void 0:P.toLowerCase().includes(c.toLowerCase()))||((T=k.chapter)==null?void 0:T.toLowerCase().includes(c.toLowerCase()))});l(S)},v=S=>{switch(S){case"ncert":return n.jsx(Jt,{className:"h-4 w-4"});case"pyq":return n.jsx(ua,{className:"h-4 w-4"});case"hots":return n.jsx(vr,{className:"h-4 w-4"});default:return n.jsx(or,{className:"h-4 w-4"})}},w=S=>{switch(S){case"ncert":return"bg-blue-500/10 text-blue-500";case"pyq":return"bg-purple-500/10 text-purple-500";case"hots":return"bg-orange-500/10 text-orange-500";default:return"bg-gray-500/10 text-gray-500"}};return t?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(Xn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[n.jsx(Jt,{className:"h-8 w-8"}),"View Content"]}),n.jsx("p",{className:"text-muted-foreground",children:"Browse and view all learning content available to students"})]}),n.jsx(ae,{className:"mb-6",children:n.jsx(ie,{className:"pt-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"md:col-span-2 relative",children:[n.jsx(zi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(Ve,{placeholder:"Search content...",value:c,onChange:S=>u(S.target.value),className:"pl-9"})]}),n.jsxs(Nt,{value:d,onValueChange:h,children:[n.jsxs(wt,{children:[n.jsx(Ih,{className:"h-4 w-4 mr-2"}),n.jsx(St,{placeholder:"Subject"})]}),n.jsxs(jt,{children:[n.jsx(re,{value:"all",children:"All Subjects"}),n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]}),n.jsxs(Nt,{value:m,onValueChange:f,children:[n.jsx(wt,{children:n.jsx(St,{placeholder:"Content Type"})}),n.jsxs(jt,{children:[n.jsx(re,{value:"all",children:"All Types"}),n.jsx(re,{value:"ncert",children:"NCERT"}),n.jsx(re,{value:"pyq",children:"PYQ"}),n.jsx(re,{value:"hots",children:"HOTS"}),n.jsx(re,{value:"video",children:"Video"})]})]})]})})}),n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsxs(fe,{children:["Content Library (",o.length,")"]}),n.jsx(ze,{children:"All available learning content"})]}),n.jsx(ie,{children:x?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(Oe,{className:"h-6 w-6 animate-spin"})}):n.jsx("div",{className:"space-y-4",children:o.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No content found"}):o.map(S=>{var k;return n.jsx(ae,{className:"hover:shadow-md transition-shadow",children:n.jsx(ie,{className:"pt-6",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("div",{className:w(S.type),children:v(S.type)}),n.jsx(je,{className:w(S.type),children:S.type.toUpperCase()}),n.jsx(je,{variant:"outline",className:"capitalize",children:S.subject}),S.difficulty&&n.jsx(je,{variant:"secondary",className:"capitalize",children:S.difficulty})]}),n.jsx("h3",{className:"font-semibold text-lg mb-1",children:S.title||`Content ${S.id.slice(0,8)}`}),S.chapter&&n.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Chapter: ",S.chapter]}),n.jsxs("p",{className:"text-sm text-muted-foreground line-clamp-2",children:[(k=S.content_text)==null?void 0:k.substring(0,200),"..."]})]}),n.jsxs(z,{variant:"outline",size:"sm",onClick:()=>r(`/dashboard/student/content/${S.id}`),className:"ml-4",children:[n.jsx(Kn,{className:"h-4 w-4 mr-1"}),"View"]})]})})},S.id)})})})]})]})})]})},Zne=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState("mathematics"),[o,l]=p.useState(new Date().getFullYear()),[c,u]=p.useState(180),[d,h]=p.useState([]),[m,f]=p.useState(!1),[x,g]=p.useState(!1),[y,b]=p.useState(!1),[v,w]=p.useState([]),[S,k]=p.useState(""),[N,P]=p.useState(null);p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]);const T=()=>{const _={id:`q${Date.now()}`,question:"",marks:5,question_type:"short_answer",options:[],correct_answer:""};h([...d,_])},A=_=>{h(d.filter(U=>U.id!==_))},E=(_,U,H)=>{h(d.map(O=>O.id===_?{...O,[U]:H}:O))},M=_=>{h(d.map(U=>U.id===_?{...U,options:[...U.options||[],""]}:U))},I=(_,U,H)=>{h(d.map(O=>{if(O.id===_&&O.options){const B=[...O.options];return B[U]=H,{...O,options:B}}return O}))},se=(_,U)=>{h(d.map(H=>H.id===_&&H.options?{...H,options:H.options.filter((O,B)=>B!==U)}:H))},ee=async()=>{if(!(!S.trim()||y)){b(!0);try{const _=`Generate exam questions for:
Subject: ${a}
Year: ${o}
Topic/Context: ${S}

Generate ${S.includes("number")?"":"5"} diverse questions including:
- Multiple choice questions (MCQ)
- Short answer questions
- Long answer questions
- Numerical problems

Format as JSON with question, question_type, marks, options (for MCQ), and correct_answer fields.`,H=(await pe.rag.query({query:_,subject:a,top_k:5})).generated_text||"",O=Y(H);w(O),s({title:"Questions Generated",description:`Generated ${O.length} AI-powered questions`})}catch{s({variant:"destructive",title:"Error",description:"Failed to generate questions"})}finally{b(!1)}}},Y=_=>{const U=[];try{const B=_.match(/\[[\s\S]*\]/);if(B){const W=JSON.parse(B[0]);if(Array.isArray(W))return W.forEach((K,X)=>{U.push({id:`ai-q${Date.now()}-${X}`,question:K.question||K.text||"",marks:K.marks||5,question_type:K.question_type||"short_answer",options:K.options||[],correct_answer:K.correct_answer||K.answer||""})}),U}}catch{}const H=/(?:Q\d+|Question\s+\d+)[:\-]?\s*(.+?)(?=(?:Q\d+|Question\s+\d+)|$)/gis;return[..._.matchAll(H)].forEach((B,W)=>{var X;const K=(X=B[1])==null?void 0:X.trim();if(K&&K.length>10){const de=/[A-D][\.\)]\s/.test(K);U.push({id:`ai-q${Date.now()}-${W}`,question:K,marks:5,question_type:de?"mcq":"short_answer",options:de?[]:[],correct_answer:""})}}),U.slice(0,10)},F=_=>{h([...d,_]),w(v.filter(U=>U.id!==_.id)),s({title:"Question Added",description:"Question has been added to your exam"})},ne=()=>{h([...d,...v]),w([]),g(!1),s({title:"Questions Added",description:`Added ${v.length} questions to your exam`})},q=async _=>{var H;const U=d.find(O=>O.id===_);if(!(!U||N===_)){P(_);try{const O=`Improve and enhance this exam question:

Original Question: ${U.question}
Question Type: ${U.question_type}
Subject: ${a}
Marks: ${U.marks}

Provide an improved version that is:
- Clearer and more precise
- Better aligned with learning objectives
- More engaging for students
- Properly formatted

Return only the improved question text.`,W=((H=(await pe.rag.query({query:O,subject:a,top_k:3})).generated_text)==null?void 0:H.trim())||U.question;E(_,"question",W),s({title:"Question Improved",description:"AI has enhanced your question"})}catch{s({variant:"destructive",title:"Error",description:"Failed to improve question"})}finally{P(null)}}},V=async()=>{if(d.length===0){s({variant:"destructive",title:"Error",description:"Please add at least one question"});return}for(const _ of d){if(!_.question.trim()){s({variant:"destructive",title:"Error",description:"All questions must have question text"});return}if(_.question_type==="mcq"&&(!_.options||_.options.length<2)){s({variant:"destructive",title:"Error",description:"MCQ questions must have at least 2 options"});return}}try{f(!0);const _=d.reduce((H,O)=>H+O.marks,0),U={subject:a,year:o,duration_minutes:c,total_marks:_,questions:d.map(H=>({question:H.question,marks:H.marks,question_type:H.question_type,options:H.options,correct_answer:H.correct_answer,metadata:{}})),metadata:{}};await pe.exam.createSet(U),s({title:"Success",description:"Exam created successfully"}),r("/dashboard/teacher")}catch(_){s({variant:"destructive",title:"Error",description:_.message||"Failed to create exam"})}finally{f(!1)}};return t?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(Xn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-5xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[n.jsx(or,{className:"h-8 w-8"}),"Create Exam"]}),n.jsx("p",{className:"text-muted-foreground",children:"Create a new exam for your students"})]}),n.jsxs(ae,{className:"mb-6",children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Exam Details"}),n.jsx(ze,{children:"Set basic exam information"})]}),n.jsx(ie,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Subject *"}),n.jsxs(Nt,{value:a,onValueChange:i,children:[n.jsx(wt,{children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Year *"}),n.jsx(Ve,{type:"number",value:o,onChange:_=>l(parseInt(_.target.value)||new Date().getFullYear()),min:2e3,max:2100})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Duration (minutes) *"}),n.jsx(Ve,{type:"number",value:c,onChange:_=>u(parseInt(_.target.value)||180),min:1})]})]})})]}),n.jsxs(ae,{className:"mb-6",children:[n.jsxs(he,{className:"flex flex-row items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(fe,{children:["Questions (",d.length,")"]}),n.jsx(ze,{children:"Add questions to your exam"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(z,{variant:"outline",onClick:()=>g(!0),className:"bg-gradient-to-r from-primary/10 to-primary/5 border-primary/20",children:[n.jsx(vr,{className:"h-4 w-4 mr-2"}),"AI Generate"]}),n.jsxs(z,{onClick:T,children:[n.jsx(_n,{className:"h-4 w-4 mr-2"}),"Add Question"]})]})]}),n.jsx(ie,{children:d.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'No questions added yet. Click "Add Question" to get started.'}):n.jsx("div",{className:"space-y-6",children:d.map((_,U)=>{var H;return n.jsxs(ae,{children:[n.jsxs(he,{className:"flex flex-row items-center justify-between",children:[n.jsxs(fe,{className:"text-lg",children:["Question ",U+1]}),n.jsx(z,{variant:"ghost",size:"sm",onClick:()=>A(_.id),children:n.jsx(Jl,{className:"h-4 w-4 text-destructive"})})]}),n.jsxs(ie,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Question Type *"}),n.jsxs(Nt,{value:_.question_type,onValueChange:O=>E(_.id,"question_type",O),children:[n.jsx(wt,{children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"mcq",children:"MCQ"}),n.jsx(re,{value:"short_answer",children:"Short Answer"}),n.jsx(re,{value:"long_answer",children:"Long Answer"}),n.jsx(re,{value:"numerical",children:"Numerical"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Marks *"}),n.jsx(Ve,{type:"number",value:_.marks,onChange:O=>E(_.id,"marks",parseInt(O.target.value)||5),min:1})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(be,{children:"Question Text *"}),n.jsx(z,{variant:"ghost",size:"sm",onClick:()=>q(_.id),disabled:N===_.id,className:"text-primary",children:N===_.id?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-3 w-3 mr-1 animate-spin"}),"Improving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(V0,{className:"h-3 w-3 mr-1"}),"Improve with AI"]})})]}),n.jsx(kr,{value:_.question,onChange:O=>E(_.id,"question",O.target.value),placeholder:"Enter the question...",className:"min-h-[100px]"})]}),_.question_type==="mcq"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(be,{children:"Options *"}),n.jsxs(z,{type:"button",variant:"outline",size:"sm",onClick:()=>M(_.id),children:[n.jsx(_n,{className:"h-3 w-3 mr-1"}),"Add Option"]})]}),n.jsx("div",{className:"space-y-2",children:(H=_.options)==null?void 0:H.map((O,B)=>n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Ve,{value:O,onChange:W=>I(_.id,B,W.target.value),placeholder:`Option ${B+1}`}),n.jsx(z,{type:"button",variant:"ghost",size:"sm",onClick:()=>se(_.id,B),children:n.jsx(_s,{className:"h-4 w-4"})})]},B))}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Correct Answer"}),n.jsx(Ve,{value:_.correct_answer||"",onChange:O=>E(_.id,"correct_answer",O.target.value),placeholder:"Enter correct answer"})]})]}),_.question_type!=="mcq"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Correct Answer / Solution"}),n.jsx(kr,{value:_.correct_answer||"",onChange:O=>E(_.id,"correct_answer",O.target.value),placeholder:"Enter the correct answer or solution...",className:"min-h-[80px]"})]})]})]},_.id)})})})]}),n.jsxs("div",{className:"flex items-center justify-end gap-4",children:[n.jsx(z,{variant:"outline",onClick:()=>r("/dashboard/teacher"),children:"Cancel"}),n.jsx(z,{onClick:V,disabled:m||d.length===0,children:m?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ti,{className:"h-4 w-4 mr-2"}),"Create Exam"]})})]})]})}),n.jsx(un,{open:x,onOpenChange:g,children:n.jsxs(tn,{className:"max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs(rn,{children:[n.jsxs(nn,{className:"flex items-center gap-2",children:[n.jsx(Di,{className:"h-5 w-5 text-primary"}),"AI-Powered Question Generator"]}),n.jsx(xn,{children:"Describe the topic or provide context, and AI will generate exam questions for you"})]}),n.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Topic/Context for Questions"}),n.jsx(kr,{placeholder:"e.g., 'Algebra - quadratic equations' or 'Physics - Newton's laws of motion'...",value:S,onChange:_=>k(_.target.value),className:"min-h-[100px]"})]}),n.jsx(z,{onClick:ee,disabled:!S.trim()||y,className:"w-full bg-gradient-to-r from-primary to-primary/90",children:y?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating Questions..."]}):n.jsxs(n.Fragment,{children:[n.jsx(vr,{className:"h-4 w-4 mr-2"}),"Generate Questions"]})}),v.length>0&&n.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3 border rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("p",{className:"text-sm font-semibold",children:["Generated Questions (",v.length,")"]}),n.jsx(z,{variant:"outline",size:"sm",onClick:ne,children:"Add All"})]}),v.map(_=>n.jsx(ae,{children:n.jsxs(ie,{className:"p-4",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[n.jsx(je,{variant:"outline",children:_.question_type}),n.jsx("div",{className:"flex gap-1",children:n.jsx(z,{variant:"ghost",size:"sm",onClick:()=>F(_),children:n.jsx(_n,{className:"h-3 w-3"})})})]}),n.jsx("p",{className:"text-sm mb-2",children:_.question}),_.marks&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Marks: ",_.marks]})]})},_.id))]})]}),n.jsx(Fn,{children:n.jsx(z,{variant:"outline",onClick:()=>{g(!1),k(""),w([])},children:"Close"})})]})})]})},ese=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState("mathematics"),[o,l]=p.useState(""),[c,u]=p.useState(""),[d,h]=p.useState(""),[m,f]=p.useState(""),[x,g]=p.useState(""),[y,b]=p.useState([]),[v,w]=p.useState([]),[S,k]=p.useState([]),[N,P]=p.useState(!1),[T,A]=p.useState(!1),[E,M]=p.useState(!1),[I,se]=p.useState(!0),[ee,Y]=p.useState("create"),[F,ne]=p.useState(!1),[q,V]=p.useState(!1),[_,U]=p.useState(""),[H,O]=p.useState(!1);p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{e&&(W(),B())},[e]),p.useEffect(()=>{a&&(B(),l(""),u(""))},[a]);const B=async()=>{try{P(!0);const{data:_e,error:ut}=await st.from("topics").select("*").eq("subject",a).order("order_index");if(ut)throw ut;k(_e||[])}catch(_e){console.error("Error fetching topics:",_e),s({variant:"destructive",title:"Error",description:"Failed to load topics"})}finally{P(!1)}},W=async()=>{try{M(!0);const _e=await pe.teacher.getStudents((e==null?void 0:e.id)||"");w(_e||[])}catch(_e){console.error("Error fetching students:",_e)}finally{M(!1)}},K=_e=>{b(ut=>ut.includes(_e)?ut.filter(at=>at!==_e):[...ut,_e])},X=()=>{y.length===v.length?b([]):b(v.map(_e=>_e.user_id))},de=()=>Array.from(new Set(S.map(ut=>ut.chapter))).sort(),oe=()=>o?S.filter(_e=>_e.chapter===o).sort((_e,ut)=>_e.order_index-ut.order_index):[],me=async()=>{if(!(!_.trim()||q)){V(!0);try{const _e=o?`Chapter: ${o}${c?`, Subtopic: ${c}`:""}`:"",ut=`Generate a comprehensive homework question for:
Subject: ${a}
${_e}
Additional Context: ${_}
Class Level: 12

Generate a well-structured homework question that:
- Tests understanding of key concepts
- Is appropriate for Class 12 level
- Includes clear instructions
- Can be answered in a reasonable time
- Aligns with the selected topic${c?" and subtopic":""}

Return the question text and optionally a detailed solution.`,Ct=(await pe.rag.query({query:ut,subject:a,top_k:5})).generated_text||"",L=Ct.match(/(?:Question|Q)[:\-]?\s*(.+?)(?=(?:Answer|Solution|A[:\-])|$)/is),ke=Ct.match(/(?:Answer|Solution|A[:\-])\s*(.+?)$/is);h(L?L[1].trim():Ct.substring(0,500).trim()),ke&&f(ke[1].trim()),ne(!1),U(""),se(!0),s({title:"Question Generated",description:"AI has generated a homework question. You can edit it before submitting."})}catch{s({variant:"destructive",title:"Error",description:"Failed to generate question"})}finally{V(!1)}}},Ee=async()=>{if(!(!d.trim()||H)){O(!0);try{const _e=o?`Chapter: ${o}${c?`, Subtopic: ${c}`:""}`:"",ut=`Improve and enhance this homework question:

Original Question: ${d}
Subject: ${a}
${_e}
${m?`Current Answer: ${m}`:""}

Provide an improved version that is:
- Clearer and more precise
- Better aligned with learning objectives
- More engaging for students
- Properly formatted for Class 12 level
- Better aligned with the topic${c?" and subtopic":""}

Return the improved question and optionally an improved solution.`,Ct=(await pe.rag.query({query:ut,subject:a,top_k:3})).generated_text||d,L=Ct.match(/(?:Question|Q)[:\-]?\s*(.+?)(?=(?:Answer|Solution|A[:\-])|$)/is),ke=Ct.match(/(?:Answer|Solution|A[:\-])\s*(.+?)$/is);h(L?L[1].trim():Ct.substring(0,500).trim()),ke&&!m&&f(ke[1].trim()),se(!0),s({title:"Question Improved",description:"AI has enhanced your homework question"})}catch{s({variant:"destructive",title:"Error",description:"Failed to improve question"})}finally{O(!1)}}},we=async()=>{if(!d.trim()){s({variant:"destructive",title:"Error",description:"Please enter a question"});return}if(y.length===0){s({variant:"destructive",title:"Error",description:"Please select at least one student"});return}try{A(!0);const _e=`teacher-assigned-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,ut=y.map(async at=>{var Ct;return await pe.homework.start({user_id:at,question:d,subject:a,correct_answer:m||void 0,question_id:_e,metadata:{is_assigned:!0,assigned_by_teacher:!0,due_date:x||null,topic:o||null,subtopic:c||null,topic_id:((Ct=S.find(L=>L.chapter===o&&L.name===c))==null?void 0:Ct.id)||null}})});await Promise.all(ut),s({title:"Success",description:`Homework assigned to ${y.length} student(s)`}),h(""),f(""),b([]),g(""),l(""),u(""),se(!0),Y("create"),r("/dashboard/teacher/view-content")}catch(_e){s({variant:"destructive",title:"Error",description:_e.message||"Failed to create homework"})}finally{A(!1)}},Le=d.trim()&&y.length>0;return t?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(Xn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-5xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[n.jsx(Ei,{className:"h-8 w-8"}),"Create Homework"]}),n.jsx("p",{className:"text-muted-foreground",children:"Create and assign homework to your students"})]}),n.jsxs(Zs,{value:ee,onValueChange:Y,className:"space-y-6",children:[n.jsxs(Ps,{children:[n.jsx(gr,{value:"create",children:"Create Question"}),n.jsx(gr,{value:"preview",disabled:!d.trim(),children:"Preview & Submit"})]}),n.jsxs(Er,{value:"create",className:"space-y-6",children:[n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Subject & Topic Selection"}),n.jsx(ze,{children:"Select the subject, topic, and subtopic for this homework"})]}),n.jsxs(ie,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Subject *"}),n.jsxs(Nt,{value:a,onValueChange:i,children:[n.jsx(wt,{children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(be,{children:["Topic (Chapter) ",o&&n.jsx($c,{className:"h-4 w-4 inline text-green-500"})]}),N?n.jsx("div",{className:"flex items-center justify-center py-2",children:n.jsx(Oe,{className:"h-4 w-4 animate-spin"})}):n.jsxs(Nt,{value:o,onValueChange:_e=>{l(_e),u("")},children:[n.jsx(wt,{children:n.jsx(St,{placeholder:"Select topic"})}),n.jsx(jt,{children:de().map(_e=>n.jsx(re,{value:_e,children:_e},_e))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(be,{children:["Subtopic ",c&&n.jsx($c,{className:"h-4 w-4 inline text-green-500"})]}),n.jsxs(Nt,{value:c,onValueChange:u,disabled:!o,children:[n.jsx(wt,{children:n.jsx(St,{placeholder:o?"Select subtopic":"Select topic first"})}),n.jsx(jt,{children:oe().map(_e=>n.jsx(re,{value:_e.name,children:_e.name},_e.id))})]})]})]}),(o||c)&&n.jsxs("div",{className:"flex gap-2 flex-wrap",children:[o&&n.jsxs(je,{variant:"secondary",className:"gap-1",children:[n.jsx(Jt,{className:"h-3 w-3"}),o]}),c&&n.jsxs(je,{variant:"outline",className:"gap-1",children:[n.jsx(or,{className:"h-3 w-3"}),c]})]})]})]}),n.jsxs(ae,{children:[n.jsx(he,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(fe,{children:"Question Details"}),n.jsx(ze,{children:"Create your homework question manually or with AI"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(z,{variant:"outline",size:"sm",onClick:()=>ne(!0),className:"bg-gradient-to-r from-primary/10 to-primary/5 border-primary/20",children:[n.jsx(vr,{className:"h-3 w-3 mr-1"}),"AI Generate"]}),d.trim()&&n.jsx(z,{variant:"ghost",size:"sm",onClick:Ee,disabled:H,className:"text-primary",children:H?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-3 w-3 mr-1 animate-spin"}),"Improving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(V0,{className:"h-3 w-3 mr-1"}),"Improve"]})})]})]})}),n.jsxs(ie,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Question *"}),n.jsx(kr,{value:d,onChange:_e=>{h(_e.target.value),se(!0)},placeholder:"Enter the homework question... (You can use AI to generate or improve it)",className:"min-h-[200px] text-base"}),n.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[n.jsxs("span",{children:[d.length," characters"]}),I&&d.trim()&&n.jsx("span",{className:"text-orange-500",children:"Editing mode - Make changes before submitting"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Correct Answer / Solution (Optional)"}),n.jsx(kr,{value:m,onChange:_e=>{f(_e.target.value),se(!0)},placeholder:"Enter the correct answer or solution (for reference)...",className:"min-h-[150px]"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"This helps the AI provide better feedback to students"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Due Date (Optional)"}),n.jsx(Ve,{type:"date",value:x,onChange:_e=>g(_e.target.value)})]})})]})]}),d.trim()&&n.jsx("div",{className:"flex justify-end",children:n.jsxs(z,{onClick:()=>Y("preview"),children:["Review & Continue",n.jsx($c,{className:"h-4 w-4 ml-2"})]})})]}),n.jsxs(Er,{value:"preview",className:"space-y-6",children:[n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Preview Homework"}),n.jsx(ze,{children:"Review your homework before assigning to students"})]}),n.jsxs(ie,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{className:"text-sm font-medium text-muted-foreground",children:"Subject"}),n.jsx(je,{className:"capitalize",children:a})]}),(o||c)&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{className:"text-sm font-medium text-muted-foreground",children:"Topic & Subtopic"}),n.jsxs("div",{className:"flex gap-2",children:[o&&n.jsxs(je,{variant:"secondary",children:[n.jsx(Jt,{className:"h-3 w-3 mr-1"}),o]}),c&&n.jsxs(je,{variant:"outline",children:[n.jsx(or,{className:"h-3 w-3 mr-1"}),c]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{className:"text-sm font-medium text-muted-foreground",children:"Question"}),n.jsx("div",{className:"p-4 border rounded-lg bg-muted/50",children:n.jsx("p",{className:"whitespace-pre-wrap",children:d})})]}),m&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{className:"text-sm font-medium text-muted-foreground",children:"Solution"}),n.jsx("div",{className:"p-4 border rounded-lg bg-muted/50",children:n.jsx("p",{className:"whitespace-pre-wrap",children:m})})]}),x&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{className:"text-sm font-medium text-muted-foreground",children:"Due Date"}),n.jsx("p",{children:new Date(x).toLocaleDateString()})]})]})]}),n.jsxs(ae,{children:[n.jsx(he,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(fe,{children:"Assign To Students"}),n.jsx(ze,{children:"Select students to assign this homework"})]}),n.jsx(z,{variant:"outline",size:"sm",onClick:X,children:y.length===v.length?"Deselect All":"Select All"})]})}),n.jsx(ie,{children:E?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(Oe,{className:"h-6 w-6 animate-spin"})}):v.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No students found. Students will appear here once assigned to your school."}):n.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:v.map(_e=>{var ut;return n.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg hover:bg-accent cursor-pointer",onClick:()=>K(_e.user_id),children:[n.jsx(bp,{checked:y.includes(_e.user_id),onCheckedChange:()=>K(_e.user_id)}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium",children:((ut=_e.profile)==null?void 0:ut.full_name)||"Unknown"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Grade ",_e.class_grade,"  ",_e.school_name||""]})]})]},_e.user_id)})})})]}),n.jsxs("div",{className:"flex items-center justify-end gap-4",children:[n.jsxs(z,{variant:"outline",onClick:()=>Y("create"),children:[n.jsx(_s,{className:"h-4 w-4 mr-2"}),"Back to Edit"]}),n.jsx(z,{onClick:we,disabled:!Le||T,size:"lg",children:T?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Assigning..."]}):n.jsxs(n.Fragment,{children:[n.jsx($i,{className:"h-4 w-4 mr-2"}),"Assign to ",y.length," Student",y.length!==1?"s":""]})})]})]})]})]})}),n.jsx(un,{open:F,onOpenChange:ne,children:n.jsxs(tn,{className:"max-w-2xl",children:[n.jsxs(rn,{children:[n.jsxs(nn,{className:"flex items-center gap-2",children:[n.jsx(Di,{className:"h-5 w-5 text-primary"}),"AI-Powered Question Generator"]}),n.jsx(xn,{children:o?`Generate a question for ${o}${c?` - ${c}`:""}`:"Describe the topic or provide context, and AI will generate a homework question for you"})]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Additional Context / Requirements"}),n.jsx(kr,{placeholder:o?"e.g., 'Focus on problem-solving' or 'Include real-world applications'...":"e.g., 'Algebra - quadratic equations' or 'Physics - Newton's laws of motion'...",value:_,onChange:_e=>U(_e.target.value),className:"min-h-[100px]"}),o&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:["AI will generate a question based on: ",o,c?` - ${c}`:""]})]})}),n.jsxs(Fn,{children:[n.jsx(z,{variant:"outline",onClick:()=>{ne(!1),U("")},children:"Cancel"}),n.jsx(z,{onClick:me,disabled:q,className:"bg-gradient-to-r from-primary to-primary/90",children:q?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(vr,{className:"h-4 w-4 mr-2"}),"Generate Question"]})})]})]})})]})},tse=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState("exam"),[o,l]=p.useState("mathematics"),[c,u]=p.useState(new Date().getFullYear()),[d,h]=p.useState(180),[m,f]=p.useState([]),[x,g]=p.useState(!1),[y,b]=p.useState(!1),[v,w]=p.useState(!1),[S,k]=p.useState([]),[N,P]=p.useState(""),[T,A]=p.useState(null),[E,M]=p.useState("mathematics"),[I,se]=p.useState(""),[ee,Y]=p.useState(""),[F,ne]=p.useState(""),[q,V]=p.useState([]),[_,U]=p.useState([]),[H,O]=p.useState(!1),[B,W]=p.useState(!1),[K,X]=p.useState(!1),[de,oe]=p.useState(!1),[me,Ee]=p.useState(""),[we,Le]=p.useState(!1);p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{e&&a==="homework"&&_e()},[e,a]);const _e=async()=>{try{W(!0);const ve=await pe.teacher.getStudents((e==null?void 0:e.id)||"");U(ve||[])}catch(ve){console.error("Error fetching students:",ve)}finally{W(!1)}},ut=()=>{const ve={id:`q${Date.now()}`,question:"",marks:5,question_type:"short_answer",options:[],correct_answer:""};f([...m,ve])},at=ve=>{f(m.filter(Be=>Be.id!==ve))},Ct=(ve,Be,pt)=>{f(m.map(gt=>gt.id===ve?{...gt,[Be]:pt}:gt))},L=ve=>{f(m.map(Be=>Be.id===ve?{...Be,options:[...Be.options||[],""]}:Be))},ke=(ve,Be,pt)=>{f(m.map(gt=>{if(gt.id===ve&&gt.options){const Ft=[...gt.options];return Ft[Be]=pt,{...gt,options:Ft}}return gt}))},ot=(ve,Be)=>{f(m.map(pt=>pt.id===ve&&pt.options?{...pt,options:pt.options.filter((gt,Ft)=>Ft!==Be)}:pt))},ct=async()=>{if(!(!N.trim()||v)){w(!0);try{const ve=`Generate exam questions for:
Subject: ${o}
Year: ${c}
Topic/Context: ${N}

Generate ${N.includes("number")?"":"5"} diverse questions including:
- Multiple choice questions (MCQ)
- Short answer questions
- Long answer questions
- Numerical problems

Format as JSON with question, question_type, marks, options (for MCQ), and correct_answer fields.`,pt=(await pe.rag.query({query:ve,subject:o,top_k:5})).generated_text||"",gt=$(pt);k(gt),s({title:"Questions Generated",description:`Generated ${gt.length} AI-powered questions`})}catch{s({variant:"destructive",title:"Error",description:"Failed to generate questions"})}finally{w(!1)}}},$=ve=>{const Be=[];try{const Ft=ve.match(/\[[\s\S]*\]/);if(Ft){const ge=JSON.parse(Ft[0]);if(Array.isArray(ge))return ge.forEach((J,Ae)=>{Be.push({id:`ai-q${Date.now()}-${Ae}`,question:J.question||J.text||"",marks:J.marks||5,question_type:J.question_type||"short_answer",options:J.options||[],correct_answer:J.correct_answer||J.answer||""})}),Be}}catch{}const pt=/(?:Q\d+|Question\s+\d+)[:\-]?\s*(.+?)(?=(?:Q\d+|Question\s+\d+)|$)/gis;return[...ve.matchAll(pt)].forEach((Ft,ge)=>{var Ae;const J=(Ae=Ft[1])==null?void 0:Ae.trim();if(J&&J.length>10){const Fe=/[A-D][\.\)]\s/.test(J);Be.push({id:`ai-q${Date.now()}-${ge}`,question:J,marks:5,question_type:Fe?"mcq":"short_answer",options:Fe?[]:[],correct_answer:""})}}),Be.slice(0,10)},Ne=ve=>{f([...m,ve]),k(S.filter(Be=>Be.id!==ve.id)),s({title:"Question Added",description:"Question has been added to your exam"})},dt=()=>{f([...m,...S]),k([]),b(!1),s({title:"Questions Added",description:`Added ${S.length} questions to your exam`})},zt=async ve=>{var pt;const Be=m.find(gt=>gt.id===ve);if(!(!Be||T===ve)){A(ve);try{const gt=`Improve and enhance this exam question:

Original Question: ${Be.question}
Question Type: ${Be.question_type}
Subject: ${o}
Marks: ${Be.marks}

Provide an improved version that is:
- Clearer and more precise
- Better aligned with learning objectives
- More engaging for students
- Properly formatted

Return only the improved question text.`,ge=((pt=(await pe.rag.query({query:gt,subject:o,top_k:3})).generated_text)==null?void 0:pt.trim())||Be.question;Ct(ve,"question",ge),s({title:"Question Improved",description:"AI has enhanced your question"})}catch{s({variant:"destructive",title:"Error",description:"Failed to improve question"})}finally{A(null)}}},ue=async()=>{if(m.length===0){s({variant:"destructive",title:"Error",description:"Please add at least one question"});return}for(const ve of m){if(!ve.question.trim()){s({variant:"destructive",title:"Error",description:"All questions must have question text"});return}if(ve.question_type==="mcq"&&(!ve.options||ve.options.length<2)){s({variant:"destructive",title:"Error",description:"MCQ questions must have at least 2 options"});return}}try{g(!0);const ve=m.reduce((pt,gt)=>pt+gt.marks,0),Be={subject:o,year:c,duration_minutes:d,total_marks:ve,questions:m.map(pt=>({question:pt.question,marks:pt.marks,question_type:pt.question_type,options:pt.options,correct_answer:pt.correct_answer,metadata:{}})),metadata:{}};await pe.exam.createSet(Be),s({title:"Success",description:"Exam created successfully"}),f([]),l("mathematics"),u(new Date().getFullYear()),h(180)}catch(ve){s({variant:"destructive",title:"Error",description:ve.message||"Failed to create exam"})}finally{g(!1)}},G=ve=>{V(Be=>Be.includes(ve)?Be.filter(pt=>pt!==ve):[...Be,ve])},ye=()=>{q.length===_.length?V([]):V(_.map(ve=>ve.user_id))},Me=async()=>{if(!(!me.trim()||de)){oe(!0);try{const ve=`Generate a homework question for:
Subject: ${E}
Topic/Context: ${me}
Class Level: 12

Generate a well-structured homework question that:
- Tests understanding of key concepts
- Is appropriate for Class 12 level
- Includes clear instructions
- Can be answered in a reasonable time

Return the question text and optionally a solution.`,pt=(await pe.rag.query({query:ve,subject:E,top_k:5})).generated_text||"",gt=pt.match(/(?:Question|Q)[:\-]?\s*(.+?)(?=(?:Answer|Solution|A[:\-])|$)/is),Ft=pt.match(/(?:Answer|Solution|A[:\-])\s*(.+?)$/is);se(gt?gt[1].trim():pt.substring(0,500).trim()),Ft&&Y(Ft[1].trim()),X(!1),Ee(""),s({title:"Question Generated",description:"AI has generated a homework question for you"})}catch{s({variant:"destructive",title:"Error",description:"Failed to generate question"})}finally{oe(!1)}}},De=async()=>{if(!(!I.trim()||we)){Le(!0);try{const ve=`Improve and enhance this homework question:

Original Question: ${I}
Subject: ${E}
${ee?`Current Answer: ${ee}`:""}

Provide an improved version that is:
- Clearer and more precise
- Better aligned with learning objectives
- More engaging for students
- Properly formatted for Class 12 level

Return the improved question and optionally an improved solution.`,pt=(await pe.rag.query({query:ve,subject:E,top_k:3})).generated_text||I,gt=pt.match(/(?:Question|Q)[:\-]?\s*(.+?)(?=(?:Answer|Solution|A[:\-])|$)/is),Ft=pt.match(/(?:Answer|Solution|A[:\-])\s*(.+?)$/is);se(gt?gt[1].trim():pt.substring(0,500).trim()),Ft&&!ee&&Y(Ft[1].trim()),s({title:"Question Improved",description:"AI has enhanced your homework question"})}catch{s({variant:"destructive",title:"Error",description:"Failed to improve question"})}finally{Le(!1)}}},He=async()=>{if(!I.trim()){s({variant:"destructive",title:"Error",description:"Please enter a question"});return}if(q.length===0){s({variant:"destructive",title:"Error",description:"Please select at least one student"});return}try{O(!0);const ve=q.map(async Be=>await pe.homework.start({user_id:Be,question:I,subject:E,correct_answer:ee||void 0}));await Promise.all(ve),s({title:"Success",description:`Homework assigned to ${q.length} student(s)`}),se(""),Y(""),V([]),ne("")}catch(ve){s({variant:"destructive",title:"Error",description:ve.message||"Failed to create homework"})}finally{O(!1)}};return t?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(Xn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Create Content"}),n.jsx("p",{className:"text-muted-foreground",children:"Create exams and homework for your students"})]}),n.jsxs(Zs,{value:a,onValueChange:i,className:"w-full",children:[n.jsxs(Ps,{className:"grid w-full max-w-md grid-cols-2 mb-6",children:[n.jsxs(gr,{value:"exam",className:"flex items-center gap-2",children:[n.jsx(or,{className:"h-4 w-4"}),"Create Exam"]}),n.jsxs(gr,{value:"homework",className:"flex items-center gap-2",children:[n.jsx(Ei,{className:"h-4 w-4"}),"Create Homework"]})]}),n.jsxs(Er,{value:"exam",className:"mt-0 space-y-6",children:[n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Exam Details"}),n.jsx(ze,{children:"Set basic exam information"})]}),n.jsx(ie,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Subject *"}),n.jsxs(Nt,{value:o,onValueChange:l,children:[n.jsx(wt,{children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Year *"}),n.jsx(Ve,{type:"number",value:c,onChange:ve=>u(parseInt(ve.target.value)||new Date().getFullYear()),min:2e3,max:2100})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Duration (minutes) *"}),n.jsx(Ve,{type:"number",value:d,onChange:ve=>h(parseInt(ve.target.value)||180),min:1})]})]})})]}),n.jsxs(ae,{children:[n.jsxs(he,{className:"flex flex-row items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(fe,{children:["Questions (",m.length,")"]}),n.jsx(ze,{children:"Add questions to your exam"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(z,{variant:"outline",onClick:()=>b(!0),className:"bg-gradient-to-r from-primary/10 to-primary/5 border-primary/20",children:[n.jsx(vr,{className:"h-4 w-4 mr-2"}),"AI Generate"]}),n.jsxs(z,{onClick:ut,children:[n.jsx(_n,{className:"h-4 w-4 mr-2"}),"Add Question"]})]})]}),n.jsx(ie,{children:m.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'No questions added yet. Click "Add Question" to get started.'}):n.jsx("div",{className:"space-y-6",children:m.map((ve,Be)=>{var pt;return n.jsxs(ae,{children:[n.jsxs(he,{className:"flex flex-row items-center justify-between",children:[n.jsxs(fe,{className:"text-lg",children:["Question ",Be+1]}),n.jsx(z,{variant:"ghost",size:"sm",onClick:()=>at(ve.id),children:n.jsx(Jl,{className:"h-4 w-4 text-destructive"})})]}),n.jsxs(ie,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Question Type *"}),n.jsxs(Nt,{value:ve.question_type,onValueChange:gt=>Ct(ve.id,"question_type",gt),children:[n.jsx(wt,{children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"mcq",children:"MCQ"}),n.jsx(re,{value:"short_answer",children:"Short Answer"}),n.jsx(re,{value:"long_answer",children:"Long Answer"}),n.jsx(re,{value:"numerical",children:"Numerical"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Marks *"}),n.jsx(Ve,{type:"number",value:ve.marks,onChange:gt=>Ct(ve.id,"marks",parseInt(gt.target.value)||5),min:1})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(be,{children:"Question Text *"}),n.jsx(z,{variant:"ghost",size:"sm",onClick:()=>zt(ve.id),disabled:T===ve.id,className:"text-primary",children:T===ve.id?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-3 w-3 mr-1 animate-spin"}),"Improving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(V0,{className:"h-3 w-3 mr-1"}),"Improve with AI"]})})]}),n.jsx(kr,{value:ve.question,onChange:gt=>Ct(ve.id,"question",gt.target.value),placeholder:"Enter the question...",className:"min-h-[100px]"})]}),ve.question_type==="mcq"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(be,{children:"Options *"}),n.jsxs(z,{type:"button",variant:"outline",size:"sm",onClick:()=>L(ve.id),children:[n.jsx(_n,{className:"h-3 w-3 mr-1"}),"Add Option"]})]}),n.jsx("div",{className:"space-y-2",children:(pt=ve.options)==null?void 0:pt.map((gt,Ft)=>n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Ve,{value:gt,onChange:ge=>ke(ve.id,Ft,ge.target.value),placeholder:`Option ${Ft+1}`}),n.jsx(z,{type:"button",variant:"ghost",size:"sm",onClick:()=>ot(ve.id,Ft),children:n.jsx(_s,{className:"h-4 w-4"})})]},Ft))}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Correct Answer"}),n.jsx(Ve,{value:ve.correct_answer||"",onChange:gt=>Ct(ve.id,"correct_answer",gt.target.value),placeholder:"Enter correct answer"})]})]}),ve.question_type!=="mcq"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Correct Answer / Solution"}),n.jsx(kr,{value:ve.correct_answer||"",onChange:gt=>Ct(ve.id,"correct_answer",gt.target.value),placeholder:"Enter the correct answer or solution...",className:"min-h-[80px]"})]})]})]},ve.id)})})})]}),n.jsxs("div",{className:"flex items-center justify-end gap-4",children:[n.jsx(z,{variant:"outline",onClick:()=>r("/dashboard/teacher"),children:"Cancel"}),n.jsx(z,{onClick:ue,disabled:x||m.length===0,children:x?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ti,{className:"h-4 w-4 mr-2"}),"Create Exam"]})})]})]}),n.jsxs(Er,{value:"homework",className:"mt-0 space-y-6",children:[n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Homework Details"}),n.jsx(ze,{children:"Set the homework question and subject"})]}),n.jsxs(ie,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Subject *"}),n.jsxs(Nt,{value:E,onValueChange:M,children:[n.jsx(wt,{children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Due Date (Optional)"}),n.jsx(Ve,{type:"date",value:F,onChange:ve=>ne(ve.target.value)})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(be,{children:"Question *"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(z,{variant:"outline",size:"sm",onClick:()=>X(!0),className:"bg-gradient-to-r from-primary/10 to-primary/5 border-primary/20",children:[n.jsx(vr,{className:"h-3 w-3 mr-1"}),"AI Generate"]}),I.trim()&&n.jsx(z,{variant:"ghost",size:"sm",onClick:De,disabled:we,className:"text-primary",children:we?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-3 w-3 mr-1 animate-spin"}),"Improving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(V0,{className:"h-3 w-3 mr-1"}),"Improve with AI"]})})]})]}),n.jsx(kr,{value:I,onChange:ve=>se(ve.target.value),placeholder:"Enter the homework question...",className:"min-h-[150px]"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Correct Answer / Solution (Optional)"}),n.jsx(kr,{value:ee,onChange:ve=>Y(ve.target.value),placeholder:"Enter the correct answer or solution (for reference)...",className:"min-h-[100px]"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"This helps the AI provide better feedback to students"})]})]})]}),n.jsxs(ae,{children:[n.jsx(he,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(fe,{children:"Assign To Students"}),n.jsx(ze,{children:"Select students to assign this homework"})]}),n.jsx(z,{variant:"outline",size:"sm",onClick:ye,children:q.length===_.length?"Deselect All":"Select All"})]})}),n.jsx(ie,{children:B?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(Oe,{className:"h-6 w-6 animate-spin"})}):_.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No students found. Students will appear here once assigned to your school."}):n.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:_.map(ve=>{var Be;return n.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg hover:bg-accent cursor-pointer",onClick:()=>G(ve.user_id),children:[n.jsx(bp,{checked:q.includes(ve.user_id),onCheckedChange:()=>G(ve.user_id)}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium",children:((Be=ve.profile)==null?void 0:Be.full_name)||"Unknown"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Grade ",ve.class_grade,"  ",ve.school_name||""]})]})]},ve.user_id)})})})]}),n.jsxs("div",{className:"flex items-center justify-end gap-4",children:[n.jsx(z,{variant:"outline",onClick:()=>r("/dashboard/teacher"),children:"Cancel"}),n.jsx(z,{onClick:He,disabled:H||!I.trim()||q.length===0,children:H?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ti,{className:"h-4 w-4 mr-2"}),"Assign Homework (",q.length," student",q.length!==1?"s":"",")"]})})]})]})]})]})}),n.jsx(un,{open:y,onOpenChange:b,children:n.jsxs(tn,{className:"max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs(rn,{children:[n.jsxs(nn,{className:"flex items-center gap-2",children:[n.jsx(Di,{className:"h-5 w-5 text-primary"}),"AI-Powered Question Generator"]}),n.jsx(xn,{children:"Describe the topic or provide context, and AI will generate exam questions for you"})]}),n.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Topic/Context for Questions"}),n.jsx(kr,{placeholder:"e.g., 'Algebra - quadratic equations' or 'Physics - Newton's laws of motion'...",value:N,onChange:ve=>P(ve.target.value),className:"min-h-[100px]"})]}),n.jsx(z,{onClick:ct,disabled:!N.trim()||v,className:"w-full bg-gradient-to-r from-primary to-primary/90",children:v?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating Questions..."]}):n.jsxs(n.Fragment,{children:[n.jsx(vr,{className:"h-4 w-4 mr-2"}),"Generate Questions"]})}),S.length>0&&n.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3 border rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("p",{className:"text-sm font-semibold",children:["Generated Questions (",S.length,")"]}),n.jsx(z,{variant:"outline",size:"sm",onClick:dt,children:"Add All"})]}),S.map(ve=>n.jsx(ae,{children:n.jsxs(ie,{className:"p-4",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[n.jsx(je,{variant:"outline",children:ve.question_type}),n.jsx("div",{className:"flex gap-1",children:n.jsx(z,{variant:"ghost",size:"sm",onClick:()=>Ne(ve),children:n.jsx(_n,{className:"h-3 w-3"})})})]}),n.jsx("p",{className:"text-sm mb-2",children:ve.question}),ve.marks&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Marks: ",ve.marks]})]})},ve.id))]})]}),n.jsx(Fn,{children:n.jsx(z,{variant:"outline",onClick:()=>{b(!1),P(""),k([])},children:"Close"})})]})}),n.jsx(un,{open:K,onOpenChange:X,children:n.jsxs(tn,{className:"max-w-2xl",children:[n.jsxs(rn,{children:[n.jsxs(nn,{className:"flex items-center gap-2",children:[n.jsx(Di,{className:"h-5 w-5 text-primary"}),"AI-Powered Question Generator"]}),n.jsx(xn,{children:"Describe the topic or provide context, and AI will generate a homework question for you"})]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Topic/Context for Question"}),n.jsx(kr,{placeholder:"e.g., 'Algebra - quadratic equations' or 'Physics - Newton's laws of motion'...",value:me,onChange:ve=>Ee(ve.target.value),className:"min-h-[100px]"})]})}),n.jsxs(Fn,{children:[n.jsx(z,{variant:"outline",onClick:()=>{X(!1),Ee("")},children:"Cancel"}),n.jsx(z,{onClick:Me,disabled:!me.trim()||de,className:"bg-gradient-to-r from-primary to-primary/90",children:de?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(vr,{className:"h-4 w-4 mr-2"}),"Generate Question"]})})]})]})})]})},rse=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState([]),[o,l]=p.useState([]),[c,u]=p.useState(!1),[d,h]=p.useState(!1),[m,f]=p.useState("exams"),[x,g]=p.useState(null),[y,b]=p.useState(!1);p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{e&&(m==="exams"?v():w())},[e,m]);const v=async()=>{try{u(!0);const N=await pe.exam.getSets({});i(N||[])}catch(N){console.error("Error fetching exam sets:",N),s({variant:"destructive",title:"Error",description:"Failed to fetch exam sets"})}finally{u(!1)}},w=async()=>{try{h(!0);const N=await pe.teacher.getStudents((e==null?void 0:e.id)||""),P=N.map(I=>I.user_id);if(P.length===0){l([]);return}const{data:T,error:A}=await st.from("homework_sessions").select("*").in("user_id",P).order("created_at",{ascending:!1}).limit(500);if(A)throw A;const E=new Map;(T||[]).forEach(I=>{var F,ne,q;const se=I.question_id;E.has(se)||E.set(se,{id:se,question_id:se,question:I.question,subject:I.subject,correct_answer:I.correct_answer,metadata:I.metadata||{},created_at:I.created_at,updated_at:I.updated_at,total_assigned:0,completed:0,pending:0,total_attempts:0,total_hints_revealed:0,solutions_revealed:0,students:[],sessions:[]});const ee=E.get(se);ee.total_assigned++,ee.sessions.push(I),ee.total_attempts+=((F=I.attempts)==null?void 0:F.length)||0,ee.total_hints_revealed+=I.hints_revealed||0,I.solution_revealed&&ee.solutions_revealed++;const Y=N.find(V=>V.user_id===I.user_id);ee.students.push({user_id:I.user_id,name:((ne=Y==null?void 0:Y.profile)==null?void 0:ne.full_name)||"Unknown",is_complete:I.is_complete,attempts:((q=I.attempts)==null?void 0:q.length)||0,hints_revealed:I.hints_revealed||0,solution_revealed:I.solution_revealed||!1,session_id:I.id,created_at:I.created_at,updated_at:I.updated_at}),I.is_complete?ee.completed++:ee.pending++});const M=Array.from(E.values()).sort((I,se)=>new Date(se.created_at).getTime()-new Date(I.created_at).getTime());l(M)}catch(N){console.error("Error fetching homework sessions:",N),s({variant:"destructive",title:"Error",description:"Failed to fetch homework sessions"})}finally{h(!1)}},S=N=>({mathematics:"bg-blue-500",physics:"bg-purple-500",chemistry:"bg-green-500",biology:"bg-orange-500"})[N]||"bg-gray-500",k=N=>N.charAt(0).toUpperCase()+N.slice(1);return t?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(Xn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"View Created Content"}),n.jsx("p",{className:"text-muted-foreground",children:"View all exams and homework you've created"})]}),n.jsxs(Zs,{value:m,onValueChange:f,className:"w-full",children:[n.jsxs(Ps,{className:"grid w-full max-w-md grid-cols-2 mb-6",children:[n.jsxs(gr,{value:"exams",className:"flex items-center gap-2",children:[n.jsx(or,{className:"h-4 w-4"}),"Created Exams"]}),n.jsxs(gr,{value:"homework",className:"flex items-center gap-2",children:[n.jsx(Ei,{className:"h-4 w-4"}),"All Homework"]})]}),n.jsx(Er,{value:"exams",className:"mt-0",children:n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Exam Sets"}),n.jsx(ze,{children:"All available exam sets in the system"})]}),n.jsx(ie,{children:c?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(Oe,{className:"h-6 w-6 animate-spin"})}):a.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No exam sets found"}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(N=>{var P;return n.jsxs(ae,{className:"hover:shadow-md transition-shadow",children:[n.jsxs(he,{children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx(je,{className:`${S(N.subject)} text-white`,children:k(N.subject)}),n.jsxs(je,{variant:"outline",className:"flex items-center gap-1",children:[n.jsx(As,{className:"h-3 w-3"}),N.year]})]}),n.jsxs(fe,{className:"text-lg",children:[k(N.subject)," ",N.year]})]}),n.jsxs(ie,{children:[n.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(or,{className:"h-4 w-4"}),n.jsxs("span",{children:[((P=N.questions)==null?void 0:P.length)||0," Questions"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ur,{className:"h-4 w-4"}),n.jsxs("span",{children:[N.duration_minutes||0," minutes"]})]}),n.jsxs("div",{className:"font-medium",children:["Total Marks: ",N.total_marks||0]})]}),n.jsxs(z,{variant:"outline",className:"w-full",onClick:()=>r(`/dashboard/teacher/exams/submissions/${N.id}`),children:[n.jsx(Kn,{className:"h-4 w-4 mr-2"}),"View Submissions"]})]})]},N.id)})})})]})}),n.jsx(Er,{value:"homework",className:"mt-0",children:n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"All Homework"}),n.jsx(ze,{children:"All homework sessions for your students"})]}),n.jsx(ie,{children:d?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(Oe,{className:"h-6 w-6 animate-spin"})}):o.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Ei,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{className:"text-lg font-medium mb-2",children:"No homework found"}),n.jsx("p",{className:"text-sm",children:"No homework sessions found for your students"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(N=>{var P,T,A,E;return n.jsxs(ae,{className:"hover:shadow-md transition-shadow",children:[n.jsxs(he,{children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx(je,{className:`${S(N.subject)} text-white capitalize`,children:N.subject}),(((P=N.metadata)==null?void 0:P.topic)||((T=N.metadata)==null?void 0:T.subtopic))&&n.jsx("div",{className:"flex flex-col gap-1 text-xs text-muted-foreground",children:((A=N.metadata)==null?void 0:A.topic)&&n.jsx(je,{variant:"outline",className:"text-xs",children:N.metadata.topic})})]}),n.jsx("div",{className:"text-lg font-semibold mb-2 line-clamp-2 prose prose-sm max-w-none",children:n.jsx(tr,{remarkPlugins:[Fs,rr],rehypePlugins:[Ls],components:{p:({children:M})=>n.jsx("p",{className:"mb-0 text-base leading-relaxed line-clamp-2",children:M}),h1:({children:M})=>n.jsx("h1",{className:"text-lg font-semibold mb-0 mt-0 line-clamp-2",children:M}),h2:({children:M})=>n.jsx("h2",{className:"text-base font-semibold mb-0 mt-0 line-clamp-2",children:M}),h3:({children:M})=>n.jsx("h3",{className:"text-sm font-semibold mb-0 mt-0 line-clamp-2",children:M})},children:N.question.length>100?N.question.substring(0,100)+"...":N.question})}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(As,{className:"h-4 w-4"}),new Date(N.created_at).toLocaleDateString(),((E=N.metadata)==null?void 0:E.due_date)&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsxs("span",{children:["Due: ",new Date(N.metadata.due_date).toLocaleDateString()]})]})]})]}),n.jsx(ie,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[n.jsxs("div",{className:"text-center p-2 bg-muted rounded",children:[n.jsx("div",{className:"font-semibold text-lg",children:N.total_assigned}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Assigned"})]}),n.jsxs("div",{className:"text-center p-2 bg-green-50 dark:bg-green-950/20 rounded",children:[n.jsx("div",{className:"font-semibold text-lg text-green-600",children:N.completed}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Completed"})]}),n.jsxs("div",{className:"text-center p-2 bg-orange-50 dark:bg-orange-950/20 rounded",children:[n.jsx("div",{className:"font-semibold text-lg text-orange-600",children:N.pending}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Pending"})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs pt-2 border-t",children:[n.jsxs("div",{className:"text-center p-1.5 bg-blue-50 dark:bg-blue-950/20 rounded",children:[n.jsx("div",{className:"font-medium text-blue-600 dark:text-blue-400",children:N.total_attempts}),n.jsx("div",{className:"text-muted-foreground",children:"Total Attempts"})]}),n.jsxs("div",{className:"text-center p-1.5 bg-yellow-50 dark:bg-yellow-950/20 rounded",children:[n.jsxs("div",{className:"font-medium text-yellow-600 dark:text-yellow-400 flex items-center justify-center gap-1",children:[n.jsx(da,{className:"h-3 w-3"}),N.total_hints_revealed]}),n.jsx("div",{className:"text-muted-foreground",children:"Hints Used"})]}),n.jsxs("div",{className:"text-center p-1.5 bg-purple-50 dark:bg-purple-950/20 rounded",children:[n.jsx("div",{className:"font-medium text-purple-600 dark:text-purple-400",children:N.solutions_revealed}),n.jsx("div",{className:"text-muted-foreground",children:"Solutions Revealed"})]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[n.jsx("span",{children:"Completion Rate"}),n.jsxs("span",{children:[N.total_assigned>0?Math.round(N.completed/N.total_assigned*100):0,"%"]})]}),n.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:n.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${N.total_assigned>0?N.completed/N.total_assigned*100:0}%`}})})]}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsxs(z,{variant:"outline",className:"flex-1",size:"sm",onClick:()=>{g(N),b(!0)},children:[n.jsx(Kn,{className:"h-4 w-4 mr-1"}),"View Details"]}),n.jsx(z,{variant:"ghost",size:"sm",onClick:()=>{g(N),b(!0)},children:n.jsx(or,{className:"h-4 w-4"})})]})]})})]},N.question_id)})})})]})})]})]})}),n.jsx(un,{open:y,onOpenChange:b,children:n.jsxs(tn,{className:"max-w-4xl max-h-[90vh]",children:[n.jsxs(rn,{children:[n.jsx(nn,{className:"text-2xl",children:"Homework Details"}),n.jsx(xn,{children:"View all student progress and statistics for this homework assignment"})]}),x&&n.jsx(Pn,{className:"max-h-[70vh] pr-4",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs(ae,{children:[n.jsx(he,{children:n.jsx(fe,{className:"text-lg",children:"Question"})}),n.jsxs(ie,{children:[n.jsx("div",{className:"prose prose-sm max-w-none",children:n.jsx(tr,{remarkPlugins:[Fs,rr],rehypePlugins:[Ls],components:{p:({children:N})=>n.jsx("p",{className:"mb-2 text-sm leading-relaxed",children:N}),h1:({children:N})=>n.jsx("h1",{className:"text-lg font-bold mb-2 mt-3",children:N}),h2:({children:N})=>n.jsx("h2",{className:"text-base font-semibold mb-2 mt-2",children:N}),h3:({children:N})=>n.jsx("h3",{className:"text-sm font-semibold mb-1 mt-2",children:N}),ul:({children:N})=>n.jsx("ul",{className:"list-disc pl-4 mb-2",children:N}),ol:({children:N})=>n.jsx("ol",{className:"list-decimal pl-4 mb-2",children:N}),li:({children:N})=>n.jsx("li",{className:"mb-1",children:N}),code:({children:N})=>n.jsx("code",{className:"bg-muted px-1 py-0.5 rounded text-xs",children:N}),pre:({children:N})=>n.jsx("pre",{className:"bg-muted p-2 rounded overflow-x-auto mb-2",children:N})},children:x.question})}),x.correct_answer&&n.jsxs("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-950/20 rounded",children:[n.jsx("p",{className:"text-xs font-semibold text-green-700 dark:text-green-400 mb-1",children:"Correct Answer:"}),n.jsx("div",{className:"prose prose-sm max-w-none",children:n.jsx(tr,{remarkPlugins:[Fs,rr],rehypePlugins:[Ls],components:{p:({children:N})=>n.jsx("p",{className:"mb-0 text-sm text-green-800 dark:text-green-300 leading-relaxed",children:N}),h1:({children:N})=>n.jsx("h1",{className:"text-base font-bold mb-1 mt-0 text-green-800 dark:text-green-300",children:N}),h2:({children:N})=>n.jsx("h2",{className:"text-sm font-semibold mb-1 mt-0 text-green-800 dark:text-green-300",children:N}),h3:({children:N})=>n.jsx("h3",{className:"text-xs font-semibold mb-0 mt-0 text-green-800 dark:text-green-300",children:N}),ul:({children:N})=>n.jsx("ul",{className:"list-disc pl-4 mb-1 text-green-800 dark:text-green-300",children:N}),ol:({children:N})=>n.jsx("ol",{className:"list-decimal pl-4 mb-1 text-green-800 dark:text-green-300",children:N}),li:({children:N})=>n.jsx("li",{className:"mb-0.5",children:N}),code:({children:N})=>n.jsx("code",{className:"bg-green-100 dark:bg-green-900/30 px-1 py-0.5 rounded text-xs text-green-900 dark:text-green-200",children:N}),pre:({children:N})=>n.jsx("pre",{className:"bg-green-100 dark:bg-green-900/30 p-2 rounded overflow-x-auto mb-1 text-green-900 dark:text-green-200",children:N})},children:x.correct_answer})})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsx(ae,{children:n.jsx(ie,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold",children:x.total_assigned}),n.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Total Assigned"})]})})}),n.jsx(ae,{children:n.jsx(ie,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-green-600",children:x.completed}),n.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Completed"})]})})}),n.jsx(ae,{children:n.jsx(ie,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-orange-600",children:x.pending}),n.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Pending"})]})})}),n.jsx(ae,{children:n.jsx(ie,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[x.total_assigned>0?Math.round(x.completed/x.total_assigned*100):0,"%"]}),n.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Completion Rate"})]})})})]}),n.jsxs(ae,{children:[n.jsx(he,{children:n.jsxs(fe,{className:"text-lg flex items-center gap-2",children:[n.jsx(vn,{className:"h-5 w-5"}),"Student Progress (",x.students.length," students)"]})}),n.jsx(ie,{children:n.jsxs(Cs,{children:[n.jsx(Es,{children:n.jsxs(Nr,{children:[n.jsx(mt,{children:"Student Name"}),n.jsx(mt,{children:"Status"}),n.jsx(mt,{children:"Attempts"}),n.jsx(mt,{children:"Hints Used"}),n.jsx(mt,{children:"Solution Revealed"}),n.jsx(mt,{children:"Last Updated"})]})}),n.jsx(Ts,{children:x.students.map(N=>n.jsxs(Nr,{children:[n.jsx(it,{className:"font-medium",children:N.name}),n.jsx(it,{children:N.is_complete?n.jsxs(je,{className:"bg-green-500 text-white",children:[n.jsx(Qt,{className:"h-3 w-3 mr-1"}),"Completed"]}):n.jsxs(je,{variant:"outline",className:"text-orange-600",children:[n.jsx(Ur,{className:"h-3 w-3 mr-1"}),"Pending"]})}),n.jsx(it,{children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(An,{className:"h-4 w-4 text-blue-500"}),N.attempts]})}),n.jsx(it,{children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(da,{className:"h-4 w-4 text-yellow-500"}),N.hints_revealed,"/3"]})}),n.jsx(it,{children:N.solution_revealed?n.jsx(je,{variant:"outline",className:"text-purple-600",children:"Yes"}):n.jsx("span",{className:"text-muted-foreground",children:"No"})}),n.jsx(it,{className:"text-sm text-muted-foreground",children:new Date(N.updated_at).toLocaleDateString()})]},N.user_id))})]})})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsx(ae,{children:n.jsx(ie,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:x.total_attempts}),n.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Total Attempts"})]})})}),n.jsx(ae,{children:n.jsx(ie,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"text-2xl font-bold text-yellow-600 flex items-center justify-center gap-1",children:[n.jsx(da,{className:"h-5 w-5"}),x.total_hints_revealed]}),n.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Total Hints Used"})]})})}),n.jsx(ae,{children:n.jsx(ie,{className:"pt-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-purple-600",children:x.solutions_revealed}),n.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Solutions Revealed"})]})})})]})]})})]})})]})},nse=()=>{const{examSetId:e}=Zl(),{user:t,loading:r}=Wt(),s=Gt(),{toast:a}=Ut(),[i,o]=p.useState(null),[l,c]=p.useState([]),[u,d]=p.useState(!1),[h,m]=p.useState(null),[f,x]=p.useState(!1);p.useEffect(()=>{!r&&!t&&s("/login")},[t,r,s]),p.useEffect(()=>{t&&e&&(g(),y())},[t,e]);const g=async()=>{try{const k=await pe.exam.getSet(e);o(k)}catch{a({variant:"destructive",title:"Error",description:"Failed to fetch exam set"})}},y=async()=>{try{d(!0);const k=await pe.teacher.getStudents((t==null?void 0:t.id)||""),N=k.map(E=>E.user_id);if(N.length===0){c([]);return}let{data:P,error:T}=await st.from("test_sessions").select("*").eq("exam_set_id",e).in("user_id",N).order("created_at",{ascending:!1});if((!P||P.length===0)&&i){const{data:E,error:M}=await st.from("test_sessions").select("*").eq("subject",i.subject).in("user_id",N).order("created_at",{ascending:!1});!M&&E&&E.length>0&&(P=E)}if(T)throw T;const A=await Promise.all((P||[]).map(async E=>{var I;const M=k.find(se=>se.user_id===E.user_id);return{...E,student_name:((I=M==null?void 0:M.profile)==null?void 0:I.full_name)||"Unknown",student_grade:(M==null?void 0:M.class_grade)||null}}));c(A)}catch(k){console.error("Error fetching submissions:",k),a({variant:"destructive",title:"Error",description:"Failed to fetch exam submissions"})}finally{d(!1)}},b=k=>{m(k),x(!0)},v=(k,N)=>!k||!N?0:Math.round(k/N*100);if(r)return n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-muted-foreground"})});const w=l.length>0?l.filter(k=>k.is_completed&&k.score!==null).reduce((k,N)=>k+(N.score||0),0)/l.filter(k=>k.is_completed&&k.score!==null).length:0,S=l.filter(k=>k.is_completed).length;return n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(Xn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs(z,{variant:"ghost",onClick:()=>s("/dashboard/teacher/view-content"),className:"mb-4",children:[n.jsx(uu,{className:"h-4 w-4 mr-2"}),"Back to Content"]}),n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Exam Submissions"}),i&&n.jsxs("p",{className:"text-muted-foreground",children:[i.subject.charAt(0).toUpperCase()+i.subject.slice(1)," ",i.year," - Student Submissions"]})]}),l.length>0&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[n.jsxs(ae,{children:[n.jsx(he,{className:"pb-2",children:n.jsx(ze,{children:"Total Submissions"})}),n.jsx(ie,{children:n.jsx("div",{className:"text-2xl font-bold",children:l.length})})]}),n.jsxs(ae,{children:[n.jsx(he,{className:"pb-2",children:n.jsx(ze,{children:"Completed"})}),n.jsx(ie,{children:n.jsx("div",{className:"text-2xl font-bold",children:S})})]}),n.jsxs(ae,{children:[n.jsx(he,{className:"pb-2",children:n.jsx(ze,{children:"Average Score"})}),n.jsx(ie,{children:n.jsx("div",{className:"text-2xl font-bold",children:w>0?`${w.toFixed(1)}%`:"N/A"})})]}),n.jsxs(ae,{children:[n.jsx(he,{className:"pb-2",children:n.jsx(ze,{children:"Completion Rate"})}),n.jsx(ie,{children:n.jsxs("div",{className:"text-2xl font-bold",children:[l.length>0?Math.round(S/l.length*100):0,"%"]})})]})]}),n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Student Submissions"}),n.jsx(ze,{children:"View all student submissions for this exam"})]}),n.jsx(ie,{children:u?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(Oe,{className:"h-6 w-6 animate-spin"})}):l.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No submissions found for this exam"}):n.jsxs(Cs,{children:[n.jsx(Es,{children:n.jsxs(Nr,{children:[n.jsx(mt,{children:"Student"}),n.jsx(mt,{children:"Grade"}),n.jsx(mt,{children:"Score"}),n.jsx(mt,{children:"Status"}),n.jsx(mt,{children:"Submitted"}),n.jsx(mt,{className:"text-right",children:"Actions"})]})}),n.jsx(Ts,{children:l.map(k=>n.jsxs(Nr,{children:[n.jsx(it,{className:"font-medium",children:k.student_name}),n.jsx(it,{children:k.student_grade?`Grade ${k.student_grade}`:"-"}),n.jsx(it,{children:k.is_completed&&k.score!==null?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"font-semibold",children:[k.score," / ",k.total_marks]}),n.jsxs(je,{variant:"outline",children:[v(k.score,k.total_marks),"%"]})]}):n.jsx("span",{className:"text-muted-foreground",children:"-"})}),n.jsx(it,{children:k.is_completed?n.jsxs(je,{variant:"default",className:"gap-1",children:[n.jsx(Qt,{className:"h-3 w-3"}),"Completed"]}):n.jsxs(je,{variant:"secondary",className:"gap-1",children:[n.jsx(Ur,{className:"h-3 w-3"}),"In Progress"]})}),n.jsx(it,{children:n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(As,{className:"h-4 w-4"}),new Date(k.created_at).toLocaleDateString()]})}),n.jsx(it,{className:"text-right",children:n.jsxs(z,{variant:"ghost",size:"sm",onClick:()=>b(k),children:[n.jsx(Kn,{className:"h-4 w-4 mr-1"}),"View Details"]})})]},k.id))})]})})]})]})}),n.jsx(un,{open:f,onOpenChange:x,children:n.jsxs(tn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(rn,{children:[n.jsx(nn,{children:"Submission Details"}),n.jsxs(xn,{children:[h==null?void 0:h.student_name,"'s exam submission"]})]}),h&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Student"}),n.jsx("p",{className:"text-lg font-semibold",children:h.student_name})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Score"}),n.jsx("p",{className:"text-lg font-semibold",children:h.is_completed&&h.score!==null?`${h.score} / ${h.total_marks} (${v(h.score,h.total_marks)}%)`:"Not completed"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Started"}),n.jsx("p",{className:"text-sm",children:new Date(h.start_time).toLocaleString()})]}),h.end_time&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Completed"}),n.jsx("p",{className:"text-sm",children:new Date(h.end_time).toLocaleString()})]})]}),h.answers&&Object.keys(h.answers).length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Answers"}),n.jsx("div",{className:"space-y-2",children:Object.entries(h.answers).map(([k,N])=>n.jsx(ae,{children:n.jsxs(ie,{className:"p-4",children:[n.jsxs("p",{className:"text-sm font-medium mb-1",children:["Question ",k]}),n.jsx("p",{className:"text-sm",children:N.answer||N})]})},k))})]})]})]})})]})},sse=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState([]),[o,l]=p.useState([]),[c,u]=p.useState(!1),[d,h]=p.useState(!1);p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{e&&(m(),f())},[e]);const m=async()=>{try{u(!0);const x=await pe.teacher.getQuizzes((e==null?void 0:e.id)||"");l(x||[])}catch(x){console.error("Error fetching quizzes:",x),s({variant:"destructive",title:"Error",description:x.message||"Failed to fetch quizzes"}),l([])}finally{u(!1)}},f=async()=>{try{h(!0);const x=await pe.teacher.getQuizSessions((e==null?void 0:e.id)||"");i(x||[])}catch(x){console.error("Error fetching quiz sessions:",x),s({variant:"destructive",title:"Error",description:x.message||"Failed to fetch quiz sessions"}),i([])}finally{h(!1)}};return t?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(Xn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[n.jsx(ua,{className:"h-8 w-8"}),"Quiz Management"]}),n.jsx("p",{className:"text-muted-foreground",children:"Create and manage quizzes, view student quiz sessions"})]}),n.jsxs(z,{onClick:()=>r("/dashboard/teacher/quizzes/create"),children:[n.jsx(_n,{className:"h-4 w-4 mr-2"}),"Create Quiz"]})]}),n.jsxs(Zs,{defaultValue:"quizzes",className:"space-y-4",children:[n.jsxs(Ps,{children:[n.jsxs(gr,{value:"quizzes",children:[n.jsx(Jt,{className:"h-4 w-4 mr-2"}),"My Quizzes (",o.length,")"]}),n.jsxs(gr,{value:"sessions",children:[n.jsx(vn,{className:"h-4 w-4 mr-2"}),"Quiz Sessions (",a.length,")"]})]}),n.jsx(Er,{value:"quizzes",className:"space-y-4",children:n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Created Quizzes"}),n.jsx(ze,{children:"Manage your quiz templates"})]}),n.jsx(ie,{children:c?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(Oe,{className:"h-6 w-6 animate-spin"})}):n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:o.length===0?n.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-12 text-center",children:[n.jsx(ua,{className:"h-12 w-12 mb-4 text-muted-foreground opacity-50"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"No quizzes created yet"}),n.jsxs(z,{onClick:()=>r("/dashboard/teacher/quizzes/create"),children:[n.jsx(_n,{className:"h-4 w-4 mr-2"}),"Create Your First Quiz"]})]}):o.map(x=>{var g;return n.jsxs(ae,{className:"relative",children:[n.jsx(he,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx(fe,{className:"text-lg mb-2",children:x.title}),n.jsx(ze,{className:"line-clamp-2",children:x.description||"No description"})]}),x.is_active?n.jsx(je,{variant:"default",className:"ml-2",children:"Active"}):n.jsx(je,{variant:"secondary",className:"ml-2",children:"Inactive"})]})}),n.jsxs(ie,{className:"space-y-3",children:[n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx(je,{variant:"outline",className:"capitalize",children:x.subject}),x.class_grade&&n.jsxs(je,{variant:"outline",children:["Grade ",x.class_grade]}),x.duration_minutes&&n.jsxs(je,{variant:"outline",children:[n.jsx(Ur,{className:"h-3 w-3 mr-1"}),x.duration_minutes," min"]}),x.total_marks&&n.jsxs(je,{variant:"outline",children:[x.total_marks," marks"]})]}),((g=x.quiz_data)==null?void 0:g.questions)&&n.jsxs("p",{className:"text-sm text-muted-foreground",children:[x.quiz_data.questions.length," question",x.quiz_data.questions.length!==1?"s":""]}),n.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[n.jsxs(z,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>r(`/dashboard/teacher/quizzes/${x.id}`),children:[n.jsx(Kn,{className:"h-4 w-4 mr-1"}),"View"]}),n.jsx(z,{variant:"outline",size:"sm",onClick:()=>r(`/dashboard/teacher/quizzes/edit/${x.id}`),children:n.jsx(Ll,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Created ",new Date(x.created_at).toLocaleDateString()]})]})]},x.id)})})})]})}),n.jsx(Er,{value:"sessions",className:"space-y-4",children:n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Quiz Sessions"}),n.jsx(ze,{children:"View all quiz attempts by your students"})]}),n.jsx(ie,{children:d?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(Oe,{className:"h-6 w-6 animate-spin"})}):n.jsxs(Cs,{children:[n.jsx(Es,{children:n.jsxs(Nr,{children:[n.jsx(mt,{children:"Student"}),n.jsx(mt,{children:"Subject"}),n.jsx(mt,{children:"Score"}),n.jsx(mt,{children:"Status"}),n.jsx(mt,{children:"Date"}),n.jsx(mt,{className:"text-right",children:"Actions"})]})}),n.jsx(Ts,{children:a.length===0?n.jsx(Nr,{children:n.jsx(it,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No quiz sessions found"})}):a.map(x=>n.jsxs(Nr,{children:[n.jsx(it,{className:"font-medium",children:x.student_name}),n.jsx(it,{children:n.jsx(je,{variant:"outline",className:"capitalize",children:x.subject})}),n.jsx(it,{children:x.is_completed&&x.score!==null?n.jsxs("span",{className:"font-semibold",children:[x.score," / ",x.total_marks]}):n.jsx("span",{className:"text-muted-foreground",children:"-"})}),n.jsx(it,{children:x.is_completed?n.jsxs(je,{variant:"default",className:"gap-1",children:[n.jsx(Qt,{className:"h-3 w-3"}),"Completed"]}):n.jsxs(je,{variant:"secondary",className:"gap-1",children:[n.jsx(Ur,{className:"h-3 w-3"}),"In Progress"]})}),n.jsx(it,{children:n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(As,{className:"h-4 w-4"}),new Date(x.created_at).toLocaleDateString()]})}),n.jsx(it,{className:"text-right",children:n.jsxs(z,{variant:"ghost",size:"sm",onClick:()=>r(`/dashboard/teacher/quizzes/session/${x.id}`),children:[n.jsx(Kn,{className:"h-4 w-4 mr-1"}),"View"]})})]},x.id))})]})})]})})]})]})})]})},ase=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState(""),[o,l]=p.useState("mathematics"),[c,u]=p.useState(""),[d,h]=p.useState(30),[m,f]=p.useState(12),[x,g]=p.useState([]),[y,b]=p.useState(!1);p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]);const v=()=>{const A={id:`q${Date.now()}`,question:"",marks:5,question_type:"short_answer",options:[],correct_answer:""};g([...x,A])},w=A=>{g(x.filter(E=>E.id!==A))},S=(A,E,M)=>{g(x.map(I=>I.id===A?{...I,[E]:M}:I))},k=A=>{g(x.map(E=>E.id===A?{...E,options:[...E.options||[],""]}:E))},N=(A,E,M)=>{g(x.map(I=>{if(I.id===A&&I.options){const se=[...I.options];return se[E]=M,{...I,options:se}}return I}))},P=(A,E)=>{g(x.map(M=>M.id===A&&M.options?{...M,options:M.options.filter((I,se)=>se!==E)}:M))},T=async()=>{if(!a.trim()){s({variant:"destructive",title:"Error",description:"Please enter a quiz title"});return}if(x.length===0){s({variant:"destructive",title:"Error",description:"Please add at least one question"});return}for(const A of x){if(!A.question.trim()){s({variant:"destructive",title:"Error",description:"All questions must have question text"});return}if(A.question_type==="mcq"&&(!A.options||A.options.length<2)){s({variant:"destructive",title:"Error",description:"MCQ questions must have at least 2 options"});return}}try{b(!0);const A=x.reduce((I,se)=>I+se.marks,0),E={questions:x.map((I,se)=>({id:I.id,question_number:se+1,question:I.question,question_type:I.question_type,marks:I.marks,options:I.options||[],correct_answer:I.correct_answer||""})),total_marks:A,duration_minutes:d},M=await pe.teacher.createQuiz({teacher_id:(e==null?void 0:e.id)||"",title:a.trim(),subject:o,description:c.trim()||void 0,quiz_data:E,duration_minutes:d,total_marks:A,class_grade:m,metadata:{}});s({title:"Quiz Created!",description:"Your quiz has been created successfully"}),r("/dashboard/teacher/quizzes")}catch(A){s({variant:"destructive",title:"Error",description:A.message||"Failed to create quiz"})}finally{b(!1)}};return t?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(Xn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[n.jsx(ua,{className:"h-8 w-8"}),"Create Quiz"]}),n.jsx("p",{className:"text-muted-foreground",children:"Create a new quiz for your students"})]}),n.jsxs(z,{variant:"outline",onClick:()=>r("/dashboard/teacher/quizzes"),children:[n.jsx(_s,{className:"h-4 w-4 mr-2"}),"Cancel"]})]}),n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Quiz Details"}),n.jsx(ze,{children:"Basic information about your quiz"})]}),n.jsxs(ie,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(be,{htmlFor:"title",children:"Quiz Title *"}),n.jsx(Ve,{id:"title",placeholder:"e.g., Chapter 5 Review Quiz",value:a,onChange:A=>i(A.target.value)})]}),n.jsxs("div",{children:[n.jsx(be,{htmlFor:"subject",children:"Subject *"}),n.jsxs(Nt,{value:o,onValueChange:l,children:[n.jsx(wt,{children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]})]}),n.jsxs("div",{children:[n.jsx(be,{htmlFor:"class-grade",children:"Class Grade"}),n.jsx(Ve,{id:"class-grade",type:"number",min:"6",max:"12",value:m,onChange:A=>f(parseInt(A.target.value)||12)})]}),n.jsxs("div",{children:[n.jsx(be,{htmlFor:"duration",children:"Duration (minutes)"}),n.jsx(Ve,{id:"duration",type:"number",min:"5",max:"180",value:d,onChange:A=>h(parseInt(A.target.value)||30)})]})]}),n.jsxs("div",{children:[n.jsx(be,{htmlFor:"description",children:"Description (optional)"}),n.jsx(kr,{id:"description",placeholder:"Brief description of the quiz...",value:c,onChange:A=>u(A.target.value),rows:3})]})]})]}),n.jsxs(ae,{children:[n.jsx(he,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(fe,{children:"Questions"}),n.jsxs(ze,{children:["Add questions to your quiz (",x.length," questions, ",x.reduce((A,E)=>A+E.marks,0)," total marks)"]})]}),n.jsxs(z,{onClick:v,children:[n.jsx(_n,{className:"h-4 w-4 mr-2"}),"Add Question"]})]})}),n.jsx(ie,{className:"space-y-4",children:x.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(ua,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No questions yet. Add your first question to get started."})]}):x.map((A,E)=>n.jsxs(ae,{className:"relative",children:[n.jsx(he,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(je,{variant:"outline",children:["Question ",E+1]}),n.jsxs(je,{variant:"secondary",children:[A.marks," marks"]}),n.jsx(je,{children:A.question_type})]}),n.jsx(z,{variant:"ghost",size:"sm",onClick:()=>w(A.id),children:n.jsx(Jl,{className:"h-4 w-4 text-destructive"})})]})}),n.jsxs(ie,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(be,{children:"Question Text *"}),n.jsx(kr,{placeholder:"Enter your question here...",value:A.question,onChange:M=>S(A.id,"question",M.target.value),rows:3})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(be,{children:"Question Type"}),n.jsxs(Nt,{value:A.question_type,onValueChange:M=>S(A.id,"question_type",M),children:[n.jsx(wt,{children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"mcq",children:"Multiple Choice"}),n.jsx(re,{value:"short_answer",children:"Short Answer"}),n.jsx(re,{value:"long_answer",children:"Long Answer"}),n.jsx(re,{value:"numerical",children:"Numerical"})]})]})]}),n.jsxs("div",{children:[n.jsx(be,{children:"Marks"}),n.jsx(Ve,{type:"number",min:"1",max:"20",value:A.marks,onChange:M=>S(A.id,"marks",parseInt(M.target.value)||1)})]})]}),A.question_type==="mcq"&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(be,{children:"Options"}),n.jsxs(z,{variant:"outline",size:"sm",onClick:()=>k(A.id),children:[n.jsx(_n,{className:"h-3 w-3 mr-1"}),"Add Option"]})]}),n.jsx("div",{className:"space-y-2",children:(A.options||[]).map((M,I)=>n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Ve,{placeholder:`Option ${String.fromCharCode(65+I)}`,value:M,onChange:se=>N(A.id,I,se.target.value)}),n.jsx(z,{variant:"ghost",size:"sm",onClick:()=>P(A.id,I),children:n.jsx(_s,{className:"h-4 w-4"})})]},I))})]}),n.jsxs("div",{children:[n.jsx(be,{children:"Correct Answer"}),n.jsx(Ve,{placeholder:"Enter the correct answer...",value:A.correct_answer||"",onChange:M=>S(A.id,"correct_answer",M.target.value)})]})]})]},A.id))})]}),n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx(z,{variant:"outline",onClick:()=>r("/dashboard/teacher/quizzes"),children:"Cancel"}),n.jsx(z,{onClick:T,disabled:y||x.length===0,children:y?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ti,{className:"h-4 w-4 mr-2"}),"Create Quiz"]})})]})]})})]})},ise=()=>{var h;const{quizId:e}=Zl(),{user:t,loading:r}=Wt(),s=Gt(),{toast:a}=Ut(),[i,o]=p.useState(null),[l,c]=p.useState(!0);p.useEffect(()=>{!r&&!t&&s("/login")},[t,r,s]),p.useEffect(()=>{t&&e&&u()},[t,e]);const u=async()=>{try{c(!0);const m=await pe.teacher.getQuiz(e,(t==null?void 0:t.id)||"");o(m)}catch(m){console.error("Error fetching quiz:",m),a({variant:"destructive",title:"Error",description:m.message||"Failed to fetch quiz"}),s("/dashboard/teacher/quizzes")}finally{c(!1)}};if(r||l)return n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(!i)return null;const d=((h=i.quiz_data)==null?void 0:h.questions)||[];return n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(Xn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs(z,{variant:"ghost",size:"sm",onClick:()=>s("/dashboard/teacher/quizzes"),children:[n.jsx(uu,{className:"h-4 w-4 mr-2"}),"Back"]}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[n.jsx(ua,{className:"h-8 w-8"}),i.title]}),n.jsx("p",{className:"text-muted-foreground",children:i.description||"No description provided"})]})]}),n.jsxs(z,{variant:"outline",onClick:()=>s(`/dashboard/teacher/quizzes/edit/${i.id}`),children:[n.jsx(Ll,{className:"h-4 w-4 mr-2"}),"Edit Quiz"]})]}),n.jsxs(ae,{children:[n.jsx(he,{children:n.jsx(fe,{children:"Quiz Information"})}),n.jsxs(ie,{children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Subject"}),n.jsx(je,{variant:"outline",className:"capitalize",children:i.subject})]}),i.class_grade&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Class Grade"}),n.jsxs(je,{variant:"outline",children:["Grade ",i.class_grade]})]}),i.duration_minutes&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Duration"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Ur,{className:"h-4 w-4"}),n.jsxs("span",{className:"font-medium",children:[i.duration_minutes," minutes"]})]})]}),i.total_marks&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Total Marks"}),n.jsxs("span",{className:"font-medium",children:[i.total_marks," marks"]})]})]}),n.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Status:"}),i.is_active?n.jsxs(je,{variant:"default",className:"gap-1",children:[n.jsx(Qt,{className:"h-3 w-3"}),"Active"]}):n.jsxs(je,{variant:"secondary",className:"gap-1",children:[n.jsx(Li,{className:"h-3 w-3"}),"Inactive"]})]}),n.jsxs("div",{className:"mt-2 text-sm text-muted-foreground",children:["Created: ",new Date(i.created_at).toLocaleDateString()]})]})]}),n.jsxs(ae,{children:[n.jsx(he,{children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsxs(fe,{children:["Questions (",d.length,")"]}),n.jsxs(ze,{children:["Total marks: ",i.total_marks||d.reduce((m,f)=>m+(f.marks||0),0)]})]})})}),n.jsx(ie,{className:"space-y-4",children:d.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(ua,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No questions in this quiz"})]}):d.map((m,f)=>n.jsxs(ae,{className:"relative",children:[n.jsx(he,{className:"pb-3",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(je,{variant:"outline",children:["Question ",f+1]}),n.jsxs(je,{variant:"secondary",children:[m.marks||0," marks"]}),n.jsx(je,{children:m.question_type||"short_answer"})]})})}),n.jsxs(ie,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium mb-2",children:"Question:"}),n.jsx("p",{className:"text-sm whitespace-pre-wrap bg-muted p-3 rounded-lg",children:m.question||"No question text"})]}),m.question_type==="mcq"&&m.options&&m.options.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium mb-2",children:"Options:"}),n.jsx("div",{className:"space-y-2",children:m.options.map((x,g)=>n.jsx("div",{className:`p-2 rounded border ${x===m.correct_answer?"bg-green-50 dark:bg-green-950 border-green-200 dark:border-green-800":"bg-muted"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"font-medium",children:[String.fromCharCode(65+g),"."]}),n.jsx("span",{className:"text-sm",children:x}),x===m.correct_answer&&n.jsx(Qt,{className:"h-4 w-4 text-green-600 ml-auto"})]})},g))})]}),m.correct_answer&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium mb-2",children:"Correct Answer:"}),n.jsx("div",{className:"bg-green-50 dark:bg-green-950 p-3 rounded-lg border border-green-200 dark:border-green-800",children:n.jsx("p",{className:"text-sm whitespace-pre-wrap",children:m.correct_answer})})]})]})]},m.id||f))})]}),n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx(z,{variant:"outline",onClick:()=>s("/dashboard/teacher/quizzes"),children:"Back to Quizzes"}),n.jsxs(z,{onClick:()=>s(`/dashboard/teacher/quizzes/edit/${i.id}`),children:[n.jsx(Ll,{className:"h-4 w-4 mr-2"}),"Edit Quiz"]})]})]})})]})},ose=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState([]),[o,l]=p.useState([]),[c,u]=p.useState(null),[d,h]=p.useState([]),[m,f]=p.useState(!0),[x,g]=p.useState(!1),[y,b]=p.useState(""),[v,w]=p.useState("all"),[S,k]=p.useState("all"),[N,P]=p.useState(!1),[T,A]=p.useState({total_sessions:0,active_sessions:0,total_messages:0,students_using_ai:0});p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{e!=null&&e.id&&E()},[e]),p.useEffect(()=>{M()},[a,y,v,S]);const E=async()=>{if(e!=null&&e.id)try{f(!0);const F=(await pe.aiTutoring.getTeacherStudentSessions({teacher_id:e.id,limit:100})).sessions||[];i(F);const ne=F.filter(V=>V.is_active).length,q=new Set(F.map(V=>V.user_id)).size;A({total_sessions:F.length,active_sessions:ne,total_messages:F.reduce((V,_)=>V+(_.message_count||0),0),students_using_ai:q})}catch(Y){console.error("Error fetching sessions:",Y),s({title:"Error",description:"Failed to load student AI tutor sessions",variant:"destructive"})}finally{f(!1)}},M=()=>{let Y=[...a];y&&(Y=Y.filter(F=>{var ne;return F.session_name.toLowerCase().includes(y.toLowerCase())||((ne=F.student_name)==null?void 0:ne.toLowerCase().includes(y.toLowerCase()))})),v!=="all"&&(Y=Y.filter(F=>F.subject===v)),S!=="all"&&(S==="active"?Y=Y.filter(F=>F.is_active):S==="inactive"&&(Y=Y.filter(F=>!F.is_active))),Y.sort((F,ne)=>new Date(ne.last_message_at||ne.created_at).getTime()-new Date(F.last_message_at||F.created_at).getTime()),l(Y)},I=async Y=>{u(Y),P(!0),g(!0);try{const F=await pe.aiTutoring.getSessionMessages(Y.id,50);h(F.messages||[])}catch{s({title:"Error",description:"Failed to load session messages",variant:"destructive"})}finally{g(!1)}},se=Y=>new Date(Y).toLocaleString(),ee=Y=>{const F=new Date(Y),q=new Date().getTime()-F.getTime(),V=Math.floor(q/6e4),_=Math.floor(q/36e5),U=Math.floor(q/864e5);return V<1?"Just now":V<60?`${V}m ago`:_<24?`${_}h ago`:U<7?`${U}d ago`:F.toLocaleDateString()};return t||m?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n.jsxs("div",{className:"flex min-h-screen bg-background",children:[n.jsx(Xn,{}),n.jsxs("div",{className:"flex-1 p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[n.jsx(Qn,{className:"h-8 w-8"}),"AI Tutor Monitoring"]}),n.jsx("p",{className:"text-muted-foreground mt-2",children:"Monitor and oversee student AI tutor sessions in your school"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs(ae,{children:[n.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(fe,{className:"text-sm font-medium",children:"Total Sessions"}),n.jsx(Fl,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ie,{children:[n.jsx("div",{className:"text-2xl font-bold",children:T.total_sessions}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"All time"})]})]}),n.jsxs(ae,{children:[n.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(fe,{className:"text-sm font-medium",children:"Active Sessions"}),n.jsx(Mn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ie,{children:[n.jsx("div",{className:"text-2xl font-bold",children:T.active_sessions}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active"})]})]}),n.jsxs(ae,{children:[n.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(fe,{className:"text-sm font-medium",children:"Total Messages"}),n.jsx(Fi,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ie,{children:[n.jsx("div",{className:"text-2xl font-bold",children:T.total_messages}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"All conversations"})]})]}),n.jsxs(ae,{children:[n.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(fe,{className:"text-sm font-medium",children:"Students Using AI"}),n.jsx(vn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(ie,{children:[n.jsx("div",{className:"text-2xl font-bold",children:T.students_using_ai}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique students"})]})]})]}),n.jsxs(ae,{children:[n.jsx(he,{children:n.jsx(fe,{children:"Filters"})}),n.jsx(ie,{children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(zi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(Ve,{placeholder:"Search by student name or session name...",value:y,onChange:Y=>b(Y.target.value),className:"pl-10"})]})}),n.jsxs(Nt,{value:v,onValueChange:w,children:[n.jsx(wt,{className:"w-[180px]",children:n.jsx(St,{placeholder:"Subject"})}),n.jsxs(jt,{children:[n.jsx(re,{value:"all",children:"All Subjects"}),n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]}),n.jsxs(Nt,{value:S,onValueChange:k,children:[n.jsx(wt,{className:"w-[180px]",children:n.jsx(St,{placeholder:"Status"})}),n.jsxs(jt,{children:[n.jsx(re,{value:"all",children:"All Status"}),n.jsx(re,{value:"active",children:"Active"}),n.jsx(re,{value:"inactive",children:"Inactive"})]})]})]})})]}),n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Student AI Tutor Sessions"}),n.jsxs(ze,{children:[o.length," session",o.length!==1?"s":""," found"]})]}),n.jsx(ie,{children:o.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No sessions found. Students will appear here when they start using the AI tutor."}):n.jsx(Pn,{className:"h-[600px]",children:n.jsx("div",{className:"space-y-4",children:o.map(Y=>n.jsx(ae,{className:qe("cursor-pointer hover:bg-accent transition-colors",(c==null?void 0:c.id)===Y.id&&"border-primary"),onClick:()=>I(Y),children:n.jsx(ie,{className:"p-4",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h3",{className:"font-semibold",children:Y.session_name}),Y.is_active&&n.jsxs(je,{variant:"default",className:"text-xs",children:[n.jsx(Qt,{className:"h-3 w-3 mr-1"}),"Active"]}),Y.subject&&n.jsx(je,{variant:"outline",className:"text-xs",children:Y.subject})]}),n.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[Y.student_name&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(vn,{className:"h-3 w-3"}),n.jsx("span",{children:Y.student_name}),Y.student_grade&&n.jsxs("span",{className:"text-xs",children:["(Grade ",Y.student_grade,")"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Fl,{className:"h-3 w-3"}),n.jsxs("span",{children:[Y.message_count||0," messages"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ur,{className:"h-3 w-3"}),n.jsxs("span",{children:["Last activity: ",ee(Y.last_message_at||Y.created_at)]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(As,{className:"h-3 w-3"}),n.jsxs("span",{children:["Started: ",se(Y.started_at)]})]})]})]}),n.jsxs(z,{variant:"outline",size:"sm",onClick:F=>{F.stopPropagation(),I(Y)},children:[n.jsx(Kn,{className:"h-4 w-4 mr-2"}),"View"]})]})})},Y.id))})})})]}),n.jsx(un,{open:N,onOpenChange:P,children:n.jsxs(tn,{className:"max-w-4xl max-h-[80vh]",children:[n.jsxs(rn,{children:[n.jsxs(nn,{children:["Session Details: ",c==null?void 0:c.session_name]}),n.jsxs(xn,{children:[(c==null?void 0:c.student_name)&&n.jsxs("span",{children:["Student: ",c.student_name]}),(c==null?void 0:c.subject)&&n.jsxs("span",{className:"ml-4",children:["Subject: ",c.subject]})]})]}),n.jsx(Pn,{className:"h-[500px] pr-4",children:x?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(Oe,{className:"h-6 w-6 animate-spin"})}):d.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No messages in this session"}):n.jsx("div",{className:"space-y-4",children:d.map(Y=>n.jsxs("div",{className:qe("flex gap-3",Y.role==="student"?"justify-end":"justify-start"),children:[Y.role==="assistant"&&n.jsx(an,{className:"h-8 w-8",children:n.jsx(on,{className:"bg-primary text-primary-foreground",children:n.jsx(Qn,{className:"h-4 w-4"})})}),n.jsxs("div",{className:qe("rounded-lg px-4 py-2 max-w-[80%]",Y.role==="student"?"bg-primary text-primary-foreground":"bg-muted"),children:[n.jsx("p",{className:"text-sm whitespace-pre-wrap",children:Y.content}),n.jsx("p",{className:"text-xs opacity-70 mt-1",children:se(Y.created_at)})]}),Y.role==="student"&&n.jsx(an,{className:"h-8 w-8",children:n.jsx(on,{className:"bg-secondary",children:n.jsx(vn,{className:"h-4 w-4"})})})]},Y.id))})})]})})]})]})},lse=Aw,cse=Pw,use=Rw,DA=p.forwardRef(({className:e,...t},r)=>n.jsx(Gh,{className:qe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));DA.displayName=Gh.displayName;const dse=Iu("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),FA=p.forwardRef(({side:e="right",className:t,children:r,...s},a)=>n.jsxs(use,{children:[n.jsx(DA,{}),n.jsxs(Qh,{ref:a,className:qe(dse({side:e}),t),...s,children:[r,n.jsxs(Lp,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[n.jsx(_s,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));FA.displayName=Qh.displayName;const LA=({className:e,...t})=>n.jsx("div",{className:qe("flex flex-col space-y-2 text-center sm:text-left",e),...t});LA.displayName="SheetHeader";const zA=p.forwardRef(({className:e,...t},r)=>n.jsx(Yh,{ref:r,className:qe("text-lg font-semibold text-foreground",e),...t}));zA.displayName=Yh.displayName;const $A=p.forwardRef(({className:e,...t},r)=>n.jsx(Kh,{ref:r,className:qe("text-sm text-muted-foreground",e),...t}));$A.displayName=Kh.displayName;var q1={exports:{}},Cg={exports:{}},Eg,YN;function hse(){if(YN)return Eg;YN=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Eg=e,Eg}var Tg,KN;function mse(){if(KN)return Tg;KN=1;var e=hse();function t(){}function r(){}return r.resetWarningCache=t,Tg=function(){function s(o,l,c,u,d,h){if(h!==e){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}s.isRequired=s;function a(){return s}var i={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:a,element:s,elementType:s,instanceOf:a,node:s,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},Tg}var JN;function fse(){return JN||(JN=1,Cg.exports=mse()()),Cg.exports}const pse=o3(VX);(function(e,t){(function(r,s){s(t,p,fse(),pse)})(Ld,function(r,s,a,i){Object.defineProperty(r,"__esModule",{value:!0});function o(y,b){for(var v in b)Object.defineProperty(y,v,{enumerable:!0,get:b[v]})}o(r,{BlockMath:()=>x,InlineMath:()=>g}),s=u(s),a=l(a),i=l(i);function l(y){return y&&y.__esModule?y:{default:y}}function c(y){if(typeof WeakMap!="function")return null;var b=new WeakMap,v=new WeakMap;return(c=function(w){return w?v:b})(y)}function u(y,b){if(y&&y.__esModule)return y;if(y===null||typeof y!="object"&&typeof y!="function")return{default:y};var v=c(b);if(v&&v.has(y))return v.get(y);var w={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in y)if(k!=="default"&&Object.prototype.hasOwnProperty.call(y,k)){var N=S?Object.getOwnPropertyDescriptor(y,k):null;N&&(N.get||N.set)?Object.defineProperty(w,k,N):w[k]=y[k]}return w.default=y,v&&v.set(y,w),w}const d=(y,{displayMode:b})=>{const v=({children:w,errorColor:S,math:k,renderError:N})=>{const P=k??w,{html:T,error:A}=(0,s.useMemo)(()=>{try{return{html:i.default.renderToString(P,{displayMode:b,errorColor:S,throwOnError:!!N}),error:void 0}}catch(E){if(E instanceof i.default.ParseError||E instanceof TypeError)return{error:E};throw E}},[P,S,N]);return A?N?N(A):s.default.createElement(y,{html:`${A.message}`}):s.default.createElement(y,{html:T})};return v.propTypes={children:a.default.string,errorColor:a.default.string,math:a.default.string,renderError:a.default.func},v},h={html:a.default.string.isRequired},m=({html:y})=>s.default.createElement("div",{"data-testid":"react-katex",dangerouslySetInnerHTML:{__html:y}});m.propTypes=h;const f=({html:y})=>s.default.createElement("span",{"data-testid":"react-katex",dangerouslySetInnerHTML:{__html:y}});f.propTypes=h;const x=d(m,{displayMode:!0}),g=d(f,{displayMode:!1})})})(q1,q1.exports);var B1=q1.exports;const xse=({content:e})=>{const t=a=>{const i=[];let o=0;const l=/\$\$([^$]+)\$\$/g;let c;const u=[];for(;(c=l.exec(a))!==null;)u.push({start:c.index,end:c.index+c[0].length,formula:c[1].trim()});if(u.forEach((d,h)=>{if(d.start>o){const m=a.substring(o,d.start);i.push(n.jsx(tr,{remarkPlugins:[rr],components:{p:({children:f})=>n.jsx("p",{className:"mb-2 last:mb-0",children:s(String(f))}),ul:({children:f})=>n.jsx("ul",{className:"list-disc list-inside mb-2 space-y-1",children:f}),ol:({children:f})=>n.jsx("ol",{className:"list-decimal list-inside mb-2 space-y-1",children:f}),li:({children:f})=>n.jsx("li",{className:"ml-2",children:s(String(f))}),code:({className:f,children:x,...g})=>/language-(\w+)/.exec(f||"")?n.jsx("code",{className:f,...g,children:x}):n.jsx("code",{className:"bg-muted px-1.5 py-0.5 rounded text-sm font-mono",...g,children:x}),pre:({children:f})=>n.jsx("pre",{className:"bg-muted p-3 rounded-lg overflow-x-auto mb-2",children:f}),strong:({children:f})=>n.jsx("strong",{className:"font-semibold",children:s(f)}),em:({children:f})=>n.jsx("em",{className:"italic",children:s(f)}),h1:({children:f})=>n.jsx("h1",{className:"text-lg font-semibold mt-4 mb-2",children:s(f)}),h2:({children:f})=>n.jsx("h2",{className:"text-base font-semibold mt-3 mb-2",children:s(f)}),h3:({children:f})=>n.jsx("h3",{className:"text-sm font-semibold mt-2 mb-1",children:s(f)}),blockquote:({children:f})=>n.jsx("blockquote",{className:"border-l-4 border-primary/50 pl-4 italic my-2",children:s(f)}),a:({children:f,href:x})=>n.jsx("a",{href:x,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:f})},children:m},`text-${h}`))}i.push(n.jsx("div",{className:"my-3 text-center",children:n.jsx(B1.BlockMath,{math:d.formula})},`block-${h}`)),o=d.end}),o<a.length){const d=a.substring(o);i.push(n.jsx(tr,{remarkPlugins:[rr],components:{p:({children:h})=>n.jsx("p",{className:"mb-2 last:mb-0",children:s(h)}),ul:({children:h})=>n.jsx("ul",{className:"list-disc list-inside mb-2 space-y-1",children:h}),ol:({children:h})=>n.jsx("ol",{className:"list-decimal list-inside mb-2 space-y-1",children:h}),li:({children:h})=>n.jsx("li",{className:"ml-2",children:s(h)}),code:({className:h,children:m,...f})=>/language-(\w+)/.exec(h||"")?n.jsx("code",{className:h,...f,children:m}):n.jsx("code",{className:"bg-muted px-1.5 py-0.5 rounded text-sm font-mono",...f,children:m}),pre:({children:h})=>n.jsx("pre",{className:"bg-muted p-3 rounded-lg overflow-x-auto mb-2",children:h}),strong:({children:h})=>n.jsx("strong",{className:"font-semibold",children:s(h)}),em:({children:h})=>n.jsx("em",{className:"italic",children:s(h)}),h1:({children:h})=>n.jsx("h1",{className:"text-lg font-semibold mt-4 mb-2",children:s(h)}),h2:({children:h})=>n.jsx("h2",{className:"text-base font-semibold mt-3 mb-2",children:s(h)}),h3:({children:h})=>n.jsx("h3",{className:"text-sm font-semibold mt-2 mb-1",children:s(h)}),blockquote:({children:h})=>n.jsx("blockquote",{className:"border-l-4 border-primary/50 pl-4 italic my-2",children:s(h)}),a:({children:h,href:m})=>n.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:h})},children:d},"text-final"))}return i.length>0?i:[n.jsx(tr,{remarkPlugins:[rr],children:a},"default")]},r=a=>{var i;if(typeof a=="string")return a;if(typeof a=="number"||typeof a=="boolean")return String(a);if(a==null)return"";if(Array.isArray(a))return a.map(r).join("");if(a&&typeof a=="object"){if("props"in a)return r(((i=a.props)==null?void 0:i.children)||"");const o=a;if(o.text)return String(o.text);if(o.content)return String(o.content);if(o.description)return String(o.description);if(o.name)return String(o.name);try{const l=JSON.stringify(o);return l.length>200?"":l}catch{return""}}return""},s=a=>r(a).split(/(\$[^$\n]+\$)/g).map((l,c)=>l.startsWith("$")&&l.endsWith("$")&&!l.includes(`
`)?n.jsx(B1.InlineMath,{math:l.slice(1,-1).trim()},c):n.jsx("span",{children:l},c));return n.jsx("div",{children:t(e)})};function gse({userId:e,defaultSubject:t="mathematics"}){const[r,s]=p.useState([]),[a,i]=p.useState(""),[o,l]=p.useState(!1),[c,u]=p.useState(t),[d,h]=p.useState(!1),[m,f]=p.useState(null),[x,g]=p.useState({}),[y,b]=p.useState({}),[v,w]=p.useState(!1),[S,k]=p.useState(null),[N,P]=p.useState({}),[T,A]=p.useState({}),[E,M]=p.useState(null),[I,se]=p.useState({}),[ee,Y]=p.useState({}),F=p.useRef(null),ne=p.useRef(null),{toast:q}=Ut(),V=L=>{if(L==null)return"";if(typeof L=="string")return L;if(typeof L=="object"){if(L.text)return String(L.text);if(L.content)return String(L.content);if(L.description)return String(L.description);try{return JSON.stringify(L)}catch{return String(L)}}return String(L)};p.useEffect(()=>{s([{id:"welcome",role:"assistant",content:`Hello! I'm your AI tutor powered by Gemini AI and Wolfram Alpha. I can help you:

 Understand concepts with detailed explanations
 Solve math problems with step-by-step solutions
 Connect ideas across different topics
 Learn through examples and practice

Ask me anything about your subjects - I'm here to teach, not just answer!`,timestamp:new Date,suggestedActions:["Save"]}])},[]),p.useEffect(()=>{setTimeout(()=>{F.current&&F.current.scrollIntoView({behavior:"smooth",block:"end"})},100)},[r]),p.useEffect(()=>{setTimeout(()=>{F.current&&F.current.scrollIntoView({behavior:"smooth",block:"end"})},100)},[x,y]);const _=async()=>{var $,Ne,dt,zt,ue,G,ye;if(!a.trim()||o)return;const L={id:Date.now().toString(),role:"user",content:a,subject:c,timestamp:new Date};s(Me=>[...Me,L]);const ke=a;i(""),l(!0);const ot=(Date.now()+1).toString(),ct={id:ot,role:"assistant",content:"",subject:c,timestamp:new Date};s(Me=>[...Me,ct]),k(ot);try{const Me=r.slice(-3).map(ht=>`${ht.role==="user"?"Student":"AI"}: ${ht.content}`).join(`
`),De=await pe.aiTutoring.answerQuestion({user_id:e,question:ke,subject:c,context:Me||void 0});let He=V(($=De.answer)==null?void 0:$.answer)||V((Ne=De.answer)==null?void 0:Ne.explanation)||"I apologize, but I couldn't generate a response. Please try again.";if((dt=De.answer)!=null&&dt.step_by_step)if(Array.isArray(De.answer.step_by_step)&&De.answer.step_by_step.length>0){const ht=De.answer.step_by_step.length;He=`${He}

 I've provided a ${ht}-step solution below to help you understand the process.`}else typeof De.answer.step_by_step=="string"&&(He=`${He}

 I've provided a step-by-step solution below to help you understand the process.`);if(He){const ht=He.split(" ");let Ye="";for(let lt=0;lt<ht.length;lt++)Ye+=(lt>0?" ":"")+ht[lt],s(xt=>xt.map(Et=>Et.id===ot?{...Et,content:Ye}:Et)),await new Promise(xt=>setTimeout(xt,30))}if(m&&m!=="en"&&He)try{He=(await pe.translation.translate({text:He,target_language:m,source_language:"en"})).translated_text,s(Ye=>Ye.map(lt=>lt.id===ot?{...lt,content:He}:lt))}catch(ht){console.error("Translation failed:",ht)}const ve=ht=>{if(!ht)return;const Ye={...ht};return Ye.step_by_step&&!Array.isArray(Ye.step_by_step)&&(Ye.step_by_step=Ye.step_by_step),Ye.examples&&!Array.isArray(Ye.examples)&&(Ye.examples=typeof Ye.examples=="string"?[Ye.examples]:Array.isArray(Ye.examples)?Ye.examples:[]),Ye.practice_suggestions&&!Array.isArray(Ye.practice_suggestions)&&(Ye.practice_suggestions=typeof Ye.practice_suggestions=="string"?[Ye.practice_suggestions]:Array.isArray(Ye.practice_suggestions)?Ye.practice_suggestions:[]),Ye.common_mistakes&&!Array.isArray(Ye.common_mistakes)&&(Ye.common_mistakes=typeof Ye.common_mistakes=="string"?[Ye.common_mistakes]:Array.isArray(Ye.common_mistakes)?Ye.common_mistakes:[]),Ye.connections&&!Array.isArray(Ye.connections)&&(Ye.connections=typeof Ye.connections=="string"?[Ye.connections]:Array.isArray(Ye.connections)?Ye.connections:[]),Ye.teaching_tips&&!Array.isArray(Ye.teaching_tips)&&(Ye.teaching_tips=Ye.teaching_tips),Ye};let Be=[];const pt=async()=>{var ht,Ye;try{const lt=await pe.aiTutoring.answerQuestion({user_id:e,question:`Analyze this educational content and suggest which action buttons would be most useful. Available actions: "Fetch Formulas", "Create Flashcards", "Create Notes", "Save", "Download", "Generate MCQ".

Respond with ONLY a JSON array like: ["Fetch Formulas", "Create Flashcards", "Save"]. Choose 2-4 most relevant actions.

Content preview:
${He.substring(0,300)}`,subject:c,context:"Return JSON array of action names only, no other text."}),xt=((ht=lt.answer)==null?void 0:ht.answer)||((Ye=lt.answer)==null?void 0:Ye.explanation)||"",Et=xt.match(/\[.*?\]/);if(Et)try{Be=JSON.parse(Et[0])}catch{Be=["Fetch Formulas","Create Flashcards","Create Notes","Save","Download","Generate MCQ"].filter(dr=>xt.toLowerCase().includes(dr.toLowerCase().substring(0,10)))}}catch(lt){console.error("Error getting suggested actions:",lt)}},gt=He.toLowerCase(),Ft=gt.includes("formula")||gt.includes("equation")||gt.match(/[a-z]\s*=\s*[a-z]/)||gt.includes("solve"),ge=gt.includes("concept")||gt.includes("definition")||gt.includes("term")||gt.includes("meaning"),J=He.length>200,Ae=gt.includes("question")||gt.includes("problem")||gt.includes("example")||((zt=De.answer)==null?void 0:zt.step_by_step);Ft&&Be.push("Fetch Formulas"),ge&&Be.push("Create Flashcards"),J&&Be.push("Create Notes"),Ae&&Be.push("Generate MCQ"),Be.push("Save","Download"),pt().then(()=>{Be.length>0&&s(ht=>ht.map(Ye=>Ye.id===ot?{...Ye,suggestedActions:Be}:Ye))}).catch(()=>{});let Fe=[],Pe=0;if(De.sources&&Array.isArray(De.sources)?(Fe=De.sources,Pe=De.sources.length):(ue=De.metadata)!=null&&ue.sources&&Array.isArray(De.metadata.sources)?(Fe=De.metadata.sources,Pe=De.metadata.sources.length):(G=De.metadata)!=null&&G.chunks_retrieved&&(Pe=De.metadata.chunks_retrieved),He){const ht=He.match(/Based on (\d+) relevant content section/i);if(ht){const xt=parseInt(ht[1],10);xt>Pe&&(Pe=xt)}const Ye=[];if(He.split(`
`).forEach((xt,Et)=>{const Zt=xt.trim(),dr=/^(\w+)\s*-\s*([^-]+)$/i,pr=Zt.match(dr);if(pr){const[,nr,Lt]=pr;nr.length>=3&&Lt.trim().length>=3&&Ye.push(Zt)}}),Ye.length>0){const xt=new Map;Ye.forEach(Et=>{const Zt=Et.split(/\s*-\s*/);if(Zt.length>=2){const dr=Zt[0].trim().toLowerCase(),pr=Zt.slice(1).join(" - ").trim();if(dr.length>2&&pr.length>2){const nr=`${dr}-${pr}`;if(!xt.has(nr))xt.set(nr,{type:dr,chapter:pr});else{const Lt=xt.get(nr)}}}}),xt.size>0&&(Fe=Array.from(xt.values()),Pe||(Pe=Fe.length))}Ye.length>0&&(He=He.split(`
`).filter(xt=>{const Et=xt.trim(),Zt=/^(\w+)\s*-\s*([^-]+)$/i.test(Et),dr=/^Sources?:\s*$/i.test(Et);return!Zt&&!dr}).join(`
`).trim(),He=He.replace(/^\s*Based on \d+ relevant content sections? from the curriculum\.?\s*$/gmi,"").trim())}s(ht=>ht.map(Ye=>Ye.id===ot?{...Ye,content:He||Ye.content,answerData:ve(De.answer),wolframUsed:De.wolfram_used||!1,wolframResult:De.wolfram_result||void 0,suggestedActions:Be,sources:Fe.length>0?Fe:void 0,sourcesCount:Pe>0?Pe:void 0}:Ye));const Ie=ve(De.answer);Ie!=null&&Ie.step_by_step&&Array.isArray(Ie.step_by_step)&&Ie.step_by_step.length>0&&(g(ht=>({...ht,[ot]:0})),b(ht=>({...ht,[ot]:!1})))}catch(Me){q({title:"Error",description:Me.message||"Failed to get answer. Please try again.",variant:"destructive"}),s(De=>De.map(He=>He.id===ot?{...He,content:"I apologize, but I encountered an error. Please try rephrasing your question."}:He))}finally{l(!1),k(null),(ye=ne.current)==null||ye.focus()}},U=L=>{L.key==="Enter"&&!L.shiftKey&&(L.preventDefault(),_())},H=async()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){q({title:"Not supported",description:"Voice input is not supported in your browser",variant:"destructive"});return}h(!0);const L=window.webkitSpeechRecognition||window.SpeechRecognition,ke=new L;ke.continuous=!1,ke.interimResults=!1,ke.lang="en-US",ke.onresult=ot=>{var $;const ct=ot.results[0][0].transcript;i(ct),h(!1),($=ne.current)==null||$.focus()},ke.onerror=()=>{h(!1),q({title:"Error",description:"Voice recognition failed. Please try again.",variant:"destructive"})},ke.onend=()=>{h(!1)},ke.start()},O=async()=>{if(a.trim())try{const L=await pe.translation.detectLanguage(a);if(L.detected_language!=="en"){const ke=await pe.translation.translate({text:a,target_language:"en",source_language:L.detected_language});i(ke.translated_text),q({title:"Translated",description:`Translated from ${L.detected_language.toUpperCase()}`})}else q({title:"Already in English",description:"Your text is already in English"})}catch(L){q({title:"Translation failed",description:L.message||"Could not translate input",variant:"destructive"})}},B=async L=>{try{if(L.length===0){q({title:"No Formulas Found",description:"No formulas available to copy.",variant:"default"});return}const ke=L.map(($,Ne)=>{let dt=`
${"=".repeat(60)}
`;return dt+=`${Ne+1}. ${$.name||`Formula ${Ne+1}`}`,$.type&&(dt+=` (${$.type})`),dt+=`
${"=".repeat(60)}
`,$.formula&&(dt+=`
Formula: ${$.formula}`),$.wolfram_query&&(dt+=`

Wolfram Alpha Query:
${$.wolfram_query}`),$.description&&(dt+=`

Description: ${$.description}`),dt}).join(`

`),ct=`FORMULAS EXTRACTED
${"=".repeat(60)}
`+ke;await navigator.clipboard.writeText(ct),q({title:"Formulas Copied!",description:`${L.length} formula(s) copied to clipboard with Wolfram Alpha queries.`,variant:"default"})}catch(ke){q({title:"Error",description:ke.message||"Failed to copy formulas",variant:"destructive"})}},W=async L=>{var ke,ot,ct;try{l(!0);const $=await pe.aiTutoring.answerQuestion({user_id:e,question:`You are a specialized mathematical content extractor. Extract ALL important mathematical formulas, equations, problems, and scientific content from this content and format them EXACTLY as they should be used with Wolfram Alpha.

Content:
${L.content}

${(ke=L.answerData)!=null&&ke.step_by_step?`
Step-by-step solution:
${JSON.stringify(L.answerData.step_by_step)}`:""}

CRITICAL: Format ALL formulas and equations EXACTLY as Wolfram Alpha expects them. Use proper Wolfram Alpha syntax.

WOLFRAM ALPHA FORMATTING RULES:
- Use * for multiplication (e.g., 2*x not 2x)
- Use ^ for exponentiation (e.g., x^2 not x)
- Use proper function names: sin, cos, tan, log, ln, exp, sqrt
- Use parentheses for clarity: (2*x + 3) not 2x + 3
- For integrals: "integrate x^2, x" or " x^2 dx"
- For derivatives: "d/dx(x^2)" or "derivative of x^2"
- For solving: "solve x^2 + 5*x + 6 = 0"
- For plots: "plot sin(x), x from -pi to pi"

Return ONLY a JSON array with this EXACT format (no markdown, just JSON):
[
  {
    "name": "Formula name or description",
    "formula": "Mathematical formula in standard notation (e.g., E = mc)",
    "wolfram_query": "Exact query formatted for Wolfram Alpha (e.g., E = m*c^2)",
    "type": "formula|equation|calculation|derivative|integral|plot",
    "description": "Brief description"
  }
]

IMPORTANT: The "wolfram_query" field MUST be formatted exactly as it should be entered into Wolfram Alpha - copy-paste ready. Return ONLY the JSON array, no other text.`,subject:c,context:"Extract formulas and format them for Wolfram Alpha with wolfram_query field ready to use."});let Ne=[];const dt=((ot=$.answer)==null?void 0:ot.answer)||((ct=$.answer)==null?void 0:ct.explanation)||"",zt=dt.match(/\[[\s\S]*\]/);if(zt)try{Ne=JSON.parse(zt[0])}catch(ye){console.error("Failed to parse formulas JSON:",ye),Ne=K(dt)}else Ne=K(dt);const ue=await Promise.all(Ne.map(async ye=>{var Me,De;try{const He=ye.wolfram_query||`plot ${ye.formula}`;if(ye.type==="plot"||!ye.wolfram_query){const ve=await pe.aiTutoring.answerQuestion({user_id:e,question:He,subject:c,context:"Get graph visualization"});if((Me=ve.answer)!=null&&Me.visual_aids&&Array.isArray(ve.answer.visual_aids)){const Be=(De=ve.answer.visual_aids[0])==null?void 0:De.url;if(Be)return{...ye,graphUrl:Be}}}}catch(He){console.error("Failed to get Wolfram graph:",He)}return ye})),G={id:Date.now().toString(),role:"assistant",content:`##  Formulas Extracted (${ue.length} formulas)

All formulas have been extracted and displayed below with visualizations.`,subject:c,timestamp:new Date,formulas:ue};s(ye=>[...ye,G]),q({title:"Formulas Extracted",description:`${ue.length} formulas extracted with graphs`})}catch($){q({title:"Error",description:$.message||"Failed to extract formulas",variant:"destructive"})}finally{l(!1)}},K=L=>{const ke=[],ot=L.match(/\$\$?([^$]+)\$\$?/g);return ot&&ot.forEach((ct,$)=>{const Ne=ct.replace(/\$/g,"").trim();Ne&&ke.push({name:`Formula ${$+1}`,formula:Ne,description:""})}),ke},X=async L=>{var ke,ot,ct;try{l(!0);const $=await pe.aiTutoring.answerQuestion({user_id:e,question:`Create flashcards (question-answer pairs) from this content. Format as:

Q: [Question]
A: [Answer]

Content:
${L.content}

${(ke=L.answerData)!=null&&ke.step_by_step?JSON.stringify(L.answerData.step_by_step):""}`,subject:c,context:"Create concise flashcards with clear questions and answers."}),Ne={id:Date.now().toString(),role:"assistant",content:`##  Flashcards Created:

${((ot=$.answer)==null?void 0:ot.answer)||((ct=$.answer)==null?void 0:ct.explanation)||"Flashcards generated."}`,subject:c,timestamp:new Date};s(dt=>[...dt,Ne]),q({title:"Flashcards Created",description:"Flashcards have been generated successfully"})}catch($){q({title:"Error",description:$.message||"Failed to create flashcards",variant:"destructive"})}finally{l(!1)}},de=async L=>{var ke,ot;try{l(!0);const ct=await pe.aiTutoring.answerQuestion({user_id:e,question:`Create well-organized study notes from this content. Include:
- Key concepts
- Important points
- Examples
- Summary

Content:
${L.content}

${L.answerData?JSON.stringify(L.answerData):""}`,subject:c,context:"Create comprehensive, well-structured study notes."}),$={id:Date.now().toString(),role:"assistant",content:`##  Study Notes Created:

${((ke=ct.answer)==null?void 0:ke.answer)||((ot=ct.answer)==null?void 0:ot.explanation)||"Notes generated."}`,subject:c,timestamp:new Date};s(Ne=>[...Ne,$]),q({title:"Notes Created",description:"Study notes have been generated successfully"})}catch(ct){q({title:"Error",description:ct.message||"Failed to create notes",variant:"destructive"})}finally{l(!1)}},oe=async L=>{try{const ke=JSON.parse(localStorage.getItem("saved_responses")||"[]"),ot={id:L.id,content:L.content,answerData:L.answerData,subject:L.subject,timestamp:L.timestamp,savedAt:new Date().toISOString()},ct=ke.findIndex($=>$.id===L.id);ct>=0?ke[ct]=ot:ke.push(ot),localStorage.setItem("saved_responses",JSON.stringify(ke)),Ct(),q({title:"Response Saved",description:"This response has been saved successfully"})}catch(ke){q({title:"Error",description:ke.message||"Failed to save response",variant:"destructive"})}},me=L=>{try{let ke=`# AI Tutor Response

`;ke+=`**Subject:** ${L.subject||"General"}
`,ke+=`**Date:** ${L.timestamp.toLocaleString()}

`,ke+=`---

`,ke+=`${L.content}

`,L.answerData&&(L.answerData.explanation&&(ke+=`## Explanation

${L.answerData.explanation}

`),L.answerData.examples&&Array.isArray(L.answerData.examples)&&(ke+=`## Examples

${L.answerData.examples.map(Ne=>`- ${typeof Ne=="string"?Ne:JSON.stringify(Ne)}`).join(`
`)}

`),L.answerData.step_by_step&&Array.isArray(L.answerData.step_by_step)&&(ke+=`## Step-by-Step Solution

${L.answerData.step_by_step.map((Ne,dt)=>`### Step ${dt+1}
${Ne.description||Ne.step||""}
${Ne.content||Ne.reasoning||""}
`).join(`
`)}

`),L.answerData.practice_suggestions&&Array.isArray(L.answerData.practice_suggestions)&&(ke+=`## Practice Suggestions

${L.answerData.practice_suggestions.map(Ne=>`- ${typeof Ne=="string"?Ne:JSON.stringify(Ne)}`).join(`
`)}

`));const ot=new Blob([ke],{type:"text/markdown"}),ct=URL.createObjectURL(ot),$=document.createElement("a");$.href=ct,$.download=`ai-tutor-response-${L.id}.md`,document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(ct),q({title:"Download Started",description:"Response has been downloaded as markdown file"})}catch(ke){q({title:"Error",description:ke.message||"Failed to download response",variant:"destructive"})}},Ee=async L=>{var ke,ot;try{l(!0);const ct=await pe.aiTutoring.answerQuestion({user_id:e,question:`Create exactly 5 multiple choice questions (MCQs) based on this content. Return ONLY a JSON array with this exact format:

[
  {
    "question": "Question text here",
    "options": {
      "A": "Option A text",
      "B": "Option B text",
      "C": "Option C text",
      "D": "Option D text"
    },
    "correctAnswer": "A",
    "explanation": "Brief explanation"
  }
]

Content:
${L.content}

${L.answerData?JSON.stringify(L.answerData):""}

Return ONLY the JSON array, no other text.`,subject:c,context:"Return ONLY a JSON array of exactly 5 MCQ objects. Each MCQ must have question, options (A/B/C/D), correctAnswer (A/B/C/D), and explanation."});let $=[];const Ne=((ke=ct.answer)==null?void 0:ke.answer)||((ot=ct.answer)==null?void 0:ot.explanation)||"",dt=Ne.match(/\[[\s\S]*\]/);if(dt)try{$=JSON.parse(dt[0]),Array.isArray($)&&($=$.slice(0,5).map(ue=>{var G,ye,Me,De,He,ve,Be,pt;return{question:ue.question||"",options:{A:((G=ue.options)==null?void 0:G.A)||((ye=ue.options)==null?void 0:ye[0])||"",B:((Me=ue.options)==null?void 0:Me.B)||((De=ue.options)==null?void 0:De[1])||"",C:((He=ue.options)==null?void 0:He.C)||((ve=ue.options)==null?void 0:ve[2])||"",D:((Be=ue.options)==null?void 0:Be.D)||((pt=ue.options)==null?void 0:pt[3])||""},correctAnswer:ue.correctAnswer||ue.answer||"A",explanation:ue.explanation||""}}))}catch(ue){console.error("Failed to parse MCQ JSON:",ue),$=we(Ne)}else $=we(Ne);const zt={id:Date.now().toString(),role:"assistant",content:`##  MCQ Test Generated (${$.length} questions)

Test your understanding with these multiple choice questions!`,subject:c,timestamp:new Date,mcqQuestions:$.length>0?$:void 0};s(ue=>[...ue,zt]),q({title:"MCQ Test Generated",description:`${$.length} multiple choice questions have been created`})}catch(ct){q({title:"Error",description:ct.message||"Failed to generate MCQ test",variant:"destructive"})}finally{l(!1)}},we=L=>{const ke=[],ot=L.split(/(?:Question|Q)\s*\d+[:.]/i);for(let ct=1;ct<ot.length&&ke.length<5;ct++){const $=ot[ct],Ne=$.match(/^(.+?)(?:\n|$)/);if(!Ne)continue;const dt=Ne[1].trim(),zt={},ue=$.match(/([A-D])[)\s:]+(.+?)(?=\n[A-D][)\s:]|$)/g);ue&&ue.forEach(Me=>{const De=Me.match(/([A-D])[)\s:]+(.+)/);De&&(zt[De[1]]=De[2].trim())});const G=$.match(/(?:Answer|Correct)[:\s]+([A-D])/i),ye=$.match(/(?:Explanation|Explain)[:\s]+(.+?)(?=\n(?:Question|Q)|$)/is);dt&&Object.keys(zt).length>=2&&ke.push({question:dt,options:{A:zt.A||"",B:zt.B||"",C:zt.C||"",D:zt.D||""},correctAnswer:G?G[1].toUpperCase():"A",explanation:ye?ye[1].trim():""})}return ke.slice(0,5)},[Le,_e]=p.useState(!0),[ut,at]=p.useState([]);p.useEffect(()=>{try{const L=JSON.parse(localStorage.getItem("saved_responses")||"[]");at(L)}catch(L){console.error("Error loading saved responses:",L)}},[]);const Ct=()=>{try{const L=JSON.parse(localStorage.getItem("saved_responses")||"[]");at(L)}catch(L){console.error("Error loading saved responses:",L)}};return n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsx("div",{className:"border-b p-4 bg-card",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>_e(!Le),children:n.jsx(Jt,{className:"h-4 w-4"})}),n.jsxs("div",{className:"relative",children:[n.jsx(Qn,{className:"h-6 w-6 text-primary"}),n.jsx("div",{className:"absolute -top-1 -right-1 h-3 w-3 bg-green-500 rounded-full border-2 border-background"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:"AI Tutor"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Ask me anything"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(lse,{open:v,onOpenChange:w,children:[n.jsx(cse,{asChild:!0,children:n.jsxs(z,{variant:"outline",size:"sm",className:"gap-2",children:[n.jsx(da,{className:"h-4 w-4"}),"Study Guide"]})}),n.jsxs(FA,{className:"w-full sm:max-w-2xl overflow-y-auto",children:[n.jsxs(LA,{children:[n.jsx(zA,{children:"AIPowered Study Plan for Class 12 Board Students (Maths)"}),n.jsx($A,{children:"Follow this step-by-step sequence daily to maximize your board exam preparation"})]}),n.jsxs("div",{className:"mt-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg mb-3",children:"1. Start Each Chapter"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Ask AI:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm ml-2",children:[n.jsx("li",{children:'"Explain this chapter in simple language."'}),n.jsx("li",{children:'"Give me all formulas for this chapter."'}),n.jsx("li",{children:'"List all important board exam topics."'})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg mb-3",children:"2. Learn Each Topic Properly"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"For every topic inside the chapter, ask:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm ml-2",children:[n.jsx("li",{children:'"Explain this topic with simple examples."'}),n.jsx("li",{children:'"Give 3 solved examples (easy  medium  hard)."'}),n.jsx("li",{children:'"Show common mistakes students make."'})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg mb-3",children:"3. Practice Daily"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Ask AI:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm ml-2",children:[n.jsx("li",{children:'"Give me 10 practice questions for this topic."'}),n.jsx("li",{children:'"Give me similar questions for more practice."'}),n.jsx("li",{children:'"Check my solution step-by-step."'})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg mb-3",children:"4. Clear Doubts Immediately"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"If stuck, ask:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm ml-2",children:[n.jsx("li",{children:'"Explain only this step."'}),n.jsx("li",{children:`"Why can't we use another method here?"`}),n.jsx("li",{children:'"Solve this question in an easier method."'}),n.jsx("li",{children:'"Solve this same question in 2 different methods."'})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg mb-3",children:"5. Make Short Notes"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Ask AI:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm ml-2",children:[n.jsx("li",{children:'"Make short notes for this chapter."'}),n.jsx("li",{children:'"Convert this chapter into a one-page revision sheet."'})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg mb-3",children:"6. Solve Board-Pattern Questions"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Ask:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm ml-2",children:[n.jsx("li",{children:'"Give me last 5 years previous year questions of this chapter."'}),n.jsx("li",{children:'"Give me expected questions for 2025 board exam."'}),n.jsx("li",{children:'"Make a 30-mark board-style test for this chapter."'})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg mb-3",children:"7. Check Performance"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"After solving:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm ml-2",children:[n.jsx("li",{children:'"Check my paper and give marks as per CBSE marking scheme."'}),n.jsx("li",{children:'"Tell me my weak areas and how to improve them."'})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg mb-3",children:"8. Weekly Routine"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Every Sunday:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm ml-2",children:[n.jsx("li",{children:'"Make a weekly study plan for Class 12 Board Maths."'}),n.jsx("li",{children:'"Add revision + tests."'}),n.jsx("li",{children:'"Give me 20 mixed questions from all chapters covered this week."'})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg mb-3",children:"9. Monthly Board Revision"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Ask:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm ml-2",children:[n.jsx("li",{children:'"Create a full revision plan for this month."'}),n.jsx("li",{children:'"Give a 50-question mixed board-level test."'}),n.jsx("li",{children:'"Give me frequently asked board exam questions."'})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg mb-3",children:"10. Last 30 Days Board Preparation"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Ask:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm ml-2",children:[n.jsx("li",{children:'"Make a 30-day final board revision timetable."'}),n.jsx("li",{children:'"Give me 5 sample papers with solutions."'}),n.jsx("li",{children:'"Tell me high-scoring topics I must revise."'})]})]}),n.jsxs("div",{className:"mt-6 p-4 bg-primary/10 rounded-lg",children:[n.jsx("p",{className:"text-sm font-medium mb-2",children:" Tip:"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Copy any of these prompts and paste them into the chat. The AI will guide you through each step of your board exam preparation!"})]})]})]})]}),n.jsxs(Nt,{value:c,onValueChange:u,children:[n.jsx(wt,{className:"w-[140px]",children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]}),n.jsxs(Nt,{value:m||"en",onValueChange:L=>f(L==="en"?null:L),children:[n.jsx(wt,{className:"w-[100px]",children:n.jsx(St,{placeholder:n.jsx(nh,{className:"h-4 w-4"})})}),n.jsxs(jt,{children:[n.jsx(re,{value:"en",children:"English"}),n.jsx(re,{value:"hi",children:"Hindi"}),n.jsx(re,{value:"es",children:"Spanish"}),n.jsx(re,{value:"fr",children:"French"}),n.jsx(re,{value:"de",children:"German"})]})]})]})]})}),n.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[Le&&n.jsxs("div",{className:"w-80 border-r bg-muted/30 p-4 overflow-y-auto flex flex-col gap-4",children:[n.jsxs(ae,{children:[n.jsx(he,{className:"pb-3",children:n.jsx(fe,{className:"text-sm",children:"Subject"})}),n.jsx(ie,{children:n.jsxs(Nt,{value:c,onValueChange:u,children:[n.jsx(wt,{children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]})})]}),n.jsxs(ae,{children:[n.jsx(he,{className:"pb-3",children:n.jsxs(fe,{className:"text-sm flex items-center gap-2",children:[n.jsx(da,{className:"h-4 w-4"}),"Quick Actions"]})}),n.jsxs(ie,{className:"space-y-2",children:[n.jsxs(z,{variant:"outline",size:"sm",className:"w-full justify-start gap-2",onClick:()=>{var L;i("Help me understand this concept better"),(L=ne.current)==null||L.focus()},children:[n.jsx(Jt,{className:"h-4 w-4"}),"Get Concept Explanation"]}),n.jsxs(z,{variant:"outline",size:"sm",className:"w-full justify-start gap-2",onClick:()=>{var L;i("Give me practice problems for this topic"),(L=ne.current)==null||L.focus()},children:[n.jsx(Ei,{className:"h-4 w-4"}),"Practice Problems"]}),n.jsxs(z,{variant:"outline",size:"sm",className:"w-full justify-start gap-2",onClick:()=>{var L;i("Create a lesson plan for me"),(L=ne.current)==null||L.focus()},children:[n.jsx(As,{className:"h-4 w-4"}),"Generate Lesson Plan"]}),n.jsxs(z,{variant:"outline",size:"sm",className:"w-full justify-start gap-2",onClick:()=>{var L;i("Help me with my homework"),(L=ne.current)==null||L.focus()},children:[n.jsx(or,{className:"h-4 w-4"}),"Homework Help"]})]})]}),ut.length>0&&n.jsxs(ae,{children:[n.jsx(he,{className:"pb-3",children:n.jsxs(fe,{className:"text-sm flex items-center gap-2",children:[n.jsx(ti,{className:"h-4 w-4"}),"Saved Responses (",ut.length,")"]})}),n.jsx(ie,{children:n.jsx(Pn,{className:"h-48",children:n.jsx("div",{className:"space-y-2",children:ut.slice(0,5).map(L=>n.jsx(z,{variant:"ghost",size:"sm",className:"w-full justify-start text-left h-auto py-2 px-3",onClick:()=>{s([{id:L.id+"-view",role:"assistant",content:L.content,subject:L.subject,timestamp:new Date(L.savedAt),answerData:L.answerData}])},children:n.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[n.jsxs("p",{className:"text-xs font-medium line-clamp-1",children:[L.content.substring(0,40),"..."]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(L.savedAt).toLocaleDateString()})]})},L.id))})})})]}),n.jsxs(ae,{children:[n.jsx(he,{className:"pb-3",children:n.jsx(fe,{className:"text-sm",children:"Tips for Better Answers"})}),n.jsxs(ie,{className:"space-y-3 text-xs",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold mb-1",children:" Be Specific"}),n.jsx("p",{className:"text-muted-foreground",children:"Ask detailed questions for better explanations"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold mb-1",children:" Include Context"}),n.jsx("p",{className:"text-muted-foreground",children:"Mention the topic or chapter you're studying"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold mb-1",children:" Math Problems"}),n.jsx("p",{className:"text-muted-foreground",children:"I use Wolfram Alpha for verified step-by-step solutions"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold mb-1",children:" Follow Up"}),n.jsx("p",{className:"text-muted-foreground",children:"Ask follow-up questions to deepen understanding"})]})]})]})]}),n.jsx(Pn,{className:"flex-1 p-4",children:n.jsxs("div",{className:"space-y-4",ref:F,children:[r.map(L=>{var ke,ot,ct,$,Ne,dt,zt,ue;return n.jsxs("div",{className:qe("flex gap-3",L.role==="user"?"justify-end":"justify-start"),children:[L.role==="assistant"&&n.jsx(an,{className:"h-8 w-8",children:n.jsx(on,{className:"bg-primary text-primary-foreground",children:n.jsx(Qn,{className:"h-4 w-4"})})}),n.jsx(ae,{className:qe("max-w-[85%]",L.role==="user"?"bg-primary text-primary-foreground p-3":"bg-card border shadow-sm p-4"),children:n.jsxs(ie,{className:"p-0 space-y-3",children:[L.wolframUsed&&n.jsxs("div",{className:"text-xs bg-blue-500/20 text-blue-300 px-2 py-1 rounded inline-flex items-center gap-1",children:[n.jsx("span",{children:""}),n.jsx("span",{children:"Verified with Wolfram Alpha"})]}),L.wolframResult&&n.jsx("div",{className:"mt-3 space-y-3",children:n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Wn,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),n.jsx("span",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100",children:"Wolfram Alpha Solution"})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx(z,{variant:I[L.id]==="embedded"?"default":"outline",size:"sm",className:"h-7 text-xs",onClick:()=>{var ye;const G=I[L.id]||"extracted";if(se(Me=>({...Me,[L.id]:G==="embedded"?"extracted":"embedded"})),G==="extracted"&&!ee[L.id]){const Me=((ye=L.wolframResult)==null?void 0:ye.input_interpretation)||L.content.split(`
`)[0],De=encodeURIComponent(Me);Y(He=>({...He,[L.id]:`https://www.wolframalpha.com/input/?i=${De}`}))}},children:I[L.id]==="embedded"?n.jsxs(n.Fragment,{children:[n.jsx(Kn,{className:"h-3 w-3 mr-1"}),"Full Page View"]}):n.jsxs(n.Fragment,{children:[n.jsx(Maximize2,{className:"h-3 w-3 mr-1"}),"Full Page View"]})})})]}),I[L.id]==="embedded"&&ee[L.id]&&n.jsx("div",{className:"mb-3 rounded-lg overflow-hidden border-2 border-blue-300 dark:border-blue-700 bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-950/30 dark:to-purple-950/30",children:n.jsxs("div",{className:"p-6 text-center space-y-4",children:[n.jsx("div",{className:"flex justify-center",children:n.jsx("div",{className:"h-16 w-16 rounded-full bg-blue-600 dark:bg-blue-700 flex items-center justify-center",children:n.jsx(Wn,{className:"h-8 w-8 text-white"})})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"View Full Wolfram Alpha Result"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Wolfram Alpha cannot be embedded directly due to security restrictions, but you can view the complete result page with all interactive features."})]}),n.jsxs("div",{className:"flex gap-3 justify-center",children:[n.jsxs(z,{variant:"default",size:"lg",className:"bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-600",onClick:()=>window.open(ee[L.id],"_blank","noopener,noreferrer"),children:[n.jsx(Maximize2,{className:"h-4 w-4 mr-2"}),"Open Full Result in New Tab"]}),n.jsx(z,{variant:"outline",size:"lg",onClick:()=>se(G=>({...G,[L.id]:"extracted"})),children:"View Extracted Data"})]}),n.jsx("div",{className:"pt-2",children:n.jsx("p",{className:"text-xs text-muted-foreground",children:"The full page includes interactive visualizations, step-by-step solutions, and all Wolfram Alpha features."})})]})}),I[L.id]!=="embedded"&&n.jsxs(n.Fragment,{children:[L.wolframResult.input_interpretation&&n.jsxs("div",{className:"mb-3 text-xs text-muted-foreground bg-orange-50 dark:bg-orange-950/20 p-2 rounded border border-orange-200 dark:border-orange-800",children:[n.jsx("span",{className:"font-medium",children:"Input Interpretation:"})," ",L.wolframResult.input_interpretation]}),L.wolframResult.answer&&n.jsxs("div",{className:"mb-3",children:[n.jsx("div",{className:"text-sm font-semibold mb-1",children:"Answer:"}),n.jsx("div",{className:"text-base font-mono bg-white dark:bg-gray-900 p-3 rounded border border-blue-200 dark:border-blue-800",children:L.wolframResult.answer})]}),L.wolframResult.steps&&L.wolframResult.steps.length>0&&n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"text-sm font-semibold mb-2 flex items-center gap-1",children:[n.jsx(Mn,{className:"h-3 w-3"}),"Step-by-Step Solution:"]}),n.jsx("div",{className:"space-y-2",children:L.wolframResult.steps.map((G,ye)=>n.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 rounded border border-blue-200 dark:border-blue-800 text-sm",children:[n.jsxs("div",{className:"font-medium text-xs mb-1",children:[G.title,":"]}),n.jsx("div",{className:"font-mono text-xs whitespace-pre-wrap",children:G.content})]},ye))})]}),L.wolframResult.plots&&L.wolframResult.plots.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[n.jsx(vr,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),"Visualizations & Graphs (",L.wolframResult.plots.length,")"]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:L.wolframResult.plots.map((G,ye)=>n.jsxs("div",{className:"group relative bg-white dark:bg-gray-900 rounded-lg border-2 border-blue-200 dark:border-blue-800 hover:border-blue-400 dark:hover:border-blue-600 overflow-hidden transition-all cursor-pointer shadow-sm hover:shadow-md",onClick:()=>M({url:G.url,title:G.title||`Visualization ${ye+1}`,description:G.description||G.title||`Wolfram Alpha visualization ${ye+1}`}),children:[n.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20 border-b border-blue-200 dark:border-blue-800",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-1.5 flex-1 min-w-0",children:[G.type&&n.jsx(je,{variant:"outline",className:"text-xs border-blue-300 dark:border-blue-700 shrink-0",children:G.type.replace("_"," ")}),n.jsx("span",{className:"text-xs font-semibold text-blue-900 dark:text-blue-100 truncate",title:G.title||`Visualization ${ye+1}`,children:G.title||`Visualization ${ye+1}`})]}),n.jsx(bl,{className:"h-3 w-3 text-blue-600 dark:text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity shrink-0 ml-1"})]})}),n.jsxs("div",{className:"p-3 bg-white dark:bg-gray-900",children:[n.jsx("img",{src:G.url,alt:G.title||G.description||`Visualization ${ye+1}`,className:"w-full h-auto rounded-lg shadow-sm max-h-80 object-contain mx-auto transition-transform group-hover:scale-105",onError:Me=>{const He=Me.target.parentElement;He&&(He.innerHTML='<div class="p-8 text-center text-muted-foreground text-sm">Failed to load visualization</div>')},loading:"lazy"}),G.description&&G.description!==G.title&&n.jsx("p",{className:"text-xs text-muted-foreground mt-2 line-clamp-2",children:G.description})]}),n.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 dark:group-hover:bg-white/5 transition-colors rounded-lg pointer-events-none"})]},ye))}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-2 flex items-center gap-1",children:[n.jsx(bl,{className:"h-3 w-3"}),"Click on any visualization to view in full size"]})]})]})]})}),n.jsxs("div",{className:"text-sm prose prose-sm dark:prose-invert max-w-none prose-headings:font-semibold prose-headings:mt-4 prose-headings:mb-2 prose-headings:text-base prose-p:my-2 prose-p:leading-relaxed prose-ul:my-2 prose-ol:my-2 prose-li:my-1.5 prose-li:leading-relaxed prose-code:text-sm prose-code:bg-muted prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-pre:bg-muted prose-pre:p-4 prose-pre:rounded-lg prose-pre:overflow-x-auto prose-pre:my-3 prose-strong:font-semibold prose-strong:text-foreground prose-blockquote:border-l-4 prose-blockquote:border-primary/50 prose-blockquote:pl-4 prose-blockquote:italic prose-blockquote:my-3",children:[n.jsx(xse,{content:L.content}),S===L.id&&n.jsx("span",{className:"inline-block w-2 h-4 ml-1 bg-primary animate-pulse",children:"|"})]}),((ke=L.answerData)==null?void 0:ke.step_by_step)&&(Array.isArray(L.answerData.step_by_step)||typeof L.answerData.step_by_step=="string")&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-border/50",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("span",{className:"text-lg",children:""}),n.jsx("p",{className:"text-sm font-semibold",children:"Step-by-Step Solution"})]}),Array.isArray(L.answerData.step_by_step)&&L.answerData.step_by_step.length>0?n.jsx("div",{className:"space-y-3",children:(()=>{const G=L.answerData.step_by_step,ye=x[L.id]??0,Me=y[L.id]??!1,De=Me?G:[G[ye]];return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"space-y-2",children:De.map((He,ve)=>{const Be=Me?ve:ye;return n.jsxs("div",{className:"bg-gradient-to-r from-primary/5 to-primary/10 p-4 rounded-lg border border-primary/20 shadow-sm",children:[n.jsxs("div",{className:"font-semibold mb-3 flex items-center gap-2",children:[n.jsxs("span",{className:"bg-primary text-primary-foreground px-3 py-1 rounded-md text-xs font-bold",children:["Step ",He.step_number||Be+1," of ",G.length]}),He.source==="wolfram"&&n.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/30 px-2 py-1 rounded-md font-medium",children:" Wolfram Verified"})]}),(He.description||He.step)&&n.jsx("div",{className:"font-semibold mb-2 text-sm text-foreground",children:n.jsx(tr,{remarkPlugins:[rr],children:He.description||He.step})}),n.jsx("div",{className:"mt-2 prose prose-sm dark:prose-invert max-w-none prose-p:my-2 prose-p:leading-relaxed prose-ul:my-2 prose-ol:my-2 prose-li:my-1 prose-strong:font-semibold",children:n.jsx(tr,{remarkPlugins:[rr],children:V(He.content||He.reasoning||He||"")})})]},Be)})}),!Me&&n.jsxs("div",{className:"flex items-center justify-between gap-2 pt-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(z,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>{g(He=>({...He,[L.id]:Math.max(0,ye-1)}))},disabled:ye===0,children:[n.jsx(p2,{className:"h-3 w-3 mr-1"}),"Previous"]}),n.jsxs("span",{className:"text-xs text-muted-foreground px-2",children:[ye+1," / ",G.length]}),n.jsx(z,{variant:"default",size:"sm",className:"h-7 text-xs",onClick:()=>{ye<G.length-1?g(He=>({...He,[L.id]:ye+1})):b(He=>({...He,[L.id]:!0}))},children:ye<G.length-1?n.jsxs(n.Fragment,{children:["Next",n.jsx(J6,{className:"h-3 w-3 ml-1"})]}):n.jsxs(n.Fragment,{children:[n.jsx(Kn,{className:"h-3 w-3 mr-1"}),"Show All"]})})]}),n.jsxs(z,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>{b(He=>({...He,[L.id]:!0}))},children:[n.jsx(Kn,{className:"h-3 w-3 mr-1"}),"Show All Steps"]})]}),Me&&n.jsx("div",{className:"pt-2 border-t border-border/30",children:n.jsxs(z,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",onClick:()=>{b(He=>({...He,[L.id]:!1})),g(He=>({...He,[L.id]:G.length-1}))},children:[n.jsx(p2,{className:"h-3 w-3 mr-1"}),"Back to Step-by-Step View"]})})]})})()}):typeof L.answerData.step_by_step=="string"?n.jsx("div",{className:"text-xs opacity-90 prose prose-sm dark:prose-invert max-w-none",children:n.jsx(tr,{remarkPlugins:[rr],children:L.answerData.step_by_step})}):null]}),((ot=L.answerData)==null?void 0:ot.explanation)&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-border/50",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx("span",{className:"text-lg",children:""}),n.jsx("p",{className:"text-sm font-semibold",children:"Why This Works"})]}),n.jsx("div",{className:"text-sm prose prose-sm dark:prose-invert max-w-none prose-p:my-2 prose-p:leading-relaxed prose-ul:my-2 prose-ol:my-2 prose-li:my-1.5 prose-strong:font-semibold bg-muted/50 p-4 rounded-lg",children:n.jsx(tr,{remarkPlugins:[rr],children:L.answerData.explanation})})]}),((ct=L.answerData)==null?void 0:ct.examples)&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-border/50",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx("span",{className:"text-lg",children:""}),n.jsx("p",{className:"text-sm font-semibold",children:"Real-World Examples"})]}),Array.isArray(L.answerData.examples)&&L.answerData.examples.length>0?n.jsx("div",{className:"space-y-3",children:L.answerData.examples.map((G,ye)=>{let Me="";return typeof G=="string"?Me=G:G&&typeof G=="object"?Me=G.title||G.description||G.name||JSON.stringify(G):Me=String(G),n.jsx("div",{className:"bg-muted/50 p-3 rounded-lg border border-border/30",children:n.jsx("div",{className:"text-sm prose prose-sm dark:prose-invert max-w-none prose-p:my-1 prose-p:leading-relaxed prose-strong:font-semibold",children:n.jsx(tr,{remarkPlugins:[rr],children:Me})})},ye)})}):typeof L.answerData.examples=="string"?n.jsx("div",{className:"text-sm prose prose-sm dark:prose-invert max-w-none bg-muted/50 p-4 rounded-lg prose-p:my-2 prose-p:leading-relaxed",children:n.jsx(tr,{remarkPlugins:[rr],children:L.answerData.examples})}):null]}),(($=L.answerData)==null?void 0:$.connections)&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-border/50",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx("span",{className:"text-lg",children:""}),n.jsx("p",{className:"text-sm font-semibold",children:"Related Concepts"})]}),Array.isArray(L.answerData.connections)&&L.answerData.connections.length>0?n.jsx("div",{className:"flex flex-wrap gap-2",children:L.answerData.connections.map((G,ye)=>{let Me="";return typeof G=="string"?Me=G:G&&typeof G=="object"?Me=G.title||G.description||G.name||JSON.stringify(G):Me=String(G),n.jsx("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-xs font-medium bg-primary/10 text-primary border border-primary/20",children:Me},ye)})}):typeof L.answerData.connections=="string"?n.jsx("div",{className:"text-sm prose prose-sm dark:prose-invert max-w-none bg-muted/50 p-4 rounded-lg prose-p:my-2 prose-p:leading-relaxed",children:n.jsx(tr,{remarkPlugins:[rr],children:L.answerData.connections})}):null]}),((Ne=L.answerData)==null?void 0:Ne.visual_aids)&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-border/50",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx("span",{className:"text-lg",children:""}),n.jsx("p",{className:"text-sm font-semibold",children:"Visual Aids & Graphs"})]}),Array.isArray(L.answerData.visual_aids)&&L.answerData.visual_aids.length>0?n.jsx("div",{className:"space-y-3",children:L.answerData.visual_aids.map((G,ye)=>n.jsx("div",{className:"space-y-2",children:G.url?n.jsxs("div",{className:"space-y-2",children:[n.jsxs("p",{className:"text-xs font-medium flex items-center gap-1",children:[G.source==="wolfram"&&n.jsx("span",{className:"text-blue-400",children:""}),G.description||G.title||"Visualization"]}),n.jsx("div",{className:"border rounded-lg overflow-hidden bg-background shadow-sm",children:n.jsx("img",{src:G.url,alt:G.description||G.title||"Graph or visualization",className:"w-full h-auto max-h-96 object-contain cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(G.url,"_blank"),onError:Me=>{const De=Me.target;De.style.display="none";const He=De.parentElement;if(He){const ve=document.createElement("div");ve.className="p-4 text-center text-xs text-muted-foreground",ve.innerHTML=`<a href="${G.url}" target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:underline">View graph/visualization</a>`,He.appendChild(ve)}},loading:"lazy"})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("a",{href:G.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-400 hover:underline",children:"Open in new tab"}),G.source==="wolfram"&&n.jsx("span",{className:"text-xs text-muted-foreground",children:" From Wolfram Alpha"})]})]}):n.jsxs("div",{className:"text-xs opacity-90 p-2 bg-muted/50 rounded",children:[n.jsx("p",{className:"font-medium",children:G.description||G.title||G.name||"Visualization"}),G.name&&G.name!==(G.description||G.title)&&n.jsx("p",{className:"text-muted-foreground mt-1",children:G.name})]})},ye))}):typeof L.answerData.visual_aids=="string"?n.jsx("div",{className:"text-xs opacity-90 prose prose-sm dark:prose-invert max-w-none",children:n.jsx(tr,{remarkPlugins:[rr],children:L.answerData.visual_aids})}):null]}),((dt=L.answerData)==null?void 0:dt.common_mistakes)&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-border/50",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx("span",{className:"text-lg",children:""}),n.jsx("p",{className:"text-sm font-semibold",children:"Common Mistakes to Avoid"})]}),Array.isArray(L.answerData.common_mistakes)&&L.answerData.common_mistakes.length>0?n.jsx("div",{className:"space-y-2",children:L.answerData.common_mistakes.map((G,ye)=>{let Me="";return typeof G=="string"?Me=G:G&&typeof G=="object"?Me=G.title||G.description||G.name||JSON.stringify(G):Me=String(G),n.jsxs("div",{className:"flex items-start gap-2 bg-red-50 dark:bg-red-950/20 p-3 rounded-lg border border-red-200 dark:border-red-900/30",children:[n.jsx("span",{className:"text-red-500 mt-0.5",children:""}),n.jsx("div",{className:"text-sm prose prose-sm dark:prose-invert max-w-none prose-p:my-0 prose-p:leading-relaxed prose-strong:font-semibold",children:n.jsx(tr,{remarkPlugins:[rr],children:Me})})]},ye)})}):typeof L.answerData.common_mistakes=="string"?n.jsx("div",{className:"text-sm prose prose-sm dark:prose-invert max-w-none bg-red-50 dark:bg-red-950/20 p-4 rounded-lg border border-red-200 dark:border-red-900/30 prose-p:my-2 prose-p:leading-relaxed",children:n.jsx(tr,{remarkPlugins:[rr],children:L.answerData.common_mistakes})}):null]}),((zt=L.answerData)==null?void 0:zt.practice_suggestions)&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-border/50",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx("span",{className:"text-lg",children:""}),n.jsx("p",{className:"text-sm font-semibold",children:"Practice Suggestions"})]}),Array.isArray(L.answerData.practice_suggestions)&&L.answerData.practice_suggestions.length>0?n.jsx("div",{className:"space-y-2",children:L.answerData.practice_suggestions.map((G,ye)=>{let Me="";return typeof G=="string"?Me=G:G&&typeof G=="object"?Me=G.title||G.description||G.name||JSON.stringify(G):Me=String(G),n.jsxs("div",{className:"flex items-start gap-2 bg-blue-50 dark:bg-blue-950/20 p-3 rounded-lg border border-blue-200 dark:border-blue-900/30",children:[n.jsxs("span",{className:"text-blue-500 mt-0.5 font-bold",children:[ye+1,"."]}),n.jsx("div",{className:"text-sm prose prose-sm dark:prose-invert max-w-none prose-p:my-0 prose-p:leading-relaxed prose-strong:font-semibold",children:n.jsx(tr,{remarkPlugins:[rr],children:Me})})]},ye)})}):typeof L.answerData.practice_suggestions=="string"?n.jsx("div",{className:"text-sm prose prose-sm dark:prose-invert max-w-none bg-blue-50 dark:bg-blue-950/20 p-4 rounded-lg border border-blue-200 dark:border-blue-900/30 prose-p:my-2 prose-p:leading-relaxed",children:n.jsx(tr,{remarkPlugins:[rr],children:L.answerData.practice_suggestions})}):null]}),((ue=L.answerData)==null?void 0:ue.teaching_tips)&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-border/50",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx("span",{className:"text-lg",children:""}),n.jsx("p",{className:"text-sm font-semibold",children:"Learning Tips"})]}),Array.isArray(L.answerData.teaching_tips)&&L.answerData.teaching_tips.length>0?n.jsx("div",{className:"space-y-2",children:L.answerData.teaching_tips.map((G,ye)=>n.jsxs("div",{className:"flex items-start gap-2 bg-green-50 dark:bg-green-950/20 p-3 rounded-lg border border-green-200 dark:border-green-900/30",children:[n.jsx("span",{className:"text-green-500 mt-0.5",children:""}),n.jsx("div",{className:"text-sm prose prose-sm dark:prose-invert max-w-none prose-p:my-0 prose-p:leading-relaxed prose-strong:font-semibold",children:n.jsx(tr,{remarkPlugins:[rr],children:G})})]},ye))}):typeof L.answerData.teaching_tips=="string"?n.jsx("div",{className:"text-sm prose prose-sm dark:prose-invert max-w-none bg-green-50 dark:bg-green-950/20 p-4 rounded-lg border border-green-200 dark:border-green-900/30 prose-p:my-2 prose-p:leading-relaxed",children:n.jsx(tr,{remarkPlugins:[rr],children:L.answerData.teaching_tips})}):null]}),L.formulas&&L.formulas.length>0&&n.jsxs("div",{className:"mt-4 pt-3 border-t border-border/50 space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-sm font-semibold",children:" Formulas"}),n.jsxs(z,{onClick:()=>B(L.formulas),size:"sm",variant:"outline",className:"h-7 text-xs",children:[" Take All Formula (",L.formulas.length,")"]})]}),L.formulas.map((G,ye)=>n.jsx(ae,{className:"p-4",children:n.jsxs(ie,{className:"p-0 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[G.name&&n.jsx("span",{className:"text-xs font-semibold text-primary bg-primary/10 px-2 py-1 rounded",children:G.name}),G.type&&n.jsx("span",{className:"text-xs font-medium text-muted-foreground bg-muted px-2 py-1 rounded border",children:G.type})]}),G.formula&&n.jsx("div",{className:"bg-muted/50 p-4 rounded-lg border border-border/50",children:n.jsx("div",{className:"text-center",children:n.jsx(B1.BlockMath,{math:G.formula})})}),G.wolfram_query&&n.jsxs("div",{className:"bg-primary/5 p-3 rounded-lg border-2 border-primary/20",children:[n.jsx("p",{className:"text-xs font-semibold text-primary mb-1.5",children:" Wolfram Alpha Query (Ready to Use):"}),n.jsx("p",{className:"text-sm font-mono text-foreground break-words bg-background px-2 py-1.5 rounded border border-primary/20",children:G.wolfram_query}),n.jsx(z,{size:"sm",variant:"outline",className:"mt-2 h-7 text-xs",onClick:()=>{navigator.clipboard.writeText(G.wolfram_query),q({title:"Copied!",description:"Wolfram query copied to clipboard"})},children:" Copy Query"})]}),G.description&&n.jsx("p",{className:"text-xs text-muted-foreground",children:G.description}),G.graphUrl&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-xs font-semibold",children:" Graph Visualization:"}),n.jsx("div",{className:"border rounded-lg overflow-hidden bg-background",children:n.jsx("img",{src:G.graphUrl,alt:`Graph of ${G.name||G.formula}`,className:"w-full h-auto max-h-96 object-contain cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(G.graphUrl,"_blank"),onError:Me=>{const De=Me.target;De.style.display="none"},loading:"lazy"})}),n.jsx("a",{href:G.graphUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline inline-flex items-center gap-1",children:"Open graph in new tab"})]})]})},ye))]}),L.mcqQuestions&&L.mcqQuestions.length>0&&n.jsxs("div",{className:"mt-4 pt-3 border-t border-border/50 space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-sm font-semibold",children:" Multiple Choice Questions"}),n.jsx(z,{variant:"outline",size:"sm",className:"h-7 text-xs",onClick:()=>A(G=>({...G,[L.id]:!G[L.id]})),children:T[L.id]?"Hide Answers":"Show Answers"})]}),L.mcqQuestions.map((G,ye)=>{var ve;const Me=((ve=N[L.id])==null?void 0:ve[ye])||"",De=Me===G.correctAnswer,He=T[L.id];return n.jsx(ae,{className:qe("p-4",He&&Me&&(De?"bg-green-50 dark:bg-green-950/20 border-green-200":"bg-red-50 dark:bg-red-950/20 border-red-200")),children:n.jsxs(ie,{className:"p-0",children:[n.jsxs("div",{className:"flex items-start gap-2 mb-4",children:[n.jsxs("span",{className:"font-semibold text-sm min-w-[30px]",children:["Q",ye+1,"."]}),n.jsx("p",{className:"text-sm font-medium flex-1",children:G.question})]}),n.jsx(Hl,{value:Me,onValueChange:Be=>{P(pt=>({...pt,[L.id]:{...pt[L.id],[ye]:Be}}))},className:"space-y-2 ml-8",children:["A","B","C","D"].map(Be=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Wl,{value:Be,id:`${L.id}-q${ye}-${Be}`}),n.jsxs(be,{htmlFor:`${L.id}-q${ye}-${Be}`,className:qe("text-sm cursor-pointer flex-1",He&&Be===G.correctAnswer&&"font-semibold text-green-600 dark:text-green-400",He&&Me===Be&&Be!==G.correctAnswer&&"text-red-600 dark:text-red-400"),children:[n.jsxs("span",{className:"font-medium mr-2",children:[Be,")"]}),G.options[Be],He&&Be===G.correctAnswer&&n.jsx("span",{className:"ml-2 text-xs",children:" Correct"}),He&&Me===Be&&Be!==G.correctAnswer&&n.jsx("span",{className:"ml-2 text-xs",children:" Your Answer"})]})]},Be))}),He&&G.explanation&&n.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-lg",children:[n.jsx("p",{className:"text-xs font-semibold mb-1",children:" Explanation:"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:G.explanation})]})]})},ye)})]}),L.sources&&L.sources.length>0&&n.jsxs("div",{className:"mt-5 pt-4 border-t border-border/50",children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 rounded-lg bg-primary/10 ring-1 ring-primary/20",children:n.jsx(du,{className:"h-4 w-4 text-primary"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Content Sources"}),L.sourcesCount&&n.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:[L.sourcesCount," section",L.sourcesCount!==1?"s":""," referenced from curriculum"]})]})]})}),n.jsx("div",{className:"grid gap-2.5",children:(()=>{const G=new Map;return L.sources.forEach(ye=>{const Me=`${ye.type||"content"}-${ye.chapter||"unknown"}`;G.has(Me)?G.get(Me).count+=1:G.set(Me,{count:1,source:ye})}),Array.from(G.values()).map((ye,Me)=>{const{source:De,count:He}=ye,ve=De.type?De.type.toUpperCase():"CONTENT",Be=De.chapter||"General",pt=De.type==="ncert"?{bg:"bg-blue-500/10 dark:bg-blue-500/20",text:"text-blue-700 dark:text-blue-300",border:"border-blue-200 dark:border-blue-800",iconBg:"bg-blue-500/20"}:De.type==="pyq"?{bg:"bg-purple-500/10 dark:bg-purple-500/20",text:"text-purple-700 dark:text-purple-300",border:"border-purple-200 dark:border-purple-800",iconBg:"bg-purple-500/20"}:De.type==="hots"?{bg:"bg-orange-500/10 dark:bg-orange-500/20",text:"text-orange-700 dark:text-orange-300",border:"border-orange-200 dark:border-orange-800",iconBg:"bg-orange-500/20"}:{bg:"bg-muted/50",text:"text-muted-foreground",border:"border-border",iconBg:"bg-muted"};return n.jsxs("div",{className:qe("group relative flex items-start gap-3 p-3.5 rounded-xl border-2 transition-all duration-200","bg-gradient-to-br from-background to-muted/20",pt.border,"hover:shadow-lg hover:scale-[1.01] hover:border-primary/40"),children:[n.jsx("div",{className:qe("p-2 rounded-lg flex-shrink-0",pt.iconBg),children:n.jsx(Jt,{className:qe("h-4 w-4",pt.text)})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1.5 flex-wrap",children:[n.jsx(je,{variant:"outline",className:qe("text-xs font-bold h-6 px-2.5",pt.bg,pt.text,pt.border),children:ve}),He>1&&n.jsxs(je,{variant:"secondary",className:"text-xs font-semibold h-6 px-2.5",children:[He," reference",He!==1?"s":""]})]}),n.jsx("p",{className:qe("text-sm font-semibold truncate",pt.text),title:Be,children:Be})]})]},Me)})})()})]}),(!L.sources||L.sources.length===0)&&L.sourcesCount&&L.sourcesCount>0&&n.jsx("div",{className:"mt-5 pt-4 border-t border-border/50",children:n.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-xl bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5 border-2 border-primary/20 shadow-sm",children:[n.jsx("div",{className:"p-2 rounded-lg bg-primary/20 ring-1 ring-primary/30",children:n.jsx(du,{className:"h-4 w-4 text-primary"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-semibold text-foreground",children:"Content References"}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Based on ",n.jsx("span",{className:"font-semibold text-primary",children:L.sourcesCount})," relevant content section",L.sourcesCount!==1?"s":""," from the curriculum"]})]})]})})]})}),L.role==="user"&&n.jsx(an,{className:"h-8 w-8",children:n.jsx(on,{className:"bg-secondary",children:n.jsx(ii,{className:"h-4 w-4"})})})]},L.id)}),o&&n.jsxs("div",{className:"flex gap-3 justify-start",children:[n.jsx(an,{className:"h-8 w-8",children:n.jsx(on,{className:"bg-primary text-primary-foreground",children:n.jsx(Qn,{className:"h-4 w-4"})})}),n.jsx(ae,{className:"bg-muted p-3",children:n.jsx(ie,{className:"p-0",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Oe,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{className:"text-sm",children:"Thinking..."})]})})})]}),n.jsx("div",{ref:F})]})}),(()=>{const L=r.filter(ct=>ct.role==="assistant"&&ct.suggestedActions&&ct.suggestedActions.length>0),ke=L[L.length-1];if(!ke)return null;const ot=(ct,$)=>({"Fetch Formulas":{icon:Wn,handler:()=>W($)},"Create Flashcards":{icon:Di,handler:()=>X($)},"Create Notes":{icon:or,handler:()=>de($)},"Generate MCQ":{icon:Ei,handler:()=>Ee($)},Save:{icon:ti,handler:()=>oe($)},Download:{icon:rh,handler:()=>me($)}})[ct];return n.jsx("div",{className:"w-72 border-l bg-card shadow-sm p-4 overflow-y-auto",children:n.jsxs("div",{className:"sticky top-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4 pb-3 border-b",children:[n.jsx(da,{className:"h-5 w-5 text-primary"}),n.jsx("h3",{className:"text-sm font-semibold",children:"AI Suggested Actions"})]}),n.jsxs("div",{className:"space-y-2 mb-4",children:[n.jsxs("p",{className:"text-xs text-muted-foreground mb-3 line-clamp-2 italic",children:['"',ke.content.substring(0,80),'..."']}),n.jsxs("div",{className:"flex flex-col gap-2",children:[ke.suggestedActions.includes("Fetch Formulas")&&n.jsxs(z,{variant:"default",size:"sm",className:"h-10 text-sm gap-2 justify-start w-full font-medium",onClick:()=>{W(ke),q({title:"Fetching Formulas",description:"Extracting formulas from the response..."})},children:[n.jsx(Wn,{className:"h-4 w-4"}),"Fetch Formulas"]}),ke.suggestedActions.includes("Create Flashcards")&&n.jsxs(z,{variant:"default",size:"sm",className:"h-10 text-sm gap-2 justify-start w-full font-medium",onClick:()=>{X(ke),q({title:"Creating Flashcards",description:"Generating flashcards from the content..."})},children:[n.jsx(Di,{className:"h-4 w-4"}),"Create Flashcards"]}),ke.suggestedActions.includes("Create Notes")&&n.jsxs(z,{variant:"default",size:"sm",className:"h-10 text-sm gap-2 justify-start w-full font-medium",onClick:()=>{de(ke),q({title:"Creating Notes",description:"Generating study notes..."})},children:[n.jsx(or,{className:"h-4 w-4"}),"Create Notes"]}),ke.suggestedActions.includes("Generate MCQ")&&n.jsxs(z,{variant:"default",size:"sm",className:"h-10 text-sm gap-2 justify-start w-full font-medium",onClick:()=>{Ee(ke),q({title:"Generating MCQ",description:"Creating practice questions..."})},children:[n.jsx(Ei,{className:"h-4 w-4"}),"Generate MCQ"]}),ke.suggestedActions.includes("Save")&&n.jsxs(z,{variant:"outline",size:"sm",className:"h-10 text-sm gap-2 justify-start w-full font-medium",onClick:()=>{oe(ke)},children:[n.jsx(ti,{className:"h-4 w-4"}),"Save Response"]}),ke.suggestedActions.includes("Download")&&n.jsxs(z,{variant:"outline",size:"sm",className:"h-10 text-sm gap-2 justify-start w-full font-medium",onClick:()=>{me(ke)},children:[n.jsx(rh,{className:"h-4 w-4"}),"Download Response"]})]})]}),L.length>1&&n.jsxs("div",{className:"mt-6 pt-4 border-t",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Previous Actions"}),n.jsx("div",{className:"space-y-3",children:L.slice(0,-1).reverse().slice(0,3).map(ct=>n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("p",{className:"text-xs text-muted-foreground line-clamp-1",children:[ct.content.substring(0,40),"..."]}),n.jsx("div",{className:"flex flex-wrap gap-1.5",children:ct.suggestedActions.slice(0,3).map($=>{const Ne=ot($,ct);if(!Ne)return null;const dt=Ne.icon;return n.jsxs(z,{variant:"ghost",size:"sm",className:"h-8 text-xs gap-1.5 px-2",onClick:Ne.handler,title:$,children:[n.jsx(dt,{className:"h-3 w-3"}),n.jsx("span",{className:"hidden sm:inline",children:$.split(" ")[0]})]},$)})})]},ct.id))})]})]})})})()]}),n.jsxs("div",{className:"border-t p-4 bg-card",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Ve,{ref:ne,value:a,onChange:L=>i(L.target.value),onKeyPress:U,placeholder:"Ask me anything about your subjects...",disabled:o,className:"pr-20"}),n.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex gap-1",children:[n.jsx(z,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:O,title:"Translate input",disabled:!a.trim(),children:n.jsx(nh,{className:"h-4 w-4"})}),n.jsx(z,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:H,disabled:d||o,title:"Voice input",children:d?n.jsx(Oe,{className:"h-4 w-4 animate-spin text-red-500"}):n.jsx(rk,{className:"h-4 w-4"})})]})]}),n.jsx(z,{onClick:_,disabled:!a.trim()||o,size:"icon",className:"h-10 w-10",children:n.jsx($i,{className:"h-4 w-4"})})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Press Enter to send  Shift+Enter for new line"})]}),n.jsx(un,{open:!!E,onOpenChange:L=>!L&&M(null),children:n.jsxs(tn,{className:"max-w-5xl max-h-[90vh] overflow-auto",children:[n.jsx(rn,{children:n.jsxs(nn,{className:"flex items-center gap-2",children:[n.jsx(Wn,{className:"h-5 w-5 text-primary"}),(E==null?void 0:E.title)||"Wolfram Alpha Visualization"]})}),E&&n.jsxs("div",{className:"space-y-4",children:[E.description&&E.description!==E.title&&n.jsx("p",{className:"text-sm text-muted-foreground",children:E.description}),n.jsx("div",{className:"relative bg-white dark:bg-gray-900 rounded-lg border-2 border-primary/20 p-4 overflow-auto",children:n.jsx("img",{src:E.url,alt:E.title||"Visualization",className:"w-full h-auto max-w-full rounded-lg shadow-lg mx-auto",onError:L=>{const ke=L.target;ke.style.display="none";const ot=ke.parentElement;ot&&(ot.innerHTML='<div class="p-12 text-center text-muted-foreground">Failed to load visualization</div>')}})}),n.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[n.jsxs(z,{variant:"outline",size:"sm",onClick:()=>{E!=null&&E.url&&window.open(E.url,"_blank")},children:[n.jsx(bl,{className:"h-4 w-4 mr-2"}),"Open in New Tab"]}),n.jsx(z,{variant:"outline",size:"sm",onClick:()=>{E!=null&&E.url&&(navigator.clipboard.writeText(E.url),q({title:"Copied!",description:"Image URL copied to clipboard"}))},children:"Copy URL"})]})]})]})})]})}function vse(){const{user:e}=Wt();return n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(yn,{}),n.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden",children:[n.jsx("div",{className:"border-b p-6 bg-background",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Qn,{className:"h-8 w-8 text-primary"}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"AI Chat Tutor"}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("span",{className:"text-xs bg-primary/20 text-primary px-2 py-0.5 rounded",children:"Gemini AI"}),n.jsx("span",{className:"text-xs bg-blue-500/20 text-blue-500 px-2 py-0.5 rounded",children:"Wolfram Alpha"})]})]})]}),n.jsx("p",{className:"text-muted-foreground",children:"Ask any question about your subjects and get comprehensive, educational answers with step-by-step solutions"})]})}),n.jsx("div",{className:"flex-1 flex overflow-hidden",children:n.jsx("div",{className:"flex-1 flex flex-col",children:n.jsx(gse,{userId:(e==null?void 0:e.id)||""})})})]})]})}const yse=Iu("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),x0=p.forwardRef(({className:e,variant:t,...r},s)=>n.jsx("div",{ref:s,role:"alert",className:qe(yse({variant:t}),e),...r}));x0.displayName="Alert";const g0=p.forwardRef(({className:e,...t},r)=>n.jsx("h5",{ref:r,className:qe("mb-1 font-medium leading-none tracking-tight",e),...t}));g0.displayName="AlertTitle";const v0=p.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:qe("text-sm [&_p]:leading-relaxed",e),...t}));v0.displayName="AlertDescription";const bse=()=>{const{user:e,loading:t}=Wt(),{toast:r}=Ut(),[s,a]=p.useState(""),[i,o]=p.useState(""),[l,c]=p.useState([]),[u,d]=p.useState(!1);p.useState(!1);const[h,m]=p.useState([]),[f,x]=p.useState(0),[g,y]=p.useState(!1),[b,v]=p.useState(""),[w,S]=p.useState(0),[k,N]=p.useState(!1),[P,T]=p.useState(null),[A,E]=p.useState([]),[M,I]=p.useState(null),[se,ee]=p.useState(""),[Y,F]=p.useState(!1),[ne,q]=p.useState(null),[V,_]=p.useState([]);p.useEffect(()=>{(async()=>{if(!s){c([]),o("");return}d(!0);try{const{data:oe,error:me}=await st.from("topics").select("chapter").eq("subject",s).order("chapter",{ascending:!0});if(me)throw me;if(oe&&oe.length>0){const Ee=Array.from(new Set((oe||[]).map(we=>we.chapter).filter(we=>we&&we.trim()))).sort();c(Ee)}else{const{data:Ee}=await st.from("content").select("chapter").eq("subject",s).not("chapter","is",null);if(Ee&&Ee.length>0){const we=Array.from(new Set((Ee||[]).map(Le=>Le.chapter).filter(Le=>Le&&Le.trim()))).sort();we.length>0&&c(we)}}}catch(oe){console.error("Error fetching chapters:",oe),r({variant:"destructive",title:"Error",description:"Failed to load chapters"})}finally{d(!1)}})()},[s,r]),p.useEffect(()=>{let de=null;return k&&(de=setInterval(()=>{S(oe=>oe+1)},1e3)),()=>{de&&clearInterval(de)}},[k]),p.useEffect(()=>{if(h.length>0&&f>=0){const de=Date.now();T(de)}},[f,h.length]);const U=async()=>{if(!s){r({variant:"destructive",title:"Subject Required",description:"Please select a subject first"});return}y(!0),m([]),x(0),ee(""),q(null),S(0),E([]),I(Date.now()),N(!0);try{const de=i?`Generate 5 practice questions for ${i} chapter in ${s}`:`Generate 5 practice questions for ${s}`,oe={};s&&(oe.subject=s),i&&(oe.chapter=i);const me=await pe.rag.query({query:de,subject:s,top_k:10,filters:Object.keys(oe).length>0?oe:void 0});if(me&&me.contexts&&me.contexts.length>0){const ut=me.contexts.map(at=>at.text||at.content_text||"").filter(at=>at.trim()).join(`

---

`);v(ut)}const Ee=`Generate 5 high-quality practice questions for Class 12 ${s}${i?`, specifically for ${i} chapter`:""}. 

${b?`Context:
${b.substring(0,1e3)}

`:""}
Return ONLY a JSON array of question strings, like this:
["Question 1 text", "Question 2 text", "Question 3 text", "Question 4 text", "Question 5 text"]

Do not include any explanations, just the JSON array.`,we=await fetch("http://localhost:8000/api/rag/query-direct",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:Ee,subject:s})});if(!we.ok)throw new Error("Failed to generate questions");const Le=await we.json();let _e=[];if(Le.generated_text)try{let ut=Le.generated_text.trim();ut.includes("```json")?ut=ut.split("```json")[1].split("```")[0].trim():ut.includes("```")&&(ut=ut.split("```")[1].split("```")[0].trim()),_e=JSON.parse(ut),Array.isArray(_e)||(_e=(typeof _e=="string"?_e:ut).split(/\n\d+[\.\)]\s*|\n-\s*/).map(Ct=>Ct.trim()).filter(Ct=>Ct.length>10))}catch{_e=Le.generated_text.split(/\n\d+[\.\)]\s*|\n-\s*|\nQ\d+[\.\):]\s*/i).map(Ct=>Ct.trim()).filter(Ct=>Ct.length>10&&!Ct.toLowerCase().includes("json"))}_e.length>0?(m(_e),x(0),ee(""),q(null)):r({variant:"destructive",title:"No Questions Generated",description:"Could not generate questions. Please try again."})}catch(de){console.error("Error generating questions:",de),r({variant:"destructive",title:"Error",description:"Failed to generate questions"})}finally{y(!1)}},H=async()=>{if(!se.trim()||!h[f]){r({variant:"destructive",title:"Missing Information",description:"Please provide your answer"});return}if(!(e!=null&&e.id)){r({variant:"destructive",title:"Authentication Required",description:"Please log in to save your answers"});return}const de=P?Math.floor((Date.now()-P)/1e3):0,oe=[...A];oe[f]=de,E(oe),F(!0);try{const me=await fetch("http://localhost:8000/api/rag/evaluate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:h[f],user_answer:se,reference_content:b||"General knowledge base",subject:s})});if(!me.ok)throw new Error("Failed to evaluate answer");const Ee=await me.json();q(Ee);const we=w,Le=Math.floor(we/60);if(s){const _e={user_id:e.id,subject:s,chapter:i||null,question:h[f],user_answer:se,evaluation:Ee,score:Ee.score||0,time_spent_seconds:de,session_time_seconds:we,session_time_minutes:Le,question_index:f,all_questions:h,time_per_question:oe,reference_content:b||null,metadata:{session_start_time:M,created_at:new Date().toISOString()}},{error:ut}=await st.from("practice_question_evaluations").insert(_e);ut?(console.error("Error saving evaluation:",ut),r({variant:"default",title:"Evaluation Complete",description:"Answer evaluated but failed to save. Evaluation result shown below."})):(r({title:"Answer Saved",description:"Your answer has been evaluated and saved with timer data"}),_([...V,{question:h[f],answer:se,evaluation:Ee,index:f,timeSpent:de}]))}else r({variant:"default",title:"Evaluation Complete",description:"Answer evaluated. Please select a subject to save answers."})}catch(me){console.error("Evaluation error:",me),r({variant:"destructive",title:"Evaluation Failed",description:me.message||"Failed to evaluate answer"})}finally{F(!1)}},O=()=>{if(f<h.length-1){if(P){const de=Math.floor((Date.now()-P)/1e3),oe=[...A];oe[f]=de,E(oe)}x(f+1),ee(""),q(null),T(Date.now())}},B=()=>{if(f>0){if(P){const de=Math.floor((Date.now()-P)/1e3),oe=[...A];oe[f]=de,E(oe)}x(f-1),ee(""),q(null),T(Date.now())}},W=de=>{const oe=Math.floor(de/3600),me=Math.floor(de%3600/60),Ee=de%60;return oe>0?`${oe}:${me.toString().padStart(2,"0")}:${Ee.toString().padStart(2,"0")}`:`${me}:${Ee.toString().padStart(2,"0")}`},K=()=>{N(!k)},X=()=>{S(0),N(!1),I(Date.now())};return t?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(yn,{}),n.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden bg-background",children:[n.jsx("div",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:n.jsx("div",{className:"p-4 md:p-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:n.jsx(ym,{className:"h-6 w-6 text-primary"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight",children:"Practice Questions"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Answer questions one by one and get AI-powered feedback"})]})]})})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:n.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(ym,{className:"h-5 w-5"}),"Practice Questions"]}),n.jsx(ze,{children:"Select subject and chapter to start practicing questions"})]}),n.jsxs(ie,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-muted/50 rounded-lg",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[n.jsx(Jt,{className:"h-4 w-4"}),"Subject *"]}),n.jsxs(Nt,{value:s,onValueChange:de=>{a(de),o(""),m([]),x(0)},children:[n.jsx(wt,{children:n.jsx(St,{placeholder:"Select subject"})}),n.jsxs(jt,{children:[n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[n.jsx(vr,{className:"h-4 w-4"}),"Chapter"]}),n.jsxs(Nt,{value:i,onValueChange:o,disabled:!s||u,children:[n.jsx(wt,{children:n.jsx(St,{placeholder:u?"Loading chapters...":l.length===0?"No chapters available":"Select chapter (optional)"})}),n.jsx(jt,{children:l.length>0?l.map(de=>n.jsx(re,{value:de,children:de},de)):n.jsx("div",{className:"px-2 py-1.5 text-sm text-muted-foreground",children:"No chapters found"})})]})]})]}),s&&h.length===0&&!g&&n.jsxs(z,{onClick:U,className:"w-full",size:"lg",children:[n.jsx(vr,{className:"h-4 w-4 mr-2"}),"Generate Questions"]}),g&&n.jsxs(x0,{children:[n.jsx(Oe,{className:"h-4 w-4 animate-spin"}),n.jsx(g0,{children:"Generating Questions"}),n.jsx(v0,{children:"Generating practice questions for you..."})]}),h.length>0&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs(je,{variant:"outline",children:["Question ",f+1," of ",h.length]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ur,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm font-mono font-semibold",children:W(w)}),n.jsx(z,{variant:"ghost",size:"sm",onClick:K,className:"h-7 w-7 p-0",children:k?n.jsx(nk,{className:"h-3 w-3"}):n.jsx(qc,{className:"h-3 w-3"})}),n.jsx(z,{variant:"ghost",size:"sm",onClick:X,className:"h-7 w-7 p-0",children:n.jsx(qO,{className:"h-3 w-3"})})]}),P&&n.jsxs(je,{variant:"secondary",className:"text-xs",children:["Time on this question: ",W(Math.floor((Date.now()-P)/1e3))]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(z,{variant:"outline",size:"sm",onClick:B,disabled:f===0,children:[n.jsx(uu,{className:"h-4 w-4 mr-2"}),"Previous"]}),n.jsxs(z,{variant:"outline",size:"sm",onClick:O,disabled:f===h.length-1,children:["Next",n.jsx(ji,{className:"h-4 w-4 ml-2"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Question"}),n.jsx("div",{className:"p-4 border rounded-lg bg-muted/50",children:n.jsx("p",{className:"text-sm leading-relaxed",children:h[f]})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Your Answer"}),n.jsx(kr,{placeholder:"Write your answer here...",value:se,onChange:de=>ee(de.target.value),rows:8,className:"resize-none"})]}),n.jsx(z,{onClick:H,disabled:Y||!se.trim(),className:"w-full",size:"lg",children:Y?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Evaluating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ym,{className:"h-4 w-4 mr-2"}),"Check Answer"]})}),ne&&n.jsxs(ae,{className:"mt-4",children:[n.jsx(he,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(fe,{className:"text-lg",children:"Evaluation Results"}),n.jsxs(je,{variant:ne.score>=70?"default":ne.score>=50?"secondary":"destructive",className:"text-lg px-3 py-1",children:["Score: ",ne.score,"%"]})]})}),n.jsxs(ie,{className:"space-y-4",children:[n.jsxs(x0,{children:[n.jsx(da,{className:"h-4 w-4"}),n.jsx(g0,{children:"Feedback"}),n.jsx(v0,{className:"mt-2",children:ne.feedback})]}),ne.strengths&&ne.strengths.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Qt,{className:"h-4 w-4 text-green-600"}),n.jsx("h4",{className:"font-semibold",children:"Strengths"})]}),n.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm ml-6",children:ne.strengths.map((de,oe)=>n.jsx("li",{className:"text-muted-foreground",children:de},oe))})]}),ne.improvements&&ne.improvements.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Mn,{className:"h-4 w-4 text-blue-600"}),n.jsx("h4",{className:"font-semibold",children:"Areas for Improvement"})]}),n.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm ml-6",children:ne.improvements.map((de,oe)=>n.jsx("li",{className:"text-muted-foreground",children:de},oe))})]}),ne.detailedAnalysis&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Detailed Analysis"}),n.jsx("div",{className:"prose prose-sm max-w-none bg-muted p-4 rounded-lg",children:n.jsx("p",{className:"whitespace-pre-wrap text-sm",children:ne.detailedAnalysis})})]})]})]})]}),!g&&h.length===0&&s&&n.jsxs(x0,{children:[n.jsx(ym,{className:"h-4 w-4"}),n.jsx(g0,{children:"No Questions Yet"}),n.jsx(v0,{children:"Questions are being generated. Please wait a moment or try selecting a different chapter."})]})]})]})})})]})]})},wse=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState([]),[o,l]=p.useState(!0),[c,u]=p.useState(""),[d,h]=p.useState("all"),[m,f]=p.useState("all");p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{e&&x()},[e,d,m]);const x=async()=>{try{l(!0);let k=st.from("content").select("*").order("created_at",{ascending:!1});d!=="all"&&(k=k.eq("subject",d)),m!=="all"&&(k=k.eq("type",m));const{data:N,error:P}=await k;if(P)throw P;i(N||[])}catch(k){console.error("Error fetching content:",k),s({variant:"destructive",title:"Error",description:"Failed to load content"})}finally{l(!1)}},g=k=>{switch(k){case"ncert":return n.jsx(Jt,{className:"h-4 w-4"});case"pyq":return n.jsx(ua,{className:"h-4 w-4"});case"hots":return n.jsx(Di,{className:"h-4 w-4"});case"video":return n.jsx(Pv,{className:"h-4 w-4"});default:return n.jsx(or,{className:"h-4 w-4"})}},y=k=>({ncert:{label:"NCERT",variant:"default"},pyq:{label:"PYQ",variant:"secondary"},hots:{label:"HOTS",variant:"outline"},video:{label:"Video",variant:"default"}})[k]||{label:k.toUpperCase(),variant:"outline"},b=k=>{var N,P;return k.file_url?k.file_url:(N=k.metadata)!=null&&N.file_url?k.metadata.file_url:(P=k.metadata)!=null&&P.pdf_url?k.metadata.pdf_url:null},v=async k=>{try{const N=b(k);if(N)window.open(N,"_blank"),s({title:"Download Started",description:"The file will open in a new tab"});else{const P=new Blob([k.content_text],{type:"text/plain"}),T=URL.createObjectURL(P),A=document.createElement("a");A.href=T,A.download=`${k.title||k.type}_${k.subject}_${k.id.substring(0,8)}.txt`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(T),s({title:"Downloaded",description:"Content downloaded as text file"})}}catch(N){console.error("Error downloading content:",N),s({variant:"destructive",title:"Download Failed",description:N.message||"Failed to download content"})}},w=a.filter(k=>{var P,T;return c===""||((P=k.title)==null?void 0:P.toLowerCase().includes(c.toLowerCase()))||((T=k.chapter)==null?void 0:T.toLowerCase().includes(c.toLowerCase()))||k.content_text.toLowerCase().includes(c.toLowerCase())}),S=k=>new Date(k).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return t||o?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(yn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Content Downloads"}),n.jsx("p",{className:"text-muted-foreground",children:"Browse and download all available content (NCERT, PYQ, HOTS, Videos)"})]}),n.jsxs(ae,{className:"mb-6",children:[n.jsx(he,{children:n.jsxs(fe,{className:"text-lg flex items-center gap-2",children:[n.jsx(Ih,{className:"h-5 w-5"}),"Filters"]})}),n.jsx(ie,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx("div",{className:"md:col-span-2",children:n.jsxs("div",{className:"relative",children:[n.jsx(zi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(Ve,{placeholder:"Search by title, chapter, or content...",value:c,onChange:k=>u(k.target.value),className:"pl-10"})]})}),n.jsxs(Nt,{value:d,onValueChange:h,children:[n.jsx(wt,{children:n.jsx(St,{placeholder:"All Subjects"})}),n.jsxs(jt,{children:[n.jsx(re,{value:"all",children:"All Subjects"}),n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]}),n.jsxs(Nt,{value:m,onValueChange:f,children:[n.jsx(wt,{children:n.jsx(St,{placeholder:"All Types"})}),n.jsxs(jt,{children:[n.jsx(re,{value:"all",children:"All Types"}),n.jsx(re,{value:"ncert",children:"NCERT"}),n.jsx(re,{value:"pyq",children:"PYQ"}),n.jsx(re,{value:"hots",children:"HOTS"}),n.jsx(re,{value:"video",children:"Video"})]})]})]})})]}),n.jsxs(ae,{children:[n.jsx(he,{children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx(fe,{children:"All Content"}),n.jsxs(ze,{children:[w.length," ",w.length===1?"item":"items"," found"]})]})})}),n.jsx(ie,{children:w.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(or,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50"}),n.jsx("p",{className:"text-muted-foreground",children:"No content found"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your filters or search query"})]}):n.jsx("div",{className:"rounded-md border",children:n.jsxs(Cs,{children:[n.jsx(Es,{children:n.jsxs(Nr,{children:[n.jsx(mt,{className:"w-[50px]",children:"Type"}),n.jsx(mt,{children:"Title"}),n.jsx(mt,{children:"Subject"}),n.jsx(mt,{children:"Chapter"}),n.jsx(mt,{children:"Format"}),n.jsx(mt,{children:"Date"}),n.jsx(mt,{className:"text-right",children:"Actions"})]})}),n.jsx(Ts,{children:w.map(k=>{const N=y(k.type),P=b(k);return n.jsxs(Nr,{children:[n.jsx(it,{children:n.jsx("div",{className:"flex items-center justify-center",children:g(k.type)})}),n.jsx(it,{children:n.jsxs("div",{className:"max-w-[300px]",children:[n.jsx("p",{className:"font-medium truncate",children:k.title||`${k.type.toUpperCase()} Content`}),k.title&&n.jsxs("p",{className:"text-xs text-muted-foreground truncate mt-1",children:[k.content_text.substring(0,60),"..."]})]})}),n.jsx(it,{children:n.jsx(je,{variant:"outline",children:k.subject.charAt(0).toUpperCase()+k.subject.slice(1)})}),n.jsx(it,{children:k.chapter?n.jsx("span",{className:"text-sm",children:k.chapter}):n.jsx("span",{className:"text-sm text-muted-foreground",children:"-"})}),n.jsxs(it,{children:[n.jsx(je,{variant:N.variant,children:N.label}),P&&n.jsx(je,{variant:"secondary",className:"ml-2",children:"PDF"})]}),n.jsx(it,{children:n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(As,{className:"h-3 w-3"}),S(k.created_at)]})}),n.jsx(it,{className:"text-right",children:n.jsxs(z,{size:"sm",variant:"outline",onClick:()=>v(k),className:"gap-2",children:[n.jsx(rh,{className:"h-4 w-4"}),"Download"]})})]},k.id)})})]})})})]})]})})]})},jse=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState("mathematics"),[o,l]=p.useState(""),[c,u]=p.useState([]),[d,h]=p.useState(!1),[m,f]=p.useState(null),[x,g]=p.useState(""),[y,b]=p.useState(!1),[v,w]=p.useState(!1),[S,k]=p.useState(null),[N,P]=p.useState([]),[T,A]=p.useState(!1),[E,M]=p.useState([]),[I,se]=p.useState(!1);p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{e&&a&&(ee(),Y(),F())},[e,a]);const ee=async()=>{try{h(!0);const{data:_,error:U}=await st.from("topics").select("*").eq("subject",a).order("order_index");if(U)throw U;u(_||[]),_&&_.length>0&&!o&&l(_[0].id)}catch(_){console.error("Error fetching topics:",_),s({variant:"destructive",title:"Error",description:"Failed to load topics"})}finally{h(!1)}},Y=async()=>{if(e)try{const{data:_,error:U}=await st.from("pyq_practice_sessions").select("*").eq("user_id",e.id).eq("subject",a).order("created_at",{ascending:!1}).limit(10);if(U){console.debug("Practice history not available:",U.message||U),P([]);return}P(_||[])}catch(_){console.debug("Error fetching practice history:",_),P([])}},F=async()=>{try{se(!0);const{data:_,error:U}=await st.from("content").select("*").eq("type","pyq").eq("subject",a).order("created_at",{ascending:!1});if(U)throw U;if(!_||_.length===0){M([]);return}const H=[...new Set(_.map(W=>W.topic_id).filter(Boolean))];let O={};if(H.length>0){const{data:W,error:K}=await st.from("topics").select("id, name, chapter").in("id",H);!K&&W&&(O=W.reduce((X,de)=>(X[de.id]=de,X),{}))}const B=_.map(W=>{const K=W.topic_id?O[W.topic_id]:null,X=W.metadata||{};return{...W,topic_name:(K==null?void 0:K.name)||"N/A",topic_chapter:(K==null?void 0:K.chapter)||W.chapter||"N/A",year:X.year||X.exam_year||new Date(W.created_at).getFullYear(),marks:X.marks||X.total_marks||X.max_marks||"N/A"}});M(B)}catch(_){console.error("Error fetching PYQ content:",_),s({variant:"destructive",title:"Error",description:"Failed to load PYQ content"}),M([])}finally{se(!1)}},ne=async()=>{if(!e||!o){s({variant:"destructive",title:"Error",description:"Please select a topic"});return}try{b(!0),f(null),g(""),k(null),A(!1);const _=c.find(we=>we.id===o);if(!_)throw new Error("Topic not found");let U=st.from("content").select("*").eq("type","pyq").eq("subject",a);const{data:H,error:O}=await U.eq("topic_id",o);let B=[];if(_!=null&&_.chapter){const{data:we,error:Le}=await st.from("content").select("*").eq("type","pyq").eq("subject",a).eq("chapter",_.chapter).is("topic_id",null);!Le&&we&&(B=we)}let W=[];const K=[...H||[],...B];K.length>0&&(W=K.map(we=>{var ke;const Le=we.content_text||"",_e=we.metadata||{};let ut="",at="";if(_e.question&&_e.solution)ut=_e.question,at=_e.solution;else if(Le.match(/question:?\s*/i)&&Le.match(/solution:?\s*/i)){const ot=Le.match(/question:?\s*(.*?)(?=solution:?)/is),ct=Le.match(/solution:?\s*(.*)/is);ut=ot?ot[1].trim():"",at=ct?ct[1].trim():""}else if(Le.includes("---")||Le.includes("***")){const ot=Le.includes("---")?"---":"***",ct=Le.split(ot);ut=((ke=ct[0])==null?void 0:ke.trim())||"",at=ct.slice(1).join(ot).trim()||""}else we.title?(ut=we.title,at=Le):(ut=Le,at=_e.solution||"");const Ct=_e.marks||_e.total_marks||_e.max_marks||5,L=_e.year||_e.exam_year||new Date(we.created_at).getFullYear();return{id:we.id,question:ut.trim(),solution:at.trim(),marks:typeof Ct=="number"?Ct:parseInt(Ct)||5,year:typeof L=="number"?L:parseInt(L)||new Date().getFullYear(),difficulty:we.difficulty||_e.difficulty||"medium",chapter:we.chapter||_e.chapter,topic_id:we.topic_id,title:we.title,metadata:_e}}).filter(we=>we.question&&we.solution));const X=W.sort((we,Le)=>we.topic_id===o&&Le.topic_id!==o?-1:we.topic_id!==o&&Le.topic_id===o?1:(Le.year||0)-(we.year||0)).slice(0,20),de=`You are helping a Class 12 student practice PYQ (Previous Year Questions).

Subject: ${a}
Topic: ${_.name}
Chapter: ${_.chapter}

${X&&X.length>0?`Available PYQ Questions:
${X.map((we,Le)=>`${Le+1}. ${we.question.substring(0,200)}... (${we.year||"N/A"}, ${we.marks} marks)`).join(`
`)}`:"No PYQ questions available in database. Generate a new PYQ-style question based on the topic."}

${X&&X.length>0?"Select the most appropriate PYQ question for this topic. If multiple questions match, choose the best one. Return it in JSON format:":"Generate a new PYQ-style question for this topic in JSON format:"}

{
  "question": "The question text",
  "solution": "The complete solution/answer",
  "marks": 5,
  "year": 2023,
  "difficulty": "medium"
}

Only return the JSON, no additional text.`,me=(await pe.rag.query({query:de,subject:a,top_k:3})).generated_text||"";let Ee=null;try{const we=me.match(/\{[\s\S]*\}/);if(we)Ee=JSON.parse(we[0]);else if(X&&X.length>0){const Le=X[0];Ee={id:Le.id,question:Le.question,solution:Le.solution,marks:Le.marks,year:Le.year,difficulty:Le.difficulty}}}catch(we){if(console.error("Error parsing question:",we),X&&X.length>0){const Le=X[0];Ee={id:Le.id,question:Le.question,solution:Le.solution,marks:Le.marks,year:Le.year,difficulty:Le.difficulty}}}if(!Ee)throw new Error("Failed to generate question");f(Ee),s({title:"Question Generated",description:"Answer the question below"})}catch(_){console.error("Error generating question:",_),s({variant:"destructive",title:"Error",description:_.message||"Failed to generate question"})}finally{b(!1)}},q=async()=>{if(!e||!m||!x.trim()){s({variant:"destructive",title:"Error",description:"Please write an answer"});return}try{w(!0),k(null),A(!1);const _=`You are evaluating a student's answer for a PYQ (Previous Year Question).

Question: ${m.question}

Correct Solution/Answer: ${m.solution}

Student's Answer: ${x}

Total Marks: ${m.marks}

Evaluate the student's answer and provide:
1. Whether the answer is correct (consider partial credit for partially correct answers)
2. Marks obtained (out of ${m.marks})
3. Detailed feedback
4. Explanation of what was correct/incorrect

Return your evaluation in JSON format:
{
  "is_correct": true/false,
  "marks_obtained": 4,
  "total_marks": ${m.marks},
  "feedback": "Detailed feedback about the answer",
  "explanation": "Explanation of correct concepts and mistakes"
}

Only return the JSON, no additional text.`,H=(await pe.rag.query({query:_,subject:a,top_k:3})).generated_text||"";let O=null;try{const B=H.match(/\{[\s\S]*\}/);B&&(O=JSON.parse(B[0]))}catch(B){console.error("Error parsing evaluation:",B)}if(!O){const B=x.toLowerCase().includes(m.solution.toLowerCase().substring(0,20));O={is_correct:B,marks_obtained:B?m.marks:Math.floor(m.marks*.3),total_marks:m.marks,feedback:B?"Your answer is correct! Well done.":"Your answer needs improvement. Review the solution.",explanation:m.solution}}k(O),A(!0),await V(O),s({title:"Answer Evaluated",description:`You scored ${O.marks_obtained}/${O.total_marks} marks`})}catch(_){console.error("Error evaluating answer:",_),s({variant:"destructive",title:"Error",description:_.message||"Failed to evaluate answer"})}finally{w(!1)}},V=async _=>{if(!(!e||!m))try{const U={user_id:e.id,subject:a,topic_id:o,question:m.question,correct_answer:m.solution,user_answer:x,marks_obtained:_.marks_obtained,total_marks:_.total_marks,is_correct:_.is_correct,feedback:_.feedback,explanation:_.explanation,pyq_year:m.year,difficulty:m.difficulty||"medium",created_at:new Date().toISOString()};try{const{error:H}=await st.from("pyq_practice_sessions").insert(U);H?console.debug("Failed to save practice session (table may not exist):",H.message||H):Y()}catch(H){console.debug("Error saving practice session:",H)}}catch(U){console.warn("Error saving practice session:",U)}};return t?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(yn,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-5xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[n.jsx(ua,{className:"h-8 w-8"}),"PYQ Practice"]}),n.jsx("p",{className:"text-muted-foreground",children:"Practice Previous Year Questions with AI-powered evaluation"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Select Topic"}),n.jsx(ze,{children:"Choose subject and topic to practice"})]}),n.jsxs(ie,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Subject"}),n.jsxs(Nt,{value:a,onValueChange:_=>i(_),children:[n.jsx(wt,{children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"mathematics",children:"Mathematics"}),n.jsx(re,{value:"physics",children:"Physics"}),n.jsx(re,{value:"chemistry",children:"Chemistry"}),n.jsx(re,{value:"biology",children:"Biology"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Topic"}),d?n.jsxs("div",{className:"flex items-center gap-2 h-10",children:[n.jsx(Oe,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading topics..."})]}):n.jsxs(Nt,{value:o,onValueChange:l,children:[n.jsx(wt,{children:n.jsx(St,{placeholder:"Select topic"})}),n.jsx(jt,{children:c.map(_=>n.jsxs(re,{value:_.id,children:[_.name," (",_.chapter,")"]},_.id))})]})]})]}),n.jsx(z,{onClick:ne,disabled:y||!o,className:"w-full mt-4 gap-2",children:y?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 animate-spin"}),"Generating Question..."]}):n.jsxs(n.Fragment,{children:[n.jsx(vr,{className:"h-4 w-4"}),"Generate Question"]})})]})]}),m&&n.jsxs(ae,{children:[n.jsx(he,{children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{children:[n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(ua,{className:"h-5 w-5"}),"Question"]}),n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsx(je,{variant:"outline",children:m.year}),n.jsxs(je,{variant:"secondary",children:[m.marks," marks"]}),m.difficulty&&n.jsx(je,{variant:"outline",children:m.difficulty})]})]})})}),n.jsxs(ie,{children:[n.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none mb-6",children:n.jsx(tr,{remarkPlugins:[rr],children:m.question})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Your Answer"}),n.jsx(kr,{value:x,onChange:_=>g(_.target.value),placeholder:"Write your answer here...",className:"min-h-[200px]",disabled:v||T})]}),n.jsx(z,{onClick:q,disabled:!x.trim()||v||T,className:"w-full gap-2",children:v?n.jsxs(n.Fragment,{children:[n.jsx(Oe,{className:"h-4 w-4 animate-spin"}),"Evaluating..."]}):n.jsxs(n.Fragment,{children:[n.jsx($i,{className:"h-4 w-4"}),"Submit Answer"]})})]})]})]}),T&&S&&n.jsxs(ae,{className:S.is_correct?"border-green-500":"border-orange-500",children:[n.jsx(he,{children:n.jsxs(fe,{className:"flex items-center gap-2",children:[S.is_correct?n.jsx(Qt,{className:"h-5 w-5 text-green-500"}):n.jsx(Li,{className:"h-5 w-5 text-orange-500"}),"Evaluation Result"]})}),n.jsx(ie,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Marks Obtained"}),n.jsxs("p",{className:"text-2xl font-bold",children:[S.marks_obtained," / ",S.total_marks]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Percentage"}),n.jsxs("p",{className:"text-2xl font-bold",children:[Math.round(S.marks_obtained/S.total_marks*100),"%"]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Feedback"}),n.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:n.jsx(tr,{remarkPlugins:[rr],children:S.feedback})})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Explanation"}),n.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:n.jsx(tr,{remarkPlugins:[rr],children:S.explanation})})]}),n.jsxs("div",{className:"pt-4 border-t",children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Correct Solution"}),n.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none bg-muted p-4 rounded-lg",children:n.jsx(tr,{remarkPlugins:[rr],children:(m==null?void 0:m.solution)||""})})]}),n.jsx(z,{onClick:()=>{A(!1),f(null),g(""),k(null)},variant:"outline",className:"w-full",children:"Practice Another Question"})]})})]})]}),n.jsx("div",{className:"space-y-6",children:n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(Ii,{className:"h-5 w-5"}),"Recent Practice"]}),n.jsx(ze,{children:"Your practice history"})]}),n.jsx(ie,{children:N.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Ur,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{className:"text-sm",children:"No practice sessions yet"}),n.jsx("p",{className:"text-xs mt-2",children:"Start practicing to see your history"})]}):n.jsx("div",{className:"space-y-3",children:N.map((_,U)=>{var H;return n.jsxs("div",{className:"p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs(je,{variant:_.is_correct?"default":"secondary",children:[_.marks_obtained,"/",_.total_marks]}),n.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(_.created_at).toLocaleDateString()})]}),n.jsxs("p",{className:"text-sm line-clamp-2",children:[(H=_.question)==null?void 0:H.substring(0,100),"..."]})]},_.id||U)})})})]})})]}),n.jsxs(ae,{className:"mt-6",children:[n.jsxs(he,{children:[n.jsxs(fe,{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"h-5 w-5"}),"PYQ Content Database"]}),n.jsxs(ze,{children:["All Previous Year Questions available for ",a]})]}),n.jsx(ie,{children:I?n.jsxs("div",{className:"flex items-center justify-center py-8",children:[n.jsx(Oe,{className:"h-6 w-6 animate-spin text-muted-foreground"}),n.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Loading PYQ content..."})]}):E.length===0?n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(ua,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{className:"text-sm",children:"No PYQ content found"}),n.jsx("p",{className:"text-xs mt-2",children:"PYQ content will appear here when available"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(Cs,{children:[n.jsx(Es,{children:n.jsxs(Nr,{children:[n.jsx(mt,{children:"Title"}),n.jsx(mt,{children:"Chapter"}),n.jsx(mt,{children:"Topic"}),n.jsx(mt,{children:"Difficulty"}),n.jsx(mt,{children:"Year"}),n.jsx(mt,{children:"Marks"}),n.jsx(mt,{children:"Class Grade"}),n.jsx(mt,{children:"Created At"})]})}),n.jsx(Ts,{children:E.map(_=>n.jsxs(Nr,{children:[n.jsx(it,{className:"max-w-[200px]",children:n.jsx("div",{className:"truncate",title:_.title||"No title",children:_.title||"Untitled"})}),n.jsx(it,{children:_.topic_chapter||_.chapter||"N/A"}),n.jsx(it,{children:_.topic_name||"N/A"}),n.jsx(it,{children:_.difficulty?n.jsx(je,{variant:"outline",children:_.difficulty}):"N/A"}),n.jsx(it,{children:_.year||"N/A"}),n.jsx(it,{children:_.marks!=="N/A"?n.jsx(je,{variant:"secondary",children:_.marks}):"N/A"}),n.jsx(it,{children:_.class_grade?n.jsxs(je,{variant:"outline",children:["Class ",_.class_grade]}):"N/A"}),n.jsx(it,{className:"text-xs text-muted-foreground",children:new Date(_.created_at).toLocaleDateString()})]},_.id))})]})})})]})]})})]})},Nse=()=>{const{user:e,loading:t}=Wt(),r=Gt(),{toast:s}=Ut(),[a,i]=p.useState([]),[o,l]=p.useState([]),[c,u]=p.useState([]),[d,h]=p.useState(null),[m,f]=p.useState([]),[x,g]=p.useState([]),[y,b]=p.useState(!1);p.useState(!1);const[v,w]=p.useState(!1),[S,k]=p.useState(!1),[N,P]=p.useState(!1),[T,A]=p.useState(!1),[E,M]=p.useState({name:"",address:"",city:"",state:"",pincode:"",phone:"",email:"",principal_name:""}),[I,se]=p.useState(""),[ee,Y]=p.useState(!1),[F,ne]=p.useState(""),[q,V]=p.useState(!1),[_,U]=p.useState({full_name:"",email:"",password:"",role:"teacher",class_grade:12,phone:"",subject_specializations:[]}),[H,O]=p.useState(!1),[B,W]=p.useState(""),[K,X]=p.useState([]);p.useEffect(()=>{!t&&!e&&r("/login")},[e,t,r]),p.useEffect(()=>{e&&(de(),oe())},[e]),p.useEffect(()=>{d&&(me(d.id),Ee(d.id))},[d]);const de=async()=>{try{b(!0);const $=await pe.admin.getSchools();i($||[])}catch($){s({variant:"destructive",title:"Error",description:$.message||"Failed to fetch schools"})}finally{b(!1)}},oe=async()=>{try{k(!0);const $=await pe.admin.getAllUsers();u($||[]);const Ne=await pe.admin.getAllTeachers();l(Ne||[])}catch($){console.error("Error fetching users:",$)}finally{k(!1)}},me=async $=>{try{const Ne=await pe.admin.getSchoolTeachers($);f(Ne||[])}catch(Ne){console.error("Error fetching school teachers:",Ne),f([])}},Ee=async $=>{try{w(!0);const Ne=await pe.admin.getSchoolStudents($);g(Ne||[])}catch(Ne){console.error("Error fetching school students:",Ne),g([])}finally{w(!1)}},we=async()=>{try{await pe.admin.createSchool(E),s({title:"Success",description:"School created successfully"}),P(!1),M({name:"",address:"",city:"",state:"",pincode:"",phone:"",email:"",principal_name:""}),de()}catch($){s({variant:"destructive",title:"Error",description:$.message||"Failed to create school"})}},Le=async()=>{if(d)try{await pe.admin.updateSchool(d.id,E),s({title:"Success",description:"School updated successfully"}),A(!1),de(),h(null)}catch($){s({variant:"destructive",title:"Error",description:$.message||"Failed to update school"})}},_e=async $=>{if(confirm("Are you sure you want to delete this school? This will remove all teacher and student assignments."))try{await pe.admin.deleteSchool($),s({title:"Success",description:"School deleted successfully"}),de(),(d==null?void 0:d.id)===$&&h(null)}catch(Ne){s({variant:"destructive",title:"Error",description:Ne.message||"Failed to delete school"})}},ut=async()=>{var $;if(!(!d||!I))try{const Ne=c.find(dt=>dt.user_id===I);Ne&&!(($=Ne.roles)!=null&&$.includes("teacher"))&&await st.from("user_roles").insert({user_id:I,role:"teacher"}),await pe.admin.assignTeacherToSchool(d.id,I),s({title:"Success",description:"User assigned to school as teacher successfully"}),Y(!1),se(""),ne(""),me(d.id),oe()}catch(Ne){s({variant:"destructive",title:"Error",description:Ne.message||"Failed to assign teacher"})}},at=async()=>{if(!_.full_name||!_.email||!_.password){s({variant:"destructive",title:"Error",description:"Please fill in all required fields"});return}if(_.role==="student"&&!_.class_grade){s({variant:"destructive",title:"Error",description:"Class grade is required for students"});return}if(_.password.length<6){s({variant:"destructive",title:"Error",description:"Password must be at least 6 characters long"});return}try{const $={email:_.email,password:_.password,full_name:_.full_name,role:_.role};if(_.role==="student"){if(!_.class_grade){s({variant:"destructive",title:"Error",description:"Class grade is required for students"});return}$.class_grade=_.class_grade}else _.phone&&($.phone=_.phone),_.subject_specializations.length>0&&($.subject_specializations=_.subject_specializations);const Ne=await pe.admin.createUser($);s({title:"Success",description:`${_.role==="student"?"Student":"Teacher"} created successfully`}),V(!1),U({full_name:"",email:"",password:"",role:"teacher",class_grade:12,phone:"",subject_specializations:[]}),oe(),d&&Ne.user_id&&(_.role==="teacher"?(await pe.admin.assignTeacherToSchool(d.id,Ne.user_id),me(d.id)):(await pe.admin.assignStudentToSchool(d.id,Ne.user_id),Ee(d.id)))}catch($){s({variant:"destructive",title:"Error",description:$.message||"Failed to create user"})}},Ct=async $=>{if(d&&confirm("Are you sure you want to remove this teacher from the school?"))try{await pe.admin.removeTeacherFromSchool(d.id,$),s({title:"Success",description:"Teacher removed from school"}),me(d.id)}catch(Ne){s({variant:"destructive",title:"Error",description:Ne.message||"Failed to remove teacher"})}},L=async $=>{if(!d)return;if(x.some(dt=>dt.user_id===$)){s({variant:"destructive",title:"Error",description:"Student is already assigned to this school"});return}try{await pe.admin.assignStudentToSchool(d.id,$),s({title:"Success",description:"Student assigned to school successfully"}),O(!1),W(""),X([]),Ee(d.id)}catch(dt){s({variant:"destructive",title:"Error",description:dt.message||"Failed to assign student"})}},ke=async $=>{if(!$.trim()){X([]);return}if(!d){X([]);return}try{const{data:Ne}=await st.from("profiles").select("*").ilike("full_name",`%${$}%`).limit(20);if(Ne){const dt=Ne.map(De=>De.user_id),{data:zt}=await st.from("user_roles").select("user_id").in("user_id",dt).eq("role","student"),ue=(zt==null?void 0:zt.map(De=>De.user_id))||[],G=Ne.filter(De=>ue.includes(De.user_id)),ye=x.map(De=>De.user_id),Me=G.filter(De=>!ye.includes(De.user_id));X(Me.map(De=>({user_id:De.user_id,profile:De})))}}catch(Ne){console.error("Error searching students:",Ne),s({variant:"destructive",title:"Error",description:"Failed to search students"})}},ot=$=>{h($),M({name:$.name,address:$.address||"",city:$.city||"",state:$.state||"",pincode:$.pincode||"",phone:$.phone||"",email:$.email||"",principal_name:$.principal_name||""}),A(!0)},ct=$=>$.split(" ").map(Ne=>Ne[0]).join("").toUpperCase();return t?n.jsx("div",{className:"flex min-h-screen items-center justify-center",children:n.jsx(Oe,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n.jsxs("div",{className:"flex min-h-screen w-full",children:[n.jsx(el,{}),n.jsx("main",{className:"flex-1 p-8 overflow-y-auto bg-background",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[n.jsx(K6,{className:"h-8 w-8"}),"School Management"]}),n.jsx("p",{className:"text-muted-foreground",children:"Create and manage schools, assign teachers, and handle students"})]}),n.jsxs(Zs,{defaultValue:"schools",className:"space-y-6",children:[n.jsxs(Ps,{children:[n.jsx(gr,{value:"schools",children:"Schools"}),n.jsx(gr,{value:"teachers",children:"Teacher Assignment"}),n.jsx(gr,{value:"students",children:"Student Management"})]}),n.jsx(Er,{value:"schools",className:"space-y-6",children:n.jsxs(ae,{children:[n.jsxs(he,{className:"flex flex-row items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(fe,{children:"All Schools"}),n.jsx(ze,{children:"Manage school information and settings"})]}),n.jsxs(un,{open:N,onOpenChange:P,children:[n.jsx(ud,{asChild:!0,children:n.jsxs(z,{children:[n.jsx(_n,{className:"h-4 w-4 mr-2"}),"Create School"]})}),n.jsxs(tn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(rn,{children:[n.jsx(nn,{children:"Create New School"}),n.jsx(xn,{children:"Add a new school to the system"})]}),n.jsxs("div",{className:"grid gap-4 py-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"name",children:"School Name *"}),n.jsx(Ve,{id:"name",value:E.name,onChange:$=>M({...E,name:$.target.value}),placeholder:"Enter school name"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"principal_name",children:"Principal Name"}),n.jsx(Ve,{id:"principal_name",value:E.principal_name,onChange:$=>M({...E,principal_name:$.target.value}),placeholder:"Principal name"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"address",children:"Address"}),n.jsx(kr,{id:"address",value:E.address,onChange:$=>M({...E,address:$.target.value}),placeholder:"School address"})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"city",children:"City"}),n.jsx(Ve,{id:"city",value:E.city,onChange:$=>M({...E,city:$.target.value}),placeholder:"City"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"state",children:"State"}),n.jsx(Ve,{id:"state",value:E.state,onChange:$=>M({...E,state:$.target.value}),placeholder:"State"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"pincode",children:"Pincode"}),n.jsx(Ve,{id:"pincode",value:E.pincode,onChange:$=>M({...E,pincode:$.target.value}),placeholder:"Pincode"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"phone",children:"Phone"}),n.jsx(Ve,{id:"phone",value:E.phone,onChange:$=>M({...E,phone:$.target.value}),placeholder:"Phone number"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"email",children:"Email"}),n.jsx(Ve,{id:"email",type:"email",value:E.email,onChange:$=>M({...E,email:$.target.value}),placeholder:"Email address"})]})]})]}),n.jsxs(Fn,{children:[n.jsx(z,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),n.jsx(z,{onClick:we,disabled:!E.name,children:"Create School"})]})]})]})]}),n.jsx(ie,{children:y?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(Oe,{className:"h-6 w-6 animate-spin"})}):n.jsxs(Cs,{children:[n.jsx(Es,{children:n.jsxs(Nr,{children:[n.jsx(mt,{children:"School Name"}),n.jsx(mt,{children:"Location"}),n.jsx(mt,{children:"Contact"}),n.jsx(mt,{children:"Status"}),n.jsx(mt,{className:"text-right",children:"Actions"})]})}),n.jsx(Ts,{children:a.length===0?n.jsx(Nr,{children:n.jsx(it,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No schools found. Create your first school."})}):a.map($=>n.jsxs(Nr,{children:[n.jsx(it,{children:n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:$.name}),$.principal_name&&n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Principal: ",$.principal_name]})]})}),n.jsx(it,{children:n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(DO,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:$.city&&$.state?`${$.city}, ${$.state}`:$.city||$.state||"-"})]})}),n.jsx(it,{children:n.jsxs("div",{className:"space-y-1",children:[$.phone&&n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(sk,{className:"h-3 w-3"}),$.phone]}),$.email&&n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Wy,{className:"h-3 w-3"}),$.email]})]})}),n.jsx(it,{children:n.jsx(je,{variant:$.is_active?"default":"secondary",children:$.is_active?"Active":"Inactive"})}),n.jsx(it,{className:"text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx(z,{variant:"ghost",size:"sm",onClick:()=>{h($),ot($)},children:n.jsx(Ll,{className:"h-4 w-4"})}),n.jsx(z,{variant:"ghost",size:"sm",onClick:()=>_e($.id),children:n.jsx(Jl,{className:"h-4 w-4 text-destructive"})})]})})]},$.id))})]})})]})}),n.jsx(Er,{value:"teachers",className:"space-y-6",children:n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Assign Teachers to Schools"}),n.jsx(ze,{children:"Select a school to manage teacher assignments"})]}),n.jsx(ie,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(be,{children:"Select School"}),n.jsxs(Nt,{value:(d==null?void 0:d.id)||"",onValueChange:$=>{const Ne=a.find(dt=>dt.id===$);h(Ne||null)},children:[n.jsx(wt,{children:n.jsx(St,{placeholder:"Choose a school"})}),n.jsx(jt,{children:a.map($=>n.jsx(re,{value:$.id,children:$.name},$.id))})]})]}),d&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold",children:["Teachers at ",d.name]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[m.length," teacher(s) assigned"]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(un,{open:q,onOpenChange:V,children:[n.jsx(ud,{asChild:!0,children:n.jsxs(z,{variant:"outline",children:[n.jsx(ii,{className:"h-4 w-4 mr-2"}),"Create User"]})}),n.jsxs(tn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(rn,{children:[n.jsx(nn,{children:"Create New User"}),n.jsxs(xn,{children:["Create a new student or teacher and optionally assign to ",d.name]})]}),n.jsxs("div",{className:"grid gap-4 py-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"user-full_name",children:"Full Name *"}),n.jsx(Ve,{id:"user-full_name",value:_.full_name,onChange:$=>U({..._,full_name:$.target.value}),placeholder:"Enter full name"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"user-role",children:"Role *"}),n.jsxs(Nt,{value:_.role,onValueChange:$=>U({..._,role:$}),children:[n.jsx(wt,{children:n.jsx(St,{})}),n.jsxs(jt,{children:[n.jsx(re,{value:"teacher",children:"Teacher"}),n.jsx(re,{value:"student",children:"Student"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"user-email",children:"Email *"}),n.jsx(Ve,{id:"user-email",type:"email",value:_.email,onChange:$=>U({..._,email:$.target.value}),placeholder:"Email address"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"user-password",children:"Password *"}),n.jsx(Ve,{id:"user-password",type:"password",value:_.password,onChange:$=>U({..._,password:$.target.value}),placeholder:"Password"})]})]}),_.role==="student"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"user-class_grade",children:"Class Grade *"}),n.jsxs(Nt,{value:_.class_grade.toString(),onValueChange:$=>U({..._,class_grade:parseInt($)}),children:[n.jsx(wt,{children:n.jsx(St,{placeholder:"Select class grade"})}),n.jsx(jt,{children:[6,7,8,9,10,11,12].map($=>n.jsxs(re,{value:$.toString(),children:["Grade ",$]},$))})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Required for student accounts"})]}),_.role==="teacher"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"user-phone",children:"Phone"}),n.jsx(Ve,{id:"user-phone",value:_.phone,onChange:$=>U({..._,phone:$.target.value}),placeholder:"Phone number"})]})]}),n.jsxs(Fn,{children:[n.jsx(z,{variant:"outline",onClick:()=>V(!1),children:"Cancel"}),n.jsxs(z,{onClick:at,disabled:!_.full_name||!_.email||!_.password||_.role==="student"&&!_.class_grade||_.password.length<6,children:["Create ",_.role==="student"?"Student":"Teacher"]})]})]})]}),n.jsxs(un,{open:ee,onOpenChange:Y,children:[n.jsx(ud,{asChild:!0,children:n.jsxs(z,{children:[n.jsx(_n,{className:"h-4 w-4 mr-2"}),"Assign Teacher"]})}),n.jsxs(tn,{children:[n.jsxs(rn,{children:[n.jsxs(nn,{children:["Assign Teacher to ",d.name]}),n.jsx(xn,{children:"Search and select any user to assign as teacher"})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Search User"}),n.jsxs("div",{className:"relative",children:[n.jsx(zi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(Ve,{placeholder:"Search by name...",value:F,onChange:$=>{ne($.target.value)},className:"pl-9"})]})]}),n.jsxs("div",{className:"max-h-60 overflow-y-auto space-y-2",children:[c.filter($=>{var Ne,dt;return!m.some(zt=>zt.teacher_id===$.user_id)&&(F.trim()===""||((dt=(Ne=$.profile)==null?void 0:Ne.full_name)==null?void 0:dt.toLowerCase().includes(F.toLowerCase())))}).slice(0,20).map($=>{var Ne,dt,zt,ue;return n.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-lg hover:bg-accent cursor-pointer",onClick:()=>{se($.user_id)},children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(an,{className:"h-8 w-8",children:[n.jsx(os,{src:(Ne=$.profile)==null?void 0:Ne.avatar_url}),n.jsx(on,{children:ct(((dt=$.profile)==null?void 0:dt.full_name)||"U")})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-sm",children:((zt=$.profile)==null?void 0:zt.full_name)||"Unknown"}),n.jsx("div",{className:"flex gap-2",children:(ue=$.roles)==null?void 0:ue.map(G=>n.jsx(je,{variant:"outline",className:"text-xs",children:G},G))})]})]}),I===$.user_id&&n.jsx(Qt,{className:"h-4 w-4 text-green-500"})]},$.user_id)}),c.filter($=>{var Ne,dt;return!m.some(zt=>zt.teacher_id===$.user_id)&&(F.trim()===""||((dt=(Ne=$.profile)==null?void 0:Ne.full_name)==null?void 0:dt.toLowerCase().includes(F.toLowerCase())))}).length===0&&n.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:F?"No users found":"No users available"})]})]}),n.jsxs(Fn,{children:[n.jsx(z,{variant:"outline",onClick:()=>{Y(!1),se(""),ne("")},children:"Cancel"}),n.jsx(z,{onClick:ut,disabled:!I,children:"Assign Teacher"})]})]})]})]})]}),n.jsx("div",{className:"border rounded-lg",children:m.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No teachers assigned yet. Assign your first teacher."}):n.jsxs(Cs,{children:[n.jsx(Es,{children:n.jsxs(Nr,{children:[n.jsx(mt,{children:"Teacher"}),n.jsx(mt,{children:"Specializations"}),n.jsx(mt,{children:"Assigned Date"}),n.jsx(mt,{className:"text-right",children:"Actions"})]})}),n.jsx(Ts,{children:m.map($=>{var Ne,dt,zt,ue,G;return n.jsxs(Nr,{children:[n.jsx(it,{children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(an,{className:"h-8 w-8",children:[n.jsx(os,{src:(Ne=$.profile)==null?void 0:Ne.avatar_url}),n.jsx(on,{children:ct(((dt=$.profile)==null?void 0:dt.full_name)||"T")})]}),n.jsx("div",{children:n.jsx("p",{className:"font-semibold",children:((zt=$.profile)==null?void 0:zt.full_name)||"Unknown"})})]})}),n.jsx(it,{children:(G=(ue=$.teacher_profile)==null?void 0:ue.subject_specializations)!=null&&G.length?$.teacher_profile.subject_specializations.join(", "):"-"}),n.jsx(it,{children:new Date($.assigned_at).toLocaleDateString()}),n.jsx(it,{className:"text-right",children:n.jsx(z,{variant:"ghost",size:"sm",onClick:()=>Ct($.teacher_id),children:n.jsx(_s,{className:"h-4 w-4 text-destructive"})})})]},$.teacher_id)})})]})})]})]})})]})}),n.jsx(Er,{value:"students",className:"space-y-6",children:n.jsxs(ae,{children:[n.jsxs(he,{children:[n.jsx(fe,{children:"Manage Students by School"}),n.jsx(ze,{children:"View and assign students to schools"})]}),n.jsx(ie,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(be,{children:"Select School"}),n.jsxs(Nt,{value:(d==null?void 0:d.id)||"",onValueChange:$=>{const Ne=a.find(dt=>dt.id===$);h(Ne||null)},children:[n.jsx(wt,{children:n.jsx(St,{placeholder:"Choose a school"})}),n.jsx(jt,{children:a.map($=>n.jsx(re,{value:$.id,children:$.name},$.id))})]})]}),d&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold",children:["Students at ",d.name]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[x.length," student(s)"]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(un,{open:q,onOpenChange:V,children:[n.jsx(ud,{asChild:!0,children:n.jsxs(z,{variant:"outline",children:[n.jsx(ii,{className:"h-4 w-4 mr-2"}),"Create Student"]})}),n.jsxs(tn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(rn,{children:[n.jsx(nn,{children:"Create New Student"}),n.jsxs(xn,{children:["Create a new student account and optionally assign to ",d.name]})]}),n.jsxs("div",{className:"grid gap-4 py-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"student-create-full_name",children:"Full Name *"}),n.jsx(Ve,{id:"student-create-full_name",value:_.full_name,onChange:$=>U({..._,full_name:$.target.value}),placeholder:"Enter full name"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"student-create-class_grade",children:"Class Grade *"}),n.jsxs(Nt,{value:_.class_grade.toString(),onValueChange:$=>U({..._,class_grade:parseInt($)}),children:[n.jsx(wt,{children:n.jsx(St,{placeholder:"Select class grade"})}),n.jsx(jt,{children:[6,7,8,9,10,11,12].map($=>n.jsxs(re,{value:$.toString(),children:["Grade ",$]},$))})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"student-create-email",children:"Email *"}),n.jsx(Ve,{id:"student-create-email",type:"email",value:_.email,onChange:$=>U({..._,email:$.target.value}),placeholder:"Email address"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"student-create-password",children:"Password *"}),n.jsx(Ve,{id:"student-create-password",type:"password",value:_.password,onChange:$=>U({..._,password:$.target.value}),placeholder:"Password (min 6 characters)"})]})]})]}),n.jsxs(Fn,{children:[n.jsx(z,{variant:"outline",onClick:()=>V(!1),children:"Cancel"}),n.jsx(z,{onClick:async()=>{const $={..._,role:"student"};if(!$.full_name||!$.email||!$.password){s({variant:"destructive",title:"Error",description:"Please fill in all required fields"});return}if(!$.class_grade){s({variant:"destructive",title:"Error",description:"Class grade is required for students"});return}if($.password.length<6){s({variant:"destructive",title:"Error",description:"Password must be at least 6 characters long"});return}try{const Ne={email:$.email,password:$.password,full_name:$.full_name,role:"student",class_grade:$.class_grade},dt=await pe.admin.createUser(Ne);s({title:"Success",description:"Student created successfully"}),V(!1),U({full_name:"",email:"",password:"",role:"teacher",class_grade:12,phone:"",subject_specializations:[]}),oe(),d&&dt.user_id&&(await pe.admin.assignStudentToSchool(d.id,dt.user_id),Ee(d.id))}catch(Ne){s({variant:"destructive",title:"Error",description:Ne.message||"Failed to create student"})}},disabled:!_.full_name||!_.email||!_.password||!_.class_grade||_.password.length<6,children:"Create Student"})]})]})]}),n.jsxs(un,{open:H,onOpenChange:$=>{O($),$||(W(""),X([]))},children:[n.jsx(ud,{asChild:!0,children:n.jsxs(z,{children:[n.jsx(_n,{className:"h-4 w-4 mr-2"}),"Assign Student"]})}),n.jsxs(tn,{children:[n.jsxs(rn,{children:[n.jsxs(nn,{children:["Assign Student to ",d.name]}),n.jsx(xn,{children:"Search and select a student to assign. Students already assigned to this school are not shown."})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{children:"Search Student"}),n.jsxs("div",{className:"relative",children:[n.jsx(zi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(Ve,{placeholder:"Search by name...",value:B,onChange:$=>{W($.target.value),ke($.target.value)},className:"pl-9"})]})]}),n.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2",children:K.length===0?n.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:B?"No available students found. They may already be assigned to this school.":"Start typing to search for students"}):K.map($=>{var Ne,dt,zt;return n.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-lg hover:bg-accent cursor-pointer transition-colors",onClick:()=>L($.user_id),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(an,{className:"h-8 w-8",children:[n.jsx(os,{src:(Ne=$.profile)==null?void 0:Ne.avatar_url}),n.jsx(on,{children:ct(((dt=$.profile)==null?void 0:dt.full_name)||"S")})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-sm",children:((zt=$.profile)==null?void 0:zt.full_name)||"Unknown"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Student ID: ",$.user_id.slice(0,8),"..."]})]})]}),n.jsx(z,{size:"sm",variant:"ghost",children:n.jsx(Qt,{className:"h-4 w-4"})})]},$.user_id)})})]}),n.jsx(Fn,{children:n.jsx(z,{variant:"outline",onClick:()=>{O(!1),W(""),X([])},children:"Cancel"})})]})]})]})]}),v?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(Oe,{className:"h-6 w-6 animate-spin"})}):n.jsx("div",{className:"border rounded-lg",children:x.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No students assigned yet. Assign your first student."}):n.jsxs(Cs,{children:[n.jsx(Es,{children:n.jsxs(Nr,{children:[n.jsx(mt,{children:"Student"}),n.jsx(mt,{children:"Grade"}),n.jsx(mt,{children:"School"})]})}),n.jsx(Ts,{children:x.map($=>{var Ne,dt,zt;return n.jsxs(Nr,{children:[n.jsx(it,{children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(an,{className:"h-8 w-8",children:[n.jsx(os,{src:(Ne=$.profile)==null?void 0:Ne.avatar_url}),n.jsx(on,{children:ct(((dt=$.profile)==null?void 0:dt.full_name)||"S")})]}),n.jsx("div",{children:n.jsx("p",{className:"font-semibold",children:((zt=$.profile)==null?void 0:zt.full_name)||"Unknown"})})]})}),n.jsx(it,{children:n.jsxs(je,{variant:"outline",children:["Grade ",$.class_grade]})}),n.jsx(it,{children:$.school_name||"-"})]},$.user_id)})})]})})]})]})})]})})]})]})}),n.jsx(un,{open:T,onOpenChange:A,children:n.jsxs(tn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs(rn,{children:[n.jsx(nn,{children:"Edit School"}),n.jsx(xn,{children:"Update school information"})]}),n.jsxs("div",{className:"grid gap-4 py-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"edit-name",children:"School Name *"}),n.jsx(Ve,{id:"edit-name",value:E.name,onChange:$=>M({...E,name:$.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"edit-principal_name",children:"Principal Name"}),n.jsx(Ve,{id:"edit-principal_name",value:E.principal_name,onChange:$=>M({...E,principal_name:$.target.value})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"edit-address",children:"Address"}),n.jsx(kr,{id:"edit-address",value:E.address,onChange:$=>M({...E,address:$.target.value})})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"edit-city",children:"City"}),n.jsx(Ve,{id:"edit-city",value:E.city,onChange:$=>M({...E,city:$.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"edit-state",children:"State"}),n.jsx(Ve,{id:"edit-state",value:E.state,onChange:$=>M({...E,state:$.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"edit-pincode",children:"Pincode"}),n.jsx(Ve,{id:"edit-pincode",value:E.pincode,onChange:$=>M({...E,pincode:$.target.value})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"edit-phone",children:"Phone"}),n.jsx(Ve,{id:"edit-phone",value:E.phone,onChange:$=>M({...E,phone:$.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(be,{htmlFor:"edit-email",children:"Email"}),n.jsx(Ve,{id:"edit-email",type:"email",value:E.email,onChange:$=>M({...E,email:$.target.value})})]})]})]}),n.jsxs(Fn,{children:[n.jsx(z,{variant:"outline",onClick:()=>A(!1),children:"Cancel"}),n.jsx(z,{onClick:Le,disabled:!E.name,children:"Save Changes"})]})]})})]})},Sse=()=>{const e=Xl();return p.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),n.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),n.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),n.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},kse=new fL,_se=()=>n.jsx(xL,{client:kse,children:n.jsx(mz,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:n.jsx(Bq,{children:n.jsxs(VF,{children:[n.jsx(EI,{}),n.jsx(iD,{}),n.jsxs(sz,{children:[n.jsx(Dt,{path:"/",element:n.jsx(Uq,{})}),n.jsx(Dt,{path:"/login",element:n.jsx(Wq,{})}),n.jsx(Dt,{path:"/signup",element:n.jsx(HU,{})}),n.jsx(Dt,{path:"/profile-setup",element:n.jsx(GU,{})}),n.jsx(Dt,{path:"/dashboard/student",element:n.jsx(cV,{})}),n.jsx(Dt,{path:"/dashboard/student/classroom",element:n.jsx(nre,{})}),n.jsx(Dt,{path:"/dashboard/student/subjects",element:n.jsx(dV,{})}),n.jsx(Dt,{path:"/dashboard/student/content",element:n.jsx(Ute,{})}),n.jsx(Dt,{path:"/dashboard/student/content/:contentId",element:n.jsx(Vte,{})}),n.jsx(Dt,{path:"/dashboard/student/content/downloads",element:n.jsx(wse,{})}),n.jsx(Dt,{path:"/dashboard/student/achievements",element:n.jsx(yV,{})}),n.jsx(Dt,{path:"/dashboard/student/microplan",element:n.jsx(Bte,{})}),n.jsx(Dt,{path:"/dashboard/student/homework",element:n.jsx($te,{})}),n.jsx(Dt,{path:"/dashboard/student/homework/submit/:sessionId",element:n.jsx(qte,{})}),n.jsx(Dt,{path:"/dashboard/student/notifications",element:n.jsx(Qx,{})}),n.jsx(Dt,{path:"/dashboard/student/settings",element:n.jsx(s5,{})}),n.jsx(Dt,{path:"/dashboard/student/exams",element:n.jsx($ne,{})}),n.jsx(Dt,{path:"/dashboard/student/exam/start/:examSetId",element:n.jsx(qne,{})}),n.jsx(Dt,{path:"/dashboard/student/practice/pyq",element:n.jsx(jse,{})}),n.jsx(Dt,{path:"/dashboard/student/exam/results/:sessionId",element:n.jsx(Bne,{})}),n.jsx(Dt,{path:"/dashboard/student/exam/history",element:n.jsx(Une,{})}),n.jsx(Dt,{path:"/dashboard/student/exam/attempts",element:n.jsx(Vne,{})}),n.jsx(Dt,{path:"/dashboard/student/quiz/start/:microplanId",element:n.jsx(GN,{})}),n.jsx(Dt,{path:"/dashboard/student/quiz/results/:sessionId",element:n.jsx(GN,{})}),n.jsx(Dt,{path:"/dashboard/student/upload-content",element:n.jsx(bse,{})}),n.jsx(Dt,{path:"/dashboard/student/focus",element:n.jsx(Wne,{})}),n.jsx(Dt,{path:"/dashboard/student/ai-tutoring",element:n.jsx(Gne,{})}),n.jsx(Dt,{path:"/dashboard/student/ai-tutor",element:n.jsx(Qne,{})}),n.jsx(Dt,{path:"/dashboard/student/chat",element:n.jsx(vse,{})}),n.jsx(Dt,{path:"/dashboard/teacher",element:n.jsx(sre,{})}),n.jsx(Dt,{path:"/dashboard/teacher/students",element:n.jsx(Kne,{})}),n.jsx(Dt,{path:"/dashboard/teacher/performance",element:n.jsx(Jne,{})}),n.jsx(Dt,{path:"/dashboard/teacher/content",element:n.jsx(Xne,{})}),n.jsx(Dt,{path:"/dashboard/teacher/create",element:n.jsx(tse,{})}),n.jsx(Dt,{path:"/dashboard/teacher/view-content",element:n.jsx(rse,{})}),n.jsx(Dt,{path:"/dashboard/teacher/exams/submissions/:examSetId",element:n.jsx(nse,{})}),n.jsx(Dt,{path:"/dashboard/teacher/exams/create",element:n.jsx(Zne,{})}),n.jsx(Dt,{path:"/dashboard/teacher/homework/create",element:n.jsx(ese,{})}),n.jsx(Dt,{path:"/dashboard/teacher/quizzes",element:n.jsx(sse,{})}),n.jsx(Dt,{path:"/dashboard/teacher/quizzes/create",element:n.jsx(ase,{})}),n.jsx(Dt,{path:"/dashboard/teacher/quizzes/:quizId",element:n.jsx(ise,{})}),n.jsx(Dt,{path:"/dashboard/teacher/tools",element:n.jsx(Yne,{})}),n.jsx(Dt,{path:"/dashboard/teacher/ai-tutor-monitoring",element:n.jsx(ose,{})}),n.jsx(Dt,{path:"/dashboard/teacher/notifications",element:n.jsx(Qx,{})}),n.jsx(Dt,{path:"/dashboard/teacher/notifications/create",element:n.jsx(r5,{})}),n.jsx(Dt,{path:"/dashboard/teacher/settings",element:n.jsx(s5,{})}),n.jsx(Dt,{path:"/dashboard/admin",element:n.jsx(are,{})}),n.jsx(Dt,{path:"/dashboard/admin/users",element:n.jsx(Nne,{})}),n.jsx(Dt,{path:"/dashboard/admin/schools",element:n.jsx(Nse,{})}),n.jsx(Dt,{path:"/dashboard/admin/analytics",element:n.jsx(Sne,{})}),n.jsx(Dt,{path:"/dashboard/admin/content",element:n.jsx(kne,{})}),n.jsx(Dt,{path:"/dashboard/admin/content/manage",element:n.jsx(zne,{})}),n.jsx(Dt,{path:"/dashboard/admin/notifications",element:n.jsx(Qx,{})}),n.jsx(Dt,{path:"/dashboard/admin/notifications/create",element:n.jsx(r5,{})}),n.jsx(Dt,{path:"*",element:n.jsx(Sse,{})})]})]})})})});w6(document.getElementById("root")).render(n.jsx(_se,{}));
